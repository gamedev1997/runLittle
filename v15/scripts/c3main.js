// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let It=function(t){i=t},Ct=function(t){return t*r},Pt=function(t,i){return Math.abs(t-i)<=s*Math.max(1,Math.abs(t),Math.abs(i))},Rt=function(){var t=new i(4);return i!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},Et=function(t){var s=new i(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},At=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},Ot=function(t,s,e,n){var r=new i(4);return r[0]=t,r[1]=s,r[2]=e,r[3]=n,r},Dt=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},Lt=function(t,s){if(t===s){var i=s[1];t[1]=s[2],t[2]=i}else t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3];return t},kt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*r-n*e;return h?(h=1/h,t[0]=r*h,t[1]=-e*h,t[2]=-n*h,t[3]=i*h,t):null},Nt=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},Bt=function(t){return t[0]*t[3]-t[2]*t[1]},Ut=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*o+r*a,t[1]=n*o+h*a,t[2]=e*l+r*u,t[3]=n*l+h*u,t},Vt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+r*o,t[1]=n*a+h*o,t[2]=e*-o+r*a,t[3]=n*-o+h*a,t},Wt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1];return t[0]=e*o,t[1]=n*o,t[2]=r*a,t[3]=h*a,t},zt=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t},jt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Ht=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Jt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},qt=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},$t=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Xt=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Yt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Kt=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=i[0],a=i[1],l=i[2],u=i[3];return Math.abs(e-o)<=s*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=s*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=s*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(h-u)<=s*Math.max(1,Math.abs(h),Math.abs(u))},Zt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Qt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ts=function(){var t=new i(6);return i!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},ss=function(t){var s=new i(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},is=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},es=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ns=function(t,s,e,n,r,h){var o=new i(6);return o[0]=t,o[1]=s,o[2]=e,o[3]=n,o[4]=r,o[5]=h,o},rs=function(t,s,i,e,n,r,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t},hs=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=i*r-e*n;return a?(a=1/a,t[0]=r*a,t[1]=-e*a,t[2]=-n*a,t[3]=i*a,t[4]=(n*o-r*h)*a,t[5]=(e*h-i*o)*a,t):null},os=function(t){return t[0]*t[3]-t[1]*t[2]},as=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return t[0]=e*l+r*u,t[1]=n*l+h*u,t[2]=e*c+r*f,t[3]=n*c+h*f,t[4]=e*d+r*p+o,t[5]=n*d+h*p+a,t},ls=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=Math.sin(i),u=Math.cos(i);return t[0]=e*u+r*l,t[1]=n*u+h*l,t[2]=e*-l+r*u,t[3]=n*-l+h*u,t[4]=o,t[5]=a,t},us=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e*l,t[1]=n*l,t[2]=r*u,t[3]=h*u,t[4]=o,t[5]=a,t},cs=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=e*l+r*u+o,t[5]=n*l+h*u+a,t},fs=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t[4]=0,t[5]=0,t},ds=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},ps=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},ms=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},gs=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},ys=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},Ss=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},ws=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},vs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},bs=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},xs=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],l=i[0],u=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return Math.abs(e-l)<=s*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(n-u)<=s*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=s*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(h-f)<=s*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(o-d)<=s*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-p)<=s*Math.max(1,Math.abs(a),Math.abs(p))},Ts=function(){var t=new i(9);return i!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Ms=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Gs=function(t){var s=new i(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},_s=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Is=function(t,s,e,n,r,h,o,a,l){var u=new i(9);return u[0]=t,u[1]=s,u[2]=e,u[3]=n,u[4]=r,u[5]=h,u[6]=o,u[7]=a,u[8]=l,u},Cs=function(t,s,i,e,n,r,h,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},Ps=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Rs=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[5];t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=n}else t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8];return t},Es=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=u*h-o*l,f=-u*r+o*a,d=l*r-h*a,p=i*c+e*f+n*d;return p?(p=1/p,t[0]=c*p,t[1]=(-u*e+n*l)*p,t[2]=(o*e-n*h)*p,t[3]=f*p,t[4]=(u*i-n*a)*p,t[5]=(-o*i+n*r)*p,t[6]=d*p,t[7]=(-l*i+e*a)*p,t[8]=(h*i-e*r)*p,t):null},As=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8];return t[0]=h*u-o*l,t[1]=n*l-e*u,t[2]=e*o-n*h,t[3]=o*a-r*u,t[4]=i*u-n*a,t[5]=n*r-i*o,t[6]=r*l-h*a,t[7]=e*a-i*l,t[8]=i*h-e*r,t},Fs=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8];return s*(l*r-h*a)+i*(-l*n+h*o)+e*(a*n-r*o)},Os=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1],p=i[2],m=i[3],g=i[4],y=i[5],S=i[6],w=i[7],v=i[8];return t[0]=f*e+d*h+p*l,t[1]=f*n+d*o+p*u,t[2]=f*r+d*a+p*c,t[3]=m*e+g*h+y*l,t[4]=m*n+g*o+y*u,t[5]=m*r+g*a+y*c,t[6]=S*e+w*h+v*l,t[7]=S*n+w*o+v*u,t[8]=S*r+w*a+v*c,t},Ds=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=f*e+d*h+l,t[7]=f*n+d*o+u,t[8]=f*r+d*a+c,t},Ls=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=Math.sin(i),d=Math.cos(i);return t[0]=d*e+f*h,t[1]=d*n+f*o,t[2]=d*r+f*a,t[3]=d*h-f*e,t[4]=d*o-f*n,t[5]=d*a-f*r,t[6]=l,t[7]=u,t[8]=c,t},ks=function(t,s,i){var e=i[0],n=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=n*s[3],t[4]=n*s[4],t[5]=n*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Ns=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Bs=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=-i,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Us=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Vs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Ws=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[3]=u-y,t[6]=f+g,t[1]=u+y,t[4]=1-l-p,t[7]=d-m,t[2]=f-g,t[5]=d+m,t[8]=1-l-c,t},zs=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],S=i*o-e*h,w=i*a-n*h,v=i*l-r*h,b=e*a-n*o,x=e*l-r*o,T=n*l-r*a,M=u*m-c*p,G=u*g-f*p,_=u*y-d*p,I=c*g-f*m,C=c*y-d*m,P=f*y-d*g,R=S*P-w*C+v*I+b*_-x*G+T*M;return R?(R=1/R,t[0]=(o*P-a*C+l*I)*R,t[1]=(a*_-h*P-l*G)*R,t[2]=(h*C-o*_+l*M)*R,t[3]=(n*C-e*P-r*I)*R,t[4]=(i*P-n*_+r*G)*R,t[5]=(e*_-i*C-r*M)*R,t[6]=(m*T-g*x+y*b)*R,t[7]=(g*v-p*T-y*w)*R,t[8]=(p*x-m*v+y*S)*R,t):null},js=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Hs=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Js=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},qs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},$s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Xs=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Ys=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Ks=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},Zs=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=i[0],d=i[1],p=i[2],m=i[3],g=i[4],y=i[5],S=i[6],w=i[7],v=i[8];return Math.abs(e-f)<=s*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(n-d)<=s*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=s*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(h-m)<=s*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(o-g)<=s*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-y)<=s*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(l-S)<=s*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(u-w)<=s*Math.max(1,Math.abs(u),Math.abs(w))&&Math.abs(c-v)<=s*Math.max(1,Math.abs(c),Math.abs(v))},Qs=function(){var t=new i(16);return i!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},ti=function(t){var s=new i(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},si=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},ii=function(t,s,e,n,r,h,o,a,l,u,c,f,d,p,m,g){var y=new i(16);return y[0]=t,y[1]=s,y[2]=e,y[3]=n,y[4]=r,y[5]=h,y[6]=o,y[7]=a,y[8]=l,y[9]=u,y[10]=c,y[11]=f,y[12]=d,y[13]=p,y[14]=m,y[15]=g,y},ei=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},ni=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ri=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[3],r=s[6],h=s[7],o=s[11];t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=n,t[13]=h,t[14]=o}else t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15];return t},hi=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],S=i*o-e*h,w=i*a-n*h,v=i*l-r*h,b=e*a-n*o,x=e*l-r*o,T=n*l-r*a,M=u*m-c*p,G=u*g-f*p,_=u*y-d*p,I=c*g-f*m,C=c*y-d*m,P=f*y-d*g,R=S*P-w*C+v*I+b*_-x*G+T*M;return R?(R=1/R,t[0]=(o*P-a*C+l*I)*R,t[1]=(n*C-e*P-r*I)*R,t[2]=(m*T-g*x+y*b)*R,t[3]=(f*x-c*T-d*b)*R,t[4]=(a*_-h*P-l*G)*R,t[5]=(i*P-n*_+r*G)*R,t[6]=(g*v-p*T-y*w)*R,t[7]=(u*T-f*v+d*w)*R,t[8]=(h*C-o*_+l*M)*R,t[9]=(e*_-i*C-r*M)*R,t[10]=(p*x-m*v+y*S)*R,t[11]=(c*v-u*x-d*S)*R,t[12]=(o*G-h*I-a*M)*R,t[13]=(i*I-e*G+n*M)*R,t[14]=(m*w-p*b-g*S)*R,t[15]=(u*b-c*w+f*S)*R,t):null},oi=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],S=i*o-e*h,w=i*a-n*h,v=i*l-r*h,b=e*a-n*o,x=e*l-r*o,T=n*l-r*a,M=u*m-c*p,G=u*g-f*p,_=u*y-d*p,I=c*g-f*m,C=c*y-d*m,P=f*y-d*g;return t[0]=o*P-a*C+l*I,t[1]=n*C-e*P-r*I,t[2]=m*T-g*x+y*b,t[3]=f*x-c*T-d*b,t[4]=a*_-h*P-l*G,t[5]=i*P-n*_+r*G,t[6]=g*v-p*T-y*w,t[7]=u*T-f*v+d*w,t[8]=h*C-o*_+l*M,t[9]=e*_-i*C-r*M,t[10]=p*x-m*v+y*S,t[11]=c*v-u*x-d*S,t[12]=o*G-h*I-a*M,t[13]=i*I-e*G+n*M,t[14]=m*w-p*b-g*S,t[15]=u*b-c*w+f*S,t},ai=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[9],c=t[10],f=t[11],d=t[12],p=t[13],m=t[14],g=s*h-i*r,y=s*o-e*r,S=i*o-e*h,w=l*p-u*d,v=l*m-c*d,b=u*m-c*p;return a*(s*b-i*v+e*w)-n*(r*b-h*v+o*w)+t[15]*(l*S-u*y+c*g)-f*(d*S-p*y+m*g)},li=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],S=s[15],w=i[0],v=i[1],b=i[2],x=i[3];return t[0]=w*e+v*o+b*c+x*m,t[1]=w*n+v*a+b*f+x*g,t[2]=w*r+v*l+b*d+x*y,t[3]=w*h+v*u+b*p+x*S,w=i[4],v=i[5],b=i[6],x=i[7],t[4]=w*e+v*o+b*c+x*m,t[5]=w*n+v*a+b*f+x*g,t[6]=w*r+v*l+b*d+x*y,t[7]=w*h+v*u+b*p+x*S,w=i[8],v=i[9],b=i[10],x=i[11],t[8]=w*e+v*o+b*c+x*m,t[9]=w*n+v*a+b*f+x*g,t[10]=w*r+v*l+b*d+x*y,t[11]=w*h+v*u+b*p+x*S,w=i[12],v=i[13],b=i[14],x=i[15],t[12]=w*e+v*o+b*c+x*m,t[13]=w*n+v*a+b*f+x*g,t[14]=w*r+v*l+b*d+x*y,t[15]=w*h+v*u+b*p+x*S,t},ui=function(t,s,i){var e,n,r,h,o,a,l,u,c,f,d,p,m=i[0],g=i[1],y=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*y+s[12],t[13]=s[1]*m+s[5]*g+s[9]*y+s[13],t[14]=s[2]*m+s[6]*g+s[10]*y+s[14],t[15]=s[3]*m+s[7]*g+s[11]*y+s[15]):(e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*y+s[12],t[13]=n*m+a*g+f*y+s[13],t[14]=r*m+l*g+d*y+s[14],t[15]=h*m+u*g+p*y+s[15]),t},ci=function(t,s,i){var e=i[0],n=i[1],r=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*n,t[5]=s[5]*n,t[6]=s[6]*n,t[7]=s[7]*n,t[8]=s[8]*r,t[9]=s[9]*r,t[10]=s[10]*r,t[11]=s[11]*r,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fi=function(t,i,e,n){var r,h,o,a,l,u,c,f,d,p,m,g,y,S,w,v,b,x,T,M,G,_,I,C,P=n[0],R=n[1],E=n[2],A=Math.hypot(P,R,E);return A<s?null:(P*=A=1/A,R*=A,E*=A,r=Math.sin(e),o=1-(h=Math.cos(e)),a=i[0],l=i[1],u=i[2],c=i[3],f=i[4],d=i[5],p=i[6],m=i[7],g=i[8],y=i[9],S=i[10],w=i[11],v=P*P*o+h,b=R*P*o+E*r,x=E*P*o-R*r,T=P*R*o-E*r,M=R*R*o+h,G=E*R*o+P*r,_=P*E*o+R*r,I=R*E*o-P*r,C=E*E*o+h,t[0]=a*v+f*b+g*x,t[1]=l*v+d*b+y*x,t[2]=u*v+p*b+S*x,t[3]=c*v+m*b+w*x,t[4]=a*T+f*M+g*G,t[5]=l*T+d*M+y*G,t[6]=u*T+p*M+S*G,t[7]=c*T+m*M+w*G,t[8]=a*_+f*I+g*C,t[9]=l*_+d*I+y*C,t[10]=u*_+p*I+S*C,t[11]=c*_+m*I+w*C,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t)},di=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[4],h=s[5],o=s[6],a=s[7],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=r*n+l*e,t[5]=h*n+u*e,t[6]=o*n+c*e,t[7]=a*n+f*e,t[8]=l*n-r*e,t[9]=u*n-h*e,t[10]=c*n-o*e,t[11]=f*n-a*e,t},pi=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n-l*e,t[1]=h*n-u*e,t[2]=o*n-c*e,t[3]=a*n-f*e,t[8]=r*e+l*n,t[9]=h*e+u*n,t[10]=o*e+c*n,t[11]=a*e+f*n,t},mi=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[4],u=s[5],c=s[6],f=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n+l*e,t[1]=h*n+u*e,t[2]=o*n+c*e,t[3]=a*n+f*e,t[4]=l*n-r*e,t[5]=u*n-h*e,t[6]=c*n-o*e,t[7]=f*n-a*e,t},gi=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},yi=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Si=function(t,i,e){var n,r,h,o=e[0],a=e[1],l=e[2],u=Math.hypot(o,a,l);return u<s?null:(o*=u=1/u,a*=u,l*=u,n=Math.sin(i),h=1-(r=Math.cos(i)),t[0]=o*o*h+r,t[1]=a*o*h+l*n,t[2]=l*o*h-a*n,t[3]=0,t[4]=o*a*h-l*n,t[5]=a*a*h+r,t[6]=l*a*h+o*n,t[7]=0,t[8]=o*l*h+a*n,t[9]=a*l*h-o*n,t[10]=l*l*h+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},wi=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},vi=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bi=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},xi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=e+e,a=n+n,l=r+r,u=e*o,c=e*a,f=e*l,d=n*a,p=n*l,m=r*l,g=h*o,y=h*a,S=h*l;return t[0]=1-(d+m),t[1]=c+S,t[2]=f-y,t[3]=0,t[4]=c-S,t[5]=1-(u+m),t[6]=p+g,t[7]=0,t[8]=f+y,t[9]=p-g,t[10]=1-(u+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ti=function(t,s){var e=new i(3),n=-s[0],r=-s[1],h=-s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7],f=n*n+r*r+h*h+o*o;return f>0?(e[0]=2*(a*o+c*n+l*h-u*r)/f,e[1]=2*(l*o+c*r+u*n-a*h)/f,e[2]=2*(u*o+c*h+a*r-l*n)/f):(e[0]=2*(a*o+c*n+l*h-u*r),e[1]=2*(l*o+c*r+u*n-a*h),e[2]=2*(u*o+c*h+a*r-l*n)),xi(t,s,e),t},Mi=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},Gi=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[4],h=s[5],o=s[6],a=s[8],l=s[9],u=s[10];return t[0]=Math.hypot(i,e,n),t[1]=Math.hypot(r,h,o),t[2]=Math.hypot(a,l,u),t},_i=function(t,s){var e=new i(3);Gi(e,s);var n=1/e[0],r=1/e[1],h=1/e[2],o=s[0]*n,a=s[1]*r,l=s[2]*h,u=s[4]*n,c=s[5]*r,f=s[6]*h,d=s[8]*n,p=s[9]*r,m=s[10]*h,g=o+c+m,y=0;return g>0?(y=2*Math.sqrt(g+1),t[3]=.25*y,t[0]=(f-p)/y,t[1]=(d-l)/y,t[2]=(a-u)/y):o>c&&o>m?(y=2*Math.sqrt(1+o-c-m),t[3]=(f-p)/y,t[0]=.25*y,t[1]=(a+u)/y,t[2]=(d+l)/y):c>m?(y=2*Math.sqrt(1+c-o-m),t[3]=(d-l)/y,t[0]=(a+u)/y,t[1]=.25*y,t[2]=(f+p)/y):(y=2*Math.sqrt(1+m-o-c),t[3]=(a-u)/y,t[0]=(d+l)/y,t[1]=(f+p)/y,t[2]=.25*y),t},Ii=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var n=e[0],r=e[1],h=e[2],o=e[4],a=e[5],l=e[6],u=e[8],c=e[9],f=e[10];i[0]=Math.hypot(n,r,h),i[1]=Math.hypot(o,a,l),i[2]=Math.hypot(u,c,f);var d=1/i[0],p=1/i[1],m=1/i[2],g=n*d,y=r*p,S=h*m,w=o*d,v=a*p,b=l*m,x=u*d,T=c*p,M=f*m,G=g+v+M,_=0;return G>0?(_=2*Math.sqrt(G+1),t[3]=.25*_,t[0]=(b-T)/_,t[1]=(x-S)/_,t[2]=(y-w)/_):g>v&&g>M?(_=2*Math.sqrt(1+g-v-M),t[3]=(b-T)/_,t[0]=.25*_,t[1]=(y+w)/_,t[2]=(x+S)/_):v>M?(_=2*Math.sqrt(1+v-g-M),t[3]=(x-S)/_,t[0]=(y+w)/_,t[1]=.25*_,t[2]=(b+T)/_):(_=2*Math.sqrt(1+M-g-v),t[3]=(y-w)/_,t[0]=(x+S)/_,t[1]=(b+T)/_,t[2]=.25*_),t},Ci=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3],a=n+n,l=r+r,u=h+h,c=n*a,f=n*l,d=n*u,p=r*l,m=r*u,g=h*u,y=o*a,S=o*l,w=o*u,v=e[0],b=e[1],x=e[2];return t[0]=(1-(p+g))*v,t[1]=(f+w)*v,t[2]=(d-S)*v,t[3]=0,t[4]=(f-w)*b,t[5]=(1-(c+g))*b,t[6]=(m+y)*b,t[7]=0,t[8]=(d+S)*x,t[9]=(m-y)*x,t[10]=(1-(c+p))*x,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Pi=function(t,s,i,e,n){var r=s[0],h=s[1],o=s[2],a=s[3],l=r+r,u=h+h,c=o+o,f=r*l,d=r*u,p=r*c,m=h*u,g=h*c,y=o*c,S=a*l,w=a*u,v=a*c,b=e[0],x=e[1],T=e[2],M=n[0],G=n[1],_=n[2],I=(1-(m+y))*b,C=(d+v)*b,P=(p-w)*b,R=(d-v)*x,E=(1-(f+y))*x,A=(g+S)*x,F=(p+w)*T,O=(g-S)*T,D=(1-(f+m))*T;return t[0]=I,t[1]=C,t[2]=P,t[3]=0,t[4]=R,t[5]=E,t[6]=A,t[7]=0,t[8]=F,t[9]=O,t[10]=D,t[11]=0,t[12]=i[0]+M-(I*M+R*G+F*_),t[13]=i[1]+G-(C*M+E*G+O*_),t[14]=i[2]+_-(P*M+A*G+D*_),t[15]=1,t},Ri=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[1]=u+y,t[2]=f-g,t[3]=0,t[4]=u-y,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ei=function(t,s,i,e,n,r,h){var o=1/(i-s),a=1/(n-e),l=1/(r-h);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(n+e)*a,t[10]=(h+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*r*2*l,t[15]=0,t},Ai=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=(n+e)*h,t[14]=2*n*e*h}else t[10]=-1,t[14]=-2*e;return t},Fi=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=n*h,t[14]=n*e*h}else t[10]=-1,t[14]=-e;return t},Oi=function(t,s,i,e){var n=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=Math.tan(s.rightDegrees*Math.PI/180),a=2/(h+o),l=2/(n+r);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(h-o)*a*.5,t[9]=(n-r)*l*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},Di=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=(h+r)*l,t[15]=1,t},Li=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=r*l,t[15]=1,t},ki=function(t,i,e,n){var r,h,o,a,l,u,c,f,d,p,m=i[0],g=i[1],y=i[2],S=n[0],w=n[1],v=n[2],b=e[0],x=e[1],T=e[2];return Math.abs(m-b)<s&&Math.abs(g-x)<s&&Math.abs(y-T)<s?ni(t):(c=m-b,f=g-x,d=y-T,r=w*(d*=p=1/Math.hypot(c,f,d))-v*(f*=p),h=v*(c*=p)-S*d,o=S*f-w*c,(p=Math.hypot(r,h,o))?(r*=p=1/p,h*=p,o*=p):(r=0,h=0,o=0),a=f*o-d*h,l=d*r-c*o,u=c*h-f*r,(p=Math.hypot(a,l,u))?(a*=p=1/p,l*=p,u*=p):(a=0,l=0,u=0),t[0]=r,t[1]=a,t[2]=c,t[3]=0,t[4]=h,t[5]=l,t[6]=f,t[7]=0,t[8]=o,t[9]=u,t[10]=d,t[11]=0,t[12]=-(r*m+h*g+o*y),t[13]=-(a*m+l*g+u*y),t[14]=-(c*m+f*g+d*y),t[15]=1,t)},Ni=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=e[0],a=e[1],l=e[2],u=n-i[0],c=r-i[1],f=h-i[2],d=u*u+c*c+f*f;d>0&&(u*=d=1/Math.sqrt(d),c*=d,f*=d);var p=a*f-l*c,m=l*u-o*f,g=o*c-a*u;return(d=p*p+m*m+g*g)>0&&(p*=d=1/Math.sqrt(d),m*=d,g*=d),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=c*g-f*m,t[5]=f*p-u*g,t[6]=u*m-c*p,t[7]=0,t[8]=u,t[9]=c,t[10]=f,t[11]=0,t[12]=n,t[13]=r,t[14]=h,t[15]=1,t},Bi=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Ui=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Vi=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Wi=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},zi=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},ji=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Hi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ji=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],p=t[11],m=t[12],g=t[13],y=t[14],S=t[15],w=i[0],v=i[1],b=i[2],x=i[3],T=i[4],M=i[5],G=i[6],_=i[7],I=i[8],C=i[9],P=i[10],R=i[11],E=i[12],A=i[13],F=i[14],O=i[15];return Math.abs(e-w)<=s*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(n-v)<=s*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-b)<=s*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(h-x)<=s*Math.max(1,Math.abs(h),Math.abs(x))&&Math.abs(o-T)<=s*Math.max(1,Math.abs(o),Math.abs(T))&&Math.abs(a-M)<=s*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(l-G)<=s*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(u-_)<=s*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(c-I)<=s*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(f-C)<=s*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(d-P)<=s*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(p-R)<=s*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(m-E)<=s*Math.max(1,Math.abs(m),Math.abs(E))&&Math.abs(g-A)<=s*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(y-F)<=s*Math.max(1,Math.abs(y),Math.abs(F))&&Math.abs(S-O)<=s*Math.max(1,Math.abs(S),Math.abs(O))},qi=function(){var t=new i(3);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},$i=function(t){var s=new i(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Xi=function(t){var s=t[0],i=t[1],e=t[2];return Math.hypot(s,i,e)},Yi=function(t,s,e){var n=new i(3);return n[0]=t,n[1]=s,n[2]=e,n},Ki=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Zi=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},Qi=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},te=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},se=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},ie=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},ee=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},ne=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},re=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},he=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},oe=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ae=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},le=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ue=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return Math.hypot(i,e,n)},ce=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return i*i+e*e+n*n},fe=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e},de=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},pe=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},me=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=s[0]*r,t[1]=s[1]*r,t[2]=s[2]*r,t},ge=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},ye=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2];return t[0]=n*a-r*o,t[1]=r*h-e*a,t[2]=e*o-n*h,t},Se=function(t,s,i,e){var n=s[0],r=s[1],h=s[2];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t},we=function(t,s,i,e){var n=Math.acos(Math.min(Math.max(ge(s,i),-1),1)),r=Math.sin(n),h=Math.sin((1-e)*n)/r,o=Math.sin(e*n)/r;return t[0]=h*s[0]+o*i[0],t[1]=h*s[1]+o*i[1],t[2]=h*s[2]+o*i[2],t},ve=function(t,s,i,e,n,r){var h=r*r,o=h*(2*r-3)+1,a=h*(r-2)+r,l=h*(r-1),u=h*(3-2*r);return t[0]=s[0]*o+i[0]*a+e[0]*l+n[0]*u,t[1]=s[1]*o+i[1]*a+e[1]*l+n[1]*u,t[2]=s[2]*o+i[2]*a+e[2]*l+n[2]*u,t},be=function(t,s,i,e,n,r){var h=1-r,o=h*h,a=r*r,l=o*h,u=3*r*o,c=3*a*h,f=a*r;return t[0]=s[0]*l+i[0]*u+e[0]*c+n[0]*f,t[1]=s[1]*l+i[1]*u+e[1]*c+n[1]*f,t[2]=s[2]*l+i[2]*u+e[2]*c+n[2]*f,t},xe=function(t,s){s=s||1;var i=2*e()*Math.PI,n=2*e()-1,r=Math.sqrt(1-n*n)*s;return t[0]=Math.cos(i)*r,t[1]=Math.sin(i)*r,t[2]=n*s,t},Te=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[3]*e+i[7]*n+i[11]*r+i[15];return h=h||1,t[0]=(i[0]*e+i[4]*n+i[8]*r+i[12])/h,t[1]=(i[1]*e+i[5]*n+i[9]*r+i[13])/h,t[2]=(i[2]*e+i[6]*n+i[10]*r+i[14])/h,t},Me=function(t,s,i){var e=s[0],n=s[1],r=s[2];return t[0]=e*i[0]+n*i[3]+r*i[6],t[1]=e*i[1]+n*i[4]+r*i[7],t[2]=e*i[2]+n*i[5]+r*i[8],t},Ge=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=n*l-r*a,c=r*o-e*l,f=e*a-n*o,d=n*f-r*c,p=r*u-e*f,m=e*c-n*u,g=2*h;return u*=g,c*=g,f*=g,d*=2,p*=2,m*=2,t[0]=o+u+d,t[1]=a+c+p,t[2]=l+f+m,t},_e=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(e)-n[2]*Math.sin(e),r[2]=n[1]*Math.sin(e)+n[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Ie=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[2]*Math.sin(e)+n[0]*Math.cos(e),r[1]=n[1],r[2]=n[2]*Math.cos(e)-n[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Ce=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0]*Math.cos(e)-n[1]*Math.sin(e),r[1]=n[0]*Math.sin(e)+n[1]*Math.cos(e),r[2]=n[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Pe=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2],a=Math.sqrt((i*i+e*e+n*n)*(r*r+h*h+o*o)),l=a&&ge(t,s)/a;return Math.acos(Math.min(Math.max(l,-1),1))},Re=function(t){return t[0]=0,t[1]=0,t[2]=0,t},Ee=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Ae=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},Fe=function(t,i){var e=t[0],n=t[1],r=t[2],h=i[0],o=i[1],a=i[2];return Math.abs(e-h)<=s*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=s*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=s*Math.max(1,Math.abs(r),Math.abs(a))},Oe=function(){var t=new i(4);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},De=function(t){var s=new i(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Le=function(t,s,e,n){var r=new i(4);return r[0]=t,r[1]=s,r[2]=e,r[3]=n,r},ke=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Ne=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},Be=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Ue=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Ve=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},We=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},ze=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},je=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},He=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Je=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},qe=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},$e=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Xe=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Ye=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return Math.hypot(i,e,n,r)},Ke=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return i*i+e*e+n*n+r*r},Ze=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return Math.hypot(s,i,e,n)},Qe=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return s*s+i*i+e*e+n*n},tn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},sn=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},en=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r;return h>0&&(h=1/Math.sqrt(h)),t[0]=i*h,t[1]=e*h,t[2]=n*h,t[3]=r*h,t},nn=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},rn=function(t,s,i,e){var n=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],h=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],l=i[2]*e[3]-i[3]*e[2],u=s[0],c=s[1],f=s[2],d=s[3];return t[0]=c*l-f*a+d*o,t[1]=-u*l+f*h-d*r,t[2]=u*a-c*h+d*n,t[3]=-u*o+c*r-f*n,t},hn=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t[3]=o+e*(i[3]-o),t},on=function(t,s){var i,n,r,h,o,a;s=s||1;do{o=(i=2*e()-1)*i+(n=2*e()-1)*n}while(o>=1);do{a=(r=2*e()-1)*r+(h=2*e()-1)*h}while(a>=1);var l=Math.sqrt((1-o)/a);return t[0]=s*i,t[1]=s*n,t[2]=s*r*l,t[3]=s*h*l,t},an=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3];return t[0]=i[0]*e+i[4]*n+i[8]*r+i[12]*h,t[1]=i[1]*e+i[5]*n+i[9]*r+i[13]*h,t[2]=i[2]*e+i[6]*n+i[10]*r+i[14]*h,t[3]=i[3]*e+i[7]*n+i[11]*r+i[15]*h,t},ln=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2],l=i[3],u=l*e+o*r-a*n,c=l*n+a*e-h*r,f=l*r+h*n-o*e,d=-h*e-o*n-a*r;return t[0]=u*l+d*-h+c*-a-f*-o,t[1]=c*l+d*-o+f*-h-u*-a,t[2]=f*l+d*-a+u*-o-c*-h,t[3]=s[3],t},un=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},cn=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},fn=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},dn=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=i[0],a=i[1],l=i[2],u=i[3];return Math.abs(e-o)<=s*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=s*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=s*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(h-u)<=s*Math.max(1,Math.abs(h),Math.abs(u))},pn=function(){var t=new i(4);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},mn=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},gn=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},yn=function(t,i){var e=2*Math.acos(i[3]),n=Math.sin(e/2);return n>s?(t[0]=i[0]/n,t[1]=i[1]/n,t[2]=i[2]/n):(t[0]=1,t[1]=0,t[2]=0),e},Sn=function(t,s){var i=J(t,s);return Math.acos(2*i*i-1)},wn=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,t},vn=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+h*o,t[1]=n*a+r*o,t[2]=r*a-n*o,t[3]=h*a-e*o,t},bn=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a-r*o,t[1]=n*a+h*o,t[2]=r*a+e*o,t[3]=h*a-n*o,t},xn=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+n*o,t[1]=n*a-e*o,t[2]=r*a+h*o,t[3]=h*a-r*o,t},Tn=function(t,s){var i=s[0],e=s[1],n=s[2];return t[0]=i,t[1]=e,t[2]=n,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-n*n)),t},Mn=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=Math.exp(r),a=h>0?o*Math.sin(h)/h:0;return t[0]=i*a,t[1]=e*a,t[2]=n*a,t[3]=o*Math.cos(h),t},Gn=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=h>0?Math.atan2(h,r)/h:0;return t[0]=i*o,t[1]=e*o,t[2]=n*o,t[3]=.5*Math.log(i*i+e*e+n*n+r*r),t},_n=function(t,s,i){return Gn(t,s),H(t,t,i),Mn(t,t),t},In=function(t,i,e,n){var r,h,o,a,l,u=i[0],c=i[1],f=i[2],d=i[3],p=e[0],m=e[1],g=e[2],y=e[3];return(h=u*p+c*m+f*g+d*y)<0&&(h=-h,p=-p,m=-m,g=-g,y=-y),1-h>s?(r=Math.acos(h),o=Math.sin(r),a=Math.sin((1-n)*r)/o,l=Math.sin(n*r)/o):(a=1-n,l=n),t[0]=a*u+l*p,t[1]=a*c+l*m,t[2]=a*f+l*g,t[3]=a*d+l*y,t},Cn=function(t){var s=e(),i=e(),n=e(),r=Math.sqrt(1-s),h=Math.sqrt(s);return t[0]=r*Math.sin(2*Math.PI*i),t[1]=r*Math.cos(2*Math.PI*i),t[2]=h*Math.sin(2*Math.PI*n),t[3]=h*Math.cos(2*Math.PI*n),t},Pn=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r,o=h?1/h:0;return t[0]=-i*o,t[1]=-e*o,t[2]=-n*o,t[3]=r*o,t},Rn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},En=function(t,s){var i,e=s[0]+s[4]+s[8];if(e>0)i=Math.sqrt(e+1),t[3]=.5*i,i=.5/i,t[0]=(s[5]-s[7])*i,t[1]=(s[6]-s[2])*i,t[2]=(s[1]-s[3])*i;else{var n=0;s[4]>s[0]&&(n=1),s[8]>s[3*n+n]&&(n=2);var r=(n+1)%3,h=(n+2)%3;i=Math.sqrt(s[3*n+n]-s[3*r+r]-s[3*h+h]+1),t[n]=.5*i,i=.5/i,t[3]=(s[3*r+h]-s[3*h+r])*i,t[r]=(s[3*r+n]+s[3*n+r])*i,t[h]=(s[3*h+n]+s[3*n+h])*i}return t},An=function(t,s,i,e){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n,h=Math.PI/360;s*=h,e*=h,i*=h;var o=Math.sin(s),a=Math.cos(s),l=Math.sin(i),u=Math.cos(i),c=Math.sin(e),f=Math.cos(e);switch(r){case"xyz":t[0]=o*u*f+a*l*c,t[1]=a*l*f-o*u*c,t[2]=a*u*c+o*l*f,t[3]=a*u*f-o*l*c;break;case"xzy":t[0]=o*u*f-a*l*c,t[1]=a*l*f-o*u*c,t[2]=a*u*c+o*l*f,t[3]=a*u*f+o*l*c;break;case"yxz":t[0]=o*u*f+a*l*c,t[1]=a*l*f-o*u*c,t[2]=a*u*c-o*l*f,t[3]=a*u*f+o*l*c;break;case"yzx":t[0]=o*u*f+a*l*c,t[1]=a*l*f+o*u*c,t[2]=a*u*c-o*l*f,t[3]=a*u*f-o*l*c;break;case"zxy":t[0]=o*u*f-a*l*c,t[1]=a*l*f+o*u*c,t[2]=a*u*c+o*l*f,t[3]=a*u*f-o*l*c;break;case"zyx":t[0]=o*u*f-a*l*c,t[1]=a*l*f+o*u*c,t[2]=a*u*c-o*l*f,t[3]=a*u*f+o*l*c;break;default:throw new Error("Unknown angle order "+r)}return t},Fn=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},On=function(t,i){return Math.abs(nn(t,i))>=1-s},Dn=function(){var t=new i(8);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},Ln=function(t){var s=new i(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},kn=function(t,s,e,n,r,h,o,a){var l=new i(8);return l[0]=t,l[1]=s,l[2]=e,l[3]=n,l[4]=r,l[5]=h,l[6]=o,l[7]=a,l},Nn=function(t,s,e,n,r,h,o){var a=new i(8);a[0]=t,a[1]=s,a[2]=e,a[3]=n;var l=.5*r,u=.5*h,c=.5*o;return a[4]=l*n+u*e-c*s,a[5]=u*n+c*t-l*e,a[6]=c*n+l*s-u*t,a[7]=-l*t-u*s-c*e,a},Bn=function(t,s,i){var e=.5*i[0],n=.5*i[1],r=.5*i[2],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=h,t[1]=o,t[2]=a,t[3]=l,t[4]=e*l+n*a-r*o,t[5]=n*l+r*h-e*a,t[6]=r*l+e*o-n*h,t[7]=-e*h-n*o-r*a,t},Un=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},Vn=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Wn=function(t,s){var e=pn();_i(e,s);var n=new i(3);return Mi(n,s),Bn(t,e,n),t},zn=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},jn=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Hn=function(t,s,i,e,n,r,h,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t},Jn=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},qn=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},$n=function(t,s){var i=s[4],e=s[5],n=s[6],r=s[7],h=-s[0],o=-s[1],a=-s[2],l=s[3];return t[0]=2*(i*l+r*h+e*a-n*o),t[1]=2*(e*l+r*o+n*h-i*a),t[2]=2*(n*l+r*a+i*o-e*h),t},Xn=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=.5*i[0],a=.5*i[1],l=.5*i[2],u=s[4],c=s[5],f=s[6],d=s[7];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=h*o+n*l-r*a+u,t[5]=h*a+r*o-e*l+c,t[6]=h*l+e*a-n*o+f,t[7]=-e*o-n*a-r*l+d,t},Yn=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return vn(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Kn=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return bn(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Zn=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return xn(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Qn=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=s[3];return t[0]=o*h+u*e+a*r-l*n,t[1]=a*h+u*n+l*e-o*r,t[2]=l*h+u*r+o*n-a*e,t[3]=u*h-o*e-a*n-l*r,o=s[4],a=s[5],l=s[6],u=s[7],t[4]=o*h+u*e+a*r-l*n,t[5]=a*h+u*n+l*e-o*r,t[6]=l*h+u*r+o*n-a*e,t[7]=u*h-o*e-a*n-l*r,t},tr=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,o=i[4],a=i[5],l=i[6],u=i[7],t[4]=e*u+h*o+n*l-r*a,t[5]=n*u+h*a+r*o-e*l,t[6]=r*u+h*l+e*a-n*o,t[7]=h*u-e*o-n*a-r*l,t},sr=function(t,i,e,n){if(Math.abs(n)<s)return zn(t,i);var r=Math.hypot(e[0],e[1],e[2]);n*=.5;var h=Math.sin(n),o=h*e[0]/r,a=h*e[1]/r,l=h*e[2]/r,u=Math.cos(n),c=i[0],f=i[1],d=i[2],p=i[3];t[0]=c*u+p*o+f*l-d*a,t[1]=f*u+p*a+d*o-c*l,t[2]=d*u+p*l+c*a-f*o,t[3]=p*u-c*o-f*a-d*l;var m=i[4],g=i[5],y=i[6],S=i[7];return t[4]=m*u+S*o+g*l-y*a,t[5]=g*u+S*a+y*o-m*l,t[6]=y*u+S*l+m*a-g*o,t[7]=S*u-m*o-g*a-y*l,t},ir=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},er=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],p=s[7],m=i[0],g=i[1],y=i[2],S=i[3];return t[0]=e*S+h*m+n*y-r*g,t[1]=n*S+h*g+r*m-e*y,t[2]=r*S+h*y+e*g-n*m,t[3]=h*S-e*m-n*g-r*y,t[4]=e*u+h*o+n*l-r*a+c*S+p*m+f*y-d*g,t[5]=n*u+h*a+r*o-e*l+f*S+p*g+d*m-c*y,t[6]=r*u+h*l+e*a-n*o+d*S+p*y+c*g-f*m,t[7]=h*u-e*o-n*a-r*l+p*S-c*m-f*g-d*y,t},nr=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},rr=function(t,s,i,e){var n=1-e;return ot(s,i)<0&&(e=-e),t[0]=s[0]*n+i[0]*e,t[1]=s[1]*n+i[1]*e,t[2]=s[2]*n+i[2]*e,t[3]=s[3]*n+i[3]*e,t[4]=s[4]*n+i[4]*e,t[5]=s[5]*n+i[5]*e,t[6]=s[6]*n+i[6]*e,t[7]=s[7]*n+i[7]*e,t},hr=function(t,s){var i=ut(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},or=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},ar=function(t,s){var i=ut(s);if(i>0){i=Math.sqrt(i);var e=s[0]/i,n=s[1]/i,r=s[2]/i,h=s[3]/i,o=s[4],a=s[5],l=s[6],u=s[7],c=e*o+n*a+r*l+h*u;t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=(o-e*c)/i,t[5]=(a-n*c)/i,t[6]=(l-r*c)/i,t[7]=(u-h*c)/i}return t},lr=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},ur=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},cr=function(t,i){var e=t[0],n=t[1],r=t[2],h=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],S=i[7];return Math.abs(e-c)<=s*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(n-f)<=s*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=s*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(h-p)<=s*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=s*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=s*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=s*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(u-S)<=s*Math.max(1,Math.abs(u),Math.abs(S))},fr=function(){var t=new i(2);return i!=Float32Array&&(t[0]=0,t[1]=0),t},dr=function(t){var s=new i(2);return s[0]=t[0],s[1]=t[1],s},pr=function(t,s){var e=new i(2);return e[0]=t,e[1]=s,e},mr=function(t,s){return t[0]=s[0],t[1]=s[1],t},gr=function(t,s,i){return t[0]=s,t[1]=i,t},yr=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},Sr=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},wr=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},vr=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},br=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},xr=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},Tr=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Mr=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Gr=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},_r=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},Ir=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},Cr=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return Math.hypot(i,e)},Pr=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},Rr=function(t){var s=t[0],i=t[1];return Math.hypot(s,i)},Er=function(t){var s=t[0],i=t[1];return s*s+i*i},Ar=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},Fr=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},Or=function(t,s){var i=s[0],e=s[1],n=i*i+e*e;return n>0&&(n=1/Math.sqrt(n)),t[0]=s[0]*n,t[1]=s[1]*n,t},Dr=function(t,s){return t[0]*s[0]+t[1]*s[1]},Lr=function(t,s,i){var e=s[0]*i[1]-s[1]*i[0];return t[0]=t[1]=0,t[2]=e,t},kr=function(t,s,i,e){var n=s[0],r=s[1];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t},Nr=function(t,s){s=s||1;var i=2*e()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},Br=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n,t[1]=i[1]*e+i[3]*n,t},Ur=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t},Vr=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[3]*n+i[6],t[1]=i[1]*e+i[4]*n+i[7],t},Wr=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[4]*n+i[12],t[1]=i[1]*e+i[5]*n+i[13],t},zr=function(t,s,i,e){var n=s[0]-i[0],r=s[1]-i[1],h=Math.sin(e),o=Math.cos(e);return t[0]=n*o-r*h+i[0],t[1]=n*h+r*o+i[1],t},jr=function(t,s){var i=t[0],e=t[1],n=s[0],r=s[1],h=Math.sqrt((i*i+e*e)*(n*n+r*r)),o=h&&(i*n+e*r)/h;return Math.acos(Math.min(Math.max(o,-1),1))},Hr=function(t){return t[0]=0,t[1]=0,t},Jr=function(t){return"vec2("+t[0]+", "+t[1]+")"},qr=function(t,s){return t[0]===s[0]&&t[1]===s[1]},$r=function(t,i){var e=t[0],n=t[1],r=i[0],h=i[1];return Math.abs(e-r)<=s*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(n-h)<=s*Math.max(1,Math.abs(n),Math.abs(h))};s=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,e=Math.random,n="zyx",r=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),h={__proto__:null,EPSILON:s,get i(){return i},h:e,o:n,l:It,u:Ct,equals:Pt},o=Ut,a=Xt,l=Object.freeze({__proto__:null,create:Rt,clone:Et,m:At,identity:Ft,S:Ot,set:Dt,v:Lt,T:kt,M:Nt,G:Bt,multiply:Ut,rotate:Vt,scale:Wt,_:zt,I:jt,C:Ht,P:Jt,R:qt,add:$t,A:Xt,F:Yt,equals:Kt,O:Zt,D:Qt,mul:o,sub:a}),u=as,c=Ss,f=Object.freeze({__proto__:null,create:ts,clone:ss,m:is,identity:es,S:ns,set:rs,T:hs,G:os,multiply:as,rotate:ls,scale:us,translate:cs,_:fs,I:ds,L:ps,C:ms,P:gs,add:ys,A:Ss,O:ws,D:vs,F:bs,equals:xs,mul:u,sub:c}),d=Os,p=$s,m=Object.freeze({__proto__:null,create:Ts,N:Ms,clone:Gs,m:_s,S:Is,set:Cs,identity:Ps,v:Rs,T:Es,M:As,G:Fs,multiply:Os,translate:Ds,rotate:Ls,scale:ks,L:Ns,_:Bs,I:Us,B:Vs,U:Ws,V:zs,W:js,C:Hs,P:Js,add:qs,A:$s,O:Xs,D:Ys,F:Ks,equals:Zs,mul:d,sub:p}),g=Ai,y=Di,S=li,w=Wi,v=Object.freeze({__proto__:null,create:Qs,clone:ti,m:si,S:ii,set:ei,identity:ni,v:ri,T:hi,M:oi,G:ai,multiply:li,translate:ui,scale:ci,rotate:fi,j:di,H:pi,J:mi,L:gi,I:yi,_:Si,$:wi,X:vi,Y:bi,K:xi,Z:Ti,tt:Mi,st:Gi,it:_i,et:Ii,nt:Ci,rt:Pi,U:Ri,ht:Ei,ot:Ai,perspective:g,lt:Fi,ut:Oi,ct:Di,ft:y,dt:Li,gt:ki,yt:Ni,C:Bi,P:Ui,add:Vi,A:Wi,O:zi,D:ji,F:Hi,equals:Ji,mul:S,sub:w}),b=te,x=se,T=ie,M=ue,G=ce,_=Xi,I=fe,t=qi(),C=function(s,i,e,n,r,h){var o,a;for(i||(i=3),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2];return s},P=Object.freeze({__proto__:null,create:qi,clone:$i,length:Xi,S:Yi,m:Ki,set:Zi,add:Qi,A:te,multiply:se,St:ie,ceil:ee,floor:ne,min:re,max:he,round:oe,scale:ae,wt:le,vt:ue,bt:ce,xt:fe,Tt:de,inverse:pe,normalize:me,Mt:ge,Gt:ye,_t:Se,It:we,Ct:ve,Pt:be,random:xe,Rt:Te,Et:Me,At:Ge,j:_e,H:Ie,J:Ce,angle:Pe,Ft:Re,C:Ee,F:Ae,equals:Fe,sub:b,mul:x,div:T,Ot:M,Dt:G,Lt:_,kt:I,forEach:C}),R=Ue,E=Ve,A=We,F=Ye,O=Ke,D=Ze,L=Qe,k=function(){var t=Oe();return function(s,i,e,n,r,h){var o,a;for(i||(i=4),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],t[3]=s[o+3],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2],s[o+3]=t[3];return s}}(),N=Object.freeze({__proto__:null,create:Oe,clone:De,S:Le,m:ke,set:Ne,add:Be,A:Ue,multiply:Ve,St:We,ceil:ze,floor:je,min:He,max:Je,round:qe,scale:$e,wt:Xe,vt:Ye,bt:Ke,length:Ze,xt:Qe,Tt:tn,inverse:sn,normalize:en,Mt:nn,Gt:rn,_t:hn,random:on,Rt:an,At:ln,Ft:un,C:cn,F:fn,equals:dn,sub:R,mul:E,div:A,Ot:F,Dt:O,Lt:D,kt:L,forEach:k}),B=De,U=Le,V=ke,W=Ne,z=Be,j=wn,H=$e,J=nn,q=hn,X=$=Ze,K=Y=Qe,Z=en,Q=fn,tt=function(){var t=qi(),s=Yi(1,0,0),i=Yi(0,1,0);return function(e,n,r){var h=ge(n,r);return h<-.999999?(ye(t,s,n),_(t)<1e-6&&ye(t,i,n),me(t,t),gn(e,t,Math.PI),e):h>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(ye(t,n,r),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+h,Z(e,e))}}(),st=function(){var t=pn(),s=pn();return function(i,e,n,r,h,o){return In(t,e,h,o),In(s,n,r,o),In(i,t,s,2*o*(1-o)),i}}(),it=function(){var t=Ts();return function(s,i,e,n){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],Z(s,En(s,t))}}(),et=Object.freeze({__proto__:null,create:pn,identity:mn,Nt:gn,Bt:yn,Ut:Sn,multiply:wn,j:vn,H:bn,J:xn,Vt:Tn,exp:Mn,Wt:Gn,pow:_n,It:In,random:Cn,T:Pn,zt:Rn,jt:En,Ht:An,C:Fn,clone:B,S:U,m:V,set:W,add:z,mul:j,scale:H,Mt:J,_t:q,length:$,Lt:X,xt:Y,kt:K,normalize:Z,F:Q,equals:On,Jt:tt,qt:st,$t:it}),nt=V,rt=V,ht=er,ot=J,lt=at=$,ct=ut=Y,ft=Object.freeze({__proto__:null,create:Dn,clone:Ln,S:kn,Xt:Nn,K:Bn,L:Un,_:Vn,N:Wn,m:zn,identity:jn,set:Hn,Yt:nt,Kt:Jn,Zt:rt,Qt:qn,tt:$n,translate:Xn,j:Yn,H:Kn,J:Zn,ts:Qn,ss:tr,es:sr,add:ir,multiply:er,mul:ht,scale:nr,Mt:ot,_t:rr,T:hr,zt:or,length:at,Lt:lt,xt:ut,kt:ct,normalize:ar,C:lr,F:ur,equals:cr}),dt=Rr,pt=Sr,mt=wr,gt=vr,yt=Cr,St=Pr,wt=Er,vt=function(){var t=fr();return function(s,i,e,n,r,h){var o,a;for(i||(i=2),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],r(t,t,h),s[o]=t[0],s[o+1]=t[1];return s}}(),bt=Object.freeze({__proto__:null,create:fr,clone:dr,S:pr,m:mr,set:gr,add:yr,A:Sr,multiply:wr,St:vr,ceil:br,floor:xr,min:Tr,max:Mr,round:Gr,scale:_r,wt:Ir,vt:Cr,bt:Pr,length:Rr,xt:Er,Tt:Ar,inverse:Fr,normalize:Or,Mt:Dr,Gt:Lr,_t:kr,random:Nr,ns:Br,rs:Ur,Et:Vr,Rt:Wr,rotate:zr,angle:jr,Ft:Hr,C:Jr,F:qr,equals:$r,Lt:dt,sub:pt,mul:mt,div:gt,Ot:yt,Dt:St,kt:wt,forEach:vt}),globalThis.hs=h,globalThis.hs.ls=l,globalThis.hs.us=f,globalThis.hs.cs=m,globalThis.hs.fs=v,globalThis.hs.ds=et,globalThis.hs.ps=ft,globalThis.hs.gs=bt,globalThis.hs.ys=P,globalThis.hs.Ss=N}var t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m,g,y,S,w,v,b,x,T,M,G,_,I,C,P,R,E,A,F,O,D,L,k,N,B,U,V,W,z,j,H,J,q,$,X,Y,K,Z,Q,tt,st,it,et,nt,rt,ht,ot,at,lt,ut,ct,ft,dt,pt,mt,gt,yt,St,wt,vt,bt,xt,Tt,Mt,Gt;{let Xr=function(t,s,i){i=i||0;var e,n,r,h,o,a,l,u=[0,0];return e=t[1][1]-t[0][1],n=t[0][0]-t[1][0],r=e*t[0][0]+n*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],a=h*s[0][0]+o*s[0][1],bh(l=e*o-h*n,0,i)||(u[0]=(o*r-n*a)/l,u[1]=(e*a-h*r)/l),u},Yr=function(t,s,i,e){var n=s[0]-t[0],r=s[1]-t[1],h=e[0]-i[0],o=e[1]-i[1];if(h*r-o*n===0)return!1;var a=(n*(i[1]-t[1])+r*(t[0]-i[0]))/(h*r-o*n),l=(h*(t[1]-i[1])+o*(i[0]-t[0]))/(o*n-h*r);return a>=0&&a<=1&&l>=0&&l<=1},Kr=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},Zr=function(t,s,i){return Kr(t,s,i)>0},Qr=function(t,s,i){return Kr(t,s,i)>=0},th=function(t,s,i){return Kr(t,s,i)<0},sh=function(t,s,i){return Kr(t,s,i)<=0},ih=function(t,s,i,e){if(e){var n=xt,r=Tt;n[0]=s[0]-t[0],n[1]=s[1]-t[1],r[0]=i[0]-s[0],r[1]=i[1]-s[1];var h=n[0]*r[0]+n[1]*r[1],o=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return Math.acos(h/(o*a))<e}return 0===Kr(t,s,i)},eh=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},nh=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},rh=function(t){t.length=0},hh=function(t,s,i,e){for(var n=i;n<e;n++)t.push(s[n])},oh=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!Zr(nh(t,s-1),nh(t,s),nh(t,s+1))&&(ah(t),!0)},ah=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},lh=function(t,s){return th(nh(t,s-1),nh(t,s),nh(t,s+1))},uh=function(t,s,i){var e,n,r=Mt,h=Gt;if(Qr(nh(t,s+1),nh(t,s),nh(t,i))&&sh(nh(t,s-1),nh(t,s),nh(t,i)))return!1;n=eh(nh(t,s),nh(t,i));for(var o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&Qr(nh(t,s),nh(t,i),nh(t,o+1))&&sh(nh(t,s),nh(t,i),nh(t,o))&&(r[0]=nh(t,s),r[1]=nh(t,i),h[0]=nh(t,o),h[1]=nh(t,o+1),e=Xr(r,h),eh(nh(t,s),e)<n))return!1;return!0},ch=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&Yr(nh(t,s),nh(t,i),nh(t,e),nh(t,e+1)))return!1;return!0},fh=function(t,s,i,e){var n=e||[];if(rh(n),s<i)for(var r=s;r<=i;r++)n.push(t[r]);else{for(r=0;r<=i;r++)n.push(t[r]);for(r=s;r<t.length;r++)n.push(t[r])}return n},dh=function(t){for(var s=[],i=[],e=[],n=[],r=Number.MAX_VALUE,h=0;h<t.length;++h)if(lh(t,h))for(var o=0;o<t.length;++o)if(uh(t,h,o)){i=dh(fh(t,h,o,n)),e=dh(fh(t,o,h,n));for(var a=0;a<e.length;a++)i.push(e[a]);i.length<r&&(s=i,r=i.length,s.push([nh(t,h),nh(t,o)]))}return s},ph=function(t){var s=dh(t);return s.length>0?mh(t,s):[t]},mh=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var n=s[e],r=0;r<i.length;r++){var h=mh(i[r],n);if(h){i.splice(r,1),i.push(h[0],h[1]);break}}return i}return n=s,e=t.indexOf(n[0]),r=t.indexOf(n[1]),-1!==e&&-1!==r&&[fh(t,e,r),fh(t,r,e)]},gh=function(t){var s,i=t;for(s=0;s<i.length-1;s++)for(var e=0;e<s-1;e++)if(Yr(i[s],i[s+1],i[e],i[e+1]))return!1;for(s=1;s<i.length-2;s++)if(Yr(i[0],i[i.length-1],i[s],i[s+1]))return!1;return!0},yh=function(t,s,i,e,n){n=n||0;var r=s[1]-t[1],h=t[0]-s[0],o=r*t[0]+h*t[1],a=e[1]-i[1],l=i[0]-e[0],u=a*i[0]+l*i[1],c=r*l-a*h;return bh(c,0,n)?[0,0]:[(l*o-h*u)/c,(r*u-a*o)/c]},Sh=function(t,s,i,e,n,r,h){r=r||100,h=h||0,n=n||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],S=[],w=t,v=t;if(v.length<3)return s;if(++h>r)return console.warn("quickDecomp: max level ("+r+") reached."),s;for(var b=0;b<t.length;++b)if(lh(w,b)){i.push(w[b]),u=c=Number.MAX_VALUE;for(var x=0;x<t.length;++x)Zr(nh(w,b-1),nh(w,b),nh(w,x))&&sh(nh(w,b-1),nh(w,b),nh(w,x-1))&&(l=yh(nh(w,b-1),nh(w,b),nh(w,x),nh(w,x-1)),th(nh(w,b+1),nh(w,b),l)&&(f=eh(w[b],l))<c&&(c=f,a=l,m=x)),Zr(nh(w,b+1),nh(w,b),nh(w,x+1))&&sh(nh(w,b+1),nh(w,b),nh(w,x))&&(l=yh(nh(w,b+1),nh(w,b),nh(w,x),nh(w,x+1)),Zr(nh(w,b-1),nh(w,b),l)&&(f=eh(w[b],l))<u&&(u=f,o=l,p=x));if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),b<p?(hh(y,w,b,p+1),y.push(l),S.push(l),0!==m&&hh(S,w,m,w.length),hh(S,w,0,b+1)):(0!==b&&hh(y,w,b,w.length),hh(y,w,0,p+1),y.push(l),S.push(l),hh(S,w,m,b+1));else{if(m>p&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(x=m;x<=p;++x)Qr(nh(w,b-1),nh(w,b),nh(w,x))&&sh(nh(w,b+1),nh(w,b),nh(w,x))&&(f=eh(nh(w,b),nh(w,x)))<d&&ch(w,b,x)&&(d=f,g=x%t.length);b<g?(hh(y,w,b,g+1),0!==g&&hh(S,w,g,v.length),hh(S,w,0,b+1)):(0!==b&&hh(y,w,b,v.length),hh(y,w,0,g+1),hh(S,w,g,b+1))}return y.length<S.length?(Sh(y,s,i,e,n,r,h),Sh(S,s,i,e,n,r,h)):(Sh(S,s,i,e,n,r,h),Sh(y,s,i,e,n,r,h)),s}return s.push(t),s},wh=function(t,s){for(var i=0,e=t.length-1;t.length>3&&e>=0;--e)ih(nh(t,e-1),nh(t,e),nh(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},vh=function(t,s){for(var i=t.length-1;i>=1;--i)for(var e=t[i],n=i-1;n>=0;--n)xh(e,t[n],s)&&t.splice(i,1)},bh=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},xh=function(t,s,i){return bh(t[0],s[0],i)&&bh(t[1],s[1],i)};xt=[],Tt=[],Mt=[],Gt=[],self.ws={vs:ph,bs:Sh,xs:gh,Ts:wh,Ms:vh,Gs:oh}}{let Th=!1,Mh=!1,Gh="dev";const _h=Symbol("Construct internal API token");let Ih=16;const Ch=self._s=class{constructor(){throw TypeError("static class can't be instantiated")}static Is(){if(Ih<=0)throw new Error("cannot obtain internal API token");return--Ih,_h}static Cs(){Th=!0}static Ps(){return Th}static Rs(){Mh=!0}static Es(){return Mh}static As(t){Gh=t}static Fs(){return Gh}static Os(){return"final"===Gh}};Ch.Ds=!1,Ch.Ls=!1,Ch.hardwareConcurrency=navigator.hardwareConcurrency||2,self.ks={}}{const Ph=self._s;Ph.Ns=class{constructor(t){this.Bs=t,this.Us=new Map,this.Vs()}Vs(){let t=this.Bs;(t.startsWith("?")||t.startsWith("#"))&&(t=t.substr(1));const s=t.split("&");for(const t of s)this.Ws(t)}Ws(t){if(!t)return;if(!t.includes("="))return void this.Us.set(t,null);const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Us.set(i,e)}zs(){for(const t of this.Us)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}js(t){return this.Us.has(t)}Hs(t){const s=this.Us.get(t);return void 0===s?null:s}Js(){history.replaceState("",document.title,location.pathname+location.search)}qs(t){this.Bs=t,this.Us.clear(),this.Vs()}},Ph.$s=new Ph.Ns(location.search),Ph.Xs=new Ph.Ns(location.hash),Ph.$s.js("perf")&&(Ph.Ys=!0),"dev"!==Ph.$s.Hs("mode")&&Ph.As("final")}{let Rh=function(t){const s=parseFloat(t);return Fh.get(s)||(s>=13?"11":"NT "+t)};0;const Eh=self._s,Ah="(unknown)";Eh.Ks={Zs:Ah,Qs:Ah,ti:Ah,si:Ah,ii:NaN,ei:Ah,ni:"browser",ri:!0,hi:!1,oi:!1,ai:!1,li:async()=>{}};const Fh=new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]]),Oh=navigator.userAgent,Dh=navigator.userAgentData;if(Dh&&Dh.brands.length>0){let Lh=function(t){let s="",i="",e="",n="";for(const r of t){const t=kh.get(r.brand);!s&&t&&(s=t,i=r.version);const h=Nh.get(r.brand);!e&&h&&(e=h,n=r.version)}s||"Chromium"!==e||(Eh.Ks.ti="Chromium",Eh.Ks.si=n),Eh.Ks.ti=s||Ah,Eh.Ks.si=i||Ah,Eh.Ks.ei=e||Ah};Eh.Ks.Zs=Dh.platform,Eh.Ks.hi=Dh.mobile,Eh.Ks.ri=!Eh.Ks.hi;const kh=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),Nh=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);Lh(Dh.brands);let Bh=!1;Eh.Ks.li=async()=>{if(!Bh)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);Lh(t.fullVersionList),"Windows"===Eh.Ks.Zs?Eh.Ks.Qs=Rh(t.platformVersion):Eh.Ks.Qs=t.platformVersion,Bh=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let Uh=function(t,s){const i=Array.isArray(t)?t:[t];for(const t of i){const i=t.exec(Oh);if(i){s(i);break}}};Uh(/windows\s+nt\s+([\d\.]+)/i,t=>{Eh.Ks.Zs="Windows";const s=t[1];Eh.Ks.Qs=Rh(s)}),Uh(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{Eh.Ks.Zs="macOS",Eh.Ks.Qs=t[1].replace(/_/g,".")}),Uh(/CrOS/,()=>{Eh.Ks.Zs="Chrome OS"}),Uh(/linux|openbsd|freebsd|netbsd/i,()=>{Eh.Ks.Zs="Linux"}),Uh(/android/i,()=>{Eh.Ks.Zs="Android"}),Uh(/android\s+([\d\.]+)/i,t=>{Eh.Ks.Zs="Android",Eh.Ks.Qs=t[1]}),Eh.Ks.Zs===Ah&&(Uh(/(iphone|ipod|ipad)/i,t=>{Eh.Ks.Zs="iOS"}),Uh([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{Eh.Ks.Zs="iOS",Eh.Ks.Qs=t[1].replace(/_/g,".")}));const Vh=/chrome\//i.test(Oh),Wh=/chromium\//i.test(Oh),zh=/edg\//i.test(Oh),jh=/OPR\//.test(Oh),Hh=/nwjs/i.test(Oh),Jh=/safari\//i.test(Oh),qh=/webkit/i.test(Oh);zh||jh||Uh(/chrome\/([\d\.]+)/i,t=>{Eh.Ks.ti="Chrome",Eh.Ks.si=t[1],Eh.Ks.ei="Chromium"}),Uh(/edg\/([\d\.]+)/i,t=>{Eh.Ks.ti="Edge",Eh.Ks.si=t[1],Eh.Ks.ei="Chromium"}),Uh(/OPR\/([\d\.]+)/,t=>{Eh.Ks.ti="Opera",Eh.Ks.si=t[1],Eh.Ks.ei="Chromium"}),Uh(/chromium\/([\d\.]+)/i,t=>{Eh.Ks.ti="Chromium",Eh.Ks.si=t[1],Eh.Ks.ei="Chromium"}),Uh(/nwjs\/[0-9.]+/i,t=>{Eh.Ks.ti="NW.js",Eh.Ks.si=t[1],Eh.Ks.ei="Chromium",Eh.Ks.ni="nwjs"}),Uh(/firefox\/([\d\.]+)/i,t=>{Eh.Ks.ti="Firefox",Eh.Ks.si=t[1],Eh.Ks.ei="Gecko"}),!Jh||Vh||Wh||zh||jh||Hh||(Eh.Ks.ti="Safari",Eh.Ks.ei="WebKit",Uh(/version\/([\d\.]+)/i,t=>{Eh.Ks.si=t[1]}),Uh(/crios\/([\d\.]+)/i,t=>{Eh.Ks.ti="Chrome for iOS",Eh.Ks.si=t[1]}),Uh(/fxios\/([\d\.]+)/i,t=>{Eh.Ks.ti="Firefox for iOS",Eh.Ks.si=t[1]}),Uh(/edgios\/([\d\.]+)/i,t=>{Eh.Ks.ti="Edge for iOS",Eh.Ks.si=t[1]})),Eh.Ks.ei===Ah&&qh&&(Eh.Ks.ei="WebKit"),"Android"===Eh.Ks.Zs&&"Safari"===Eh.Ks.ti&&(Eh.Ks.ti="Stock");const $h=new Set(["Windows","macOS","Linux","Chrome OS"]).has(Eh.Ks.Zs)||"nwjs"===Eh.Ks.ni;Eh.Ks.ri=$h,Eh.Ks.hi=!$h}"Chrome"===Eh.Ks.ti&&"browser"===Eh.Ks.ni&&/wv\)/.test(Oh)&&(Eh.Ks.ni="webview"),"nwjs"!==Eh.Ks.ni&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(Eh.Ks.ni="webapp"),Eh.Ks.ii=parseFloat(Eh.Ks.si);"macOS"===Eh.Ks.Zs&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&(Eh.Ks.Zs="iOS",Eh.Ks.Qs=Eh.Ks.si,Eh.Ks.ri=!1,Eh.Ks.hi=!0,Eh.Ks.ai=!0),Eh.Ks.oi="macOS"===Eh.Ks.Zs||"iOS"===Eh.Ks.Zs}{let Xh=function(t){return new Promise((s,i)=>{t.onsuccess=()=>s(t.result),t.onerror=()=>i(t.error)})},Yh=function(t){return new Promise((s,i)=>{t.oncomplete=()=>s(),t.onerror=()=>i(t.error),t.onabort=()=>i(t.error)})},Kh=function(t,s){return oo(t,s)},Zh=function(t,s){return oo(t,s,!0)},Qh=function(t){to(t);let s=no.get(t);return s instanceof Promise||(s=ao(t),no.set(t,s),s.catch(s=>no.delete(t))),s},to=function(t){if("string"!=typeof t)throw new TypeError("expected string")},so=function(t,s){const i=t.objectStore(eo).openCursor();return new Promise(t=>{const e=[];i.onsuccess=i=>{const n=i.target.result;if(n){switch(s){case"entries":e.push([n.key,n.value]);break;case"keys":e.push(n.key);break;case"values":e.push(n.value)}n.continue()}else t(e)}})};0;const io=2,eo="keyvaluepairs",no=new Map,ro="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,ho="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function oo(t,s,i=!1,e=!0){const n=await Qh(t);try{return s(n.transaction([eo],i?"readwrite":"readonly"))}catch(n){if(e&&"InvalidStateError"===n.name)return no.delete(t),oo(t,s,i,!1);throw n}}async function ao(t){to(t);const s=indexedDB.open(t,io);return s.addEventListener("upgradeneeded",s=>{try{s.target.result.createObjectStore(eo)}catch(s){console.error(`Failed to create objectstore for database ${t}`,s)}}),Xh(s)}class lo{constructor(t){to(t),this.name=t}async ready(){await Qh(this.name)}set(t,s){return to(t),Zh(this.name,async i=>{const e=Xh(i.objectStore(eo).put(s,t)),n=Yh(i);await Promise.all([n,e])})}get(t){return to(t),Kh(this.name,async s=>{const i=Xh(s.objectStore(eo).get(t)),e=Yh(s),[n,r]=await Promise.all([e,i]);return r})}delete(t){return to(t),Zh(this.name,async s=>{const i=Xh(s.objectStore(eo).delete(t)),e=Yh(s);await Promise.all([e,i])})}clear(){return Zh(this.name,async t=>{const s=Xh(t.objectStore(eo).clear()),i=Yh(t);await Promise.all([i,s])})}keys(){return Kh(this.name,async t=>{let s;s=ho?Xh(t.objectStore(eo).getAllKeys()):so(t,"keys");const i=Yh(t),[e,n]=await Promise.all([i,s]);return n})}values(){return Kh(this.name,async t=>{let s;s=ro?Xh(t.objectStore(eo).getAll()):so(t,"values");const i=Yh(t),[e,n]=await Promise.all([i,s]);return n})}entries(){return Kh(this.name,async t=>{const s=so(t,"entries"),i=Yh(t),[e,n]=await Promise.all([i,s]);return n})}}self.ci=lo}{let uo=function(t){throw new Error(`"${t}" is not implemented`)},co=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},fo=function(t){return"object"==typeof t?new Promise(s=>{const{port1:i,port2:e}=new MessageChannel;e.onmessage=t=>s(t.data),i.postMessage(t)}):Promise.resolve(t)};0;const po=self.ci,mo=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];class go{constructor(t){this.fi=t,this.di=!this.fi,this.di||"undefined"!=typeof indexedDB||(this.di=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.pi=new Map}mi(t){if(!this.di)for(const s of mo)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.di=!0;break}}async gi(t){const s=this.pi.get(t),i=await fo(s);return void 0===i?null:i}async yi(t,s){s=await fo(s),this.pi.set(t,s)}Si(t){this.pi.delete(t)}wi(){this.pi.clear()}bi(){return Array.from(this.pi.keys())}xi(){return this.di}Ti(){return this.pi}Mi(t){this.pi=t}async getItem(t,s){if(co(s),this.di)return await this.gi(t);let i;try{i=await this.fi.get(t)}catch(s){return this.mi(s),this.di?await this.gi(t):(console.error(`Error reading '${t}' from storage, returning null: `,s),null)}return void 0===i?null:i}async setItem(t,s,i){if(co(i),void 0===s&&(s=null),this.di)await this.yi(t,s);else try{await this.fi.set(t,s)}catch(i){if(this.mi(i),!this.di)throw i;await this.yi(t,s)}}async removeItem(t,s){if(co(s),this.di)this.Si(t);else try{await this.fi.delete(t)}catch(s){this.mi(s),this.di?this.Si(t):console.error(`Error removing '${t}' from storage: `,s)}}async clear(t){if(co(t),this.di)this.wi();else try{await this.fi.clear()}catch(t){this.mi(t),this.di?this.wi():console.error("Error clearing storage: ",t)}}async keys(t){if(co(t),this.di)return this.bi();let s=[];try{s=await this.fi.keys()}catch(t){if(this.mi(t),this.di)return this.bi();console.error("Error getting storage keys: ",t)}return s}ready(t){return co(t),this.di?Promise.resolve(!0):this.fi.ready()}Gi(t){if(t._i)return new go(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new po(s);return new go(i)}}length(t){uo("localforage.length()")}key(t,s){uo("localforage.key()")}iterate(t,s){uo("localforage.iterate()")}Ii(t){uo("localforage.setDriver()")}config(t){uo("localforage.config()")}Ci(t){uo("localforage.defineDriver()")}Pi(){uo("localforage.driver()")}supports(t){uo("localforage.supports()")}dropInstance(){uo("localforage.dropInstance()")}}self.localforage=new go(new po("localforage"))}{const yo=self._s;if(yo.Ri={},yo.Ri.Ei=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");return void 0!==t.animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),yo.Ri.Ai="undefined"!=typeof HTMLDialogElement,yo.Ri.Fi=!!self.requestIdleCallback,yo.Ri.ImageBitmap=!!self.createImageBitmap,yo.Ri.ImageBitmapOptions=!1,yo.Ri.Oi=!1,yo.Ri.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{yo.Ri.ImageBitmapOptions=!0}).catch(()=>{yo.Ri.ImageBitmapOptions=!1})}catch(So){yo.Ri.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{yo.Ri.Oi=10===t.width&&10===t.height}).catch(()=>{yo.Ri.Oi=!1})}catch(wo){yo.Ri.Oi=!1}}if(yo.Ri.Di=!(!navigator.clipboard||!navigator.clipboard.readText),yo.Ri.Li=!(!navigator.permissions||!navigator.permissions.query),yo.Ri.ki=!1,yo.Ri.Li){const vo={name:"clipboard-read"};navigator.permissions.query(vo).then(()=>{yo.Ri.ki=!0}).catch(()=>{yo.Ri.ki=!1})}yo.Ri.Ni=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),yo.Ri.Bi="undefined"!=typeof Proxy,yo.Ri.Ui="undefined"!=typeof document&&void 0!==document.createElement("a").download,yo.Ri.Vi="function"==typeof fetch,yo.Ri.Wi=!!(self.isSecureContext&&"Opera"!==yo.Ks.ti&&navigator.storage&&navigator.storage.persist),yo.Ri.zi=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),yo.Ri.ji=(()=>{if("undefined"==typeof document)return!1;if("iOS"===yo.Ks.Zs)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),yo.Ri.ImageDecoder=void 0!==self.ImageDecoder,yo.Ri.Hi=!!self.VideoEncoder,yo.Ri.Ji=!!self.showOpenFilePicker,yo.Ri.$i=!!self.queryLocalFonts,yo.Ri.UserActivation=!!navigator.userActivation,yo.Ri.Xi=!1,(async()=>{let t;"undefined"==typeof document?t=new OffscreenCanvas(32,32):(t=document.createElement("canvas"),t.width=32,t.height=32);const s=t.getContext("2d");s.fillStyle="blue",s.fillRect(0,0,32,32);let i=null;try{t.convertToBlob?i=await t.convertToBlob({type:"image/webp",quality:1}):t.toBlob&&(i=await new Promise(s=>t.toBlob(s,"image/webp",1))),yo.Ri.Xi=i&&"image/webp"===i.type}catch(t){yo.Ri.Xi=!1}})()}{const bo=self._s;String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(bo.Yi(t),"g"),s)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((t,s)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((s,i)=>t({usage:s,quota:i}),s))})}{let xo=function(t){let s="Assertion failure: "+t+"\n\nStack trace:\n"+To.Ki();console.error(s)};0;const To=self._s;self.assert=function(t,s){t||xo(s)}}{const Mo=self._s,Go=self.ks;Mo.Zi=function(t){return"number"==typeof t},Mo.Qi=function(t){return Mo.Zi(t)&&isFinite(t)},Mo.te=function(t){if(!Mo.Zi(t))throw new TypeError("expected number")},Mo.se=function(t){Mo.ie(t)},Mo.ee=function(t,s,i){if(!Mo.Zi(t)||isNaN(t)||s>t||i<t)throw new RangeError("number outside of range")},Mo.ne=function(...t){for(let s of t);},Mo.re=function(t){if(!Mo.Qi(t))throw new TypeError("expected finite number")},Mo.he=function(t){Mo.ie(t)},Mo.oe=function(...t){for(let s of t);},Mo.ae=function(t){return"string"==typeof t},Mo.le=function(t){if(!Mo.ae(t))throw new TypeError("expected string")},Mo.ue=function(t){Mo.ie(t)},Mo.ce=function(...t){for(let s of t);},Mo.fe=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},Mo.de=function(t){if(!Mo.fe(t))throw new TypeError("expected simple object")},Mo.pe=function(t){if(!Mo.ie(t)&&!Mo.fe(t))throw new TypeError("expected simple object")},Mo.me=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},Mo.ge=function(t){if(!Mo.me(t))throw new TypeError("expected object")},Mo.ye=function(t){Mo.ie(t)},Mo.Se=function(...t){for(let s of t);},Mo.we=function(t){return Mo.ve(t,Blob)&&"string"==typeof t.name},Mo.be=function(t){if(!Mo.we(t))throw new TypeError("expected file")},Mo.xe=function(t){Mo.ie(t)},Mo.Te=function(t){return Array.isArray(t)},Mo.Me=function(t){if(!Mo.Te(t))throw new TypeError("expected array")},Mo.Ge=function(t){Mo.ie(t)},Mo._e=function(...t){for(let s of t);},Mo.Ie=function(t){return!(!Mo.Te(t)||t.length&&!Mo.Te(t[0]))},Mo.Ce=function(t){if(!Mo.Ie(t))throw new TypeError("expected 2d array");for(let s of t)if(!Mo.Te(s))throw new TypeError("expected 2d array")},Mo.Pe=function(t){Mo.ie(t)},Mo.Re=function(t){return"function"==typeof t},Mo.Ee=function(t,s){if(!Mo.Re(t))throw new TypeError("expected function");if(!Mo.ie(s)&&t!==s)throw new TypeError("expected same function reference")},Mo.Ae=function(t){Mo.ie(t)},Mo.Fe=function(...t){for(let s of t);},Mo.Oe=function(t,...s){if(!Mo.Re(t))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let i of s)if(!Mo.ie(i)&&t===i)return;throw new TypeError("expected same function reference")},Mo.De=function(...t){if(!Mo.ie(t))for(let s of t);},Mo.Le=function(t,s){return t instanceof s},Mo.ke=function(t,...s){for(let i of s)if(Mo.Le(t,i))return!0;return!1},Mo.Ne=function(t,s){if(!Mo.Le(t,s))throw new TypeError("unexpected type")},Mo.Be=function(t,s){Mo.ie(t)},Mo.Ue=function(t,...s){for(let t of s);},Mo.Ve=function(t,...s){if(!Mo.ke(t,...s))throw new TypeError("unexpected type")},Mo.We=function(t,...s){if(!Mo.ie(t)&&!Mo.ke(t,...s))throw new TypeError("unexpected type")},Mo.ze=function(t,s){for(let i of t)if(!Mo.Le(i,s))return!1;return!0},Mo.je=function(t){for(let s of t)if(!Mo.Qi(s))return!1;return!0},Mo.He=function(t,s){for(let s of t);},Mo.Je=function(t,s){if(!Mo.ie(t))for(let s of t);},Mo.qe=function(t,s){if(!Mo.ie(t))for(let s of t);},Mo.$e=function(t,...s){for(let s of t);},Mo.Xe=function(t,...s){if(!Mo.ie(t))for(let s of t);},Mo.Ye=function(t,s){return!(Mo.ie(t)||!Mo.ae(t.nodeName))&&(!s||Mo.Ke(t.nodeName,s))},Mo.Ze=function(t,s){if(Mo.ie(t)||!Mo.ae(t.nodeName))throw new TypeError("expected DOM node");if(s&&!Mo.Ke(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},Mo.Qe=function(t,s){Mo.ie(t)},Mo.tn=function(t,s){return!(Mo.ie(t)||!Mo.ae(t.tagName))&&(!s||Mo.Ke(t.tagName,s))},Mo.sn=function(t,s){if(Mo.ie(t)||!Mo.ae(t.tagName))throw new TypeError("expected HTML element");if(s&&!Mo.Ke(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},Mo.en=function(t,s){Mo.ie(t)},Mo.nn=function(t){return Mo.tn(t,"img")||Mo.tn(t,"canvas")||Mo.tn(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},Mo.rn=function(t){if(!Mo.nn(t))throw new TypeError("expected drawable")},Mo.hn=function(t){Mo.ie(t)},Mo.an=function(t){return t instanceof ImageData||Mo.nn(t)},Mo.ln=function(t){if(!Mo.an(t))throw new TypeError("expected drawable or image data")},Mo.un=function(t){if(!Mo.ie(t)&&!Mo.an(t))throw new TypeError("expected drawable or image data")},Mo.cn=function(t){return"string"==typeof t||Mo.fn&&t instanceof Mo.fn||t instanceof Mo.dn},Mo.pn=function(t){if(!Mo.cn(t))throw new TypeError("expected string-like")},Mo.mn=function(t){Mo.ie(t)},Mo.gn=function(...t){for(let s of t);},Mo.yn=function(){throw new Error("must be overridden")},Mo.Sn=function(){throw new Error("not yet implemented")},Mo.wn=function(t){return t.constructor===function*(){}.constructor},Mo.vn=function(t){if(!Mo.wn(t))throw new Error("expected generator function")},Mo.bn=function(t){return"function"===t[Symbol.iterator]},Mo.xn=function(t){if(!Mo.bn(t))throw new Error("expected iterable")},Mo.Tn=function(t){return!Mo.ie(t)},Mo.ie=function(t){return null==t},Mo.Mn=function(t){let s=t[0].constructor;for(let i of t)if(i.constructor!==s)return!1;return s},Mo.Gn=function(t,s){for(let i of t)if(!(i instanceof s))return!1;return!0};const _o=Object.getPrototypeOf(Uint8Array);Mo._n=function(t){return Mo.Le(t,_o)},Mo.In=function(t){},Mo.Cn=function(t){Mo.Pn(t,_o)},Mo.Rn=function(t,...s){if(!Mo.En(t,...s))throw new TypeError("unexpected type")},Mo.En=function(t,...s){for(const i of s)if(Mo.ve(t,i))return!0;return!1},Mo.Pn=function(t,s){if(!Mo.ve(t,s))throw new TypeError("unexpected type")},Mo.ve=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},Go.te=Mo.te,Go.se=Mo.se,Go.re=Mo.re,Go.he=Mo.he,Go.le=Mo.le,Go.ue=Mo.ue,Go.ge=Mo.ge,Go.ye=Mo.ye,Go.Me=Mo.Me,Go.Ge=Mo.Ge,Go.Ee=Mo.Ee,Go.Ae=Mo.Ae,Go.Ne=Mo.Ne,Go.Be=Mo.Be,Go.ie=Mo.ie}{let Io=function(t,s){let i=Ao.getType(t),e=Ao.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},Co=function(t){console.warn("[Defence] "+t+" @",Ao.Ki())},Po=function(){if(Uo=-1,Do.size>0||Lo.size>0){let t=[...new Set([...Do.keys()].map(t=>Ao.getName(t)))].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`),Do.clear(),Lo.clear()}},Ro=function(t){let s=new Set;for(let i in t)s.add(i);return s},Eo=function(t,s){let i=Ro(s),e=Vo.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);Ao.An(s,[...i]),s.length&&console.warn(`[Defence] '${Ao.getName(t)}' constructor creates inconsistent properties: ${s.join(", ")}`)}else Vo.set(t,i)};0;const Ao=self._s,Fo=new Map;let Oo;Ao.Fn=function(t,s){console.log(`%c${t}`,`font-weight: bold; color:${s}`)},Ao.On=function(t,...s){Fo.has(t)||Fo.set(t,-1),-1===Fo.get(t)&&Fo.set(t,requestAnimationFrame(()=>{console.log(`%c${t}`,"font-weight: bold",...s),Fo.set(t,-1)}))},Ao.Dn=function(t){performance.mark(t),Oo||(Oo=new Map),Oo.has(t)||Oo.set(t,{Ln:0,total:0,kn:0,Nn:1,toString:function(){return`${t} :: current => ${this.Ln.toPrecision(3)} :: average => ${this.kn.toPrecision(3)} :: calls => ${this.Nn}`}})},Ao.Bn=function(t){performance.measure(`measure-${t}`,t);const s=performance.getEntriesByName(`measure-${t}`)[0],i=Oo.get(t);i.Ln=s.duration,i.total+=i.Ln,i.kn=i.total/i.Nn,console.log(i.toString()),i.Nn++,performance.clearMarks(t),performance.clearMeasures(`measure-${t}`)},Ao.Ki=function(){return(new Error).stack},Ao.Un=function(){},Ao.cast=function(t,s){return t&&t instanceof s?t:null},Ao.getName=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":Ao.Zi(t)?"<number>":Ao.ae(t)?"<string>":Ao.Te(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":Ao.Re(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},Ao.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},Ao.range=function*(t,s){if(!isFinite(Math.abs(t-s)))throw new Error("Invalid parameters");if(t>s)for(let i=t-1;i>=s;i--)yield i;else for(let i=t;i<s;i++)yield i};let Do=new Map,Lo=new Map,ko=new WeakMap,No=new WeakMap;Ao.Vn={};const Bo=new Set(["then","splice"]);Ao.Vn.get=function(t,s){return s in t||"symbol"==typeof s||Bo.has(s)||Co(`Accessed missing property '${s}' from defended object '${Ao.getName(t)}', returning undefined`),No.has(t)&&"symbol"!=typeof s&&!Bo.has(s)&&Co(`Accessed property '${s}' on a released object '${Ao.getName(t)}'\nObject was originally released at: ${No.get(t)})\nCall stack at access: `),t[s]},Ao.Vn.set=function(t,s,i){return s in t||Do.has(t)||Co(`Set non-existent property '${s}' to '${i}' on defended object '${Ao.getName(t)}'`),Io(t[s],i)||Do.has(t)||Co(`Set '${Ao.getType(t[s])}' property '${s}' to type '${Ao.getType(i)}' on defended object '${Ao.getName(t)}'`),No.has(t)&&Co(`Set property '${s}' on a released object '${Ao.getName(t)}'\nObject was originally released at: ${No.get(t)})\nCall stack at access: `),t[s]=i,!0},Ao.Vn.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${Ao.getName(t)}'`)},Ao.Vn.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${Ao.getName(t)}'`)},Ao.Vn.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${Ao.getName(t)}'`)};let Uo=-1;Ao.Wn=class{constructor(){if(!Ao.Ls||!Ao.Ri.Bi)return;let t=new.target,s=Object.create(t.prototype),i=new Proxy(s,Ao.Vn);return Do.set(s,i),Lo.set(i,s),ko.set(i,s),-1===Uo&&(Uo=requestAnimationFrame(Po)),i}},Ao.zn=function(t){if(Ao.Ls&&Ao.Ri.Bi&&t instanceof Ao.Wn){if(!Lo.has(t))return t;let s=Lo.get(t);return Lo.delete(t),Do.delete(s),t}return Ao.Ds?Object.seal(t):t},Ao.jn=function(t,...s){let i;try{i=new t(...s)}catch(t){throw Lo.clear(),Do.clear(),t}return Ao.Ls&&Eo(t,i),Ao.zn(i)},Ao.Hn=function(t){let s=ko.get(t);s&&No.set(s,Ao.Ki())},Ao.Jn=function(t){let s=ko.get(t);return!!s&&!!No.get(s)};let Vo=new Map;Ao.qn=class{constructor(t){this.$n="",t&&this.start(t)}start(t){Ao.Ys&&(this.$n=t,performance.mark(this.$n+"-Start"))}end(){Ao.Ys&&(performance.mark(this.$n+"-End"),performance.measure(this.$n,this.$n+"-Start",this.$n+"-End"))}next(t){Ao.Ys&&(this.end(),this.$n=t,performance.mark(this.$n+"-Start"))}}}{let Wo=function(t){return 0===t&&1/t<0};0;const zo=self._s,jo=2*Math.PI,Ho=Math.PI/180,Jo=180/Math.PI;zo.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0===e)return i;if(t<s){const n=i-(s-t)%e;return n===i?0:n}return s+(t-s)%e},zo.Xn=function(t,s,i,e,n){const r=i-s;return 0===r&&0===e?t:(t-s)*(n-e)/r+e},zo.normalize=function(t,s,i){return s-i===0?1:(t-s)/(i-s)},zo.Yn=function(t,s,i){return t<s?s:t>i?i:t},zo.Kn=function(t){return(t%=jo)<0&&(t+=jo),t},zo.Zn=function(t){return t*Ho},zo.Qn=function(t){return t*Jo},zo.tr=function(t,s){return Math.sqrt(t*t+s*s)},zo.sr=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},zo.ir=function(t,s,i,e){return zo.tr(i-t,e-s)},zo.er=function(t,s,i,e){const n=i-t,r=e-s;return n*n+r*r},zo.nr=function(t,s,i,e){return Math.atan2(e-s,i-t)},zo.rr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),n=i*Math.sin(s)+e*Math.cos(s);return n>=1?0:n<=-1?Math.PI:Math.acos(n)},zo.hr=function(t,s,i){let e=Math.sin(t),n=Math.cos(t),r=Math.sin(s),h=Math.cos(s);return Math.acos(e*r+n*h)>i?n*r-e*h>0?zo.Kn(t+i):zo.Kn(t-i):zo.Kn(s)},zo.ar=function(t,s){let i=Math.sin(t);return Math.cos(t)*Math.sin(s)-i*Math.cos(s)<=0},zo.lr=function(t,s,i,e=0){let n=zo.rr(t,s);const r=jo*e;return zo.ar(s,t)?zo.Kn(t+(n+r)*i):zo.Kn(t-(n+r)*i)},zo.ur=function(t,s,i,e=0){const n=zo.rr(t,s),r=jo*e;return zo.ar(s,t)?zo.Kn(t+(n+r)*i):zo.Kn(t+(jo-n+r)*i)},zo.cr=function(t,s,i,e=0){const n=zo.rr(t,s),r=jo*e;return zo.ar(s,t)?zo.Kn(t-(-jo+n-r)*i):zo.Kn(t-(n+r)*i)},zo.dr=function(t,s){const i=zo.rr(t,s);return zo.ar(t,s)?zo.Kn(s-i):zo.Kn(s+i)},zo._t=function(t,s,i){return t+i*(s-t)},zo.pr=function(t,s,i){return t===s?0:(i-t)/(s-t)},zo.mr=function(t,s,i,e,n){return zo._t(e,n,zo.pr(t,s,i))},zo.gr=function(t,s,i,e){return zo._t(zo._t(t,s,e),zo._t(s,i,e),e)},zo.yr=function(t,s,i,e,n){return zo._t(zo.gr(t,s,i,n),zo.gr(s,i,e,n),n)},zo.Sr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},zo.wr=function(t){return t>0&&!(t-1&t)},zo.vr=function(t){--t;for(let s=1;s<32;s<<=1)t|=t>>s;return t+1},zo.br=function(t,s){return Math.round(t*s)/s},zo.Tr=function(t,s){return Math.floor(t*s)/s},zo.Mr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},zo.Gr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},zo.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;e>=0&&"0"===i.charAt(e);--e);return e>=0&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},zo._r=function(t,s,i){return zo.Yn(t,0,255)|zo.Yn(s,0,255)<<8|zo.Yn(i,0,255)<<16};zo.Ir=function(t,s,i,e){return(t=zo.Yn(Math.floor(1024*t),-8192,8191))<0&&(t+=16384),(s=zo.Yn(Math.floor(1024*s),-8192,8191))<0&&(s+=16384),(i=zo.Yn(Math.floor(1024*i),-8192,8191))<0&&(i+=16384),-(16384*t*16384*1024+16384*s*1024+1024*i+(e=zo.Yn(Math.floor(1023*e),0,1023)))},zo.Cr=function(t,s,i){return zo.Ir(t,s,i,1)},zo.Pr=function(t){if(t>=0)return(255&t)/255;{let s=Math.floor(-t/274877906944);return s>8191&&(s-=16384),s/1024}},zo.Rr=function(t){if(t>=0)return((65280&t)>>8)/255;{let s=Math.floor(-t%274877906944/16777216);return s>8191&&(s-=16384),s/1024}},zo.Er=function(t){if(t>=0)return((16711680&t)>>16)/255;{let s=Math.floor(-t%16777216/1024);return s>8191&&(s-=16384),s/1024}},zo.Ar=function(t){return Wo(t)?0:t>=0?1:Math.floor(-t%1024)/1023},zo.Fr=function(t,s){for(t=Math.floor(t),s=Math.floor(s);0!==s;){let i=s;s=t%s,t=i}return t};const qo=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];zo.Or=function(t,s){if((t=Math.floor(t))===(s=Math.floor(s)))return[1,1];for(let i of qo){let e=t/i[0]*i[1];if(Math.abs(s-e)<1)return i.slice(0);if(e=t/i[1]*i[0],Math.abs(s-e)<1)return[i[1],i[0]]}let i=zo.Fr(t,s);return[t/i,s/i]},zo.Dr=function(t,s,i,e,n,r,h,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(n,h),c=Math.max(n,h);if(l<u||a>c)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||f>m)return!1;const g=n-t+h-i,y=r-s+o-e,S=i-t,w=e-s,v=h-n,b=o-r,x=Math.abs(w*v-b*S),T=v*y-b*g;if(Math.abs(T)>x)return!1;const M=S*y-w*g;return Math.abs(M)<=x},zo.Lr=function(t,s,i,e,n,r,h,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||n>d)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||h>m)return!1;const g=a-t+u-i,y=l-s+c-e,S=i-t,w=e-s,v=u-a,b=c-l,x=Math.abs(w*v-b*S),T=v*y-b*g;if(Math.abs(T)>x)return!1;const M=S*y-w*g;return Math.abs(M)<=x},zo.kr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=n.Nr(),u=n.Br(),c=n.Ur(),f=n.Vr(),d=n.Wr(),p=n.zr(),m=n.jr(),g=n.Hr();return zo.Lr(t,s,i,e,r,h,o,a,l,u,c,f)||zo.Lr(t,s,i,e,r,h,o,a,c,f,d,p)||zo.Lr(t,s,i,e,r,h,o,a,d,p,m,g)||zo.Lr(t,s,i,e,r,h,o,a,m,g,l,u)},zo.Jr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e);let l=0;for(let u=n.length-4;l<=u;l+=2)if(zo.Lr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[l+2],n[l+3]))return!0;return zo.Lr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[0],n[1])};zo.qr=function(t,s,i,e,n,r,h,o){const a=i-t,l=o-r,u=a*l-(e-s)*(h-n);if(0===u)return 2;const c=((s-e)*(h-t)+a*(o-s))/u;return 0<c&&c<1.000001?(l*(h-t)+(n-h)*(o-s))/u:2},zo.$r=function(t,s,i,e,n,r,h,o,a){const l=(h-n)*a,u=(o-r)*a;return zo.qr(t,s,i,e,n-l,r-u,h+l,o+u)},zo.Xr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,S=u*f+c*d,w=1/(p*y-m*m),v=(y*g-m*S)*w,b=(p*S-m*g)*w;return v>=0&&b>=0&&v+b<=1},zo.Yr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,S=f*u+d*c,w=p*g-m*m,v=(g*y-m*S)/w,b=(p*S-m*y)/w;return[1-v-b,v,b]},zo.Kr=function(t,s,i,e,n,r,h,o,a,l,u,c){return[t*e+s*h+i*l,t*n+s*o+i*u,t*r+s*a+i*c]}}{const $o=self._s;let Xo=null,Yo="";if("undefined"!=typeof document){Xo=document;const ia=document.querySelector("base");Yo=ia&&ia.hasAttribute("href")?ia.getAttribute("href"):"",Yo&&(Yo.startsWith("/")&&(Yo=Yo.substr(1)),Yo.endsWith("/")||(Yo+="/"))}$o.Zr=function(){return Yo},$o.Qr=function(){if(!Xo)return"";const t=Xo.location;return $o.th(t.origin+t.pathname)+Yo},$o.th=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},$o.sh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},$o.ih=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},$o.eh=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},$o.nh=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},$o.rh=function(t){return t.replace(/\\/g,"/")},$o.hh=function(t,s){return s===(t?$o.ih(t).slice(1):"")},$o.oh=function(t,s){let i,e;return $o.we(t)&&(i=$o.nh(t.name)),$o.ae(t)&&(i=$o.nh(t)),$o.we(s)&&(e=$o.nh(s.name)),$o.ae(s)&&(e=$o.nh(s)),i===e},$o.ah=function(t){t=$o.rh(t);let s=/^\w\:\//.exec(t);s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=t.replace(/\/{2,}/g,"/")).length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));const i=t.lastIndexOf("/")+1;let e,n="",r=t,h="";i>0&&(n=t.slice(0,i),r=t.slice(i)),e=r;const o=r.lastIndexOf(".");return o>0&&(h=r.slice(o),e=r.slice(0,-h.length)),{dir:n,uh:r,name:e,root:s,ext:h,fh:s+n+r}},$o.dh=function(t,s){return new Promise((i,e)=>{self.setTimeout(i,t,s)})},$o.ph=function(t){try{t()}catch(t){$o.Ds&&console.warn("Swallowed exception: ",t)}},$o.mh=function(){},$o.Ke=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},$o.gh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},$o.yh=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},$o.Sh=function(t,s){t.length=s},$o.wh=function(t){t&&0!==t.length&&$o.Sh(t,0)},$o.bh=function(t){if(t){for(let s=0;s<t.length;s++){let i=t[s];$o.Sh(i,0)}$o.Sh(t,0)}},$o.xh=function(t,s,i){s|=0;const e=t.length;if(!(s<=e))for(let n=e;n<s;++n)t.push(i)},$o.Th=function(t,s,i){s|=0;const e=t.length;s<e?$o.Sh(t,s):s>e&&$o.xh(t,s,i)},$o.Mh=function(t,s){$o.wh(t),$o.An(t,s)},$o.An=function(t,s){if(s.length<1e4)t.push(...s);else for(let i=0,e=s.length;i<e;++i)t.push(s[i])},$o.Gh=function(t,s){if((s=Math.floor(s))<0||s>=t.length)return;let i=t.length-1;for(let e=s;e<i;++e)t[e]=t[e+1];$o.Sh(t,i)},$o._h=function(t,s){let i=t.indexOf(s);i>=0&&t.splice(i,1)},$o.Ih=function(t,s){let i=t.length;if(s.length!==i)return!1;for(let e=0;e<i;++e)if(t[e]!==s[e])return!1;return!0},$o.Ch=function(t,s){let i=[],e=0;for(let n=0,r=t.length;n<r;++n){let r=t[n];s(r)?i.push(r):(t[e]=r,++e)}return $o.Sh(t,e),i},$o.Ph=function(t,s){const i=t.length;let e=0;for(let i=0,n=t.length;i<n;++i){let n=t[i];s.has(n)||(t[e++]=n)}return $o.Sh(t,e),i-e},$o.Rh=function(t,s){return t===Math.floor(t)&&t>=0&&t<s.length},$o.Eh=function(t,s){if(!$o.Rh(t,s))throw new RangeError("array index out of bounds")},$o.Ah=function(t){return t.slice()},$o.Fh=function(t,s){let i=[];for(let e of t)if($o.me(e)){let t=s(e);if(!t)throw new Error("missing clone");if(t.constructor!==e.constructor)throw new Error("object is not a clone");i.push(t)}else $o.Te(e)?i.push($o.Fh(e,s)):i.push(e);return i},$o.Oh=function(t){let s=[];for(let i of t)s.push(i.slice());return s},$o.Dh=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},$o.Lh=function(t,s,i){const e=new Set;for(const n of t.values())s(n)&&(i?e.add(i(n)):e.add(n));return e},$o.kh=function(t,s){return t.union?t.union(s):new Set([...t,...s])},$o.Nh=function(t,s){for(const i of s)t.add(i);return t},$o.Bh=function(t){for(let s of t)return s;return null},$o.xor=function(t,s){return!t!=!s},$o.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return t>i;case 5:return t>=i;default:return!1}},$o.Uh=function(t){for(let s in t)if(t.hasOwnProperty(s))return!0;return!1},$o.Vh=function(t,s){return t.length?new Promise((i,e)=>{const n=[];let r=0,h=!1;for(let o=0,a=t.length;o<a;++o)n.push(void 0),t[o].then(e=>{h||(n[o]=e,++r,r===t.length?i(n):s(r,t.length))}).catch(t=>{h=!0,e(t)})}):Promise.resolve([])};let Ko=[];$o.Wh=function(t){Ko.push(t)},$o.zh=function(){let t=0;for(let s of Ko)t+=s();return Math.floor(t)};let Zo=1;const Qo=new Map,ta=new MessageChannel;ta.port2.onmessage=function(t){const s=t.data,i=Qo.get(s);Qo.delete(s),i&&i(performance.now())},$o.jh=function(t){const s=Zo++;return Qo.set(s,t),ta.port1.postMessage(s),s},$o.Hh=function(t){Qo.delete(t)},$o.Jh=$o.jh,$o.qh=function(){return new Promise(t=>$o.Jh(t))};const sa=new Set;$o.$h=function(t){const s=self.requestAnimationFrame(async i=>{await $o.qh(),sa.has(s)&&(sa.delete(s),t(i))});return sa.add(s),s},$o.Xh=function(t){sa.has(t)&&(self.cancelAnimationFrame(t),sa.delete(t))}}{const ea=self._s;ea.Yh=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},ea.Kh=function(t){return!ea.Yh(t)},ea.Zh=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`)},ea.Qh=function(t,s){return fetch(t,s).then(t=>(ea.Zh(t),t))},ea.so=function(t){return ea.Qh(t).then(t=>t.text())},ea.io=function(t){return ea.Qh(t).then(t=>t.json())},ea.eo=function(t){return ea.Qh(t).then(t=>t.blob())},ea.no=function(t){return ea.Qh(t).then(t=>t.arrayBuffer())},ea.ro=function(t){return new Promise((s,i)=>{const e=new Image;e.onload=()=>s(e),e.onerror=t=>i(t),e.src=t})},ea.ho=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsArrayBuffer(t)})},ea.oo=function(t){return"function"==typeof t.text?t.text():new Promise((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsText(t)})},ea.ao=function(t){return ea.oo(t).then(t=>JSON.parse(t))},ea.lo=async function(t,s){let i=URL.createObjectURL(t);try{const t=await ea.ro(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof t.decode&&await t.decode(),t}finally{i&&URL.revokeObjectURL(i)}},ea.uo=function(t,s){if("undefined"!=typeof document&&"function"==typeof document.createElement){const i=document.createElement("canvas");return i.width=t,i.height=s,i}return new OffscreenCanvas(t,s)},ea.co=function(t,s,i){if("number"!=typeof i&&(i=1),s=s||"image/png",i=ea.Yn(i,0,1),t.convertToBlob)return t.convertToBlob({type:s,quality:i});if(t.toBlob)return new Promise(e=>t.toBlob(e,s,i));throw new Error("could not convert canvas to blob")},ea.fo=function(t,s,i){const e=ea.uo(t.width,t.height);return e.getContext("2d").drawImage(t,0,0),ea.co(e,s,i)},ea.do=function(t,s,i){if(ea.Ri.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>ea.fo(t,s,i));if(ea.Ri.ImageBitmap)return createImageBitmap(t).then(t=>ea.fo(t,s,i));{const e=ea.uo(t.width,t.height);return e.getContext("2d").putImageData(t,0,0),ea.co(e,s,i)}},ea.po=function(t,s){t.clear();for(const i of s)t.add(i)},ea.mo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},ea.yo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},ea.So=function t(s){if("object"==typeof s&&null!==s){if(s instanceof Set)return{_c3type_:"set",data:[...s].map(s=>t(s))};if(s instanceof Map)return{_c3type_:"map",data:[...s].map(s=>[s[0],t(s[1])])};{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},ea.wo=function t(s){if("object"==typeof s&null!==s){if("set"===s._c3type_)return new Set(s.data.map(s=>t(s)));if("map"===s._c3type_)return new Map(s.data.map(s=>[s[0],t(s[1])]));{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},ea.vo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const n of t)"-"===n?e>0&&(i=!0):i?(s+=n.toUpperCase(),i=!1):s+=n,++e;return s},ea.bo=function(t){return"object"==typeof t&&"function"==typeof t.next},ea.xo=function(t,s){const i=[];if("function"==typeof s)for(let e=0;e<t;++e)i.push(s());else for(let e=0;e<t;++e)i.push(s);return i}}{let na=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},ra=function(t,s,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};0;const ha=self._s,oa=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,aa=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;ha.To=class{constructor(t,s,i,e){this.Mo=NaN,this.Go=NaN,this._o=NaN,this.Io=NaN,this.Mo=0,this.Go=0,this._o=0,this.Io=0,t instanceof ha.To?this.set(t):this.Co(t||0,s||0,i||0,e||0)}Po(t,s,i){return this.Mo=+t,this.Go=+s,this._o=+i,this.Yn(),this}Co(t,s,i,e){return this.Mo=+t,this.Go=+s,this._o=+i,this.Io=+e,this.Yn(),this}set(t){return this.Mo=t.Mo,this.Go=t.Go,this._o=t._o,this.Io=t.Io,this}m(t){return this.set(t)}add(t){this.Mo+=t.Mo,this.Go+=t.Go,this._o+=t._o,this.Io+=t.Io,this.Yn()}Ro(t,s,i,e=0){this.Mo+=+t,this.Go+=+s,this._o+=+i,this.Io+=+e,this.Yn()}Eo(t){this.Ao(Math.max(this.Mo,t.Mo)-Math.min(this.Mo,t.Mo)),this.Fo(Math.max(this.Go,t.Go)-Math.min(this.Go,t.Go)),this.Oo(Math.max(this._o,t._o)-Math.min(this._o,t._o)),this.Do(Math.max(this.Io,t.Io)-Math.min(this.Io,t.Io)),this.Yn()}Lo(t){this.Mo=t.Mo,this.Go=t.Go,this._o=t._o}Ao(t){this.Mo=ha.Yn(+t,0,1)}ko(){return this.Mo}Fo(t){this.Go=ha.Yn(+t,0,1)}No(){return this.Go}Oo(t){this._o=ha.Yn(+t,0,1)}Bo(){return this._o}Do(t){this.Io=ha.Yn(+t,0,1)}Uo(){return this.Io}clone(){return ha.jn(ha.To,this.Mo,this.Go,this._o,this.Io)}toArray(){return[this.Mo,this.Go,this._o,this.Io]}Vo(){return new Float64Array(this.toArray())}Wo(t,s){t[s++]=this.Mo,t[s++]=this.Go,t[s++]=this._o,t[s]=this.Io}zo(t,s){const i=this.Mo,e=this.Go,n=this._o,r=this.Io;for(let h=0;h<4;++h)t[s++]=i,t[s++]=e,t[s++]=n,t[s++]=r}jo(t,s){t[s++]=this.Mo,t[s++]=this.Go,t[s]=this._o}equals(t){return this.Mo===t.Mo&&this.Go===t.Go&&this._o===t._o&&this.Io===t.Io}Ho(t){return this.Mo===t.Mo&&this.Go===t.Go&&this._o===t._o}Jo(t,s,i){return this.Mo===t&&this.Go===s&&this._o===i}qo(t,s,i,e){return this.Mo===t&&this.Go===s&&this._o===i&&this.Io===e}$o(t,s){return t[s]===Math.fround(this.Mo)&&t[s+1]===Math.fround(this.Go)&&t[s+2]===Math.fround(this._o)&&t[s+3]===Math.fround(this.Io)}Xo(t,s){return t[s]===Math.fround(this.Mo)&&t[s+1]===Math.fround(this.Go)&&t[s+2]===Math.fround(this._o)}multiply(t){this.Mo*=t.Mo,this.Go*=t.Go,this._o*=t._o,this.Io*=t.Io}Yo(t){this.Mo*=t,this.Go*=t,this._o*=t,this.Io*=t}Ko(){return this.Mo*=this.Io,this.Go*=this.Io,this._o*=this.Io,this}Zo(){return this.Mo/=this.Io,this.Go/=this.Io,this._o/=this.Io,this}Yn(){return this.Mo=ha.Yn(this.Mo,0,1),this.Go=ha.Yn(this.Go,0,1),this._o=ha.Yn(this._o,0,1),this.Io=ha.Yn(this.Io,0,1),this}Qo(t){this.Mo=ha.Pr(t),this.Go=ha.Rr(t),this._o=ha.Er(t),this.Io=ha.Ar(t)}ta(t,s,i){return`rgb(${100*(ha.Qi(t)?t:this.ko())}%, ${100*(ha.Qi(s)?s:this.No())}%, ${100*(ha.Qi(i)?i:this.Bo())}%)`}sa(t,s,i,e){return`rgba(${100*(ha.Qi(t)?t:this.ko())}%, ${100*(ha.Qi(s)?s:this.No())}%, ${100*(ha.Qi(i)?i:this.Bo())}%, ${ha.Qi(e)?e:this.Uo()})`}ia(t=!1){const s=Math.round(255*this.ko()),i=Math.round(255*this.No()),e=Math.round(255*this.Bo());let n="#"+na(s.toString(16))+na(i.toString(16))+na(e.toString(16));return t&&(n+=na(Math.round(255*this.Uo()).toString(16))),n}ea(t){if("string"!=typeof t)return!1;let s,i,e,n;if("#"===(t=t.trim()).charAt(0)&&(t=t.substr(1)),3===t.length||4===t.length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15,4===t.length&&(n=parseInt(t[3],16)/15);else{if(6!==t.length&&8!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255,8===t.length&&(n=parseInt(t.substr(6,2),16)/255)}return!!(Number.isFinite(s)&&Number.isFinite(i)&&Number.isFinite(e))&&(this.Po(s,i,e),Number.isFinite(n)?this.Do(n):this.Do(1),!0)}na(){return`${Math.round(255*this.ko())}, ${Math.round(255*this.No())}, ${Math.round(255*this.Bo())}`}ra(){return[Math.round(255*this.ko()),Math.round(255*this.No()),Math.round(255*this.Bo())]}ha(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Ao(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Oo(n),this.Do(1),!0}oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Ao(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Oo(n),this.Do(1),!0}aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.Ao(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Oo(n),isFinite(r)&&this.Do(r),!0}la(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.Ao(i),isFinite(e)&&this.Fo(e),isFinite(n)&&this.Oo(n),isFinite(r)&&this.Do(r),!0}ua(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.oa(t):this.ha(t);if(t.startsWith("rgba("))return t.includes("%")?this.la(t):this.aa(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.ca(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.oa(t):4===s.length&&this.la(t):3===s.length?this.ha(t):4===s.length&&this.aa(t)}}return this.ea(t)}toJSON(){return[this.Mo,this.Go,this._o,this.Io]}fa(t,s,i,e){let n,r,h;if(t%=360,s=ha.Yn(s,0,100),i=ha.Yn(i,0,100),e=ha.Yn(e,0,1),t/=360,i/=100,0==(s/=100))n=r=h=i;else{const e=i<.5?i*(1+s):i+s-i*s,o=2*i-e;n=ra(o,e,t+1/3),r=ra(o,e,t),h=ra(o,e,t-1/3)}return this.Ao(n),this.Fo(r),this.Oo(h),this.Do(e),this}ca(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=oa.exec(s),e=aa.exec(s);return i&&4===i.length?(this.fa(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.fa(+i[1],+i[2],+i[3],+i[4]),0))}da(){const t=this.Mo,s=this.Go,i=this._o,e=this.Io;return`hsla(${ha.To.pa(t,s,i)}, ${ha.To.ma(t,s,i)}%, ${ha.To.ga(t,s,i)}%, ${e})`}ya(){const t=this.Mo,s=this.Go,i=this._o;return[ha.To.pa(t,s,i),ha.To.ma(t,s,i),ha.To.ga(t,s,i),this.Io]}Sa(t){Array.isArray(t)&&(t.length<3||(this.Mo=t[0],this.Go=t[1],this._o=t[2],t.length>=4?this.Io=t[3]:this.Io=1))}set r(t){this.Ao(t)}get r(){return this.ko()}set g(t){this.Fo(t)}get g(){return this.No()}set b(t){this.Oo(t)}get b(){return this.Bo()}set a(t){this.Do(t)}get a(){return this.Uo()}wa(t,s){switch(t){case 0:this.Ao(s);break;case 1:this.Fo(s);break;case 2:this.Oo(s);break;case 3:this.Do(s);break;default:throw new RangeError("invalid color index")}}va(t){switch(t){case 0:return this.ko();case 1:return this.No();case 2:return this.Bo();case 3:return this.Uo();default:throw new RangeError("invalid color index")}}static ba(t,s){let i,e;if(Array.isArray(t))i=new ha.To,i.Sa(t);else{if(!(t instanceof ha.To))throw new Error("unexpected type");i=t}if(Array.isArray(s))e=new ha.To,e.Sa(s);else{if(!(s instanceof ha.To))throw new Error("unexpected type");e=s}return i.equals(e)}static xa(t,s){return ha.Yn(Math.max(t,s)-Math.min(t,s),0,1)}static Ta(t,s){const i=new ha.To;return i.Ao(Math.max(t.Mo,s.Mo)-Math.min(t.Mo,s.Mo)),i.Fo(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),i.Oo(Math.max(t._o,s._o)-Math.min(t._o,s._o)),i.Do(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i}static Ma(t,s){const i=new ha.To(0,0,0,1);return i.Ao(Math.max(t.Mo,s.Mo)-Math.min(t.Mo,s.Mo)),i.Fo(Math.max(t.Go,s.Go)-Math.min(t.Go,s.Go)),i.Oo(Math.max(t._o,s._o)-Math.min(t._o,s._o)),i}static pa(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;let r=0;switch(e){case t:r=(s-i)/(e-n)+(s<i?6:0);break;case s:r=(i-t)/(e-n)+2;break;case i:r=(t-s)/(e-n)+4}return Math.round(r/6*360)}static ma(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;const r=e-n,h=(e+n)/2>.5?r/(2-e-n):r/(e+n);return Math.round(100*h)}static ga(t,s,i){const e=Math.max(t,s,i),n=(e+Math.min(t,s,i))/2;return e?Math.round(100*n):0}},ha.To.Ga=Object.freeze(ha.jn(ha.To,1,1,1,1)),ha.To._a=Object.freeze(ha.jn(ha.To,0,0,0,1)),ha.To.Ia=Object.freeze(ha.jn(ha.To,0,0,0,0))}{const la=self._s;la.Ca=class{constructor(t,s){this.Pa=0,this.Ra=0,t instanceof la.Ca?this.m(t):this.set(t||0,s||0)}set(t,s){this.Pa=+t,this.Ra=+s}m(t){this.Pa=t.Pa,this.Ra=t.Ra}equals(t){return this.Pa===t.Pa&&this.Ra===t.Ra}Ea(t,s){return this.Pa===t&&this.Ra===s}$o(t,s){return t[s]===Math.fround(this.Pa)&&t[s+1]===Math.fround(this.Ra)}Aa(t){this.Pa=+t}Fa(){return this.Pa}Oa(t){this.Ra=+t}Da(){return this.Ra}toArray(){return[this.Pa,this.Ra]}Vo(){return new Float64Array(this.toArray())}Wo(t,s){t[s++]=this.Pa,t[s]=this.Ra}offset(t,s){this.Pa+=+t,this.Ra+=+s}scale(t,s){this.Pa*=t,this.Ra*=s}St(t,s){this.Pa/=t,this.Ra/=s}round(){this.Pa=Math.round(this.Pa),this.Ra=Math.round(this.Ra)}floor(){this.Pa=Math.floor(this.Pa),this.Ra=Math.floor(this.Ra)}ceil(){this.Pa=Math.ceil(this.Pa),this.Ra=Math.ceil(this.Ra)}angle(){return la.nr(0,0,this.Pa,this.Ra)}La(){return this.Pa*this.Pa+this.Ra*this.Ra}length(){return la.tr(this.Pa,this.Ra)}ka(t,s){const i=this.Pa*s-this.Ra*t;this.Ra=this.Ra*s+this.Pa*t,this.Pa=i}rotate(t){0!==t&&this.ka(Math.sin(t),Math.cos(t))}Na(t,s,i){0===t||s===this.Pa&&i===this.Ra||(this.Pa-=s,this.Ra-=i,this.ka(Math.sin(t),Math.cos(t)),this.Pa+=+s,this.Ra+=+i)}move(t,s){0!==s&&(this.Pa+=Math.cos(t)*s,this.Ra+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Pa/=t,this.Ra/=t)}Yn(t,s){this.Pa=la.Yn(this.Pa,t,s),this.Ra=la.Yn(this.Ra,t,s)}Mt(t){return this.Pa*t.Pa+this.Ra*t.Ra}reverse(){this.Pa=-this.Pa,this.Ra=-this.Ra}Ba(){let t=this.Pa;return this.Pa=this.Ra,this.Ra=-t,this}}}{const ua=self._s;ua.Rect=class{constructor(t,s,i,e){this.Ua=NaN,this.Va=NaN,this.Wa=NaN,this.za=NaN,this.Ua=0,this.Va=0,this.Wa=0,this.za=0,t instanceof ua.Rect?this.m(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.Ua=+t,this.Va=+s,this.Wa=+i,this.za=+e}ja(t,s,i,e){t=+t,s=+s,this.Ua=t,this.Va=s,this.Wa=t+ +i,this.za=s+ +e}m(t){this.Ua=+t.Ua,this.Va=+t.Va,this.Wa=+t.Wa,this.za=+t.za}clone(){return new ua.Rect(this.Ua,this.Va,this.Wa,this.za)}static Ha(t,s){const i=new ua.Rect;return i.Ja(Math.min(t.Ua,s.Ua)),i.qa(Math.min(t.Va,s.Va)),i.$a(Math.max(t.Wa,s.Wa)),i.Xa(Math.max(t.za,s.za)),i}static Ya(t){return new ua.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Ua===t.Ua&&this.Va===t.Va&&this.Wa===t.Wa&&this.za===t.za}Ka(t,s,i,e){return this.Ua===t&&this.Va===s&&this.width()===i&&this.height()===e}$o(t,s){return t[s]===Math.fround(this.Ua)&&t[s+1]===Math.fround(this.Va)&&t[s+2]===Math.fround(this.Wa)&&t[s+3]===Math.fround(this.za)}Ja(t){this.Ua=+t}Za(){return this.Ua}qa(t){this.Va=+t}Qa(){return this.Va}$a(t){this.Wa=+t}tl(){return this.Wa}Xa(t){this.za=+t}sl(){return this.za}toArray(){return[this.Ua,this.Va,this.Wa,this.za]}Vo(){return new Float64Array(this.toArray())}il(){return new DOMRect(this.Ua,this.Va,this.width(),this.height())}static el(t){return ua.jn(ua.Rect,t.left,t.top,t.right,t.bottom)}Wo(t,s){t[s++]=this.Ua,t[s++]=this.Va,t[s++]=this.Wa,t[s]=this.za}nl(t,s){t[s++]=this.Ua,t[s++]=this.Va,t[s++]=this.Wa,t[s++]=this.Va,t[s++]=this.Wa,t[s++]=this.za,t[s++]=this.Ua,t[s]=this.za}rl(t,s,i){t[s++]=this.Ua,t[s++]=this.Va,t[s++]=i,t[s++]=this.Wa,t[s++]=this.Va,t[s++]=i,t[s++]=this.Wa,t[s++]=this.za,t[s++]=i,t[s++]=this.Ua,t[s++]=this.za,t[s]=i}width(){return this.Wa-this.Ua}height(){return this.za-this.Va}hl(){return(this.Ua+this.Wa)/2}ol(){return(this.Va+this.za)/2}offset(t,s){t=+t,s=+s,this.Ua+=t,this.Va+=s,this.Wa+=t,this.za+=s}offsetLeft(t){this.Ua+=+t}offsetTop(t){this.Va+=+t}al(t){this.Wa+=+t}ll(t){this.za+=+t}ul(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.Va<this.za?this.Ua<this.Wa?this.za=this.Va+this.width():this.za=this.Va-this.width():this.Ua<this.Wa?this.za=this.Va-this.width():this.za=this.Va+this.width()}cl(t,s){t=+t,s=+s,this.Ua-=t,this.Va-=s,this.Wa+=t,this.za+=s}fl(t,s){t=+t,s=+s,this.Ua+=t,this.Va+=s,this.Wa-=t,this.za-=s}multiply(t,s){this.Ua*=t,this.Va*=s,this.Wa*=t,this.za*=s}St(t,s){this.Ua/=t,this.Va/=s,this.Wa/=t,this.za/=s}dl(t){this.Ua=+t-this.Ua,this.Wa=+t-this.Wa}pl(t){this.Va=+t-this.Va,this.za=+t-this.za}ml(t,s){const i=this.width(),e=this.height(),n=this.Za()+i*t,r=this.Qa()+e*s;this.ja(n-e*s,r-i*t,e,i)}gl(){const t=this.Ua;this.Ua=this.Wa,this.Wa=t}yl(){const t=this.Va;this.Va=this.za,this.za=t}Sl(t){const s=this.Va;this.Va=+t-this.za,this.za=+t-s}round(){this.Ua=Math.round(this.Ua),this.Va=Math.round(this.Va),this.Wa=Math.round(this.Wa),this.za=Math.round(this.za)}wl(){this.Ua=Math.ceil(this.Ua),this.Va=Math.ceil(this.Va),this.Wa=Math.floor(this.Wa),this.za=Math.floor(this.za)}vl(){this.Ua=Math.floor(this.Ua),this.Va=Math.floor(this.Va),this.Wa=Math.ceil(this.Wa),this.za=Math.ceil(this.za)}floor(){this.Ua=Math.floor(this.Ua),this.Va=Math.floor(this.Va),this.Wa=Math.floor(this.Wa),this.za=Math.floor(this.za)}ceil(){this.Ua=Math.ceil(this.Ua),this.Va=Math.ceil(this.Va),this.Wa=Math.ceil(this.Wa),this.za=Math.ceil(this.za)}Yn(t,s,i,e){this.Ua=Math.max(this.Ua,+t),this.Va=Math.max(this.Va,+s),this.Wa=Math.min(this.Wa,+i),this.za=Math.min(this.za,+e)}bl(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.Ua=ua.Yn(this.Ua,t,i),this.Va=ua.Yn(this.Va,s,e),this.Wa=ua.Yn(this.Wa,t,i),this.za=ua.Yn(this.za,s,e)}normalize(){this.Ua>this.Wa&&this.gl(),this.Va>this.za&&this.yl()}xl(t){return!(t.Wa<this.Ua||t.za<this.Va||t.Ua>this.Wa||t.Va>this.za)}Tl(t,s,i){return!(t.Wa+s<this.Ua||t.za+i<this.Va||t.Ua+s>this.Wa||t.Va+i>this.za)}Ml(t,s){return t>=this.Ua&&t<=this.Wa&&s>=this.Va&&s<=this.za}Gl(t){return t.Ua>=this.Ua&&t.Va>=this.Va&&t.Wa<=this.Wa&&t.za<=this.za}_l(t){t.Ua<this.Ua&&(this.Ua=+t.Ua),t.Va<this.Va&&(this.Va=+t.Va),t.Wa>this.Wa&&(this.Wa=+t.Wa),t.za>this.za&&(this.za=+t.za)}Il(t){this.Ua=ua._t(t.Ua,t.Wa,this.Ua),this.Va=ua._t(t.Va,t.za,this.Va),this.Wa=ua._t(t.Ua,t.Wa,this.Wa),this.za=ua._t(t.Va,t.za,this.za)}}}{const ca=self._s;ca.Cl=class{constructor(t,s,i,e,n,r,h,o){this.Pl=NaN,this.Rl=NaN,this.El=NaN,this.Al=NaN,this.Fl=NaN,this.Ol=NaN,this.Dl=NaN,this.Ll=NaN,this.Pl=0,this.Rl=0,this.El=0,this.Al=0,this.Fl=0,this.Ol=0,this.Dl=0,this.Ll=0,t instanceof ca.Cl?this.m(t):this.set(t||0,s||0,i||0,e||0,n||0,r||0,h||0,o||0)}set(t,s,i,e,n,r,h,o){this.Pl=+t,this.Rl=+s,this.El=+i,this.Al=+e,this.Fl=+n,this.Ol=+r,this.Dl=+h,this.Ll=+o}kl(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}m(t){this.Pl=t.Pl,this.Rl=t.Rl,this.El=t.El,this.Al=t.Al,this.Fl=t.Fl,this.Ol=t.Ol,this.Dl=t.Dl,this.Ll=t.Ll}equals(t){return this.Pl===t.Pl&&this.Rl===t.Rl&&this.El===t.El&&this.Al===t.Al&&this.Fl===t.Fl&&this.Ol===t.Ol&&this.Dl===t.Dl&&this.Ll===t.Ll}Nl(t){this.Pl=+t}Nr(){return this.Pl}Bl(t){this.Rl=+t}Br(){return this.Rl}Ul(t){this.El=+t}Ur(){return this.El}Vl(t){this.Al=+t}Vr(){return this.Al}Wl(t){this.Fl=+t}Wr(){return this.Fl}zl(t){this.Ol=+t}zr(){return this.Ol}jl(t){this.Dl=+t}jr(){return this.Dl}Hl(t){this.Ll=+t}Hr(){return this.Ll}Jl(){return new DOMQuad(new DOMPoint(this.Pl,this.Rl),new DOMPoint(this.El,this.Al),new DOMPoint(this.Fl,this.Ol),new DOMPoint(this.Dl,this.Ll))}static ql(t){return ca.jn(ca.Cl,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Pl,this.Rl,this.El,this.Al,this.Fl,this.Ol,this.Dl,this.Ll]}Vo(){return new Float64Array(this.toArray())}Wo(t,s){t[s++]=this.Pl,t[s++]=this.Rl,t[s++]=this.El,t[s++]=this.Al,t[s++]=this.Fl,t[s++]=this.Ol,t[s++]=this.Dl,t[s]=this.Ll}$l(t,s,i){t[s++]=this.Pl,t[s++]=this.Rl,t[s++]=i,t[s++]=this.El,t[s++]=this.Al,t[s++]=i,t[s++]=this.Fl,t[s++]=this.Ol,t[s++]=i,t[s++]=this.Dl,t[s++]=this.Ll,t[s]=i}offset(t,s){t=+t,s=+s,this.Pl+=t,this.Rl+=s,this.El+=t,this.Al+=s,this.Fl+=t,this.Ol+=s,this.Dl+=t,this.Ll+=s}round(){this.Pl=Math.round(this.Pl),this.Rl=Math.round(this.Rl),this.El=Math.round(this.El),this.Al=Math.round(this.Al),this.Fl=Math.round(this.Fl),this.Ol=Math.round(this.Ol),this.Dl=Math.round(this.Dl),this.Ll=Math.round(this.Ll)}floor(){this.Pl=Math.floor(this.Pl),this.Rl=Math.floor(this.Rl),this.El=Math.floor(this.El),this.Al=Math.floor(this.Al),this.Fl=Math.floor(this.Fl),this.Ol=Math.floor(this.Ol),this.Dl=Math.floor(this.Dl),this.Ll=Math.floor(this.Ll)}ceil(){this.Pl=Math.ceil(this.Pl),this.Rl=Math.ceil(this.Rl),this.El=Math.ceil(this.El),this.Al=Math.ceil(this.Al),this.Fl=Math.ceil(this.Fl),this.Ol=Math.ceil(this.Ol),this.Dl=Math.ceil(this.Dl),this.Ll=Math.ceil(this.Ll)}Xl(t){this.Pl=t.Ua,this.Rl=t.Va,this.El=t.Wa,this.Al=t.Va,this.Fl=t.Wa,this.Ol=t.za,this.Dl=t.Ua,this.Ll=t.za}Yl(t,s){0===s?this.Xl(t):this.Kl(t,Math.sin(s),Math.cos(s))}Kl(t,s,i){const e=t.Ua*s,n=t.Va*s,r=t.Wa*s,h=t.za*s,o=t.Ua*i,a=t.Va*i,l=t.Wa*i,u=t.za*i;this.Pl=o-n,this.Rl=a+e,this.El=l-n,this.Al=a+r,this.Fl=l-h,this.Ol=u+r,this.Dl=o-h,this.Ll=u+e}Zl(t){t.set(Math.min(this.Pl,this.El,this.Fl,this.Dl),Math.min(this.Rl,this.Al,this.Ol,this.Ll),Math.max(this.Pl,this.El,this.Fl,this.Dl),Math.max(this.Rl,this.Al,this.Ol,this.Ll))}Ml(t,s){let i=this.El-this.Pl,e=this.Al-this.Rl;const n=this.Fl-this.Pl,r=this.Ol-this.Rl,h=t-this.Pl,o=s-this.Rl;let a=i*i+e*e,l=i*n+e*r,u=i*h+e*o;const c=n*n+r*r,f=n*h+r*o;let d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return p>=0&&m>0&&p+m<1||(i=this.Dl-this.Pl,e=this.Ll-this.Rl,a=i*i+e*e,l=i*n+e*r,u=i*h+e*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d,p>=0&&m>0&&p+m<1)}hl(){return(this.Pl+this.El+this.Fl+this.Dl)/4}ol(){return(this.Rl+this.Al+this.Ol+this.Ll)/4}Ql(t,s,i,e){return!(!this.Ml(t,s)&&!this.Ml(i,e))||ca.kr(t,s,i,e,this)}tu(t){let s=t.hl(),i=t.ol();if(this.Ml(s,i))return!0;if(s=this.hl(),i=this.ol(),t.Ml(s,i))return!0;const e=this.Pl,n=this.Rl,r=this.El,h=this.Al,o=this.Fl,a=this.Ol,l=this.Dl,u=this.Ll;return ca.kr(e,n,r,h,t)||ca.kr(r,h,o,a,t)||ca.kr(o,a,l,u,t)||ca.kr(l,u,e,n,t)}su(){const t=this.Pl,s=this.Rl;this.Pl=this.El,this.Rl=this.Al,this.El=this.Fl,this.Al=this.Ol,this.Fl=this.Dl,this.Ol=this.Ll,this.Dl=t,this.Ll=s}iu(){this.eu(0,2),this.eu(1,3),this.eu(6,4),this.eu(7,5)}nu(){this.eu(0,6),this.eu(1,7),this.eu(2,4),this.eu(3,5)}ru(){this.eu(2,6),this.eu(3,7)}eu(t,s){const i=this.hu(t);this.ou(t,this.hu(s)),this.ou(s,i)}hu(t){switch(t){case 0:return this.Pl;case 1:return this.Rl;case 2:return this.El;case 3:return this.Al;case 4:return this.Fl;case 5:return this.Ol;case 6:return this.Dl;case 7:return this.Ll;default:throw new RangeError("invalid quad point index")}}ou(t,s){switch(s=+s,t){case 0:this.Pl=s;break;case 1:this.Rl=s;break;case 2:this.El=s;break;case 3:this.Al=s;break;case 4:this.Fl=s;break;case 5:this.Ol=s;break;case 6:this.Dl=s;break;case 7:this.Ll=s;break;default:throw new RangeError("invalid quad point index")}}St(t,s){this.Pl/=t,this.Rl/=s,this.El/=t,this.Al/=s,this.Fl/=t,this.Ol/=s,this.Dl/=t,this.Ll/=s}}}{const fa=self._s,da=(self.assert,[0,0,1,0,1,1,0,1]),pa=fa.jn(fa.Cl);fa.au=class extends fa.Wn{constructor(t,s=!0){super(),t||(t=da),this.lu=Float64Array.from(t),this.uu=new fa.Rect,this.cu=!0,this.fu=s}Hn(){}du(){return this.lu}pu(){return this.lu.length/2}mu(t){this.lu.length===t.length?this.lu.set(t):this.lu=Float64Array.from(t),this.cu=!0}gu(){this.mu(da)}m(t){this.mu(t.lu)}yu(){this.cu=!0}Su(){if(!this.cu)return;const t=this.lu;let s=t[0],i=t[1],e=s,n=i;for(let r=0,h=t.length;r<h;r+=2){const h=t[r],o=t[r+1];h<s&&(s=h),h>e&&(e=h),o<i&&(i=o),o>n&&(n=o)}this.uu.set(s,i,e,n),this.cu=!1}Xl(t,s,i){let e=this.lu;8!==e.length&&(e=new Float64Array(8),this.lu=e),e[0]=t.Za()-s,e[1]=t.Qa()-i,e[2]=t.tl()-s,e[3]=t.Qa()-i,e[4]=t.tl()-s,e[5]=t.sl()-i,e[6]=t.Za()-s,e[7]=t.sl()-i,this.uu.m(t),0===s&&0===i||this.uu.offset(-s,-i),this.cu=!1}wu(t,s,i){pa.m(t),pa.offset(s,i),this.mu(pa.toArray()),this.cu=!0}transform(t,s,i){let e=0,n=1;0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.vu(t,s,e,n)}vu(t,s,i,e){const n=this.lu;for(let r=0,h=n.length;r<h;r+=2){const h=r+1,o=n[r]*t,a=n[h]*s;n[r]=o*e-a*i,n[h]=a*e+o*i}this.cu=!0}offset(t,s){const i=this.lu;for(let e=0,n=i.length;e<n;e+=2)i[e]+=t,i[e+1]+=s}Ml(t,s){const i=this.lu;if(t===i[0]&&s===i[1])return!0;this.Su();const e=this.uu,n=e.Za()-110,r=e.Qa()-101,h=e.tl()+131,o=e.sl()+120;let a=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0;n<t?(a=n,u=t):(a=t,u=n),r<s?(l=r,c=s):(l=s,c=r),h<t?(f=h,p=t):(f=t,p=h),o<s?(d=o,m=s):(d=s,m=o);let g=0,y=0;for(let e=0,S=i.length;e<S;e+=2){const w=(e+2)%S,v=i[e],b=i[e+1],x=i[w],T=i[w+1];fa.Lr(n,r,t,s,a,u,l,c,v,b,x,T)&&++g,fa.Lr(h,o,t,s,f,p,d,m,v,b,x,T)&&++y}return g%2==1||y%2==1}bu(t,s,i){const e=t.lu,n=this.lu;if(this.Ml(e[0]+s,e[1]+i))return!0;if(t.Ml(n[0]-s,n[1]-i))return!0;for(let t=0,r=n.length;t<r;t+=2){const h=(t+2)%r,o=n[t],a=n[t+1],l=n[h],u=n[h+1];let c=0,f=0,d=0,p=0;o<l?(c=o,d=l):(c=l,d=o),a<u?(f=a,p=u):(f=u,p=a);for(let t=0,n=e.length;t<n;t+=2){const r=(t+2)%n,h=e[t]+s,m=e[t+1]+i,g=e[r]+s,y=e[r+1]+i;if(fa.Lr(o,a,l,u,c,d,f,p,h,m,g,y))return!0}}return!1}Ql(t,s,i,e,n,r){if(this.Ml(i-t,e-s))return!0;if(this.Ml(n-t,r-s))return!0;let h=0,o=0,a=0,l=0;i<n?(h=i,a=n):(h=n,a=i),e<r?(o=e,l=r):(o=r,l=e);const u=this.lu;for(let c=0,f=u.length;c<f;c+=2){const d=(c+2)%f,p=u[c]+t,m=u[c+1]+s,g=u[d]+t,y=u[d+1]+s;if(fa.Lr(i,e,n,r,h,a,o,l,p,m,g,y))return!0}return!1}iu(t){const s=this.lu;for(let i=0,e=s.length;i<e;i+=2)s[i]=2*t-s[i];this.cu=!0}nu(t){const s=this.lu;for(let i=0,e=s.length;i<e;i+=2){const e=i+1;s[e]=2*t-s[e]}this.cu=!0}ru(){const t=this.lu;for(let s=0,i=t.length;s<i;s+=2){const i=s+1,e=t[s];t[s]=t[i],t[i]=e}this.cu=!0}xu(){const t=this.lu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i];return s/this.pu()}Tu(){const t=this.lu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i+1];return s/this.pu()}Mu(){return this.lu}Gu(){return this.pu()}_u(){return this.fu}}}{const ma=self._s;ma.Iu=class extends ma.Wn{constructor(t){if(super(),this.Cu=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}Hn(){this.Pu(),this.Cu=null}Ru(){return 0===this.Cu.size}Pu(){const t=this.Cu;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){const e=this.Cu;let n=e.get(t);n||(n=new Map,e.set(t,n)),n.set(s,i)}Hs(t,s){const i=this.Cu.get(t);return i?i.get(s):i}js(t,s){const i=this.Cu.get(t);return!!i&&i.has(s)}Eu(t,s){const i=this.Cu,e=i.get(t);if(!e)return!1;const n=e.delete(s);return n&&0===e.size&&i.delete(t),n}Au(t){const s=this.Cu,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[i,e]of s.entries())e.delete(t)&&0===e.size&&s.delete(i)}Fu(){let t=0;for(const s of this.Cu.values())t+=s.size;return t}*values(){for(const t of this.Cu.values())yield*t.values()}*Ou(){for(const[t,s]of this.Cu.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Cu.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const ga=self._s;ga.Du=class extends ga.Wn{constructor(){super(),this.Lu=new Set,this.ku=[],this.Nu=!1}Hn(){this.Pu()}Pu(){this.Lu.clear(),ga.wh(this.ku),this.Nu=!1}Bu(t){this.Lu.has(t)||(this.Lu.add(t),this.Nu||this.ku.push(t))}js(t){return this.Lu.has(t)}Eu(t){this.Lu.delete(t)&&(this.Nu=!0)}Fu(){return this.Lu.size}Ru(){return 0===this.Lu.size}Uu(){return this.Nu&&(this.Vu(),this.Nu=!1),this.ku}Vu(){const t=this.ku;ga.wh(t);for(const s of this.Lu)t.push(s)}}}{const ya=self._s,Sa=new Map,wa=new Map,va=new Map,ba=new Map,xa=new Map,Ta=new Map,Ma=new Map,Ga=new Map,_a=new Map;_a.set("linear","noease"),_a.set("default","noease");const Ia=["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"],Ca=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Pa=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]);self.Wu=class t{constructor(){}static zu(){return"default"}static ju(){return"noease"}static Hu(t){return Pa.get(t)}static Ju(s,...i){let e,n;this.qu(),s?(va.has(s)||va.set(s,new Map),e=va.get(s),n=[...e.keys()].filter(i=>!t.$u(i,s)||t.$u(i,s).transition.Xu())):(e=xa,n=[...e.keys()]);const r=n.sort();return[...wa.keys()].concat(r).filter(t=>!i.includes(t))}static Yu(){this.qu();const t=[...xa.keys()];return t.sort(),[...wa.keys()].concat(t)}static Ku(){this.qu();const t=[...xa.keys()];return t.sort(),t}static Zu(t){for(const s of Ia)if(self.lang(`ui.bars.timeline.eases.${s}`)===t)return!0;for(const s of Ca)if(self.lang(`ui.bars.timeline.short-eases.${s}`)===t)return!0}static Qu(t){return this.qu(),[...wa.keys()].includes(t)}static tc(s){const i=_a.get(s);return i?Sa.get(i):t.Qu(s)?Sa.get(s):Ma.has(s)?Ma.get(s):void 0}static sc(t){return this.qu(),Ga.get(t)}static ec(s,i){this.qu();const e=t.tc(s);if(e)return e;if(!i)throw new Error("missing ease function");return va.get(i).get(s)}static $u(t,s){this.qu();const i=ba.get(s);if(i)return i.get(t)}static nc(s,i){return this.qu(),!!t.tc(s)||!!va.get(i).get(s)}static rc(s){this.qu();return t.tc(s)||xa.get(s)}static hc(t){return this.qu(),Ta.get(t)}static oc(t){return this.qu(),this.Yu()[t]}static ac(t,s){return this.qu(),this.Ju(s).indexOf(t)}static lc(t){return this.ac(t)}static qu(){0===Sa.size&&(this.uc("default",()=>{}),this.uc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.uc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.uc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.uc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.uc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.uc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.uc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.uc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.uc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.uc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.uc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.uc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.uc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.uc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.uc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.uc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.uc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.uc("easeoutquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.uc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.uc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.uc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.uc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.uc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.uc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.uc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.cc("cubicbezier",this.fc),this.cc("spline",this.dc))}static uc(s,i,e=!1){if("function"==typeof i)t.mc(s,i,"predefined");else{if(!ya.Te(i))throw new Error("unexpected arguments");if(self.yc){const n=ya.jn(self.yc,s,e);n.Sc(i),t.mc(s,(t,s,i,e)=>n.wc(t,s,i,e),"predefined"),Ga.set(s,n)}else{const n=ya.jn(ya.vc,[s,i.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);n.bc(e),t.mc(s,(t,s,i,e)=>n.wc(t,s,i,e),"predefined")}}}static cc(s,i){t.mc(s,i,"private")}static xc(s,i,e,n){this.qu(),t.mc(s,i,"custom",e,n)}static Tc(t,s){if(this.Qu(t))return;if([...Ma.keys()].includes(t))return;const i=va.get(s);i&&i.delete(t);const e=ba.get(s);e&&e.delete(t)}static mc(t,s,i,e,n){switch(i){case"predefined":Sa.set(t,s),wa.set(t,s);break;case"custom":e?(va.has(e)||va.set(e,new Map),ba.has(e)||ba.set(e,new Map),va.get(e).set(t,s),ba.get(e).set(t,n)):(xa.set(t,s),Ta.set(t,n));break;case"private":Sa.set(t,s),Ma.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Mc(t,s,i,e){return 0===e?s:i*t/e+s}static fc(t,s,i,e,n){return s+3*t*(i-s)+3*t**2*(s+e-2*i)+t**3*(n-s+3*i-3*e)}static dc(t,s,i,e,n,r,h,o,a,l){if(e===n&&r===h)return t;const u=ka(t,s,e,r,o,l),c=Aa(i,n,h,a),f=Fa(i,n,h,a),d=Oa(i,n,h,a);return Da(u,c,f,d)}static Gc(t,s,i,e){const n=[],r=Aa(t,s,i,e),h=Fa(t,s,i,e),o=Oa(t,s,i,e);for(let t=0;t<Ra;++t){const s=Da(t*Ea,r,h,o);n.push(s)}return n}};const Ra=11,Ea=1/(Ra-1),Aa=(t,s,i,e)=>e-3*i+3*s-t,Fa=(t,s,i,e)=>3*i-6*s+3*t,Oa=(t,s,i,e)=>3*(s-t),Da=(t,s,i,e)=>((s*t+i)*t+e)*t,La=(t,s,i,e)=>3*s*t*t+2*i*t+e,ka=(t,s,i,e,n,r)=>{if(1==t)return 1;let h=0,o=1,a=r[o],l=Ra-1;for(r[Ra-1];o!=l&&a<=t;)o++,a=r[o],h+=Ea;o--,a=r[o];let u=h+(t-a)/(r[o+1]-a)*Ea;const c=Aa(s,i,e,n),f=Fa(s,i,e,n),d=Oa(s,i,e,n),p=La(u,c,f,d);if(0===p)return u;if(p>=.01){for(let s=0;s<4;++s)u-=(Da(u,c,f,d)-t)/La(u,c,f,d);return u}{let s,i,e=h,n=h+Ea,r=0;do{u=e+(n-e)/2;let h=Da(u,c,f,d)-t;h>0?n=u:e=u,s=Math.abs(h)>1e-7,i=++r<10}while(s&&i);return u}}}{let Na=function(t){Ba.ae(t)};0;const Ba=self._s;Ba._c=class{constructor(t){this.Ic=[],this.$n=t||"",this.Cc=0}Hn(){this.Pu(),this.Ic=null}Pc(){return this.$n}Pu(){Ba.bh(this.Ic),this.Cc=0}Rc(){return this.Cc}Ec(t=Math.random()*this.Rc()){let s=0;for(const[i,e]of this.Ic)if(s+=i,t<s)return e;return 0}Ac(){return!!this.Ic.length}Fc(t,s){Na(s),this.Cc+=t,this.Ic.push([t,s])}Oc(t,s){Na(s);const i=0===t;for(let e=0;e<this.Ic.length;e++){const n=this.Ic[e],r=i||n[0]===t,h=n[1]===s;if(r&&h){this.Ic.splice(e,1),this.Cc-=n[0];break}}}Dc(){return JSON.stringify(this.Ic)}static Lc(t,s){const i=new Ba._c(s),e=JSON.parse(t);for(const t of e){const s=t[0],e=t[1];i.Fc(s,e)}return i}}}{const Ua=self._s;let Va=0;Ua.kc=class{constructor(t,s){this.Nc=t,this.Bc=s,this.Uc=Va++,this.Nc.Vc("runtime","screen-reader-text",{type:"create",id:this.Uc,text:this.Bc})}Hn(){this.Nc.Vc("runtime","screen-reader-text",{type:"release",id:this.Uc}),this.Nc=null,this.Bc="",this.Uc=-1}Wc(t){this.Bc!==t&&(this.Bc=t,this.Nc.Vc("runtime","screen-reader-text",{type:"update",id:this.Uc,text:this.Bc}))}}}self._s.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.zc=!1,this.jc=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.jc)throw new Error(`cannot stop async event '${this.type}' propagation`);this.zc=!0}};{const Wa=self._s;self.assert;Wa.Event.Hc=class extends Wa.Wn{constructor(t){super(),this.Jc=t,this.qc=[],this.$c=new Set,this.Xc=[],this.Yc=new Set,this.Kc=0,this.Zc=[]}Hn(){this.Kc>0||(Wa.wh(this.qc),this.$c.clear(),Wa.wh(this.Xc),this.Yc.clear(),Wa.wh(this.Zc),Wa.Hn(this))}Qc(t,s){if(this.tf())this.Zc.push({sf:"add",if:t,capture:s});else if(s){if(this.$c.has(t))return;this.qc.push(t),this.$c.add(t)}else{if(this.Yc.has(t))return;this.Xc.push(t),this.Yc.add(t)}}ef(t,s){this.tf()?this.Zc.push({sf:"remove",if:t,capture:s}):s?this.$c.has(t)&&(this.$c.delete(t),Wa._h(this.qc,t)):this.Yc.has(t)&&(this.Yc.delete(t),Wa._h(this.Xc,t))}nf(){return!this.qc.length&&!this.Xc.length}tf(){return this.Kc>0}rf(){const t=new Set,s=new Set;for(const i of this.Zc)if("add"===i.sf)this.Qc(i.if,i.capture),i.capture?s.delete(i.if):t.delete(i.if);else{if("remove"!==i.sf)throw new Error("invalid op");i.capture?(this.$c.delete(i.if),s.add(i.if)):(this.Yc.delete(i.if),t.add(i.if))}Wa.Ph(this.Xc,t),Wa.Ph(this.qc,s),Wa.wh(this.Zc)}hf(t){this.af();let s=!1;for(let i=0,e=this.qc.length;i<e;++i)if(this.qc[i](t),t.zc){s=!0;break}if(!s)for(let s=0,i=this.Xc.length;s<i&&(this.Xc[s](t),!t.zc);++s);return this.lf(),!t.defaultPrevented}uf(t){this.af();for(let s=0,i=this.qc.length;s<i;++s)this.qc[s](t);for(let s=0,i=this.Xc.length;s<i;++s)this.Xc[s](t);return this.lf(),!0}af(){this.Kc++}lf(){this.Kc--,0===this.Kc&&this.Zc.length>0&&this.rf()}cf(t){t?this.af():this.lf()}ff(t){let s=[];for(let i=0,e=this.qc.length;i<e;++i){let e=this.qc[i];s.push(Wa.df(()=>e(t)))}for(let i=0,e=this.Xc.length;i<e;++i){let e=this.Xc[i];s.push(Wa.df(()=>e(t)))}return Promise.all(s).then(()=>!t.defaultPrevented)}pf(t){const s=[];this.af();for(let i=0,e=this.qc.length;i<e;++i){const e=this.qc[i](t);e instanceof Promise&&s.push(e)}for(let i=0,e=this.Xc.length;i<e;++i){const e=this.Xc[i](t);e instanceof Promise&&s.push(e)}return this.lf(),s.length?Promise.all(s).then(()=>!t.defaultPrevented):!t.defaultPrevented}async mf(t){return await this.pf(t)}async gf(t){this.af();for(let s=0,i=this.qc.length;s<i;++s){const i=this.qc[s](t);i instanceof Promise&&await i}for(let s=0,i=this.Xc.length;s<i;++s){const i=this.Xc[s](t);i instanceof Promise&&await i}return this.lf(),!t.defaultPrevented}*yf(t){this.af();for(let s=0,i=this.qc.length;s<i;++s){const i=this.qc[s](t);Wa.bo(i)&&(yield*i)}for(let s=0,i=this.Xc.length;s<i;++s){const i=this.Xc[s](t);Wa.bo(i)&&(yield*i)}this.lf()}}}{const za=self._s;za.Event.Sf=class extends za.Wn{constructor(){super(),this.wf=new Map,this.vf=!1}Hn(){if(this.vf)throw new Error("already released");this.bf(),this.vf=!0,za.Hn(this)}Jn(){return this.vf}bf(){if(this.wf){for(let t of this.wf.values())t.Hn();this.wf.clear()}}xf(t,s){let i=this.wf.get(t);return i||(s?(i=za.jn(za.Event.Hc,t),this.wf.set(t,i),i):null)}Tf(t){return this.wf.has(t)}addEventListener(t,s,i){this.xf(t,!0).Qc(s,!!i)}removeEventListener(t,s,i){let e=this.xf(t,!1);e&&(e.ef(s,!!i),e.nf()&&this.wf.delete(t))}dispatchEvent(t){const s=this.xf(t.type,!1);return!s||(t.cancelable?s.hf(t):s.uf(t))}Mf(t){const s=this.xf(t.type,!1);return s?(t.jc=!0,s.ff(t)):Promise.resolve(!0)}async Gf(t){const s=this.xf(t.type,!1);if(!s)return!0;this.wf.delete(t.type),t.jc=!0;const i=await s.ff(t);return s.Hn(),i}async _f(t){const s=this.xf(t.type,!1);return!s||await s.mf(t)}If(t){const s=this.xf(t.type,!1);return!s||s.pf(t)}async Cf(t){const s=this.xf(t.type,!1);return!s||await s.gf(t)}Pf(t){const s=this.xf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.yf(t)}cf(t){for(const s of this.wf.values())s.cf(t)}}}{let ja=function(t){Ya=$a&&0===Ka?requestIdleCallback(Ha,{timeout:35}):setTimeout(Ha,Ka>0?1:t)},Ha=function(t){if(Ya=-1,!Xa.length)return;let s=performance.now(),i=s,e=0,n=0;do{Ja(Xa.shift()),i=performance.now(),++e,n=(i-s)/e*1.1}while(Xa.length&&($a&&0===Ka&&void 0!==t?n<t.timeRemaining():i-s+n<12));if(-1===Ya&&Xa.length){let t=i-s;ja(Math.max(16-t,4))}},Ja=function(t){let s;try{s=t.if()}catch(s){return void t.reject(s)}t.resolve(s)};0;const qa=self._s,$a="undefined"!=typeof requestIdleCallback;let Xa=[],Ya=-1,Ka=0,Za=qa.$s.js("disable-asyncify");Za&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),qa.df=function(t){let s=null;return qa.Ds&&(s=qa.Ki()),new Promise((i,e)=>{Xa.push({if:t,resolve:i,reject:e,stack:s}),Za?Ja(Xa.pop()):-1===Ya&&ja(16)})},qa.df.Rf=function(t){if(t)++Ka;else if(--Ka,Ka<0)throw new Error("already turned off high throughput mode")}}{let Qa=function(){il=-1},tl=function(){el=-1,nl=-1;let t=Date.now();for(let s of rl)if(s.Ef(t)){let t=s.Af();(-1===nl||t<nl)&&(nl=t)}else rl.delete(s);if(-1!==nl){let s=Math.max(nl-t+100,1e3);el=self.setTimeout(tl,s)}};0;const sl=self._s;let il=-1;sl.Ff=function(){return-1===il&&(il=Date.now(),self.setTimeout(Qa,16)),il};let el=-1,nl=-1,rl=new Set;sl.Of=class{constructor(t,s){this.Df=t,this.Lf=1e3*s,this.kf=0,this.Nf=!1}Bf(){let t=sl.Ff();this.kf=t+this.Lf,this.Nf||(rl.add(this),this.Nf=!0),-1===el?(nl=this.kf,el=self.setTimeout(tl,this.Lf+100)):this.kf<nl&&nl>t+1e3&&(self.clearTimeout(el),nl=this.kf,el=self.setTimeout(tl,this.Lf+100))}Ef(t){return!(t>=this.kf&&(this.Df()?(this.kf=t+this.Lf,0):(this.Nf=!1,1)))}Af(){return this.kf}Uf(){this.Nf&&(rl.delete(this),this.Nf=!1,0===rl.size&&-1!==el&&(self.clearTimeout(el),el=-1,nl=-1))}Hn(){this.Uf(),this.Df=null}}}{const hl=self._s;hl.Vf=class t{constructor(t){this.Wf=!1,this.zf=t}jf(){this.Wf||(this.Wf=!0,this.zf&&(this.zf(),this.zf=null))}Hf(){return this.Wf}Hn(){this.jf()}static Hn(s){return new t(()=>s.Hn())}static Jf(t,s,i,e,n){if("string"!=typeof s&&!Array.isArray(s))throw new TypeError("expected string or array");if(null==e)e=!1;else if("boolean"!=typeof e&&"object"!=typeof e)throw new TypeError("invalid event listener options");if(n&&(i=i.bind(n)),Array.isArray(s)||s.includes(" ")){"string"==typeof s&&(s=s.split(" "));const n=new hl.qf;for(const r of s)t.addEventListener(r,i,e),n.Bu(hl.jn(hl.Vf,()=>t.removeEventListener(r,i,e)));return n}return t.addEventListener(s,i,e),hl.jn(hl.Vf,()=>t.removeEventListener(s,i,e))}},hl.$f=class extends hl.Vf{Xf(t){this.zf=t}},hl.qf=class extends hl.Vf{constructor(...t){super(),this.Yf=new Set;for(let s of t)this.Bu(s)}Bu(...t){if(this.Wf)throw new Error("already disposed");for(let s of t)this.Yf.add(s)}Kf(t){if(this.Wf)throw new Error("already disposed");this.Yf.delete(t)}Zf(){if(this.Wf)throw new Error("already disposed");if(this.Yf){for(let t of this.Yf)t.jf();this.Yf.clear()}}Hf(){return this.Wf}jf(){if(this.Wf)throw new Error("already disposed");this.Wf=!0;for(let t of this.Yf)t.jf();this.Yf.clear(),this.Yf=null}Hn(){this.jf()}}}{const ol=self._s;ol.Qf=class extends ol.Wn{constructor(){super(),this.td=0,this.Ra=0,this.sd=0,this.ed=0}Bu(t){t=+t,this.Ra=t-this.td,this.sd=this.ed+this.Ra,this.td=this.sd-this.ed-this.Ra,this.ed=this.sd}nd(t){this.ed-=+t}Hs(){return this.ed}Bf(){this.td=0,this.Ra=0,this.sd=0,this.ed=0}Set(t){this.td=0,this.Ra=0,this.sd=0,this.ed=+t}rd(t){this.td=t.td,this.Ra=t.Ra,this.sd=t.sd,this.ed=t.ed}Hn(){}}}{const al=self._s,ll={},ul=!0;ll.hd=function(t){this.od=t,this.right=this.od.ad,this.left=this.od.ad,this.parent=null,this.color=!1,this.key=null},ll.ld=function(t){this.size=0,this.ad=new ll.hd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad,this.compare=t||this.ud},ll.ld.prototype.ud=function(t,s){return t<s?-1:s<t?1:0},ll.ld.prototype.clone=function(){var t=new ll.ld(this.compare);return t.fd(this),t},ll.ld.prototype.clear=function(){this.size=0,this.ad=new ll.hd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad},ll.ld.prototype.dd=function(t){var s=t.right;t.right=s.left,s.left!=this.ad&&(s.left.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,s.left=t,t.parent=s},ll.ld.prototype.pd=function(t){var s=t.left;t.left=s.right,s.right!=this.ad&&(s.right.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,s.right=t,t.parent=s},ll.ld.prototype.md=function(t){if(this.contains(t))this.gd(t).key=t;else{var s=new ll.hd(this);s.key=t;for(var i=this.ad,e=this.root;e!=this.ad;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;s.parent=i,i==this.ad?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.ad,s.right=this.ad,s.color=ul,this.yd(s),this.size++}},ll.ld.prototype.yd=function(t){for(;t!=this.ad&&t!=this.root&&t.parent.color==ul;){var s;t.parent==t.parent.parent.left?(s=t.parent.parent.right).color==ul?(t.parent.color=!1,s.color=!1,t.parent.parent.color=ul,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.dd(t)),t.parent.color=!1,t.parent.parent.color=ul,t.parent.parent!=this.ad&&this.pd(t.parent.parent)):(s=t.parent.parent.left).color==ul?(t.parent.color=!1,s.color=!1,t.parent.parent.color=ul,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.pd(t)),t.parent.color=!1,t.parent.parent.color=ul,t.parent.parent!=this.ad&&this.dd(t.parent.parent))}this.root.color=!1},ll.ld.prototype.Sd=function(t){var s,i;(i=(s=t.left==this.ad||t.right==this.ad?t:this.wd(t)).left!=this.ad?s.left:s.right).parent=s.parent,s.parent==this.ad?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.vd(i),this.size--},ll.ld.prototype.vd=function(t){for(;t!=this.root&&0==t.color;){var s;t==t.parent.left?((s=t.parent.right).color==ul&&(s.color=!1,t.parent.color=ul,this.dd(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=ul,t=t.parent):(0==s.right.color&&(s.left.color=!1,s.color=ul,this.pd(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.dd(t.parent),t=this.root)):((s=t.parent.left).color==ul&&(s.color=!1,t.parent.color=ul,this.pd(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=ul,t=t.parent):(0==s.left.color&&(s.right.color=!1,s.color=ul,this.dd(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.pd(t.parent),t=this.root))}t.color=!1},ll.ld.prototype.remove=function(t){var s=this.gd(t);if(s!=this.ad){var i=s.key;return this.Sd(s),i}return null},ll.ld.prototype.bd=function(t,s){this.remove(s)},ll.ld.prototype.min=function(t){for(;t.left!=this.ad;)t=t.left;return t},ll.ld.prototype.max=function(t){for(;t.right!=this.ad;)t=t.right;return t},ll.ld.prototype.wd=function(t){if(t.right!=this.ad)return this.min(t.right);for(var s=t.parent;s!=this.ad&&t==s.right;)t=s,s=s.parent;return s},ll.ld.prototype.xd=function(t){if(t.left!=this.ad)return this.max(t.left);for(var s=t.parent;s!=this.ad&&t==s.left;)t=s,s=s.parent;return s},ll.ld.prototype.Td=function(t){if(this.size>0){var s=this.gd(t);if(s==this.ad)return null;if(s.right!=this.ad)return this.min(s.right).key;for(var i=s.parent;i!=this.ad&&s==i.right;)s=i,i=i.parent;return i!=this.ad?i.key:null}return null},ll.ld.prototype.Md=function(t){if(this.size>0){var s=this.gd(t);if(s==this.ad)return null;if(s.left!=this.ad)return this.max(s.left).key;for(var i=s.parent;i!=this.ad&&s==i.left;)s=i,i=i.parent;return i!=this.ad?i.key:null}return null},ll.ld.prototype.Gd=function(){return this.min(this.root).key},ll.ld.prototype._d=function(){return this.max(this.root).key},ll.ld.prototype.gd=function(t){for(var s=this.root;s!=this.ad&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},ll.ld.prototype.contains=function(t){return null!=this.gd(t).key},ll.ld.prototype.getValues=function(){var t=[];return this.forEach(function(s){t.push(s)}),t},ll.ld.prototype.fd=function(t){if("array"==ll.Id(t))for(var s=0;s<t.length;s++)this.md(t[s]);else if("function"==ll.Id(t.forEach))t.forEach(this.md,this);else if("function"==ll.Id(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.md(i[s])}else if("object"==ll.Id(t))for(var e in t)this.md(t[e])},ll.ld.prototype.Cd=function(t){if("array"==ll.Id(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==ll.Id(t.forEach))t.forEach(this.bd,this);else if("function"==ll.Id(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.remove(i[s])}else if("object"==ll.Id(t))for(var e in t)this.remove(t[e])},ll.ld.prototype.Pd=function(t){if("array"==ll.Id(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==ll.Id(t.forEach))return t.every(this.contains,this);if("function"==ll.Id(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==ll.Id(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},ll.ld.prototype.range=function(t,s){var i=[];return this.Rd(function(t){i.push(t)},t,s),i},ll.ld.prototype.Ed=function(t,s){if(!this.Ad())for(var i=this.min(this.root);i!=this.ad;){if(t.call(s,i.key,this))return;i=this.wd(i)}},ll.ld.prototype.Fd=function(t,s,i){if(!this.Ad())for(var e=this.gd(s);e!=this.ad;){if(t.call(i,e.key,this))return;e=this.wd(e)}},ll.ld.prototype.traverseTo=function(t,s,i){if(!this.Ad())for(var e=this.min(this.root),n=this.gd(s);e!=n;){if(t.call(i,e.key,this))return;e=this.wd(e)}},ll.ld.prototype.Rd=function(t,s,i,e){if(!this.Ad())for(var n=this.gd(s),r=this.gd(i);n!=r;){if(t.call(e,n.key,this))return;n=this.wd(n)}},ll.ld.prototype.Od=function(t,s){if(!this.Ad())for(var i=this.max(this.root);i!=this.ad;){if(t.call(s,i.key,this))return;i=this.xd(i)}},ll.ld.prototype.forEach=function(t,s){if(!this.Ad())for(var i=this.min(this.root);i!=this.ad;i=this.wd(i))t.call(s,i.key,i.key,this)},ll.ld.prototype.some=function(t,s){if(this.Ad())return!1;for(var i=this.min(this.root);i!=this.ad;i=this.wd(i))if(t.call(s,i.key,i.key,this))return!0;return!1},ll.ld.prototype.every=function(t,s){if(this.Ad())return!1;for(var i=this.min(this.root);i!=this.ad;i=this.wd(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},ll.ld.prototype.map=function(t,s){var i=[];if(this.Ad())return i;for(var e=this.min(this.root);e!=this.ad;e=this.wd(e))i.push(t.call(s,e.key,e.key,this));return i},ll.ld.prototype.filter=function(t,s){var i=[];if(this.Ad())return i;for(var e=this.min(this.root);e!=this.ad;e=this.wd(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},ll.ld.prototype.Dd=function(){return this.size},ll.ld.prototype.Ad=function(){return 0==this.size},ll.ld.prototype.isSubsetOf=function(t){var s=ll.Dd(t);if(this.Dd()>s)return!1;var i=0;if(this.Ad())return!0;for(var e=this.min(this.root);e!=this.ad;e=this.wd(e))ll.contains.call(t,t,e.key)&&i++;return i==this.Dd()},ll.ld.prototype.intersection=function(t){var s=new ll.ld(this.compare);if(this.Ad())return s;for(var i=this.min(this.root);i!=this.ad;i=this.wd(i))t.contains.call(t,i.key,i.key,this)&&s.md(i.key);return s},al.ld=class extends al.Wn{constructor(t){super(),this.Ld=new ll.ld(t),this.kd=!1,this.Nd=new Set,this.Bd=new Set}Bu(t){this.kd?this.Ld.contains(t)?this.Bd.delete(t):this.Nd.add(t):this.Ld.md(t)}Kf(t){this.kd?this.Ld.contains(t)?this.Bd.add(t):this.Nd.delete(t):this.Ld.remove(t)}js(t){return this.kd?!!this.Nd.has(t)||!this.Bd.has(t)&&this.Ld.contains(t):this.Ld.contains(t)}Pu(){this.Ld.clear(),this.Nd.clear(),this.Bd.clear()}toArray(){if(this.kd)throw new Error("cannot be used in queueing mode");return this.Ld.getValues()}Fu(){return this.Ld.Dd()+this.Nd.size-this.Bd.size}Ru(){return 0===this.Fu()}Ud(){if(this.Ru())throw new Error("empty set");if(this.kd)throw new Error("cannot be used in queueing mode");const t=this.Ld;return t.min(t.root).key}Vd(){if(this.Ru())throw new Error("empty set");if(this.kd)throw new Error("cannot be used in queueing mode");const t=this.Ud();return this.Kf(t),t}Wd(t){if(t=!!t,this.kd!==t&&(this.kd=t,!t)){for(const t of this.Bd)this.Ld.remove(t);this.Bd.clear();for(const t of this.Nd)this.Ld.md(t);this.Nd.clear()}}zd(t){this.Ld.forEach(t)}*values(){if(this.Ru())return;const t=this.Ld;for(let s=t.min(t.root);s!=t.ad;s=t.wd(s))yield s.key}[Symbol.iterator](){return this.values()}}}{const cl=self._s;cl.jd=class{constructor(t=cl.hardwareConcurrency){this.Hd=t,this.Jd=[],this.qd=0}Bu(t,s){return new Promise((i,e)=>{const n={if:t,resolve:i,reject:e,$d:s};s?.signal&&s.signal.aborted?e(new Error("abort")):(s?.signal&&(n.onabort=()=>{const t=this.Jd.indexOf(n);-1!==t&&(this.Jd.splice(t,1),e(new Error("abort")))},s.signal.addEventListener("abort",n.onabort)),this.Jd.push(n),this.Xd())})}Yd(t){for(let s=0,i=this.Jd.length;s<i;++s)if(this.Jd[s].if===t)return s;return-1}Kd(t,s){const i=this.Yd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.Jd[i].resolve(s),this.Jd.splice(i,1)}Zd(t,s){const i=this.Yd(t);if(-1===i)throw new Error("cannot find promise to reject");this.Jd[i].reject(s),this.Jd.splice(i,1)}async Xd(){if(!this.Jd.length)return;if(this.qd>=this.Hd)return;this.qd++;const t=this.Jd.shift();t.$d?.signal&&t.onabort&&t.$d.signal.removeEventListener("abort",t.onabort);try{const s=await t.if();t.resolve(s)}catch(s){t.reject(s)}this.qd--,this.Xd()}}}{const fl=self._s;fl.Qd=class{constructor(t,s,i){this.Df=t,this.tp=s,this.sp=i||2*s,this.ip=-1,this.ep=-1/0,this.np=()=>this.rp(),this.hp=!1,this.op=!1,this.ap=null}lp(t){this.op=!!t}up(){return void 0!==fl.cp&&fl.cp.fp()?this.sp:this.tp}pp(...t){if(-1!==this.ip)return;this.ap=t;let s=fl.Ff(),i=s-this.ep,e=this.up();i>=e&&this.op?(this.ep=s,this.mp()):this.ip=self.setTimeout(this.np,Math.max(e-i,4))}mp(){this.hp=!0;const t=this.ap;this.ap=null,t?this.Df(...t):this.Df(),this.hp=!1}Bf(){this.hp||(this.gp(),this.ap=null,this.ep=fl.Ff())}rp(){this.ip=-1,this.ep=fl.Ff(),this.mp()}gp(){-1!==this.ip&&(self.clearTimeout(this.ip),this.ip=-1)}Hn(){this.gp(),this.Df=null,this.ap=null,this.np=null}}}{const dl=self._s;dl.yp=class{constructor(){this.Sp=new Map,this.wp=!1,this.vp=null,this.bp=null,this.xp=null,this.Tp=null}Mp(t){this.wp=!!t}Gp(){return this.wp}_p(t){this.vp=t}Ip(t){if(!this.vp)throw new Error("no get base size callback set");return this.vp(t)}Cp(t){this.bp=t}Pp(t,s,i,e,n,r){if(!this.bp)throw new Error("no raster at size callback set");return this.bp(t,s,i,e,n,r)}Rp(t){this.xp=t}Ep(t){if(!this.xp)throw new Error("no release result callback set");this.xp(t)}Ap(t){this.Tp=t}Fp(){if(!this.Tp)throw new Error("no redraw callback set");this.Tp()}Op(t){let s=this.Sp.get(t);return s||(s=dl.jn(dl.Dp,this,t),this.Sp.set(t,s)),s.Lp(),s}kp(t){this.Sp.delete(t.Np())}Bp(){for(const t of this.Sp.values())t.Up(),t.Vp()}}}{const pl=self._s;pl.Dp=class{constructor(t,s){this.Wp=t,this.zp=s,this.jp=0,this.Hp=0,this.Jp=0,this.qp=this.Wp.Ip(s).then(t=>{this.Wp&&(this.Hp=t[0],this.Jp=t[1],this.Wp.Fp())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.$p=!0,this.Wp&&this.Wp.Fp()}),this.Xp=0,this.Yp=0,this.Kp=0,this.Zp=0,this.Qp=!1,this.tm=null,this.sm=!1,this.$p=!1}Hn(){if(this.jp<=0)throw new Error("already released");this.jp--,0===this.jp&&this.im()}Up(){this.tm&&(this.Wp.Ep(this.tm),this.tm=null)}im(){this.Up(),this.Wp.kp(this),this.Wp=null}Np(){return this.zp}Lp(){this.jp++}nm(){return this.jp>0}rm(){return this.tm}Vp(){this.sm=!0}async hm(t,s,i){if(0===s||0===i||this.$p)return;if(this.Qp)return;let e=pl.vr(Math.ceil(s)),n=pl.vr(Math.ceil(i));const r=Math.max(e,n);if(r>4096){const t=4096/r;s*=t,i*=t,e=Math.min(Math.ceil(e*t),4096),n=Math.min(Math.ceil(n*t),4096)}if(s<e&&i<n){const t=s/i;e/n>t?(s=n*t,i=n):(s=e,i=e/t)}if(this.Wp.Gp()&&(e=Math.ceil(s),n=Math.ceil(i)),e<=this.Xp&&n<=this.Yp&&!this.sm)return;this.Qp=!0,this.Xp=e,this.Yp=n;const h=await this.Wp.Pp(this.zp,t,this.Xp,this.Yp,s,i);this.Wp&&(this.Up(),this.tm=h,this.Kp=s,this.Zp=i,this.Qp=!1,this.sm=!1,this.Wp.Fp())}om(){return this.qp}am(){return this.Hp}lm(){return this.Jp}um(){return this.Kp}fm(){return this.Zp}dm(){return this.$p}}}{let ml=function(t){return bl.get(t)};0;const gl=self._s;gl.pm="\ufeff";const yl=new Set("0123456789");gl.gm=function(t){return yl.has(t)};const Sl=new Set(" \t\n\r\u2028\u2029");gl.ym=function(t){return Sl.has(t)},gl.Sm=function(t){return[...t].filter(t=>!gl.ym(t)).join("")},gl.wm=function(t){for(const s of t)if(!gl.ym(s))return!1;return!0},gl.vm=function(t){for(const s of t)if(!gl.ym(s))return!1;return!0},gl.bm=function(t){return 1===t.length&&t.charCodeAt(0)<32},gl.xm=function(t){return[...t].filter(t=>!gl.bm(t)).join("")};let wl=null;try{wl=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}gl.Tm=function(t){return!gl.ym(t)&&wl&&wl.test(t)};const vl=new Set("0123456789.+-e");gl.Mm=function(t){if(!(t=t.trim()).length)return!1;let s=t.charAt(0);if("-"!==s&&!yl.has(s))return!1;for(let s of t)if(!vl.has(s))return!1;return!0},gl.Gm=function(t){let s=t.length;for(;s>0;){let i=t.charAt(s-1);if(!gl.gm(i))break;--s}return t.substr(0,s)},gl._m=function(t){let s=gl.Gm(t),i=t.substr(s.length);return i=i?(parseInt(i,10)+1).toString():"2",s+i};const bl=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]),xl=/[&<>"']/g;gl.Im=function(t){return t.replace(xl,ml)},gl.Cm=function(t){let s=gl.Pm(t,"\\","\\\\");return s=gl.Pm(s,'"','\\"'),s=gl.Pm(s,"\t","\\t"),s=gl.Pm(s,"\r",""),gl.Pm(s,"\n","\\n")},gl.Rm=function(t){let s=gl.Pm(t,"&","&amp;");return s=gl.Pm(s,"<","&lt;"),s=gl.Pm(s,">","&gt;"),gl.Pm(s,'"',"&quot;")};const Tl=/[-[\]{}()*+?.,\\^$|#\s]/g;gl.Yi=function(t){return t.replace(Tl,"\\$&")},gl.Em=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},gl.Am=function(t,s){let i=0,e=0;for(;i<s;){if(i=t.indexOf("\n",i),-1===i)return e;e++,i++}return e},gl.Fm=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());const e=s.length;let n=0,r=0,h=[];for(;(r=t.indexOf(s,n))>-1;)h.push(r),n=r+e;return h},gl.Pm=function(t,s,i){return t.replaceAll(s,()=>i)},gl.Om=function(t,s,i){return t.replace(new RegExp(gl.Yi(s),"gi"),()=>i)},gl.Dm=function(t,s){"string"==typeof s?t.textContent=s:s.Lm()?t.textContent=s.toString():(t.innerHTML=s.km(),s instanceof gl.dn&&s.Nm(t))},gl.Bm=function(t,s){return t instanceof gl.fn||t instanceof gl.dn?t.equals(s):s instanceof gl.fn||s instanceof gl.dn?s.equals(t):t===s},gl.Um=function(t,...s){let i=t;for(let e=0,n=s.length;e<n;++e){const n=`{${e}}`;if(!t.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);i=i.replace(n,s[e].toString())}return i},gl.Vm=function(t,...s){let i=t,e=-1,n=-1;for(let r=0,h=s.length;r<h;++r){const h=`{${r}}`;t.includes(h)?(n=r,i=i.replace(h,s[r].toString())):-1===e&&(e=r)}if(e>=0&&n>=0&&e<n)throw new Error(`missing placeholder '${e}' in string substitution`);return i},gl.Wm=function(t,s){let i=t;for(let[t,e]of Object.entries(s))i=i.replaceAll(t,e.toString());return i},gl.zm=function(t,s){return t>s?1:t<s?-1:0},gl.jm=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return i>e?1:i<e?-1:0};const Ml=new self.Intl.Segmenter;gl.Hm=function(t){if(1===t.length)return[t];const s=[];for(const i of Ml.segment(t))s.push(i.segment);return s},gl.Jm=function*(t){for(const s of Ml.segment(t))yield s.segment},gl.qm=function(t){let s=0;for(const i of Ml.segment(t))++s;return s};const Gl=1073741824,_l=1099511627776;gl.$m=function(t,s){let i="common."+(s?"dataRates":"dataSizes")+".";const e=self.Xm;if(t<1024)return e(i+"bytes",t);if(t<1048576){let s=t/1024;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"kilobytes",s)}if(t<Gl){let s=t/1048576;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"megabytes",s)}if(t<_l){let s=t/Gl;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"gigabytes",s)}{let s=t/_l;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"terabytes",s)}};const Il={Ym:!1,Km:!0,Zm:!0,Qm:!0,tg:!0};gl.sg=function(t,s){s=Object.assign({},Il,s),gl.eg.ig("common.time");const i=[],e=self.lang,n=self.ng;if(s.Km){const s=Math.floor(t/86400);s>0&&(t-=24*s*3600,i.push(n(".days",null,s)))}if(s.Zm){const s=Math.floor(t/3600);(s>0||i.length)&&(t-=3600*s,i.push(n(".hours",null,s)))}if(s.Qm){const e=Math.floor(t/60);(e>0||i.length||!s.tg)&&(t-=60*e,i.push(n(".minutes",null,e)))}if(s.tg){const s=Math.floor(t%60);i.push(n(".seconds",null,s))}const r=(s.Ym?e(".approx-prefix"):"")+i.join(e(".separator"));return gl.eg.rg(),r},gl.hg=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),n=s-e.length;for(let t=0;t<n;++t)i+="0";return i+e},gl.og=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},gl.ag=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());gl.Th(i,4,"0"),gl.Th(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const s=i[t]-e[t];if(0!==s)return s<0?-1:1}return 0},gl.lg=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random());return("x"===t?s:3&s|8).toString(16)})},gl.ug=function(t,s){if(t.length!==s.length)throw new Error("strings must be same length");let i=0;for(let e=0,n=t.length;e<n;++e)t.charAt(e)!==s.charAt(e)&&++i;return i},gl.cg=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,n,r,h,o;for(t.length>s.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,n=1;n<=t.length;n++)h=s[e-1]===t[n-1]?o[n-1]:Math.min(o[n-1]+1,Math.min(r+1,o[n]+1)),o[n-1]=r,r=h;o[t.length]=r}return o[t.length]},gl.fg=function(t){return(new TextEncoder).encode(t).length}}{let Cl=function(t,s,i){const e=Rl.get(i);if(!e)return"class"===i?s?"</span>":`<span class="bbclass${Ll++}">`:t;if("string"==typeof e){if("a"===e&&0===Ol.length||"abbr"===e&&0===Dl.length)return t;if("a"!==e||s){if("abbr"!==e||s)return"<"+s+e+">";{const t=parseInt(i.substring(3),10)-1;if(t<0||t>=Dl.length)throw new Error("invalid bbcode tip substitution");const s=Dl[t];let e="";if("string"==typeof s?e=s:"function"==typeof s&&(e=s()),"string"!=typeof e)throw new TypeError("invalid bbcode tip");return`<abbr title="${Pl.Pm(e,'"',"&quot;")}">`}}{const t=parseInt(i.substring(1),10)-1;if(t<0||t>=Ol.length)throw new Error("invalid bbcode link substitution");const s=Ol[t];if("string"==typeof s)return`<a href="${Ol[t]}">`;if("function"==typeof s)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(e)){let t=e[0],i=e[1];return s?"</"+t+">":`<${t} class="${i}">`}};0;const Pl=self._s,Rl=(self.assert,new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]])),El=new Set(["icon"]),Al=/\[(\/?)([a-zA-Z0-9]+)\]/g,Fl=/\[(\/?)([^\[\n]*?)\]/g;let Ol=null,Dl=null,Ll=0;const kl=/\n/g;Pl.dn=class{constructor(t,s){if(this.dg=s&&s.pg?t:Pl.Im(t),this.mg="",this.gg=!1,this.yg=[],this.Sg=[],s){if(this.gg=!!s.wg,s.links){if(s.links.length>9)throw new Error("too many links");this.yg=s.links}if(s.vg){if(s.vg.length>9)throw new Error("too many tips");this.Sg=s.vg}}this.bg=this.dg.includes("["),this.xg=this.gg&&this.dg.includes("\n"),this.Tg=!this.bg&&!this.xg&&!this.dg.includes("&"),this.Mg=!1,this.Gg=[]}toString(){return this.dg}valueOf(){return this.dg}Lm(){return this.Tg}_g(){return this.bg?this.dg.replace(Al,""):this.dg}km(){if(this.Tg)return this.dg;if(!this.mg&&this.dg){let t=this.dg;this.bg&&(Ll=0,Ol=this.yg,Dl=this.Sg,t=t.replace(Al,Cl),Ol=null,Dl=null),this.xg&&(t=t.replace(kl,"<br>")),this.mg=t}return this.mg}Nm(t){if(this.yg.length)for(let s=0,i=this.yg.length;s<i;++s){const i=this.yg[s];if("function"!=typeof i)continue;const e=t.querySelector(".bblink"+s);if(!e)throw new Error("unable to attach BBString link handler");e.onclick=i}}equals(t){return t instanceof Pl.fn?this.km()===t.km():t instanceof Pl.dn?this.dg===t.dg:this.dg===t}Ig(){if(this.Mg)return this.Gg;const t=[],s=this.dg,i=[];Fl.lastIndex=0;let e=0,n=null;for(;null!==(n=Fl.exec(s));){const r=n.index;if(r>0&&"\\"===s.charAt(r-1))continue;const h=n[0],o=n[1],a=n[2],l=s.substring(e,r);if(e=r+h.length,l&&t.push({text:l,Cg:i.slice(0)}),a)if(o){const t=a.toLowerCase();for(let s=i.length-1;s>=0;--s)if(i[s].tag===t){i.splice(s,1);break}}else{let s=a,e=null;const n=a.indexOf("=");if(-1!==n?(s=a.substring(0,n).toLowerCase(),e=a.substring(n+1)):s=s.toLowerCase(),El.has(s)){if("icon"!==s)throw new Error(`unknown self-closing tag ${s}`);t.push({icon:e,Cg:i.slice(0)})}else i.push({tag:s,Pg:e})}}e<s.length&&t.push({text:s.substring(e),Cg:i.slice(0)});for(const s of t)s.text&&(s.text=this.Rg(s.text));return this.Gg=t.map(t=>t.icon?Pl.jn(Pl.Eg,{icon:t.icon,Cg:t.Cg}):Pl.jn(Pl.Ag,{Fg:Pl.Hm(t.text),Cg:t.Cg})),this.Mg=!0,this.Gg}Rg(t){return t=Pl.Pm(t,"\\[","["),Pl.Pm(t,"\\\\","\\")}static Og(t){return Pl.jn(Pl.dn,t,{pg:!0})._g()}static Dg(t){return t.replace(Fl,"")}}}{let Nl=function(t){return""!==t&&""!==t&&zl.ym(t)},Bl=function(t){return jl.has(t)},Ul=function(t){return zl.Tm(t)&&!Bl(t)},Vl=function(t){for(;t.length>0&&Nl(t.at(-1));)t.pop()},Wl=function(t){return"\n"===t||"\r\n"===t};0;const zl=self._s,jl=new Set("");class Hl{constructor(){this.Lg=[],this.width=0,this.height=0,this.fontBoundingBoxAscent=0,this.fontBoundingBoxDescent=0,this.kg=0,this.Ng=!1}static Bg(t,s,i,e,n,r){const h=new Hl;return h.Lg.push(t),h.width=s,h.height=i,h.fontBoundingBoxAscent=e,h.fontBoundingBoxDescent=n,h.kg=r,h}rd(t){this.Lg=t.Lg.map(t=>t.Ug()),this.width=t.width,this.height=t.height,this.fontBoundingBoxAscent=t.fontBoundingBoxAscent,this.fontBoundingBoxDescent=t.fontBoundingBoxDescent,this.kg=t.kg,this.Ng=t.Ng}Bf(){this.Lg=[],this.width=0,this.height=0,this.fontBoundingBoxAscent=0,this.fontBoundingBoxDescent=0,this.kg=0,this.Ng=!1}Vg(t,s){s||(this.width=t.width),this.height=t.height||0,this.fontBoundingBoxAscent=t.fontBoundingBoxAscent||0,this.fontBoundingBoxDescent=t.fontBoundingBoxDescent||0,this.kg=t.kg||0,this.Ng=!0}Wg(t){const s=this.Lg.length?this.Lg.at(-1):null;let i=0;s&&s.zg()&&t[0].zg()&&t[0].jg()===s.jg()&&(s.Hg(t[0].Jg()),i=1);for(let s=t.length;i<s;++i){const s=t[i];this.Lg.push(s.Ug())}this.Ng=!1}}zl.qg=class{constructor(){this.$g=[],this.Xg=null,this.Yg=new Hl,this.Kg=new Hl,this.Zg=!1}Qg(){return this.$g}ty(){return this.$g.length}sy(t){this.Xg=t}qg(t,s,i,e,n){if("string"==typeof t&&(t=[zl.jn(zl.Ag,{Fg:zl.Hm(t)})]),zl.wh(this.$g),!t.length||1===t.length&&t[0].zg()&&t[0].Ru()||i<2)return;if(1===t.length){const e=t[0];if(e.zg()&&e.iy()<=100&&!e.ey()){let{width:t,height:r,fontBoundingBoxAscent:h,fontBoundingBoxDescent:o,kg:a}=s(e);if(t+=n,e.ny(t),e.hy(r),e.oy(h||0),e.ly(o||0),e.uy(a||0),t<=i)return void this.py(Hl.Bg(e,t,r,h,o,a))}}let r,h=4;"word"===e?r=this.my(t):"cjk"===e?(r=this.gy(t),h=8):(r=this.yy(t),h=8),this.Sy(r,s,i,h,n)}my(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.jg();if(n.wy())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.Jg())if(Wl(r))i.length>0&&s.push(i),s.push([zl.jn(zl.Ag,{Fg:["\n"],Cg:t})]),i=[];else if(0===i.length)i.push(zl.jn(zl.Ag,{Fg:[r],Cg:t})),e=Nl(r);else{const n=Nl(r);if(n===e){const s=i.at(-1);s.jg()===t?s.vy(r):i.push(zl.jn(zl.Ag,{Fg:[r],Cg:t}))}else s.push(i),i=[zl.jn(zl.Ag,{Fg:[r],Cg:t})],e=n}}return i.length>0&&s.push(i),s}gy(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.jg();if(n.wy())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.Jg())if(Wl(r))i.length>0&&s.push(i),s.push([zl.jn(zl.Ag,{Fg:["\n"],Cg:t})]),i=[];else if(0===i.length)i.push(zl.jn(zl.Ag,{Fg:[r],Cg:t})),e=Bl(r);else if(e||Ul(r)){const s=i.at(-1);s.jg()===t?s.vy(r):i.push(zl.jn(zl.Ag,{Fg:[r],Cg:t})),e=Bl(r)}else s.push(i),i=[zl.jn(zl.Ag,{Fg:[r],Cg:t})],e=Bl(r)}return i.length>0&&s.push(i),s}yy(t){const s=[];for(const i of t)if(i.zg()){const t=i.Jg();zl.An(s,t.map(t=>[zl.jn(zl.Ag,{Fg:[t],Cg:i.jg()})]))}else s.push([i]);return s}by(t,s){let i=0,e=0,n=0,r=0,h=0;for(const o of t){if(-1===o.xy()){const t=s(o);o.hy(t.height),o.oy(t.fontBoundingBoxAscent||0),o.ly(t.fontBoundingBoxDescent||0),o.uy(t.kg||0),o.zg()?o.ny(t.width):o.wy()&&o.Ty(this.Xg)}i+=o.xy(),e=Math.max(e,o.My()),n=Math.max(n,o.Gy()),r=Math.max(r,o._y()),h=Math.max(h,o.Iy())}return{width:i,height:e,fontBoundingBoxAscent:n,fontBoundingBoxDescent:r,kg:h}}Cy(){this.Yg.Bf(),this.Kg.Bf()}py(t){this.$g.push(new zl.qg.Py(t)),this.Cy()}Ry(t){return 1===t.length&&t[0].zg()&&1===t[0].iy()&&Wl(t[0].Jg()[0])}Ey(t){return t[0].zg()&&zl.vm(t[0].Jg())}Sy(t,s,i,e,n){let r=0;for(;r<t.length;)r=this.Ay(t,r,s,i,e);if(this.Kg.Lg.length>0){if(!this.Kg.Ng){const t=this.by(this.Kg.Lg,s);this.Kg.Vg(t)}this.py(this.Kg)}this.Fy(s,n),this.Cy(),this.Zg=!1}Ay(t,s,i,e,n){const r=this.Yg,h=this.Kg,o=t[s];if(this.Ry(o)){if(!h.Ng){const t=i(zl.jn(zl.Ag,{Fg:[" "],Cg:o[0].jg()}));h.Vg(t,!0)}return this.py(h),s+1}const a=this.Oy(t,s,n),l=this.by(h.Lg,i);return h.Vg(l),l.width>=e?this.Dy(t,s,i,e):(r.rd(h),this.Zg&&this.py(r),a+1)}Oy(t,s,i){const e=this.Kg;this.Zg=!1;let n=s,r=0;for(let s=t.length;n<s;++n){const s=t[n];if(this.Ry(s)){this.Zg=!0;break}if(e.Wg(s),!this.Ey(s)&&(++r,r===i))break}return n}Dy(t,s,i,e){const n=this.Yg,r=this.Kg;r.rd(n);let h=s;for(let s=t.length;h<s;++h){const o=t[h];if(this.Ry(o))return this.py(n),h+1;if(r.Wg(o),!this.Ey(o)||0===n.Lg.length){const o=this.by(r.Lg,i);if(r.Vg(o),o.width>=e){let i;return n.Lg.length>0?i=n:(i=r,++h,h<s&&this.Ey(t[h])&&++h),this.py(i),h}n.rd(r)}}return h}Fy(t,s){for(const i of this.$g){const e=i.Ly();if(!e.length)continue;let n=e.at(-1);if(n.zg()){const r=n.Jg(),h=r.slice(0);if(Vl(h),0===h.length)i.ky(-n.xy()),e.pop();else if(h.length<r.length){n.Ny(h);const s=t(n).width,e=n.xy()-s;n.ny(s),i.ky(-e)}0!==s&&e.length>0&&(n=e.at(-1),n.ky(s),i.ky(s))}}}Pu(){zl.wh(this.$g)}By(){return this.$g.reduce((t,s)=>Math.max(t,s.xy()),0)}Uy(){return this.$g.reduce((t,s)=>t+s.My(),0)}}}self._s.qg.Py=class{constructor(t){this.Gg=t.Lg,this.Vy=t.width,this.Wy=t.height,this.zy=t.fontBoundingBoxAscent,this.jy=t.fontBoundingBoxDescent,this.Hy=t.kg,this.Jy=0,this.qy=0}Lg(){return this.Gg.values()}*$y(){const t=this.Gg;for(let s=t.length-1;s>=0;--s)yield t[s]}Ly(){return this.Gg}ky(t){this.Vy+=t}xy(){return this.Vy}My(){return this.Wy}Xy(){return this.zy}_y(){return this.jy}Iy(){return this.Hy}Yy(t){this.Jy=t}Ky(){return this.Jy}Zy(t){this.qy=t}Qy(){return this.qy}};self._s.tS=class{constructor(t){this.sS=t.Cg||[],this.Vy=t.width||-1,this.Wy=t.height||-1,this.zy=t.fontBoundingBoxAscent||-1,this.jy=t.fontBoundingBoxDescent||-1,this.Hy=t.kg||-1,this.Jy=0,this.qy=0}zg(){return!1}wy(){return!1}jg(){return this.sS}iS(t){const s=this.sS;for(let i=s.length-1;i>=0;--i){const e=s[i];if(e.tag===t)return e}return null}eS(t){return!!this.iS(t)}nS(){const t=new Map;for(const s of this.sS)t.set(s.tag,s.Pg);return t}ky(t){this.Vy+=t}ny(t){this.Vy=t}xy(){return this.Vy}hy(t){this.Wy=t}My(){return this.Wy}oy(t){this.zy=t}Gy(){return this.zy}ly(t){this.jy=t}_y(){return this.jy}uy(t){this.Hy=t}Iy(){return this.Hy}Yy(t){this.Jy=t}Ky(){return this.Jy}Zy(t){this.qy=t}Qy(){return this.qy}};{const Jl=self._s;Jl.Ag=class extends Jl.tS{constructor(t){super(t),this.rS=t.Fg}zg(){return!0}Hg(t){Jl.An(this.rS,t),this.Vy=-1,this.Wy=-1,this.zy=-1,this.jy=-1,this.Hy=-1}vy(t){this.rS.push(t)}Ug(){return Jl.jn(Jl.Ag,{Fg:this.rS.slice(0),Cg:this.sS,width:this.Vy,height:this.Wy,fontBoundingBoxAscent:this.zy,fontBoundingBoxDescent:this.jy,kg:this.Hy})}Jg(){return this.rS}Ny(t){this.rS=t}iy(){return this.rS.length}Ru(){return 0===this.rS.length}ey(){return this.rS.includes("\n")}}}{const ql=self._s;ql.Eg=class extends ql.tS{constructor(t){super(t),this.hS=t.icon}wy(){return!0}oS(){return this.hS}Ug(){return ql.jn(ql.Eg,{icon:this.hS,Cg:this.sS,width:this.Vy,height:this.Wy,fontBoundingBoxAscent:this.zy,fontBoundingBoxDescent:this.jy,kg:this.Hy})}aS(t){if(!t)return null;let s=Number(this.hS);return String(s)===this.hS?(s=Math.floor(s),t.lS(s)):t.uS(this.hS)}Ty(t){const s=this.aS(t);this.Vy=s?this.Wy*s.xy()/s.My():0}cS(t){const s=this.aS(t);return s?s.cS():null}iy(){return 1}}}{const $l=self._s;$l.fS=class{constructor(t){this.dS=new Map,this.pS=t.mS,this.gS=t.yS}Hn(){for(const t of this.dS.values())t.Hn();this.dS.clear()}SS(t){let s=this.dS.get(t);if(s)return s;const i=this.pS(t);return s=$l.jn($l.wS,this,{source:t,vS:i}),this.dS.set(t,s),s}bS(t){return this.dS.has(t)}xS(t){const s=this.dS.get(t);s&&s.Hn(),this.dS.delete(t)}async TS(t){return await this.gS(t)}}}{const Xl=self._s;Xl.wS=class{constructor(t,s){this.MS=t,this.GS=s.source,this._S=[],this.IS=new Map,this.CS=!1,this.PS=!1,this.RS=null;const i=s.vS.ES;for(let t=0,s=i.length;t<s;++t){const s=i[t],e=Xl.jn(Xl.AS,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this._S.push(e),s.tag&&this.IS.set(s.tag.toLowerCase(),e)}}Hn(){for(const t of this._S)t.Hn();Xl.wh(this._S),this.IS.clear(),this.MS=null,this.GS=null}FS(){return this.CS}OS(){return this.PS}DS(){return this.RS||(this.RS=this.LS()),this.RS}async LS(){if(this.CS)return;this.CS=!0,this.PS=!0;const t=await this.MS.TS(this.GS);if(!this.MS)return;const s=t.ES;for(let t=0,i=Math.min(s.length,this._S.length);t<i;++t){const i=s[t].kS;this._S[t].NS(i)}this.PS=!1}lS(t){return(t=Math.floor(t))<0||t>=this._S.length?null:this._S[t]}uS(t){return this.IS.get(t.toLowerCase())||null}}}self._s.AS=class{constructor(t,s){this.BS=t,this.GS=s.source||null,this.US=s.index,this.VS=s.tag,this.Vy=s.width,this.Wy=s.height,this.WS=null}Hn(){this.Vy=0,this.Wy=0,this.BS=null}zS(){return this.GS}xy(){return this.Vy}My(){return this.Wy}NS(t){this.WS=t}cS(){return this.WS}};{let Yl=function(t,s,i,e){const n=hu;su.A(nu,i,s),su.A(ru,t,s),su.Gt(n,nu,ru),su.normalize(n,n),e.set(n[0],n[1],n[2],su.Mt(t,n))},Kl=function(t,s,i,e,n,r,h){const o=h.x,a=h.y,l=h.z,u=h.w,c=h.jS,f=h.HS,d=h.JS,p=1-c,m=1-f,g=1-d;return o*t*c+o*e*p+a*s*f+a*n*m+l*i*d+l*r*g>=u||o*e*c+o*t*p+a*n*f+a*s*m+l*r*d+l*i*g>u},Zl=function(t,s,i,e){return e.x*t+e.y*s+e.z*i>=e.w};0;const Ql=self._s,tu=self.hs,su=tu.ys,iu=tu.Ss,eu=tu.fs,nu=su.create(),ru=su.create(),hu=su.create(),ou=iu.create(),au=eu.create(),lu=su.create(),uu=su.create(),cu=su.create(),fu=su.create(),du=su.create(),pu=su.create(),mu=su.create(),gu=su.create(),yu=iu.S(0,0,1,1);Ql.qS={$S(t,s,i,e,n,r,h){const o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15];let c=n[0]*o+n[4]*a+n[8]*l+n[12]*u,f=n[1]*o+n[5]*a+n[9]*l+n[13]*u,d=n[2]*o+n[6]*a+n[10]*l+n[14]*u,p=n[3]*o+n[7]*a+n[11]*l+n[15]*u;return 0!==p&&(p=1/p,c*=p,f*=p,d*=p,h[0]=(.5*c+.5)*r[2]+r[0],h[1]=(.5*f+.5)*r[3]+r[1],h[2]=.5*(1+d),!0)},XS(t,s,i,e,n,r,h){const o=au,a=ou;return eu.multiply(o,n,e),null!==eu.T(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,iu.Rt(a,a,o),0!==a[3]&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0))},YS(t,s,i,e,n,r,h){const o=nu,a=ru;if(!Ql.qS.XS(t,s,0,e,n,r,o))return!1;if(!Ql.qS.XS(t,s,1,e,n,r,a))return!1;const l=ru;su.A(l,a,o);const u=hu;su.set(u,0,0,1);const c=-i,f=su.Mt(u,l);let d=0;if(0===f){if(0!==su.Mt(u,o)+c)return!1}else if(d=-(su.Mt(o,u)+c)/f,d<0)return!1;return su.wt(h,o,l,d),!0}};class Su{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.jS=NaN,this.HS=NaN,this.JS=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.jS=t>0?1:0,this.HS=s>0?1:0,this.JS=i>0?1:0}}Ql.qS.KS=class{constructor(){this.ZS=new Su,this.QS=new Su,this.tw=new Su,this.sw=new Su,this.iw=new Su,this.ew=new Su}rw(t,s){const i=yu;Ql.qS.XS(0,1,0,t,s,i,lu),Ql.qS.XS(1,1,0,t,s,i,uu),Ql.qS.XS(0,0,0,t,s,i,cu),Ql.qS.XS(1,0,0,t,s,i,fu),Ql.qS.XS(0,1,1,t,s,i,du),Ql.qS.XS(1,1,1,t,s,i,pu),Ql.qS.XS(0,0,1,t,s,i,mu),Ql.qS.XS(1,0,1,t,s,i,gu),Yl(cu,lu,du,this.ZS),Yl(lu,uu,pu,this.QS),Yl(uu,fu,gu,this.tw),Yl(fu,cu,mu,this.sw),Yl(mu,du,pu,this.ew),Yl(fu,uu,lu,this.iw)}hw(t,s,i,e,n,r){return Kl(t,s,i,e,n,r,this.ZS)&&Kl(t,s,i,e,n,r,this.QS)&&Kl(t,s,i,e,n,r,this.tw)&&Kl(t,s,i,e,n,r,this.sw)&&Kl(t,s,i,e,n,r,this.iw)&&Kl(t,s,i,e,n,r,this.ew)}ow(t,s,i){return!Zl(t,s,i,this.iw)}}}{const wu=self._s,vu=self.hs,bu=vu.ys,xu=vu.Ss,Tu=vu.fs,Mu=Tu.create(),Gu=bu.S(0,0,0),_u=bu.S(0,0,0),Iu=bu.S(0,0,0),Cu=bu.S(0,1,0),Pu=(xu.S(0,0,0,0),new wu.Cl),Ru=new wu.Rect,Eu=new wu.Cl(0,0,1,0,1,1,0,1),Au={aw:1,lw:1e4},Fu=Tu.S(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);wu.qS.uw=class{constructor(t){t=Object.assign({},Au,t),this.Vy=0,this.Wy=0,this.cw=wu.Zn(45),this.fw=Math.tan(this.cw/2),this.dw=Tu.create(),this.pw=Tu.create(),this.mw=!1,this.gw=t.aw,this.yw=t.lw,this.Sw=[],this.ww=new Map,this.bw=null,this.xw=null,this.Tw=null,this.Mw=null,this.Gw=null,this._w=null,this.Iw=null,this.Cw=null,this.Pw=null,this.Rw=null,this.Ew=null,this.Aw=null,this.Fw=new Map,this.Ow=null,this.Dw=[],this.Lw=new Map,this.kw=0,this.Nw=0,this.Bw=1,this.Uw=[this.Bw],this.Vw=1,this.Ww=[this.Vw],this.zw=.5,this.jw=[this.zw],this.Hw=0,this.Jw=!0,this.qw=!1}$w(){this.kw=0,this.Nw=0,this.bw=null,this.xw=null,this.Tw=null,this.Mw=null,this.Gw=null,this._w=null,this.Iw=null,this.Cw=null,this.Pw=null,this.Rw=null,this.Ew=null,this.Aw=null,this.Xw()}Yw(){this.$w(),this.Ow=null}Kw(){for(const t of this.Sw)t.Hn();this.$w()}xy(){return this.Vy}My(){return this.Wy}Zw(t){return this.Qw()?100:t/(2*this.tv())}sv(t){return this.Qw()?t/(2*this.tv())/this.Zw(t):1}ev(t){this.gw=t}nv(){return this.gw}rv(t){this.yw=t}hv(){return this.yw}ov(t){this.cw=t,this.fw=Math.tan(this.cw/2)}av(){return this.cw}tv(){return this.fw}lv(){this.mw=!1}uv(){this.mw=!0}Qw(){return!this.mw}cv(){return this.mw}fv(t,s,i=.5,e=.5){const n=this.nv(),r=this.hv(),h=this.av();if(.5===i&&.5===e)this.dv()?Tu.lt(t,h,s,n,r):Tu.perspective(t,h,s,n,r);else{const h=2*(i=1-i)-2,o=2*i,a=2*e-2,l=2*e,u=this.tv()*n,c=u*s;Tu.ht(t,h*c,o*c,a*u,l*u,n,r),this.dv()&&Tu.mul(t,Fu,t)}}pv(t,s,i,e=1){const n=self.devicePixelRatio,r=2*this.Zw(i)*n*this.tv()/i,h=s*r/(2*n*e),o=i*r/(2*n*e),a=-h,l=h,u=-o,c=o;this.dv()?Tu.dt(t,a,l,u,c,this.nv(),this.hv()):Tu.ft(t,a,l,u,c,this.nv(),this.hv())}mv(t,s,i,e,n,r=1){let h=1;this.Qw()&&(h=200*this.tv()/n);const o=Iu;bu.set(o,h,-h,1);const a=Gu,l=_u;bu.multiply(a,s,o),bu.multiply(l,i,o),Tu.gt(t,a,l,e||Cu),o[2]=r,Tu.scale(t,t,o)}gv(t,s,i,e,n,r,h,o){return bu.set(Gu,t,s,i),bu.set(_u,e,n,r),this.mv(Mu,Gu,_u,Cu,h,o),Mu}yv(t){this.Sw.push(t),this.ww.set(t.Pc(),t)}Sv(t){const s=this.Sw.indexOf(t);-1!==s&&this.Sw.splice(s,1),this.ww.delete(t.Pc())}Xw(){wu.wh(this.Sw),this.ww.clear()}wv(t){return this.ww.get(t)||null}vv(){return this.bw}bv(){this.xv(this.bw)}Tv(){return this.xw}Mv(){this.xv(this.xw)}Gv(){this.xv(this.Tw)}_v(){this.xv(this.Mw)}Iv(){this.xv(this.Gw)}Cv(){this.xv(this._w)}Pv(){this.xv(this.Iw)}Rv(){this.xv(this.Cw)}Ev(){this.xv(this.Pw)}Av(){this.xv(this.Rw)}Fv(){this.xv(this.Ew)}Ov(){this.xv(this.Aw)}Dv(t){this.Ow=t}Lv(){return this.Ow}kv(t,s,i,e,n,r){const h=wu.qS.Bv.Nv(t,s,i,e,n,r);let o=this.Fw.get(h);return o||(o=wu.jn(wu.qS.Bv,this,t,s,i,e,n,r),this.Fw.set(h,o)),o.Uv(),o}Vv(t){t.Wv(),0===t.zv()&&(this.Ow===t&&(this.Ow=null),this.Fw.delete(t.jv()),t.Hn())}Hv(t){wu.wh(this.Dw),this.Lw.clear();let s=0;for(const i of t){const t=i[0],e=i[1];this.Dw.push(e),this.Lw.set(t,s),s++}}Jv(t){return this.Dw[t]}qv(t){const s=this.Lw.get(t);if(void 0===s)throw new Error("invalid blend name");return s}$v(t){this.kw=t}Xv(){return this.kw}Yv(t){this.Nw=t,this.Ow=null}Kv(){return this.Nw}Py(t,s,i,e){const n=wu.nr(t,s,i,e),r=Math.sin(n),h=Math.cos(n),o=.5*this.Bw,a=r*o,l=h*o,u=this.Vw;2===u?this.Zv(t,s,0,i,e,0,a,l):1===u?this.Qv(t,s,0,i,e,0,a,l):this.tb(t,s,0,i,e,0,a,l)}sb(t,s,i,e,n,r){const h=wu.nr(t,s,e,n),o=Math.sin(h),a=Math.cos(h),l=.5*this.Bw,u=o*l,c=a*l,f=this.Vw;2===f?this.Zv(t,s,i,e,n,r,u,c):1===f?this.Qv(t,s,i,e,n,r,u,c):this.tb(t,s,i,e,n,r,u,c)}Zv(t,s,i,e,n,r,h,o){const a=this.zw,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=2*o,p=2*h,m=l+h,g=u-o,y=l-h+d,S=u+o+p,w=c+h,v=f-o,b=c-h-d,x=f+o-p;this.ib(m,g,i,w,v,r,b,x,r,y,S,i,Eu)}Qv(t,s,i,e,n,r,h,o){const a=this.zw,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,S=f-o,w=c-h,v=f+o;this.ib(d,p,i,y,S,r,w,v,r,m,g,i,Eu)}tb(t,s,i,e,n,r,h,o){const a=this.zw,l=t+a,u=s+a,c=e+a,f=n+a,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,S=f-o,w=c-h,v=f+o;this.ib(d,p,i,y,S,r,w,v,r,m,g,i,Eu)}eb(t,s,i,e,n,r){const h=wu.nr(t,s,i,e),o=Math.sin(h),a=Math.cos(h),l=.5*this.Bw,u=o*l,c=a*l,f=this.Vw;2===f?this.nb(t,s,i,e,u,c,n,r):1===f?this.rb(t,s,i,e,u,c,n,r):this.hb(t,s,i,e,u,c,n,r)}nb(t,s,i,e,n,r,h,o){const a=this.zw,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=2*r,p=2*n,m=l+n,g=u-r,y=l-n+d,S=u+r+p,w=c+n,v=f-r,b=c-n-d,x=f+r-p;Pu.set(m,g,w,v,b,x,y,S),Ru.set(h,0,o,0),this.ob(Pu,Ru)}rb(t,s,i,e,n,r,h,o){const a=this.zw,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,S=f-r,w=c-n,v=f+r;Pu.set(d,p,y,S,w,v,m,g),Ru.set(h,0,o,0),this.ob(Pu,Ru)}hb(t,s,i,e,n,r,h,o){const a=this.zw,l=t+a,u=s+a,c=i+a,f=e+a,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,S=f-r,w=c-n,v=f+r;Pu.set(d,p,y,S,w,v,m,g),Ru.set(h,0,o,0),this.ob(Pu,Ru)}ab(t,s,i,e){const n=.5*this.Bw,r=this.Vw;2===r?this.lb(t,s,i,e,n):1===r?this.ub(t,s,i,e,n):this.cb(t,s,i,e,n)}lb(t,s,i,e,n){this.Zv(t,s,0,i,s,0,0,n),this.Zv(i,s,0,i,e,0,n,0),this.Zv(i,e,0,t,e,0,0,-n),this.Zv(t,e,0,t,s,0,-n,0)}ub(t,s,i,e,n){this.Qv(t,s,0,i,s,0,0,n),this.Qv(i,s,0,i,e,0,n,0),this.Qv(i,e,0,t,e,0,0,-n),this.Qv(t,e,0,t,s,0,-n,0)}cb(t,s,i,e,n){this.tb(t,s,0,i,s,0,0,n),this.tb(i,s,0,i,e,0,n,0),this.tb(i,e,0,t,e,0,0,-n),this.tb(t,e,0,t,s,0,-n,0)}fb(t){this.ab(t.Za(),t.Qa(),t.tl(),t.sl())}pb(t){const s=wu.nr(t.Nr(),t.Br(),t.Ur(),t.Vr()),i=Math.sin(s),e=Math.cos(s),n=.5*this.Bw,r=i*n,h=e*n,o=this.Vw;2===o?this.mb(t,r,h):1===o?this.gb(t,r,h):this.yb(t,r,h)}mb(t,s,i){this.Zv(t.Nr(),t.Br(),0,t.Ur(),t.Vr(),0,s,i),this.Zv(t.Ur(),t.Vr(),0,t.Wr(),t.zr(),0,i,-s),this.Zv(t.Wr(),t.zr(),0,t.jr(),t.Hr(),0,-s,-i),this.Zv(t.jr(),t.Hr(),0,t.Nr(),t.Br(),0,-i,s)}gb(t,s,i){this.Qv(t.Nr(),t.Br(),0,t.Ur(),t.Vr(),0,s,i),this.Qv(t.Ur(),t.Vr(),0,t.Wr(),t.zr(),0,i,-s),this.Qv(t.Wr(),t.zr(),0,t.jr(),t.Hr(),0,-s,-i),this.Qv(t.jr(),t.Hr(),0,t.Nr(),t.Br(),0,-i,s)}yb(t,s,i){this.tb(t.Nr(),t.Br(),0,t.Ur(),t.Vr(),0,s,i),this.tb(t.Ur(),t.Vr(),0,t.Wr(),t.zr(),0,i,-s),this.tb(t.Wr(),t.zr(),0,t.jr(),t.Hr(),0,-s,-i),this.tb(t.jr(),t.Hr(),0,t.Nr(),t.Br(),0,-i,s)}Sb(t){this.Bw=t,this.Uw[this.Uw.length-1]=t}wb(){return this.Bw}bb(t){if(this.Uw.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this.Uw.push(t),this.Bw=t}xb(){if(this.Uw.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.Uw.pop(),this.Bw=this.Uw.at(-1)}Tb(){this.Vw=0,this.Ww[this.Ww.length-1]=0}Mb(){this.Vw=1,this.Ww[this.Ww.length-1]=0}Gb(){this.Vw=2,this.Ww[this.Ww.length-1]=0}_b(t){if("butt"===t)this.Ib();else if("square"===t)this.Cb();else{if("zag"!==t)throw new Error("invalid line cap");this.Pb()}}Ib(){if(this.Ww.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Ww.push(0),this.Vw=0}Cb(){if(this.Ww.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Ww.push(1),this.Vw=1}Pb(){if(this.Ww.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.Ww.push(2),this.Vw=2}Rb(){if(this.Ww.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.Ww.pop(),this.Vw=this.Ww.at(-1)}Eb(t){this.zw=t,this.jw[this.jw.length-1]=t}Ab(){return this.zw}Fb(t){if(this.jw.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this.jw.push(t),this.zw=t}Ob(){if(this.jw.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.jw.pop(),this.zw=this.jw.at(-1)}Db(){this.Lb(0),this.kb(0)}Nb(t){const s=t.length/2;if(s<3)throw new Error("need at least 3 points");const i=s-2,e=i-1,n=t[0],r=t[1];for(let s=0;s<i;s+=2){const i=2*s,h=t[i+2],o=t[i+3],a=t[i+4],l=t[i+5];if(s===e)this.Bb(n,r,h,o,a,l,a,l);else{const s=t[i+6],e=t[i+7];this.Bb(n,r,h,o,a,l,s,e)}}}Ub(){this.Vb(!0),this.Hw++}Wb(){return this.Hw}zb(){this.Hw++}jb(t){this.Jw=!!t}Hb(){return this.Jw}Jb(t){this.qw=!!t}qb(){return this.qw}$b(){return!1}dv(){return!1}Xb(){}Yb(){}Kb(){}Zb(){return this.Xb()+this.Yb()+this.Kb()}Qb(){return wu.jn(wu.qS.tx,this)}}}self._s.qS.sx=class{constructor(t,s){this.$n=s.name,this.ix=t,this.nx=s.hx||0,this.ox=s.lx||0,this.ux=!!s.mx,this.gx=!!s.yx,this.Sx=!!s.wx,this.vx=!!s.bx,this.xx=!!s.animated,this.Tx=!!s.Mx,this.Gx=!!s._x,this.Ix=!1,this.Cx=this.ux||this.Tx||0!==this.nx||0!==this.ox}Hn(){this.ix=null}Px(){return this.ix}Pc(){return this.$n}Rx(){return 0!==this.nx||0!==this.ox}Ex(){return this.nx}Ax(){return this.ox}Fx(){return this.ux}Ox(){return this.gx}Dx(){return this.Sx}Lx(){return this.vx}kx(){return this.xx}Nx(){return this.Tx}Bx(){return this.Gx}Ux(){return this.Ix}Vx(){return this.Cx}Wx(){return!1}};{const Ou=self._s;Ou.qS.Bv=class{constructor(t,s,i,e,n,r,h){this.ix=t,this.jp=0,this.zx=null,this.jx="",this.Hx=i,this.Jx=Ou.jn(Ou.To),this.Jx.set(e),this.qx=n,this.$x=r,this.Xx=h,"string"==typeof s?this.jx=s:(this.zx=s,this.jx=this.zx.Pc())}Hn(){if(this.jp>0)throw new Error("releasing state group still in use");this.ix=null,this.zx=null,this.jx=""}Yx(){const t=this.ix;t.xv(this.zx),t.Kx(this.Hx),t.Zx(this.Jx),t.Yv(this.qx),t.Lb(this.$x),t.kb(this.Xx),t.Dv(this)}jv(){return Ou.qS.Bv.Nv(this.jx,this.Hx,this.Jx,this.qx,this.$x,this.Xx)}Uv(){++this.jp}Wv(){--this.jp}zv(){return this.jp}Qx(){this.zx=null}tT(t){if(this.zx=t.wv(this.jx),!this.zx)throw new Error("failed to restore shader program")}static Nv(t,s,i,e,n,r){return("string"==typeof t?t:t.Pc())+","+s+","+i.ko()+","+i.No()+","+i.Bo()+","+i.Uo()+","+e+","+n+","+r}}}{let Du=function(t,s,i){const e=i.Nr(),n=i.Br(),r=i.Ur()-e,h=i.Vr()-n;return[e+r*t+(i.jr()-e)*s,n+h*t+(i.Hr()-n)*s]};0;const Lu=globalThis._s;globalThis.assert;Lu.qS.sT=class{constructor(t,s,i){this.iT=t,this.eT=s,this.nT=i,this.Pa=NaN,this.Ra=NaN,this.qx=NaN,this.rT=NaN,this.hT=NaN,this.Pa=0,this.Ra=0,this.qx=0,this.rT=0,this.hT=0}oT(t,s,i,e){this.Pa=t,this.Ra=s,this.rT=i,this.hT=e}aT(){return this.Pa}lT(t){this.Pa!==t&&(this.Pa=t,this.iT.uT())}cT(){return this.Ra}fT(t){this.Ra!==t&&(this.Ra=t,this.iT.uT())}dT(){return this.qx}pT(t){this.qx!==t&&(this.qx=Math.max(t,0),this.iT.uT())}mT(){return this.rT}gT(t){this.rT=t}yT(){return this.hT}ST(t){this.hT=t}wT(t,s,i){[this.Pa,this.Ra]=Du(t.Pa,t.Ra,s),this.qx=t.qx,this.rT=Lu._t(i.Za(),i.tl(),t.rT),this.hT=Lu._t(i.Qa(),i.sl(),t.hT)}vT(t,s,i){[this.Pa,this.Ra]=Du(t.Pa,t.Ra,s),this.qx=t.qx,[this.rT,this.hT]=Du(t.rT,t.hT,i)}bT(){return{x:this.aT(),y:this.cT(),z:this.dT(),u:this.mT(),v:this.yT()}}xT(t){this.lT(t.x),this.fT(t.y),t.hasOwnProperty("z")&&this.pT(t.z),this.gT(t.u),this.ST(t.v)}TT(){return this.iT}MT(){return this.eT}GT(){return this.nT}},Lu.qS._T=class{constructor(t,s,i){if(t<2||s<2)throw new Error("invalid mesh size");this.IT=t,this.CT=s,this.PT=i||null,this.RT=[],this.ET=0,this.AT=0,this.FT=1,this.OT=1,this.DT=0,this.LT=!1,this.kT=[],this.NT=0,this.BT=!0;const e=t-1,n=s-1;for(let i=0;i<s;++i){const s=[];for(let r=0;r<t;++r){const t=Lu.jn(Lu.qS.sT,this,r,i),h=r/e,o=i/n;t.oT(h,o,h,o),s.push(t)}this.RT.push(s)}}Hn(){Lu.wh(this.RT),Lu.wh(this.kT)}UT(){return this.IT}VT(){return this.CT}WT(){return this.PT}zT(){return this.RT}uT(){this.LT=!0,this.BT=!0}jT(){if(!this.LT)return;let t=1/0,s=1/0,i=-1/0,e=-1/0,n=0;for(const r of this.RT)for(const h of r){const r=h.aT(),o=h.cT();t=Math.min(t,r),s=Math.min(s,o),i=Math.max(i,r),e=Math.max(e,o),n=Math.max(n,h.dT())}this.ET=t,this.AT=s,this.FT=i,this.OT=e,this.DT=n,this.LT=!1}HT(){return this.jT(),this.ET}JT(){return this.jT(),this.AT}qT(){return this.jT(),this.FT}$T(){return this.jT(),this.OT}XT(){return this.jT(),this.DT}YT(){return this.XT()>0}KT(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.IT||s<0||s>=this.CT?null:this.RT[s][t]}ZT(t,s,i){const e=i instanceof Lu.Rect;if(t.UT()!==this.UT()||t.VT()!==this.VT())throw new Error("source mesh wrong size");const n=t.RT,r=this.RT;for(let t=0,h=r.length;t<h;++t){const h=n[t],o=r[t];for(let t=0,n=o.length;t<n;++t){const n=h[t],r=o[t];e?r.wT(n,s,i):r.vT(n,s,i)}}this.BT=!0}QT(t){if(!this.BT&&this.NT===t)return;const s=this.IT,i=this.CT,e=this.kT,n=Math.floor(65535/s)-1;if(n<=0)throw new Error("mesh too large");const r=Math.ceil((i-1)/n);r<e.length&&(e.length=r);let h=0;for(let o=0;o<r;++o){const r=Math.min(n,i-h-1),a=(r+1)*s,l=3*a,u=2*a,c=(s-1)*r*6;if(o===e.length)e.push({tM:new Float32Array(l),sM:new Float32Array(u),iM:new Uint16Array(c)});else{const t=e[o];t.tM.length!==l&&(t.tM=new Float32Array(l)),t.sM.length!==u&&(t.sM=new Float32Array(u)),t.iM.length!==c&&(t.iM=new Uint16Array(c))}const{tM:f,sM:d,iM:p}=e[o];this.eM(h,r,t,f,d,p),h+=n}this.NT=t,this.BT=!1}eM(t,s,i,e,n,r){const h=this.RT,o=this.IT;let a=0,l=0,u=0;for(let c=t,f=t+s+1;c<f;++c){const s=h[c],d=c+1,p=c-t,m=p*o,g=(p+1)*o;for(let t=0,h=s.length;t<h;++t){const o=s[t],c=t+1;if(e[a++]=o.aT(),e[a++]=o.cT(),e[a++]=o.dT()+i,n[l++]=o.mT(),n[l++]=o.yT(),c<h&&d<f){const s=t+m,i=c+m,e=c+g,n=t+g;r[u++]=s,r[u++]=i,r[u++]=e,r[u++]=s,r[u++]=e,r[u++]=n}}}}nM(t,s){this.QT(s);for(const{tM:s,sM:i,iM:e}of this.kT)t.rM(s,i,e)}hM(t,s){s||(s=(t,s,i)=>[t,s,i]);const i=this.RT;let e=i[0];for(let n=1,r=i.length;n<r;++n){const h=i[n];let o=e[0],a=h[0];for(let i=1,l=h.length;i<l;++i){const u=e[i],c=h[i],[f,d,p]=s(o.aT(),o.cT(),o.dT()),[m,g,y]=s(u.aT(),u.cT(),u.dT()),[S,w,v]=s(c.aT(),c.cT(),c.dT()),[b,x,T]=s(a.aT(),a.cT(),a.dT());t.sb(f,d,p,m,g,y),t.sb(f,d,p,S,w,v),t.sb(f,d,p,b,x,T),i===l-1&&t.sb(m,g,y,S,w,v),n===r-1&&t.sb(b,x,T,S,w,v),o=u,a=c}e=h}}oM(t){const s=.001,i=.99999999,e=t.du(),n=[],r=this.UT()-1,h=this.VT()-1,o=1/r,a=1/h,l=r-1,u=h-1;let c=e[0],f=e[1],d=Lu.Yn(Math.floor(c*r),0,l),p=Lu.Yn(Math.floor(f*h),0,u),m=!0,g=0,y=0,S=0,w=-1;const v=()=>{c=Lu.Yn(Lu._t(c,g,S),0,1),f=Lu.Yn(Lu._t(f,y,S),0,1),n.push(c,f)};for(let t=0,b=e.length;t<b;t+=2){c=e[t],f=e[t+1],n.push(c,f),d=Lu.Yn(Math.floor(c*r),0,l),p=Lu.Yn(Math.floor(f*h),0,u);const x=(t+2)%b;for(g=e[x],y=e[x+1],w=-1;;){if(n.length>1e6)throw new Error("Too many mesh poly points");const t=d*o,e=p*a,r=(d+1)*o,h=(p+1)*a;if(m=Lu.Xr(c,f,t,e,r,e,r,h),0!==w&&(S=Lu.$r(c,f,g,y,t,e,r,h,-.001),S>=0&&S<=i))v(),m=!m,w=0;else if(p>0&&2!==w&&(S=Lu.$r(c,f,g,y,t,e,r,e,s),S>=0&&S<=i))v(),p--,m=!1,w=4;else if(d<l&&3!==w&&(S=Lu.$r(c,f,g,y,r,e,r,h,s),S>=0&&S<=i))v(),d++,m=!1,w=1;else if(d>0&&1!==w&&(S=Lu.$r(c,f,g,y,t,e,t,h,s),S>=0&&S<=i))v(),d--,m=!0,w=3;else{if(!(p<u&&4!==w&&(S=Lu.$r(c,f,g,y,t,h,r,h,s),S>=0&&S<=i)))break;v(),p++,m=!0,w=2}}}return Lu.jn(Lu.au,n)}aM(t,s){const i=this.lM(t);this.uM(i),s.mu(i)}lM(t){const s=[],i=t.du();for(let t=0,e=i.length;t<e;t+=2){const e=i[t],n=i[t+1],[r,h]=this.cM(e,n);s.push(r,h)}return s}cM(t,s){const i=this.UT()-1,e=this.VT()-1,n=1/i,r=1/e,h=Lu.Yn(Math.floor(t*i),0,i-1),o=Lu.Yn(Math.floor(s*e),0,e-1),a=h*n,l=o*r,u=(h+1)*n,c=(o+1)*r,f=this.KT(h,o),d=this.KT(h+1,o+1),p=Lu.Xr(t,s,a,l,u,l,u,c),m=p?a+n:a,g=p?l:l+r,y=this.KT(h+(p?1:0),o+(p?0:1)),[S,w,v]=Lu.Yr(t,s,a,l,m,g,u,c);return Lu.Kr(S,w,v,f.aT(),f.cT(),f.dT(),y.aT(),y.cT(),y.dT(),d.aT(),d.cT(),d.dT())}uM(t){const s=[],i=1e-7;let e=t[0],n=t[1],r=e-t.at(-2),h=n-t.at(-1);for(let o=0,a=t.length;o<a;o+=2){const l=(o+2)%a,u=t[l],c=t[l+1],f=u-e,d=c-n,p=Math.abs(f)<i&&Math.abs(r)<i&&Math.sign(d)===Math.sign(h),m=Math.abs(d)<i&&Math.abs(h)<i&&Math.sign(f)===Math.sign(r);(!p&&!m&&Math.abs(f/r-d/h)>.001||0==f&&0===d)&&s.push(e,n),e=u,n=c,r=f,h=d}s.length>=6&&s.length<t.length&&Lu.Mh(t,s)}bT(){return{cols:this.UT(),rows:this.VT(),points:this.RT.map(t=>t.map(t=>t.bT()))}}xT(t){const s=this.UT(),i=this.VT();if(t.cols!==s||t.rows!==i)throw new Error("mesh data wrong size");const e=t.points;for(let t=0;t<i;++t){const i=e[t];for(let e=0;e<s;++e)this.KT(e,t).xT(i[e])}}}}{let ku=function(t,s){let i,e,n,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,n=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,n=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{fM:i,dM:e,format:n,type:r}};0;const Nu=self._s,Bu=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),Uu=new Set(["nearest","bilinear","trilinear"]),Vu=new Set(["default","low","high"]),Wu=new Set(["clamp-to-edge","repeat","mirror-repeat"]),zu={pM:"clamp-to-edge",mM:"clamp-to-edge",gM:"trilinear",yM:0,SM:"rgba8",wM:!0,vM:"default",bM:!0,xM:!1,width:-1,height:-1},ju={bM:!0,flipY:!1},Hu=new Set;Nu.qS.TM=class{constructor(t){this.ix=t,this.MM=null,this.Vy=0,this.Wy=0,this.GM=!0,this._M="clamp-to-edge",this.IM="clamp-to-edge",this.CM="trilinear",this.PM=0,this.RM="rgba8",this.EM=!1,this.AM="default",this.jp=0}FM(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData||t instanceof ArrayBuffer))throw new Error("invalid texture source");if(s=Object.assign({},zu,s),this.MM)throw new Error("already created texture");if(this._M=s.pM,this.IM=s.mM,this.CM=s.gM,this.PM=s.yM,this.RM=s.SM,this.EM=!!s.wM&&this.ix.Hb(),this.AM=s.vM,!Wu.has(this._M)||!Wu.has(this.IM))throw new Error("invalid wrap mode");if(!Uu.has(this.CM))throw new Error("invalid sampling");if(!Bu.has(this.RM))throw new Error("invalid pixel format");if(!Vu.has(this.AM))throw new Error("invalid mipmap quality");if(this.GM=!0,t instanceof ArrayBuffer||null===t||s.xM){if(this.Vy=s.width,this.Wy=s.height,t instanceof ArrayBuffer&&t.byteLength!==this.Vy*this.Wy*4)throw new Error("ArrayBuffer wrong size")}else this.Vy=t.width,this.Wy=t.height;if(this.Vy<=0||this.Wy<=0)throw new Error("invalid texture data size");if(s.xM){const s=Nu.uo(this.Vy,this.Wy);s.getContext("2d").drawImage(t,0,0,this.Vy,this.Wy),t=s}const i=Nu.wr(this.Vy)&&Nu.wr(this.Wy),e=this.ix.OM();if(this.Vy>e||this.Wy>e)throw new Error("texture data exceeds maximum texture size");const n=this.ix.DM(),r=this.ix.LM();this.MM=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.MM),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.bM),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const h=ku(this.RM,n);if(this.ix.kM()||i||!this.NM())if(r>=2){let s;s=this.EM?Math.floor(Math.log2(Math.max(this.Vy,this.Wy))+1):1,n.texStorage2D(n.TEXTURE_2D,s,h.fM,this.Vy,this.Wy),t instanceof ArrayBuffer?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.Vy,this.Wy,h.format,h.type,new Uint8Array(t)):null!==t&&n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,t)}else t instanceof ArrayBuffer?n.texImage2D(n.TEXTURE_2D,0,h.dM,this.Vy,this.Wy,0,h.format,h.type,new Uint8Array(t)):null===t?n.texImage2D(n.TEXTURE_2D,0,h.dM,this.Vy,this.Wy,0,h.format,h.type,null):n.texImage2D(n.TEXTURE_2D,0,h.dM,h.format,h.type,t);else{if(null===t)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if(t instanceof ArrayBuffer&&(t=new ImageData(new Uint8ClampedArray(t),this.Vy,this.Wy)),t instanceof ImageData){const s=Nu.uo(this.Vy,this.Wy);s.getContext("2d").putImageData(t,0,0),t=s}const s=Nu.uo(Nu.vr(this.Vy),Nu.vr(this.Wy)),i=s.getContext("2d");i.imageSmoothingEnabled="nearest"!==this.CM,i.drawImage(t,0,0,this.Vy,this.Wy,0,0,s.width,s.height),n.texImage2D(n.TEXTURE_2D,0,h.dM,h.format,h.type,s)}null!==t&&this.BM(n),n.bindTexture(n.TEXTURE_2D,null),this.ix.UM(),this.jp=1,Hu.add(this)}VM(t,s,i){if(i=Object.assign({},zu,i),this.MM)throw new Error("already created texture");if(this._M=i.pM,this.IM=i.mM,this.CM=i.gM,this.RM=i.SM,this.EM=!!i.wM&&this.ix.Hb(),this.AM=i.vM,!Wu.has(this._M)||!Wu.has(this.IM))throw new Error("invalid wrap mode");if(!Uu.has(this.CM))throw new Error("invalid sampling");if(!Bu.has(this.RM))throw new Error("invalid pixel format");if(!Vu.has(this.AM))throw new Error("invalid mipmap quality");this.GM=!1,this.Vy=Math.floor(t),this.Wy=Math.floor(s);const e=Nu.wr(this.Vy)&&Nu.wr(this.Wy),n=this.ix.OM();if(this.Vy<=0||this.Wy<=0)throw new Error("invalid texture size");if(this.Vy>n||this.Wy>n)throw new Error("texture exceeds maximum texture size");if(!this.ix.kM()&&this.NM()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.ix.DM(),h=this.ix.LM();this.MM=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.MM),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.bM),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const o=ku(this.RM,r),a=h>=2?o.fM:o.dM;r.texImage2D(r.TEXTURE_2D,0,a,this.Vy,this.Wy,0,o.format,o.type,null),this.BM(r),r.bindTexture(r.TEXTURE_2D,null),this.ix.UM(),this.jp=1,Hu.add(this)}WM(t){if("default"===this.AM)return this.GM?t.NICEST:t.FASTEST;if("low"===this.AM)return t.FASTEST;if("high"===this.AM)return t.NICEST;throw new Error("invalid mipmap quality")}NM(){return"clamp-to-edge"!==this._M||"clamp-to-edge"!==this.IM}zM(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}BM(t){const s=Nu.wr(this.Vy)&&Nu.wr(this.Wy);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.zM(t,this._M)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.zM(t,this.IM)),"nearest"===this.CM)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.EM=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.ix.kM())&&this.EM){t.hint(t.GENERATE_MIPMAP_HINT,this.WM(t)),t.generateMipmap(t.TEXTURE_2D);const s="trilinear"===this.CM&&!this.ix.qb();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.EM=!1;const i=this.ix.jM();i&&this.PM>0&&"nearest"!==this.CM&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.PM,this.ix.HM()))}JM(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.MM||this.jp<=0)throw new Error("texture not created");if(this.GM)throw new Error("cannot update static texture");s=Object.assign({},ju,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,n=this.ix.LM(),r=this.ix.DM();r.bindTexture(r.TEXTURE_2D,this.MM),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.bM),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY);const h=ku(this.RM,r),o=n>=2?h.fM:h.dM;try{if(this.Vy===i&&this.Wy===e){const s=Nu.wr(this.Vy)&&Nu.wr(this.Wy);r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t),(s||this.ix.kM())&&this.EM&&(r.hint(r.GENERATE_MIPMAP_HINT,this.WM(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Vy=i,this.Wy=e;const s=Nu.wr(this.Vy)&&Nu.wr(this.Wy);if(!this.ix.kM()&&this.NM()&&!s)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,h.format,h.type,t),(s||this.ix.kM())&&this.EM&&(r.hint(r.GENERATE_MIPMAP_HINT,this.WM(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.ix.UM()}qM(){if(this.jp>0)throw new Error("texture still has references");if(!this.MM)throw new Error("already deleted texture");Hu.delete(this),this.ix.DM().deleteTexture(this.MM),this.MM=null}$M(){return!!this.MM}XM(){return this.MM}Px(){return this.ix}YM(){this.jp++}KM(){if(this.jp<=0)throw new Error("no more references");this.jp--}ZM(){return this.jp}xy(){return this.Vy}My(){return this.Wy}QM(){return this.GM}tG(){let t=this.Vy*this.Wy;switch(this.RM){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.EM&&(t+=Math.floor(t/3)),t}static Qx(){Hu.clear()}static sG(){return Hu.values()}}}{const Ju=self._s,qu=(self.assert,self.hs),$u=(qu.ys,qu.fs),Xu=new Set(["nearest","bilinear","trilinear"]),Yu={gM:"trilinear",alpha:!0,depth:!1,iG:!0,eG:!0,nG:0},Ku=new Set;Ju.qS.rG=class{constructor(t){this.ix=t,this.hG=null,this.oG=null,this.MM=null,this.aG=null,this.Vy=0,this.Wy=0,this.lG=!0,this.CM="trilinear",this.uG=!0,this.cG=!1,this.fG=!0,this.dG=0,this.pG=$u.create(),this.mG=0,this.gG=0,this.yG=0}SG(t,s,i){i=Object.assign({},Yu,i);const e=this.ix.LM();if(this.MM||this.aG)throw new Error("already created render target");if(this.CM=i.gM,this.uG=!!i.alpha,this.cG=!!i.depth,this.fG=!!i.iG,this.lG=!!i.eG,this.dG=i.nG,!Xu.has(this.CM))throw new Error("invalid sampling");if(this.dG>0&&(e<2||this.fG))throw new Error("invalid use of multisampling");if(e<2&&(this.fG=!0),this.Vy=t,this.Wy=s,this.Vy<=0||this.Wy<=0)throw new Error("invalid render target size");this.wG();const n=this.ix.DM();if(this.hG=n.createFramebuffer(),this.cG&&(this.oG=n.createFramebuffer()),this.fG){this.MM=this.ix.vG(this.Vy,this.Wy,{gM:this.CM,SM:this.uG?"rgba8":"rgb8",wM:!1});const t=this.MM.XM();n.bindFramebuffer(n.FRAMEBUFFER,this.hG),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.cG&&(n.bindFramebuffer(n.FRAMEBUFFER,this.oG),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0))}else{this.aG=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.aG);const t=this.uG?n.RGBA8:n.RGB8;if(this.dG>0){const s=n.getInternalformatParameter(n.RENDERBUFFER,t,n.SAMPLES);if(s&&s[0]){const t=s[0];this.dG>t&&(this.dG=t)}else this.dG=0}0===this.dG?n.renderbufferStorage(n.RENDERBUFFER,t,this.Vy,this.Wy):n.renderbufferStorageMultisample(n.RENDERBUFFER,this.dG,t,this.Vy,this.Wy),n.bindFramebuffer(n.FRAMEBUFFER,this.hG),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.aG),this.cG&&(n.bindFramebuffer(n.FRAMEBUFFER,this.oG),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.aG)),n.bindRenderbuffer(n.RENDERBUFFER,null)}const r=this.ix.bG();this.cG&&r&&(n.bindFramebuffer(n.FRAMEBUFFER,this.hG),this.ix.xG()?n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,r,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r)),n.bindFramebuffer(n.FRAMEBUFFER,null),Ku.add(this)}TG(t,s){if(this.Vy===t&&this.Wy===s)return;this.Vy=t,this.Wy=s,this.wG();const i=this.ix.DM();i.bindFramebuffer(i.FRAMEBUFFER,this.hG),this.MM?this.MM.JM(new ImageData(this.Vy,this.Wy)):(i.bindRenderbuffer(i.RENDERBUFFER,this.aG),i.renderbufferStorage(i.RENDERBUFFER,this.uG?i.RGBA8:i.RGB8,this.Vy,this.Wy),i.bindRenderbuffer(i.RENDERBUFFER,null));const e=this.ix.bG();this.cG&&e&&(this.ix.xG()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}qM(){if(!this.MM&&!this.aG)throw new Error("already deleted render target");Ku.delete(this);const t=this.ix.DM();this.MM?(t.bindFramebuffer(t.FRAMEBUFFER,this.hG),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.cG&&(t.bindFramebuffer(t.FRAMEBUFFER,this.oG),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.ix.MG(this.MM),this.MM=null):this.aG&&(t.bindFramebuffer(t.FRAMEBUFFER,this.hG),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.cG&&(t.bindFramebuffer(t.FRAMEBUFFER,this.oG),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.aG),this.aG=null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.ix.LM()>=2&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.hG),this.cG&&t.deleteFramebuffer(this.oG);const s=this.ix.GG();s._G=null,s.IG=null,this.hG=null}wG(){this.ix.fv(this.pG,this.Vy/this.Wy),this.mG=this.ix.av(),this.gG=this.ix.nv(),this.yG=this.ix.hv()}CG(){return this.hG}PG(){return this.oG}Px(){return this.ix}EG(){return this.MM}AG(){return this.ix.av()===this.mG&&this.ix.nv()===this.gG&&this.ix.hv()===this.yG||this.wG(),this.pG}FG(){return"nearest"!==this.CM}OG(){return this.uG}DG(){return this.fG}LG(){return this.cG}xy(){return this.Vy}My(){return this.Wy}kG(){return this.lG}NG(){return this.dG}BG(){const t={gM:this.CM,alpha:this.uG,iG:this.fG};return this.lG||(t.width=this.Vy,t.height=this.Wy),t}UG(t){return"nearest"!==(t=Object.assign({},Yu,t)).gM===this.FG()&&!!t.alpha===this.OG()&&!!t.depth===this.LG()&&!(this.ix.LM()>=2&&!!t.iG!==this.DG())&&("number"==typeof t.width||"number"==typeof t.height?!this.kG()&&this.xy()===Math.floor(t.width)&&this.My()===Math.floor(t.height):this.kG())}VG(){return this.MM?this.MM.XM():null}tG(){return this.MM?this.MM.tG():this.Vy*this.Wy*(this.uG?4:3)}static async WG(t,s){const i=await t.zG(s,!0);return await Ju.do(i)}static Qx(){Ku.clear()}static jG(){return Ku.values()}static HG(t,s){for(const i of Ku)i.kG()&&i.TG(t,s)}}}{const Zu=self._s,Qu=self.hs,tc=(Qu.ys,Qu.fs,new Set(["aPos","aTex","aColor","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]));Zu.qS.JG=class extends Zu.qS.sx{static async qG(t,s){const i=t.DM(),e=s.src,n=s.$G,r=s.name,h=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(h,e),i.compileShader(h);const o=i.createShader(i.VERTEX_SHADER);i.shaderSource(o,n),i.compileShader(o);const a=i.createProgram();i.attachShader(a,h),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aColor"),i.bindAttribLocation(a,3,"aPoints"),i.linkProgram(a);const l=t.XG();if(l?await t.YG(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await Zu.dh(5),!i.getShaderParameter(h,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(h);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+t)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(o);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+t)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const t=i.getProgramInfoLog(a);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+t)}const u=Zu.xm(i.getProgramInfoLog(a)||"").trim();return u&&!Zu.wm(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),i.deleteShader(h),i.deleteShader(o),a}static async KG(t,s){const i=await Zu.qS.JG.qG(t,s);return new Zu.qS.JG(t,i,s)}constructor(t,s,i){super(t,i);const e=t.DM(),n=t.GG();t.Vb(),e.useProgram(s),this.ZG=e,this.zx=s,this.QG="<default-device-transform>"===i.name;const r=e.getAttribLocation(s,"aPos"),h=e.getAttribLocation(s,"aTex"),o=e.getAttribLocation(s,"aColor");this.t_=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.s_),e.vertexAttribPointer(r,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==h&&(e.bindBuffer(e.ARRAY_BUFFER,t.i_),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(h)),-1!==o&&(e.bindBuffer(e.ARRAY_BUFFER,t.e_),e.vertexAttribPointer(o,4,t.n_()?e.HALF_FLOAT:e.FLOAT,!1,0,0),e.enableVertexAttribArray(o)),-1!==this.t_&&(e.bindBuffer(e.ARRAY_BUFFER,t.r_),e.vertexAttribPointer(this.t_,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.t_)),e.bindBuffer(e.ARRAY_BUFFER,null),this.h_=new Zu.qS.o_(this,"matP","mat4"),this.a_=new Zu.qS.o_(this,"matMV","mat4"),this.l_=new Zu.qS.o_(this,"color","vec4"),this.u_=new Zu.qS.o_(this,"samplerFront","sampler"),this.c_=new Zu.qS.o_(this,"pointTexStart","vec2"),this.f_=new Zu.qS.o_(this,"pointTexEnd","vec2"),this.d_=new Zu.qS.o_(this,"zElevation","float"),this.p_=new Zu.qS.o_(this,"tileSize","vec2"),this.m_=new Zu.qS.o_(this,"tileSpacing","vec2"),this.g_=new Zu.qS.o_(this,"color2_","vec4"),this.y_=new Zu.qS.o_(this,"outlineThickness","float"),this.S_=new Zu.qS.o_(this,"samplerBack","sampler"),this.w_=new Zu.qS.o_(this,"samplerDepth","sampler"),this.v_=new Zu.qS.o_(this,"destStart","vec2"),this.b_=new Zu.qS.o_(this,"destEnd","vec2"),this.x_=new Zu.qS.o_(this,"srcStart","vec2"),this.T_=new Zu.qS.o_(this,"srcEnd","vec2"),this.M_=new Zu.qS.o_(this,"srcOriginStart","vec2"),this.G_=new Zu.qS.o_(this,"srcOriginEnd","vec2"),this.__=new Zu.qS.o_(this,"pixelSize","vec2"),this.I_=new Zu.qS.o_(this,"seconds","float"),this.C_=new Zu.qS.o_(this,"devicePixelRatio","float"),this.P_=new Zu.qS.o_(this,"layerScale","float"),this.R_=new Zu.qS.o_(this,"layerAngle","float"),this.E_=new Zu.qS.o_(this,"layoutStart","vec2"),this.A_=new Zu.qS.o_(this,"layoutEnd","vec2"),this.F_=new Zu.qS.o_(this,"zNear","float"),this.O_=new Zu.qS.o_(this,"zFar","float"),this.D_=!!(this.__.L_()||this.I_.L_()||this.S_.L_()||this.v_.L_()||this.b_.L_()||this.x_.L_()||this.T_.L_()||this.M_.L_()||this.G_.L_()||this.C_.L_()||this.P_.L_()||this.R_.L_()||this.E_.L_()||this.A_.L_());const a=i.parameters||[];this.k_=[],this.Ix=this.__.L_()||this.x_.L_()||this.T_.L_()||this.M_.L_()||this.G_.L_(),this.N_=!1,this.B_=!1,this.l_.U_(1,1,1,1),this.g_.U_(1,1,1,1),this.u_.V_(0),this.S_.V_(1),this.w_.V_(2),this.c_.W_(0,0),this.f_.W_(1,1),this.d_.z_(0),this.p_.W_(0,0),this.m_.W_(0,0),this.v_.W_(0,0),this.b_.W_(1,1),this.x_.W_(0,0),this.T_.W_(0,0),this.M_.W_(0,0),this.G_.W_(0,0),this.__.W_(0,0),this.C_.z_(1),this.F_.z_(t.nv()),this.O_.z_(t.hv()),this.P_.z_(1),this.R_.z_(0),this.I_.z_(0),this.E_.W_(0,0),this.A_.W_(0,0),this.y_.z_(1);for(const t of a){const s=t[0],i=t[2],e=new Zu.qS.o_(this,s,i);"color"===i?e.j_(0,0,0):e.z_(0),this.k_.push(e)}this.QG?this.H_(n.J_):(this.q_(n.J_,!0),this.X_(n.Y_,!0));const l=n.K_;e.useProgram(l?l.zx:null)}Hn(){this.ZG.deleteProgram(this.zx),this.zx=null,this.ix.Sv(this),this.ZG=null,super.Hn()}Z_(){return this.ZG}Q_(){return this.zx}tI(){return this.k_.length}sI(t){return t<0||t>=this.k_.length?null:this.k_[t].iI()}eI(t){for(let s=0,i=t.length;s<i;++s)if(!this.k_[s].nI(t[s]))return!1;return!0}rI(t){for(let s=0,i=t.length;s<i;++s)this.k_[s].hI(t[s])}oI(t,s,i,e,n,r,h,o,a,l){return!(this.S_.L_()||this.__.L_()&&!this.__.aI(n,r)||this.v_.L_()&&!this.v_.aI(t.Za(),t.Qa())||this.b_.L_()&&!this.b_.aI(t.tl(),t.sl())||this.C_.L_()&&!this.C_.lI(h)||this.P_.L_()&&!this.P_.lI(o)||this.R_.L_()&&!this.R_.lI(a)||this.x_.L_()&&!this.x_.aI(s.Za(),s.Qa())||this.T_.L_()&&!this.T_.aI(s.tl(),s.sl())||this.M_.L_()&&!this.M_.aI(i.Za(),i.Qa())||this.G_.L_()&&!this.G_.aI(i.tl(),i.sl())||this.E_.L_()&&!this.E_.aI(e.Za(),e.Qa())||this.A_.L_()&&!this.A_.aI(e.Qa(),e.sl())||this.I_.L_()&&!this.I_.lI(l))}uI(t,s,i,e,n,r,h,o,a,l){this.S_.L_()||(this.__.L_()&&this.__.cI(n,r),this.v_.L_()&&this.v_.cI(t.Za(),t.Qa()),this.b_.L_()&&this.b_.cI(t.tl(),t.sl()),this.C_.L_()&&this.C_.fI(h),this.P_.L_()&&this.P_.fI(o),this.R_.L_()&&this.R_.fI(a),this.x_.L_()&&this.x_.cI(s.Za(),s.Qa()),this.T_.L_()&&this.T_.cI(s.tl(),s.sl()),this.M_.L_()&&this.M_.cI(i.Za(),i.Qa()),this.G_.L_()&&this.G_.cI(i.tl(),i.sl()),this.E_.L_()&&this.E_.cI(e.Za(),e.Qa()),this.A_.L_()&&this.A_.cI(e.Qa(),e.sl()),this.I_.L_()&&this.I_.fI(l))}q_(t,s){this.N_&&!s||this.QG||(this.h_.L_()&&this.h_.dI(t),this.N_=!0)}pI(){this.N_=!1}X_(t,s){this.B_&&!s||this.QG||(this.a_.L_()&&this.a_.dI(t),this.B_=!0)}mI(){this.B_=!1}H_(t){if(!this.QG)throw new Error("not device transform shader");this.h_.dI(t);const s=this.ix,i=s.xy()/2,e=s.My()/2,n=s.gv(i,e,s.Zw(s.My()),i,e,0,s.My());this.a_.dI(n)}gI(t){this.l_.L_()&&this.l_.yI(t[0],t[1],t[2],t[3])}static SI(){return tc}static wI(t){return t?"\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t":""}static vI(t){const s=t?"highp":"mediump";return["attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"attribute lowp vec4 aColor;","varying lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static bI(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"in lowp vec4 aColor;","out lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static xI(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","}"].join("\n")}static TI(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static MI(t){return["#version 300 es",Zu.qS.JG.wI(t),"in mediump vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static GI(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","}"].join("\n")}static _I(){return["#extension GL_EXT_frag_depth : enable","varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static II(t){return["#version 300 es",Zu.qS.JG.wI(t),"in highp vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static CI(t,s,i,e){let n="";return t>=2?n="#version 300 es\n"+Zu.qS.JG.wI(e):(s&&(n="#extension GL_EXT_frag_depth : enable\n"),i&&(n+="#extension GL_EXT_shader_texture_lod : enable\n",n+="#extension GL_OES_standard_derivatives : enable\n")),n+`\nprecision highp float;\n${t>=2?"in":"varying"} vec2 vTex;\n${t>=2?"out lowp vec4 outColor;":""}\n${t>=2?"in":"varying"} lowp vec4 vColor;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t>=2?"return textureGrad(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&!i?"return texture2D(samplerFront, p);":""}\n}\n\nvoid main(void) {\n\t\n\t${t<2?"lowp vec4 outColor;":""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t>=2||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t>=2||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= vColor;\n\t${t<2?"gl_FragColor = outColor;":""}\n\t${t>=2?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n\t${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n}\n`}static RI(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static EI(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static AI(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static FI(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static OI(t){return["#version 300 es",Zu.qS.JG.wI(t),"uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static DI(){return["varying lowp vec4 vColor;","void main(void) {","\tgl_FragColor = vColor;","}"].join("\n")}static LI(){return["precision lowp float;","varying mediump vec2 vTex;","varying vec4 vColor;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(vColor.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(vColor.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static kI(){return["precision lowp float;","varying highp vec2 vTex;","varying vec4 vColor;","void main(void) {","\thighp float grad = vTex.x / (1.0 - vTex.y);","\tgl_FragColor = vColor * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);","}"].join("\n")}static NI(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = vColor * f;","}"].join("\n")}static BI(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = vColor * f;","}"].join("\n")}static UI(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp float innerF = step(distSq, 0.25);","\thighp vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}static VI(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 innerEdge = halfNorm - pixelSize * norm;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = vColor * f;","}"].join("\n")}static WI(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 pxNorm = pixelSize * norm;","\thighp vec2 innerEdge1 = halfNorm - pxNorm;","\thighp vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\thighp float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\thighp vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\thighp vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\thighp vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\thighp vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\thighp float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}}}{const sc=self._s,ic=self.hs.fs,ec=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);sc.qS.o_=class{constructor(t,s,i){if(!ec.has(i))throw new Error("invalid uniform type");this.PT=t,this.ZG=this.PT.Z_(),this.$n=s,this.Jc=i,this.zI="color"===this.Jc,this.jI=this.ZG.getUniformLocation(this.PT.Q_(),s),this.HI=!!this.jI;const e=ec.get(i);this.JI=new Float32Array(e),this.qI=new Float32Array(e)}Hn(){this.PT=null,this.ZG=null,this.jI=null}L_(){return this.HI}iI(){return this.Jc}$I(){return this.zI}z_(t){this.L_()&&(this.JI[0]=t,this.qI.set(this.JI),this.ZG.uniform1f(this.jI,t))}V_(t){this.L_()&&(this.JI[0]=t,this.qI.set(this.JI),this.ZG.uniform1i(this.jI,t))}W_(t,s){this.L_()&&(this.JI[0]=t,this.JI[1]=s,this.qI.set(this.JI),this.ZG.uniform2f(this.jI,t,s))}j_(t,s,i){this.L_()&&(this.JI[0]=t,this.JI[1]=s,this.JI[2]=i,this.qI.set(this.JI),this.ZG.uniform3f(this.jI,t,s,i))}U_(t,s,i,e){this.L_()&&(this.JI[0]=t,this.JI[1]=s,this.JI[2]=i,this.JI[3]=e,this.qI.set(this.JI),this.ZG.uniform4f(this.jI,t,s,i,e))}XI(t){t=Math.fround(t);const s=this.JI;s[0]!==t&&(s[0]=t,this.ZG.uniform1f(this.jI,t))}YI(t){const s=this.JI;s[0]!==t&&(s[0]=t,this.ZG.uniform1i(this.jI,t))}KI(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.JI;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.ZG.uniform2f(this.jI,t,s))}ZI(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.JI;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.ZG.uniform3f(this.jI,t,s,i))}yI(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const n=this.JI;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(n[0]=t,n[1]=s,n[2]=i,n[3]=e,this.ZG.uniform4f(this.jI,t,s,i,e))}dI(t){const s=this.JI;ic.F(s,t)||(sc.yh(s,t,0),this.ZG.uniformMatrix4fv(this.jI,!1,t))}nI(t){const s=this.qI;return this.$I()?s[0]===Math.fround(t.ko())&&s[1]===Math.fround(t.No())&&s[2]===Math.fround(t.Bo()):s[0]===Math.fround(t)}hI(t){const s=this.qI;this.$I()?(s[0]=t.ko(),s[1]=t.No(),s[2]=t.Bo()):s[0]=t}lI(t){return this.qI[0]===Math.fround(t)}aI(t,s){const i=this.qI;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}fI(t){this.qI[0]=t}cI(t,s){const i=this.qI;i[0]=t,i[1]=s}}}{const nc=self._s,rc=self.hs,hc=(rc.Ss,rc.fs);nc.qS.QI=class{constructor(t){this.tC=t,this.Y_=hc.create(),this.J_=hc.create(),this._G=null,this.IG=null,this.sC=!1,this.K_=null,this.iC=new nc.Rect,this.clearColor=nc.jn(nc.To,0,0,0,0)}},nc.qS.eC=class{constructor(t){const s=new ArrayBuffer(96);this.Jc=0,this.nC=t,this.ZG=t.tC.DM(),this.rC=0,this.hC=0,this.oC=null,this.aC=new Float32Array(s,0,16),this.lC=new Float32Array(s,64,4),this.uC=new Float32Array(s,80,4),this.cC=[]}fC(t,s){this.Jc=1,this.rC=t,this.hC=s}dC(){const t=this.ZG;t.drawElements(t.TRIANGLES,this.hC,t.UNSIGNED_SHORT,this.rC)}pC(t){this.Jc=2,this.oC=t}mC(){const t=this.ZG,s=this.oC;t.bindTexture(t.TEXTURE_2D,s?s.XM():null)}gC(t){this.Jc=20,t.Wo(this.lC,0)}yC(){const t=this.lC,s=this.nC.K_;s.g_.L_()&&s.g_.yI(t[0],t[1],t[2],t[3])}SC(t){this.Jc=3;const s=this.aC;s[0]=t.length;for(let i=0,e=t.length;i<e;++i)s[i+1]=t[i]}wC(){const t=this.ZG,s=this.aC,i=s[0],e=s[1],n=s[2];let r=e,h=n,o=t.FUNC_ADD,a=t.FUNC_ADD;i>=4&&(r=s[3],h=s[4]),6===i&&(o=s[5],a=s[6]),t.blendFuncSeparate(e,n,r,h),t.blendEquationSeparate(o,a)}vC(t,s,i,e){this.Jc=4;const n=this.lC;n[0]=t,n[1]=s,n[2]=i,n[3]=e}bC(){const t=this.lC;this.ZG.viewport(t[0],t[1],t[2],t[3])}xC(t){this.Jc=5,hc.m(this.aC,t)}TC(){const t=this.nC,s=t.tC.Sw,i=t.K_,e=this.aC;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.q_(e,!0):n.pI()}hc.m(t.J_,e)}MC(t){this.Jc=6,hc.m(this.aC,t)}GC(){const t=this.nC,s=t.tC.Sw,i=t.K_,e=this.aC;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.X_(e,!0):n.mI()}hc.m(t.Y_,e)}_C(t){this.Jc=7,this.oC=t}IC(){const t=this.ZG,s=this.oC,i=this.nC;s?(i._G=s.CG(),i.IG=s.PG(),i.sC&&i.IG?t.bindFramebuffer(t.FRAMEBUFFER,i.IG):t.bindFramebuffer(t.FRAMEBUFFER,i._G)):(i._G=null,i.IG=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}CC(t){this.Jc=8,t.Wo(this.aC,0)}PC(t,s,i,e){this.Jc=8;const n=this.aC;n[0]=t,n[1]=s,n[2]=i,n[3]=e}RC(){const t=this.ZG,s=this.aC,i=this.nC.clearColor,e=s[0],n=s[1],r=s[2],h=s[3];i.qo(e,n,r,h)||(t.clearColor(e,n,r,h),i.Co(e,n,r,h)),t.clear(t.COLOR_BUFFER_BIT)}EC(t){this.Jc=14,t.Wo(this.aC,0)}AC(){const t=this.aC;this.nC.iC.set(t[0],t[1],t[2],t[3])}FC(t,s,i){this.Jc=9,this.rC=t,this.hC=1,this.aC[0]=s,i.Wo(this.lC,0)}OC(){const t=this.ZG,s=this.nC,i=s.tC.xw;t.useProgram(i.zx),i.q_(s.J_,!1),i.X_(s.Y_,!1);const e=s.iC;i.c_.L_()&&i.c_.KI(e.Za(),e.Qa()),i.f_.L_()&&i.f_.KI(e.tl(),e.sl());const n=this.aC[0];if(i.d_.L_()&&i.d_.XI(n),i.l_.L_()){const t=this.lC;i.l_.yI(t[0],t[1],t[2],t[3])}t.drawArrays(t.POINTS,this.rC/4,this.hC),t.useProgram(s.K_.zx)}DC(t){this.Jc=10,this.oC=t}LC(){const t=this.ZG,s=this.nC,i=this.oC;s.K_=i,t.useProgram(i.zx),i.q_(s.J_,!1),i.X_(s.Y_,!1)}kC(){this.Jc=11}NC(){const t=this.nC.K_,s=this.ZG,i=this.aC,e=this.lC,n=this.uC;if(t.S_.L_()){const t=this.nC.tC,i=this.oC;t.BC!==i&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,i?i.XM():null),t.BC=i,s.activeTexture(s.TEXTURE0))}t.__.L_()&&t.__.KI(i[0],i[1]),t.v_.L_()&&t.v_.KI(i[2],i[3]),t.b_.L_()&&t.b_.KI(i[4],i[5]),t.C_.L_()&&t.C_.XI(this.hC),t.P_.L_()&&t.P_.XI(i[6]),t.R_.L_()&&t.R_.XI(i[7]),t.x_.L_()&&t.x_.KI(i[12],i[13]),t.T_.L_()&&t.T_.KI(i[14],i[15]),t.M_.L_()&&t.M_.KI(n[0],n[1]),t.G_.L_()&&t.G_.KI(n[2],n[3]),t.E_.L_()&&t.E_.KI(e[0],e[1]),t.A_.L_()&&t.A_.KI(e[2],e[3]),t.I_.L_()&&t.I_.XI(this.rC)}UC(){this.Jc=12}VC(){const t=this.nC.K_.k_,s=this.cC;for(let i=0,e=t.length;i<e;++i){const e=t[i],n=s[i];e.$I()?e.ZI(n.ko(),n.No(),n.Bo()):e.XI(n)}}WC(t){this.Jc=13,this.oC=t}zC(){const t=this.ZG,s=this.oC,i=this.nC._G;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}jC(t,s,i){this.Jc=16;const e=this.aC,n=this.nC.tC;e[0]=t.xy(),e[1]=t.My(),e[2]=s?s.xy():n.xy(),e[3]=s?s.My():n.My(),e[4]=t.FG()?1:0,e[5]="stretch"===i;const r=this.cC;nc.wh(r),r.push(t.CG()),r.push(s?s.CG():null)}HC(){const t=this.aC,s=this.cC,i=this.ZG,e=t[0],n=t[1],r=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,n,0,0,r,h,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const t=Math.min(e,r),s=Math.min(n,h),o=Math.max(n-h,0),a=Math.max(h-n,0);i.blitFramebuffer(0,o,t,s+o,0,a,t,s+a,i.COLOR_BUFFER_BIT,i.NEAREST)}}JC(t){this.Jc=17,this.oC=t}qC(){this.oC.$C(),this.oC=null}XC(t){this.Jc=18,this.oC=t}YC(){this.oC.KC(),this.oC=null}ZC(t,s,i){this.Jc=19;const e=this.aC;e[0]=t,e[1]=s,e[2]=i}QC(){const t=this.nC.K_,s=this.aC;t.__.L_()&&t.__.KI(s[0],s[1]),t.y_.L_()&&t.y_.XI(s[2])}tP(t,s,i,e,n,r,h){this.Jc=15;const o=this.aC;t.Wo(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=n/i,o[8]=r/s,o[9]=h/i}sP(){const t=this.nC.K_,s=this.aC;t.x_.L_()&&t.x_.KI(s[0],s[1]),t.__.L_()&&t.__.KI(s[4],s[5]),t.p_.L_()&&t.p_.KI(s[6],s[7]),t.m_.L_()&&t.m_.KI(s[8],s[9])}iP(t,s,i,e,n,r,h){this.Jc=28;const o=this.aC;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=n,o[5]=r,o[6]=h}eP(){const t=this.nC.K_,s=this.aC;t.__.L_()&&t.__.KI(s[0],s[1]),t.p_.L_()&&t.p_.KI(s[2],s[3]),t.y_.L_()&&t.y_.XI(s[4]),t.m_.L_()&&t.m_.KI(s[5],s[6])}nP(t){this.Jc=21,this.rC=t?1:0}rP(){const t=this.ZG,s=0!==this.rC;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}hP(t){this.Jc=22,this.rC=t?1:0}oP(){const t=this.ZG;0===this.rC?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}aP(t){this.Jc=23,this.rC=t?1:0}lP(){const t=this.ZG,s=this.nC,i=s.tC,e=0!==this.rC;s.sC=e,t.activeTexture(t.TEXTURE2),e?(s.IG&&t.bindFramebuffer(t.FRAMEBUFFER,s.IG),t.bindTexture(t.TEXTURE_2D,i.bG())):(t.bindTexture(t.TEXTURE_2D,null),s.IG&&t.bindFramebuffer(t.FRAMEBUFFER,s._G)),t.activeTexture(t.TEXTURE0)}uP(){this.Jc=24}cP(){const t=this.ZG;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}fP(){this.Jc=25}dP(){const t=this.ZG;t.enable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}pP(){this.Jc=26}mP(){const t=this.ZG;t.disable(t.STENCIL_TEST)}gP(t,s,i,e,n){this.Jc=27,this.rC=t?1:0;const r=this.aC;r[0]=s,r[1]=i,r[2]=e,r[3]=n}yP(){const t=this.ZG,s=this.aC;1===this.rC?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}SP(t){this.Jc=29,this.rC=t}wP(){const t=this.ZG,s=this.rC;0===s?t.disable(t.CULL_FACE):(t.enable(t.CULL_FACE),1===s?t.cullFace(t.BACK):t.cullFace(t.FRONT))}vP(t){this.Jc=30,this.rC=t}bP(){const t=this.ZG;t.frontFace(0===this.rC?t.CW:t.CCW)}xP(){switch(this.Jc){case 1:return void this.dC();case 2:return void this.mC();case 3:return void this.wC();case 4:return void this.bC();case 5:return void this.TC();case 6:return void this.GC();case 7:return void this.IC();case 8:return void this.RC();case 9:return void this.OC();case 10:return void this.LC();case 11:return void this.NC();case 12:return void this.VC();case 13:return void this.zC();case 14:return void this.AC();case 15:return void this.sP();case 16:return void this.HC();case 17:return void this.qC();case 18:return void this.YC();case 19:return void this.QC();case 20:return void this.yC();case 21:return void this.rP();case 22:return void this.oP();case 23:return void this.lP();case 24:return void this.cP();case 25:return void this.dP();case 26:return void this.mP();case 27:return void this.yP();case 28:return void this.eP();case 29:return void this.wP();case 30:return void this.bP()}}}}{let oc=function(t,s,i,e,n,r){s?t.strokeRect(i,e,n,r):t.fillRect(i,e,n,r)},ac=function(t){return t*(4/3)},lc=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};0;const uc=self._s,cc=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),fc={timeout:60},dc=new uc.To(0,0,0,1),pc=new Set(["left","center","right"]),mc=new Set(["top","center","bottom"]),gc=new Set(["word","cjk","character"]),yc=new Set(["ltr","rtl"]),Sc=new Set;uc.TP&&uc.TP.addEventListener("fontload",t=>{const s=t.font.Pc();for(const t of Sc)(t.MP()||uc.Ke(t.GP(),s))&&(t._P(),t.IP())});let wc=!1,vc=!1;uc.qS.tx=class{constructor(t,s){s=Object.assign({},fc,s),this.ix=t,this.CP="Arial",this.PP=16,this.RP=1,this.EP=0,this.AP=!1,this.FP=!1,this.OP="black",this.DP=!1,this.Xg=null,this.LP=!0,this.kP=null,this.NP=new Set,this.BP="left",this.UP="top",this.Bc="",this.VP=null,this.WP=uc.jn(uc.qg),this.zP="word",this.jP="ltr",this.HP=!1,this.JP=!1,this.qP=!1,this.$P=!1,this.XP=-1,this.YP=0,this.KP=0,this.ZP=0,this.Vy=0,this.Wy=0,this.QP=1,this.tR=null,this.sR=null,this.iR=null,this.eR=null,this.nR=-1,this.rR=-1,this.hR="",this.oR="",this.aR="",this.lR=1,this.uR=1,this.cR=t=>this.fR(t),this.dR=new Map,this.pR=new uc.Of(()=>this.IP(!0),2),this.MM=null,this.mR=!0,this.gR=new uc.Rect,this.yR=1,this.SR=new uc.Of(()=>{this.wR(),this.vR(8,8),this.bR()},s.timeout),this.xR=null,this.TR=!1,Sc.add(this)}Hn(){this.kP=null,this.NP.clear(),this.Xg=null,this.VP=null,this.tR=null,this.sR=null,this.iR=null,this.eR=null,this.cR=null,this.IP(),this.pR.Hn(),this.SR.Hn(),this.xR=null,this.wR(),this.WP.Pu(),this.WP=null,this.ix=null,this.TR=!0,Sc.delete(this)}bR(){this.qP=!0}MR(){this.bR(),this.JP=!0}_P(){this.MR(),this.HP=!0}GR(t){if(t=!!t,this.DP===t)return;this.DP=t;const s=this.DP?"alphabetic":"top";this.sR&&(this.sR.textBaseline=s),this.iR&&(this.iR.textBaseline=s),this.IP(),this._P()}MP(){return this.DP}sy(t){this.Xg!==t&&(this.Xg=t,this.WP.sy(t),this.Xg&&this.Xg.OS()&&this.Xg.DS().then(()=>this.bR()),this._P())}_R(t){t=!!t,this.LP!==t&&(this.LP=t,this.bR())}IR(t){t||(t="serif"),this.CP!==t&&(this.CP=t,this.IP(),this._P())}GP(){return this.CP}CR(t){t<.1&&(t=.1),this.PP!==t&&(this.PP=t,this.IP(),this._P())}PR(){return this.PP}RR(t){this.RP!==t&&(this.RP=t,this.IP(),this._P())}ER(t){this.EP!==t&&(this.EP=t,this.MR())}AR(){return this.EP}FR(t){t=!!t,this.AP!==t&&(this.AP=t,this.IP(),this._P())}OR(){return this.AP}DR(t){t=!!t,this.FP!==t&&(this.FP=t,this.IP(),this._P())}LR(){return this.FP}kR(t){t=Math.floor(t),this.XP!==t&&(this.XP=t,this.bR())}NR(){return this.XP}BR(t,s){let i=[];(this.AP||s.eS("b"))&&i.push("bold"),(this.FP||s.eS("i"))&&i.push("italic");const e=s.iS("size"),n=(e?parseFloat(e.Pg):this.PP)*this.RP;t?i.push(n+"pt"):i.push(n*this.UR()+"pt");let r=this.CP;const h=s.iS("font");return h&&h.Pg&&(r=h.Pg,this.kP&&!this.NP.has(r)&&(this.kP(r),this.NP.add(r))),r&&(cc.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}Zx(t){t instanceof uc.To&&(t=t.ta()),this.OP!==t&&(this.OP=t,this.bR())}VR(t,s,i){dc.Po(t,s,i),this.Zx(dc)}WR(t){if(!pc.has(t))throw new Error("invalid horizontal alignment");this.BP!==t&&(this.BP=t,this.MR())}zR(){return this.BP}jR(t){if(!mc.has(t))throw new Error("invalid vertical alignment");this.UP!==t&&(this.UP=t,this.MR())}HR(){return this.UP}JR(t){if(!gc.has(t))throw new Error("invalid word wrap mode");this.zP!==t&&(this.zP=t,this.IP(),this._P())}qR(){return this.zP}$R(t){if(!yc.has(t))throw new Error("invalid text direction");this.jP!==t&&(this.jP=t,this.sR&&(this.sR.direction=this.jP),this.iR&&(this.iR.direction=this.jP),this.IP(),this._P())}XR(){return this.jP}Wc(t){this.Bc!==t&&(this.Bc=t,this.IP(),this._P())}YR(){return this.Bc}UR(){return this.yR*this.QP*self.devicePixelRatio}KR(t){t=!!t,this.mR!==t&&(this.mR=t,this.$P=!0)}ZR(){return this.mR}QR(t,s,i){if(void 0===i&&(i=1),t<=0||t<=0)return;if(this.KP===t&&this.ZP===s&&this.QP===i)return;const e=this.KP;this.KP=t,this.ZP=s,this.QP=i;const n=self.devicePixelRatio;this.Vy=this.KP*this.QP*n,this.Wy=this.ZP*this.QP*n;const r=Math.max(this.Vy,this.Wy),h=Math.min(this.ix.OM(),4096);let o=1;r>h&&(o=h/r,this.Vy=Math.min(this.Vy*o,h),this.Wy=Math.min(this.Wy*o,h)),this.yR=o,this.KP!==e?this._P():this.MR()}xy(){return this.Vy}My(){return this.Wy}tE(){return this.QP}sE(){return this.iE(),this.WP.By()}eE(){return this.iE(),this.WP.Uy()+this.WP.ty()*(this.EP+4)-this.EP}nE(){this.iE();let t=0;for(const s of this.WP.Qg())for(const i of s.Lg())t+=i.iy();return t}EG(){return this.SR.Bf(),this.rE(),this.MM}hE(t,s){this.iE();const i=this.UR(),e=this.WP.Qg();for(const n of e){const e=n._y()*i;if(s>=n.Qy()-n.My()*i+e&&s<n.Qy()+e)for(const s of n.Lg())if(t>=s.Ky()&&t<s.Ky()+s.xy()*i)return s}return null}*oE(t){this.iE();const s=this.WP.Qg();for(const i of s)for(const s of i.Lg()){const i=s.iS("tag");i&&uc.Ke(i.Pg,t)&&(yield s)}}aE(t,s){for(const i of this.oE(t)){if(0===s)return i;--s}return null}lE(t){let s=0;for(const i of this.oE(t))++s;return s}rE(){(!this.MM||this.qP||this.JP||this.HP||this.$P)&&(this.TR||this.Vy<=0||this.Wy<=0||this.uE())}uE(){this.TR||(this.iE(),this.cE(),this.fE(),this.SR.Bf())}vR(t,s){this.tR||(this.tR=uc.uo(16,16));let i=!1;this.nR===t&&this.rR===s||(this.nR=t,this.rR=s,this.tR.width=t,this.tR.height=s,i=!0),this.sR||(this.sR=this.tR.getContext("2d"),i=!0),i?(this.sR.textBaseline=this.DP?"alphabetic":"top",this.sR.direction=this.jP,this.sR.font=this.hR,this.sR.fillStyle=this.aR,this.sR.strokeStyle=this.aR,this.sR.globalAlpha=this.lR,this.sR.lineWidth=this.uR):this.sR.clearRect(0,0,t,s)}dE(){this.iR||(this.iR=uc.uo(16,16).getContext("2d"),this.eR=uc.uo(16,16).getContext("2d"),this.iR.textBaseline=this.DP?"alphabetic":"top",this.eR.textBaseline="top",this.iR.direction=this.jP,this.eR.direction=this.jP)}pE(t){this.oR!==t&&(this.oR=t,this.iR.font=t,this.eR.font=t)}mE(){if(!wc){wc=!0,this.dE();const t=this.iR.measureText("test");vc="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return vc}iE(){this.gE(),this.yE()}gE(){this.HP&&(this.dE(),!this.DP||this.VP&&this.VP.toString()===this.Bc||(this.VP=new uc.dn(this.Bc,{pg:!0})),this.pR.Bf(),this.WP.qg(this.DP?this.VP.Ig():this.Bc,this.cR,this.KP,this.zP,0),this.HP=!1)}yE(){this.JP&&(this.SE(),this.JP=!1)}IP(t){this.dR.clear(),t||this.pR.Uf()}wE(t,s){const i=this.dR;if(i.set(t,s),i.size>1e3){let t=0;for(const s of i.keys())if(i.delete(s),t++,t>=10)break}}fR(t){const s=t.zg()?t.Jg().join(""):" ",i=this.BR(!0,t),e=i+"|"+s,n=this.dR;let r=n.get(e);if(r)return n.delete(e),n.set(e,r),r;this.pE(i);const h=this.iR.measureText(s);let o=0;if(this.DP&&this.mE()){const t=this.eR.measureText(s);o=h.fontBoundingBoxAscent-t.fontBoundingBoxAscent}const a=t.iS("size"),l=(a?parseFloat(a.Pg):this.PP)*this.RP;return r={width:h.width,height:ac(l),fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,kg:o},this.wE(e,r),r}vE(t){this.hR!==t&&(this.hR=t,this.sR.font=t)}bE(t){this.aR!==t&&(this.aR=t,this.sR.fillStyle=t,this.sR.strokeStyle=t)}xE(t){this.lR!==t&&(this.lR=t,this.sR.globalAlpha=t)}TE(t){this.uR!==t&&(this.uR=t,this.sR.lineWidth=t)}SE(){const t=this.UR(),s=(4+this.EP)*t;let i=0;const e=this.WP.Qg();if(0===e.length)return;for(const t of e){t.Yy(NaN),t.Zy(NaN);for(const s of t.Lg())s.Yy(NaN),s.Zy(NaN)}const n=this.DP&&this.mE();let r=e[0].My()*t;if("center"===this.UP){const h=e.reduce((i,e)=>i+e.My()*t+s,0)-s;i=Math.max(this.Wy/2-h/2,0),n&&(r=e[0].Iy()*t)}else if("bottom"===this.UP){const r=e.reduce((i,e)=>i+e.My()*t+s,0)-this.EP*t,h=n?e.at(-1)._y()*t:0;i=this.Wy-r-h-2}for(let n=0,h=e.length;n<h;++n){const h=e[n],o=h.My()*t,a=i;if(this.DP){if(i+=0===n?r:o,n>0&&i>this.Wy-4*t)break}else if(n>0&&i>=this.Wy-o)break;a>=0&&this.ME(h,i,t),this.DP||(i+=o),i+=s}}ME(t,s,i){let e=0;"center"===this.BP?e=Math.floor((this.Vy-t.xy()*i)/2):"right"===this.BP&&(e=this.Vy-t.xy()*i),t.Yy(e),t.Zy(s);for(const n of"ltr"===this.jP?t.Lg():t.$y())this.GE(n,e,s,i),e+=n.xy()*i}GE(t,s,i,e){const n=t.iS("offsetx");s+=n?lc(n.Pg,t.My())*e:0;const r=t.iS("offsety");if(i+=r?lc(r.Pg,t.My())*e:0,t.wy()){const s=t.iS("iconoffsety");i+=s?lc(s.Pg,t.My())*e:.2*t.My()*e}t.Yy(s),t.Zy(i)}cE(){if(!this.qP)return;this.vR(Math.max(uc.vr(Math.ceil(this.Vy)),128),Math.max(uc.vr(Math.ceil(this.Wy)),64)),this.sR.imageSmoothingEnabled=this.LP,this.sR.imageSmoothingQuality="high",this.YP=0;const t=this.UR(),s=this.WP.Qg();for(const i of s)this._E(i,t);this.qP=!1}_E(t,s){const i=t.Ky(),e=t.Qy();if(Number.isFinite(i)&&Number.isFinite(e))for(const i of"ltr"===this.jP?t.Lg():t.$y())this.IE(i,s,t.My())}IE(t,s,i){const e=this.sR,n=t.Ky(),r=t.Qy();if(!Number.isFinite(n)||!Number.isFinite(r))return;const h=i/16;let o=t.xy()*s;const a=t.My()*s,l=t.My()/16,u=(4+this.EP)*s;let c=t.zg()?t.Jg():null;if(-1!==this.XP){if(this.YP>=this.XP)return;t.zg()&&this.YP+c.length>this.XP&&(c=c.slice(0,this.XP-this.YP),o=this.fR(t).width*s),this.YP+=t.iy()}const f=t.iS("background"),d=t.eS("u"),p=t.eS("s");if(t.zg()&&uc.vm(c)&&!f&&!d&&!p||t.eS("hide"))return;const m=t.iS("color"),g=t.iS("opacity");this.xE(g?parseFloat(g.Pg)/100:1),f&&(this.bE(f.Pg),e.fillRect(n,r-a,o,a+u));const y=t.iS("linethickness"),S=y?parseFloat(y.Pg):1,w=t.eS("stroke");if(w&&this.TE(.5*l*S*this.UR()),t.zg()){const s=c.join("");if(this.vE(this.BR(!1,t)),!w){this.TE(.5*l*S*this.UR());const i=t.iS("outlineback");i&&(this.bE(i.Pg),this.CE(!0,s,n,r,o))}if(this.bE(m?m.Pg:this.OP),this.CE(w,s,n,r,o),!w){this.TE(.5*l*S*this.UR());const i=t.iS("outline");i&&(this.bE(i.Pg),this.CE(!0,s,n,r,o))}}else if(t.wy()&&t.xy()>0){const s=t.cS(this.Xg);s&&e.drawImage(s,n,r-a,o,a)}if(this.bE(m?m.Pg:this.OP),d&&oc(e,w,n,r+s*h,o,s*h*S),p){const t=s*l,i=r-a/4+t/2;e.fillRect(n,i-t*S/2,o,t*S)}}CE(t,s,i,e,n){"rtl"===this.jP&&(i+=n),t?"Gecko"===uc.Ks.ei?this.sR.strokeText(s,i,e,n):this.sR.strokeText(s,i,e):"Gecko"===uc.Ks.ei?this.sR.fillText(s,i,e,n):this.sR.fillText(s,i,e)}fE(){this.ix.PE()||(this.MM&&!this.$P||(this.wR(),this.MM=this.ix.vG(this.tR.width,this.tR.height,{wM:this.mR,vM:"high"}),this.$P=!1),this.ix.RE(this.tR,this.MM),this.gR.set(0,0,this.Vy/this.MM.xy(),this.Wy/this.MM.My()),this.xR&&this.xR())}EE(){return this.gR}wR(){this.MM&&(this.ix.PE()||this.ix.MG(this.MM),this.MM=null)}static Qx(){for(const t of Sc)t.wR()}static AE(){return Sc.values()}}}{const bc=self._s;class xc{constructor(t){this.ZG=t.DM(),this.FE=t.LM(),this.OE=t.DE(),this.LE=null,this.Nf=!1,this.kE=!1,this.NE=0,1===this.FE?this.LE=this.OE.createQueryEXT():this.LE=this.ZG.createQuery()}Hn(){this.BE(),this.ZG=null,this.OE=null,this.kE=!1}BE(){this.LE&&(1===this.FE?this.OE.deleteQueryEXT(this.LE):this.ZG.deleteQuery(this.LE),this.LE=null)}$C(){if(this.Nf)throw new Error("query already active");1===this.FE?this.OE.beginQueryEXT(this.OE.TIME_ELAPSED_EXT,this.LE):this.ZG.beginQuery(this.OE.TIME_ELAPSED_EXT,this.LE),this.Nf=!0}KC(){if(!this.Nf)throw new Error("query not active");1===this.FE?this.OE.endQueryEXT(this.OE.TIME_ELAPSED_EXT):this.ZG.endQuery(this.OE.TIME_ELAPSED_EXT),this.Nf=!1}UE(){if(!this.LE||this.kE||this.Nf)return;let t=!1;t=1===this.FE?this.OE.getQueryObjectEXT(this.LE,this.OE.QUERY_RESULT_AVAILABLE_EXT):this.ZG.getQueryParameter(this.LE,this.ZG.QUERY_RESULT_AVAILABLE);const s=this.ZG.getParameter(this.OE.GPU_DISJOINT_EXT);t&&!s&&(1===this.FE?this.NE=this.OE.getQueryObjectEXT(this.LE,this.OE.QUERY_RESULT_EXT):this.NE=this.ZG.getQueryParameter(this.LE,this.ZG.QUERY_RESULT),this.NE/=1e9,this.kE=!0),(t||s)&&this.BE()}VE(){return this.kE}WE(){if(!this.kE)throw new Error("no result available");return this.NE}}bc.qS.zE=class{constructor(t){this.ix=t,this.Hw=t.Wb(),this.Nf=!1,this.jE=null,this.HE=!1,this.JE=null,this.qE=[]}Hn(){for(const t of this.qE)t instanceof xc&&t.Hn();bc.wh(this.qE),this.jE=null,this.JE=null,this.ix=null}$C(){if(this.Nf)throw new Error("query already active");const t=this.ix.$E();t.length>0?(this.HE=!0,this.jE=t.at(-1),this.jE.XE(),this.jE.qE.push(this)):(this.HE=!1,this.jE=null),this.Nf=!0,t.push(this),this.YE()}KC(){if(!this.Nf)throw new Error("query not active");if(this.ix.$E().pop()!==this)throw new Error("can only end most nested query");this.Nf=!1,this.XE(),this.jE&&(this.jE.YE(),this.jE=null)}YE(){this.JE=bc.jn(xc,this.ix),this.qE.push(this.JE),this.JE.$C()}XE(){this.JE.KC(),this.JE=null}UE(){for(const t of this.qE)t.UE()}KE(){return this.HE}VE(){return this.qE.every(t=>t.VE())}WE(){return this.qE.reduce((t,s)=>t+s.WE(),0)}Wb(){return this.Hw}}}{const Tc=self._s;Tc.qS.ZE=class{constructor(t,s=1e3){this.ix=t,this.QE=s,this.tA=[],this.ix.sA(this)}Hn(){this.Pu(),this.ix.iA(this),this.ix=null}Pu(){for(const t of this.tA)t.Hn();Tc.wh(this.tA)}eA(){const t=new Tc.qS.zE(this.ix);return this.tA.push(t),this.tA.length>this.QE&&this.tA.shift().Hn(),t}nA(t){for(const s of this.tA){if(s.Wb()>=t)return;if(s.KE())return;s.UE()}}rA(t,s){if(s<=t)return NaN;let i=0;for(const e of this.tA){if(e.Wb()>=s)break;if(!(e.Wb()<t)){if(!e.VE())return NaN;i+=e.WE()}}return i}hA(t){for(let s=0,i=this.tA.length;s<i;++s){const i=this.tA[s];if(!(i.Wb()<t))return void(s>0&&this.tA.splice(0,s));i.Hn()}}}}{let Mc=function(){Nc=-1;for(const t of kc)t.oA()&&(t.resolve(),kc.delete(t));kc.size>0&&(Nc=self.requestAnimationFrame(Mc))};0;const Gc=self._s,_c=(self.assert,self.hs),Ic=(_c.ys,_c.Ss),Cc=_c.fs,Pc={powerPreference:"default",aA:!0,alpha:!1,depth:!1,lA:!1,uA:2,failIfMajorPerformanceCaveat:!1},Rc=new Set(["default","low-power","high-performance"]),Ec=new Gc.Cl(0,0,1,0,1,1,0,1),Ac=Cc.create(),Fc=Cc.create(),Oc=new Gc.Cl,Dc=new Gc.Rect;let Lc=null;Gc.Ds&&(self.cA=function(){Lc?Lc.loseContext():console.warn("WEBGL_lose_context not supported")},self.fA=function(){Lc?Lc.restoreContext():console.warn("WEBGL_lose_context not supported")});const kc=new Set;let Nc=-1;Gc.qS.dA=class extends Gc.qS.uw{constructor(t,s){if(super(s),s=Object.assign({},Pc,s),!Rc.has(s.powerPreference))throw new Error("invalid power preference");const i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat};let e=null,n=0;if(s.uA>=2&&(e=t.getContext("webgl2",i),n=2),e||(e=t.getContext("webgl",i),n=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.ZG=e,this.pA=e.getContextAttributes(),this.mA=e.getParameter(e.VERSION),this.FE=n,this.gA=Ic.create(),this.yA=!1,this.SA=Cc.create(),this.wA=!!s.depth,this.vA=!(!s.depth||!s.lA),this.bA=this.wA,this.xA=!1,this.TA=null,this.MA=!0,this.GA=0,this._A=0,this.s_=null,this.i_=null,this.e_=null,this.IA=null,this.r_=null,this.CA=this.FE>=2&&void 0!==globalThis.Float16Array,this.PA=new Float32Array(196605),this.RA=new Uint16Array(393210),this.EA=new Float32Array(131070),this.AA=this.CA?new globalThis.Float16Array(262140):new Float32Array(262140),this.FA=new Float32Array(32e3),this.OA=0,this.DA=0,this.LA=0,this.kA=null,this.NA=null,this.BA=[],this.UA=0,this.VA=0,this.WA=null,this.zA=0,this.nC=Gc.jn(Gc.qS.QI,this),this.jA=Gc.jn(Gc.To,1,1,1,1),this.HA=null,this.BC=null,this.JA=0,this.qA=new Gc.Rect,this.$A=Gc.jn(Gc.Rect,0,0,-1,-1),this.XA=0,this.YA=0,this.KA=0,this.ZA=-1,this.QA=0,this.tF=0,this.sF="(unavailable)",this.iF="(unavailable)",this.eF=[],this.nF=!1,this.rF=null,this.hF=null,this.oF=null,this.aF=null,this.lF=null,this.uF=null,this.cF=null,this.fF=null,this.dF=0,this.pF=!!s.aA,this.OE=null,this.mF=new Set,this.gF=[]}$b(){return!0}async Yw(){super.Yw();const t=this.ZG;this.jA.Co(1,1,1,1),this.HA=null,this.BC=null,this.OA=0,this.DA=0,this.LA=0,Gc.wh(this.BA),this.UA=0,this.VA=0,this.kA=null,this.WA=null,this.qA.set(0,0,1,1),this.zA=0;const s=this.nC;s.K_=null,s._G=null,s.IG=null,s.clearColor.Co(0,0,0,0),s.iC.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),this.JA=0,1===this.FE?this.fF=t.getExtension("EXT_blend_minmax"):this.fF=null,this.yF(t),t.cullFace(t.BACK),t.disable(t.CULL_FACE),this.YA=0,t.frontFace(t.CW),this.KA=0,t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.wA?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.bA=this.wA,this.xA=!1,this.r_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.r_),t.bufferData(t.ARRAY_BUFFER,this.FA.byteLength,t.DYNAMIC_DRAW),this.s_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.s_),t.bufferData(t.ARRAY_BUFFER,this.PA.byteLength,t.DYNAMIC_DRAW),this.i_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.i_),t.bufferData(t.ARRAY_BUFFER,this.EA.byteLength,t.DYNAMIC_DRAW),this.e_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.e_),t.bufferData(t.ARRAY_BUFFER,this.AA.byteLength,t.DYNAMIC_DRAW),this.IA=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.IA),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.RA.byteLength,t.DYNAMIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.ZA=t.getParameter(t.MAX_TEXTURE_SIZE);const i=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.QA=i[0],this.tF=i[1],this.tF>2048&&(this.tF=2048),this.eF=t.getSupportedExtensions();const e=t.getExtension("WEBGL_debug_renderer_info");if(e&&(this.sF=t.getParameter(e.UNMASKED_VENDOR_WEBGL),this.iF=t.getParameter(e.UNMASKED_RENDERER_WEBGL)),this.rF=t.getExtension("KHR_parallel_shader_compile"),this.FE>=2&&("Chromium"!==Gc.Ks.ei||Gc.Ks.ii>=135)&&(this.oF=t.getExtension("EXT_conservative_depth")),Gc.Ds&&(Lc=t.getExtension("WEBGL_lose_context")),this.pF&&(1===this.LM()?this.OE=t.getExtension("EXT_disjoint_timer_query"):this.OE=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.hF=t.getExtension("EXT_texture_filter_anisotropic"),this.hF?this.dF=t.getParameter(this.hF.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.dF=0,this.LM()<2&&this.wA&&this.vA&&(this.aF=t.getExtension("WEBGL_depth_texture"),!this.aF))throw new Error("no depth texture support");this.LM()<2&&(this.lF=t.getExtension("EXT_frag_depth"),this.uF=t.getExtension("OES_standard_derivatives"),this.cF=t.getExtension("EXT_shader_texture_lod"));const n=Gc.qS.JG,r=n.vI(!1);let h=n.xI(),o=r,a=n.AI(),l=n.RI(),u=n.GI(),c=n.vI(!0),f=!1;this.wA&&(this.LM()<2?this.lF&&(h=n.TI(),a=n.FI(),u=n._I(),f=!0):(o=n.bI(),h=n.MI(this.SF()),a=n.OI(this.SF()),l=n.EI(),u=n.II(this.SF()),c=n.bI(!0)));const d=n.CI(this.LM(),f,this.uF&&this.cF,this.SF()),p=this.LM()>=2?n.bI():r,m=[[h,o,"<default>"],[h,o,"<default-device-transform>"],[a,l,"<point>"],[n.DI(),r,"<fill>"],[n.LI(),r,"<lineargradient>"],[n.kI(),r,"<penumbra>"],[n.BI(),r,"<hardellipse>"],[n.UI(),r,"<hardellipseoutline>"],[n.VI(),r,"<smoothellipse>"],[n.WI(),r,"<smoothellipseoutline>"],[n.NI(),r,"<smoothline>"],[u,c,"<tilemap>"],[d,p,"<tilerandomization>"]],g=await Promise.all(m.map(t=>this.wF({src:t[0],$G:t[1],name:t[2]})));this.bw=g[0],this.NA=g[1],this.xw=g[2],this.Gw=g[3],this._w=g[4],this.Iw=g[5],this.Cw=g[6],this.Pw=g[7],this.Rw=g[8],this.Ew=g[9],this.Aw=g[10],this.Tw=g[11],this.Mw=g[12],this.bv()}async wF(t){const s=await Gc.qS.JG.KG(this,t);return this.yv(s),s}vF(){this.kA=null}QR(t,s,i){if(this.Vy===t&&this.Wy===s&&!i)return;this.Vb();const e=this.ZG,n=this.nC;this.Vy=t,this.Wy=s,this.bF(0,0,t,s),this.fv(this.SA,t/s),this.xF(this.SA),this.NA&&(e.useProgram(this.NA.Q_()),this.NA.H_(this.dw),this.kA=this.NA,this.nC.K_=this.NA),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.HA=null,this.BC=null,this.wA&&this.MA&&this.TF(this.Vy,this.Wy),this.WA&&this.WA.TG(this.Vy,this.Wy),e.bindFramebuffer(e.FRAMEBUFFER,null),this.WA=null,n._G=null,n.IG=null}TF(t,s){const i=this.ZG;this.TA&&this.GA===t&&this._A===s||(this.vA?(this.TA&&i.deleteTexture(this.TA),this.TA=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.TA),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),this.LM()>=2?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.aF&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.aF.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.TA&&i.deleteRenderbuffer(this.TA),this.TA=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.TA),i.renderbufferStorage(i.RENDERBUFFER,this.FE>=2?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.GA=t,this._A=s)}MF(t,s){this.wA&&(this.MA=!1,this.TF(t,s))}GF(){this.wA&&(this.MA=!0,this.TF(this.Vy,this.Wy))}bF(t,s,i,e){const n=this.gA;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(this._F().vC(t,s,i,e),Ic.set(n,t,s,i,e),this.VA=0)}ov(t){super.ov(t),this.fv(this.SA,this.Vy/this.Wy)}ev(t){super.ev(t),this.fv(this.SA,this.Vy/this.Wy)}rv(t){super.rv(t),this.fv(this.SA,this.Vy/this.Wy)}xF(t){Cc.F(this.dw,t)||(this._F().xC(t),Cc.m(this.dw,t),this.VA=0,this.yA=!0)}IF(){let t,s,i;const e=this.WA;null===e?(t=this.SA,s=this.xy(),i=this.My()):(t=e.AG(),s=e.xy(),i=e.My()),this.xF(t),this.bF(0,0,s,i)}CF(t){Cc.F(this.pw,t)||(this._F().MC(t),Cc.m(this.pw,t),this.VA=0,this.yA=!0)}PF(){this.yA=!1}RF(){return this.yA}GG(){return this.nC}_F(){const t=this.BA;return this.UA===t.length&&t.push(new Gc.qS.eC(this.nC)),t[this.UA++]}Vb(){0!==this.UA&&(this.PE()||(this.EF(),this.AF(),this.UA=0,this.OA=0,this.DA=0,this.LA=0,this.VA=0))}EF(){const t=this.ZG;this.OA>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.s_),t.bufferSubData(t.ARRAY_BUFFER,0,this.PA.subarray(0,3*this.OA)),t.bindBuffer(t.ARRAY_BUFFER,this.i_),t.bufferSubData(t.ARRAY_BUFFER,0,this.EA.subarray(0,2*this.OA)),t.bindBuffer(t.ARRAY_BUFFER,this.e_),t.bufferSubData(t.ARRAY_BUFFER,0,this.AA.subarray(0,4*this.OA))),this.DA>0&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.IA),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,this.RA.subarray(0,this.DA))),this.LA>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.r_),t.bufferSubData(t.ARRAY_BUFFER,0,this.FA.subarray(0,this.LA)))}AF(){const t=this.BA;for(let s=0,i=this.UA;s<i;++s)t[s].xP()}FF(){return this.jA.Uo()}OF(t,s,i,e){const n=this.jA;n.qo(t,s,i,e)||(n.Co(t,s,i,e),this.Ow=null,2===this.VA&&(this.VA=0))}DF(t){const s=this.jA;s.Uo()!==t&&(s.Do(t),this.Ow=null,2===this.VA&&(this.VA=0))}Zx(t){const s=this.jA;s.equals(t)||(s.set(t),this.Ow=null,2===this.VA&&(this.VA=0))}LF(){this.OF(1,1,1,1)}kF(){return this.jA}NF(t){t!==this.HA&&(this._F().pC(t),this.HA=t,this.VA=0)}UM(){this.HA=null}Kx(t){this.JA!==t&&(this.JA=t,this.BF(this.Jv(t)))}UF(t){this.Kx(this.qv(t))}BF(t){this._F().SC(t),this.VA=0,this.Ow=null}VF(){return 0===this.JA}WF(){this.Kx(0)}Lb(t){this.YA!==t&&(this._F().SP(t),this.YA=t,this.VA=0,this.Ow=null)}zF(){return this.YA}kb(t){this.KA!==t&&(this._F().vP(t),this.KA=t,this.VA=0,this.Ow=null)}jF(){return this.KA}HF(){this.Kx(3)}Rect(t){this.JF(t.Za(),t.Qa(),t.tl(),t.sl())}JF(t,s,i,e){this.Bb(t,s,i,s,i,e,t,e)}qF(t,s){(this.OA+t>65535||this.DA+s>393210)&&this.Vb(),1===this.VA?this.BA[this.UA-1].hC+=s:(this._F().fC(2*this.DA,s),this.VA=1)}$F(){const t=this.OA;let s=this.DA;this.DA+=6;const i=this.RA;i[s++]=t,i[s++]=t+1,i[s++]=t+2,i[s++]=t,i[s++]=t+2,i[s]=t+3}Cl(t){this.XF(t,Ec)}Bb(t,s,i,e,n,r,h,o){this.qF(4,6),this.$F();const a=this.PA,l=this.OA;this.OA+=4;let u=3*l;const c=this.kw+this.Nw;a[u++]=t,a[u++]=s,a[u++]=c,a[u++]=i,a[u++]=e,a[u++]=c,a[u++]=n,a[u++]=r,a[u++]=c,a[u++]=h,a[u++]=o,a[u]=c,Ec.Wo(this.EA,2*l),this.jA.zo(this.AA,4*l)}ob(t,s){this.qF(4,6),this.$F();const i=this.OA;this.OA+=4,t.$l(this.PA,3*i,this.kw+this.Nw),s.nl(this.EA,2*i),this.jA.zo(this.AA,4*i)}XF(t,s){this.qF(4,6),this.$F();const i=this.OA;this.OA+=4,t.$l(this.PA,3*i,this.kw+this.Nw),s.Wo(this.EA,2*i),this.jA.zo(this.AA,4*i)}YF(t,s,i){this.qF(4,6),this.$F();const e=this.OA;this.OA+=4,t.$l(this.PA,3*e,this.kw+this.Nw),s.Wo(this.EA,2*e),this.AA.set(i,4*e)}KF(t,s,i,e,n,r,h,o,a,l,u,c,f){this.qF(4,6),this.$F();const d=this.PA,p=this.OA;this.OA+=4;let m=3*p;const g=this.kw+this.Nw;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.nl(this.EA,2*p),this.jA.zo(this.AA,4*p)}ib(t,s,i,e,n,r,h,o,a,l,u,c,f){this.qF(4,6),this.$F();const d=this.PA,p=this.OA;this.OA+=4;let m=3*p;const g=this.kw+this.Nw;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.Wo(this.EA,2*p),this.jA.zo(this.AA,4*p)}ZF(t,s,i,e,n,r,h,o,a,l,u,c,f,d){this.qF(4,6),this.$F();const p=this.PA,m=this.OA;this.OA+=4;let g=3*m;const y=this.kw+this.Nw;p[g++]=t,p[g++]=s,p[g++]=y+i,p[g++]=e,p[g++]=n,p[g++]=y+r,p[g++]=h,p[g++]=o,p[g++]=y+a,p[g++]=l,p[g++]=u,p[g]=y+c,f.Wo(this.EA,2*m),this.AA.set(d,4*m)}rM(t,s,i,e){if(t.length%3!=0)throw new Error("vertex buffer length not multiple of 3");if(t.length>196605)throw new Error(`too many vertices (${t.length/3}, limit 65535)`);if(i.length%3!=0)throw new Error("index buffer length not multiple of 3");if(i.length>393210)throw new Error(`too many indices (${i.length}, limit 393210)`);this.qF(t.length,i.length);const n=this.OA;this.PA.set(t,3*n),this.EA.set(s,2*n);const r=this.RA;if(0===n)r.set(i,this.DA);else{let t=this.DA;for(let s=0,e=i.length;s<e;++s)r[t++]=i[s]+n}const h=this.AA;if(null!=e)h.set(e,4*n);else{const s=this.jA,i=s.ko(),e=s.No(),r=s.Bo(),o=s.Uo();let a=4*n;for(let s=0,n=t.length;s<n;++s)h[a++]=i,h[a++]=e,h[a++]=r,h[a++]=o}this.OA+=t.length/3,this.DA+=i.length}QF(t,s){this.Yv(0),Cc.m(Ac,this.dw),Cc.m(Fc,this.pw),this.IF();const[i,e]=this.tO(this.WA),n=this.gv(0,0,this.Zw(e),0,0,0,e);if(this.CF(n),"crop"===t&&this.WA&&s){const t=this.Vy/2,i=this.Wy/2,e=s.xy(),n=s.My(),r=this.WA.xy(),h=this.WA.My(),o=Math.min(r,e),a=Math.min(h,n),l=Math.max(n-h,0),u=Math.max(h-n,0);Dc.set(-t,i-u,-t+o,i-a-u),Oc.Xl(Dc),Dc.set(0,l,o,a+l),Dc.St(e,n),this.ob(Oc,Dc)}else{const t=i/2,s=e/2;this.JF(-t,s,t,-s)}this.xF(Ac),this.CF(Fc)}sO(t){this.qA.equals(t)||(this.qA.m(t),this._F().EC(t),this.VA=0)}iO(){}eO(t,s,i,e){this.LA>=7996&&this.Vb();let n=this.LA;const r=this.kw+this.Nw;2===this.VA&&this.zA===r?this.BA[this.UA-1].hC++:(this._F().FC(n,r,this.jA),this.VA=2,this.zA=r);const h=this.FA;h[n++]=t,h[n++]=s,h[n++]=i,h[n++]=e,this.LA=n}xv(t){this.kA!==t&&(this._F().DC(t),this.kA=t,this.VA=0,this.Ow=null)}nO(){return this.kA}rO(){this.xv(this.NA)}hO(t){this._F().gC(t),this.VA=0}oO(t,s,i=1){this._F().ZC(t,s,i),this.VA=0}aO(t,s,i,e,n,r,h){if(this.kA!==this.Tw)throw new Error("must set tilemap fill mode first");this._F().tP(t,s,i,e,n,r,h),this.VA=0}lO(t,s,i,e,n,r,h){if(this.kA!==this.Mw)throw new Error("must set tile randomization mode first");this._F().iP(t,s,i,e,n,r,h),this.VA=0}uO(t,s,i,e,n,r,h,o,a,l,u){const c=this.kA;if(u%=10800,!c.D_||c.oI(s,i,e,n,r,h,o,a,l,u))return;const f=this._F();f.kC(),c.uI(s,i,e,n,r,h,o,a,l,u);const d=f.aC;d[0]=r,d[1]=h,s.Wo(d,2),d[6]=a,d[7]=l,i.Wo(d,12);const p=f.lC;n.Wo(p,0);const m=p[1];p[1]=p[3],p[3]=m,e.Wo(f.uC,0),f.rC=u,f.hC=o,c.S_.L_()?f.oC=t?t.EG():null:f.oC=null,this.VA=0}cO(t){const s=this.kA;if(0===t.length||s.eI(t))return;const i=this._F();i.UC(),s.rI(t),Gc.Mh(i.cC,t),this.VA=0}fO(t,s,i,e){this._F().PC(t,s,i,e),this.VA=0}Pu(t){this._F().CC(t),this.VA=0}dO(){}Ub(){super.Ub(),this.ZG.flush()}pO(){this.wA&&this.WA&&this.WA.LG()&&(this._F().nP(this.bA),this.VA=0)}mO(t){t=!!t,this.bA!==t&&this.wA&&(this.bA=t,this._F().hP(t),this.VA=0)}gO(){return this.bA}bG(){return this.TA}xG(){return this.vA}yO(t){if(t=!!t,this.vA&&this.xA!==t){if(t&&this.gO())throw new Error("depth still enabled");this.xA=t,this._F().aP(t),this.VA=0}}SO(t,s,i,e,n=0){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),this.$A.Ka(t,s,i,e)||(this.$A.ja(t,s,i,e),s=(n||this.tO(this.wO())[1])-s-e,this._F().gP(!0,t,s,i,e),this.VA=0)}vO(){-1!==this.$A.tl()&&(this.$A.set(0,0,-1,-1),this._F().gP(!1,0,0,0,0),this.VA=0)}bO(){for(const t of this.mF)t.nA(this.Hw)}PE(){return!this.ZG||this.ZG.isContextLost()||this.nF}Qx(){super.Kw(),Gc.qS.TM.Qx(),Gc.qS.rG.Qx(),Gc.qS.tx.Qx();for(const t of this.mF)t.Pu();this.eF=[],this.OE=null,this.rF=null,this.oF=null,this.hF=null,this.aF=null,this.lF=null,this.uF=null,this.cF=null,this.dF=0,this.sF="(unavailable)",this.iF="(unavailable)",this.kA=null,this.NA=null,this.TA=null;for(const t of this.Fw.values())t.Qx()}async tT(){this.nF=!0,await this.Yw(),this.nF=!1;for(const t of this.Fw.values())t.tT(this);this.QR(this.Vy,this.Wy,!0)}xO(t,s){if(this.PE())throw new Error("context lost");this.Vb();const i=Gc.jn(Gc.qS.TM,this);return i.FM(t,s),i}async TO(t,s){if(this.PE())throw new Error("context lost");if(s=Object.assign({},s),Gc.Ri.ImageBitmapOptions){let i=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});const e=s.pM&&"clamp-to-edge"!==s.pM||s.mM&&"clamp-to-edge"!==s.mM,n=Gc.wr(i.width)&&Gc.wr(i.height);return this.kM()||n||!e?s.bM=!1:Gc.Ri.Oi?(i=await createImageBitmap(t,{premultiplyAlpha:"premultiply",resizeWidth:Gc.vr(i.width),resizeHeight:Gc.vr(i.height)}),s.bM=!1):i=await createImageBitmap(t,{premultiplyAlpha:"none"}),await Gc.df(()=>this.xO(i,s))}if(t instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const s=await Gc.lo(t);t=s}return await Gc.df(()=>this.xO(t,s))}vG(t,s,i){this.Vb();const e=Gc.jn(Gc.qS.TM,this);return e.VM(t,s,i),e}RE(t,s,i){this.Vb(),s.JM(t,i)}MG(t){t&&(t.KM(),t.ZM()>0||(this.Vb(),t===this.HA&&(this.ZG.bindTexture(this.ZG.TEXTURE_2D,null),this.HA=null),t===this.BC&&(this.ZG.activeTexture(this.ZG.TEXTURE1),this.ZG.bindTexture(this.ZG.TEXTURE_2D,null),this.ZG.activeTexture(this.ZG.TEXTURE0),this.BC=null),t.qM()))}MO(t){let s=this.Vy,i=this.Wy,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height&&(i=Math.floor(t.height),e=!1)),s<=0||i<=0)throw new Error("invalid size");this.Vb();const n=Gc.jn(Gc.qS.rG,this);return n.SG(s,i,Object.assign({eG:e},t)),this.WA=null,this.nC._G=null,this.nC.IG=null,n}GO(t,s=!0){t!==this.WA&&(t&&t.kG()&&t.TG(this.Vy,this.Wy),this._F()._C(t),this.WA=t,this.VA=0,s&&this.IF())}wO(){return this.WA}tO(t){return t?[t.xy(),t.My()]:[this.Vy,this.Wy]}_O(t,s="stretch"){this.FE<2||this.WA&&this.WA.NG()>0?(this.HF(),this.LF(),this.IO(t,s)):(this._F().jC(t,this.WA,s),this.VA=0)}IO(t,s="stretch"){const i=t.EG();if(!i)throw new Error("not a texture-backed render target");this.NF(i),this.QF(s,i)}CO(t){this.FE<2||(this._F().WC(t.CG()),this.VA=0)}PO(t){this.GO(null),this.Vb();const s=t.EG();s===this.HA&&(this.ZG.bindTexture(this.ZG.TEXTURE_2D,null),this.HA=null),s===this.BC&&(this.ZG.activeTexture(this.ZG.TEXTURE1),this.ZG.bindTexture(this.ZG.TEXTURE_2D,null),this.ZG.activeTexture(this.ZG.TEXTURE0),this.BC=null),t.qM()}async zG(t,s,i){this.Vb();const e=this.WA;let n,r,h;t?(n=t.xy(),r=t.My(),h=t.CG()):(n=this.xy(),r=this.My(),h=null);let o=0,a=0,l=n,u=r;if(i){o=Gc.Yn(Math.floor(i.Za()),0,n-1),a=Gc.Yn(Math.floor(i.Qa()),0,r-1);let t=i.width();t=0===t?n-o:Gc.Yn(Math.floor(t),0,n-o);let s=i.height();s=0===s?r-a:Gc.Yn(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}const c=this.ZG;c.bindFramebuffer(c.FRAMEBUFFER,h);const f=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.WA=null,this.nC._G=null,this.nC.IG=null,this.GO(e)};let d;if(!s&&this.LM()>=2){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const t=c.createBuffer(),s=l*u*4,i=c.PIXEL_PACK_BUFFER;c.bindBuffer(i,t),c.bufferData(i,s,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(i,null),f();const e=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.YG(()=>c.getSyncParameter(e,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(e),d=new ImageData(l,u),c.bindBuffer(i,t),c.getBufferSubData(i,0,new Uint8Array(d.data.buffer),0,s),c.bindBuffer(i,null),c.deleteBuffer(t)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}RO(){this.mO(!0),this._F().uP(),this.VA=0,this.XA=1}EO(t=!1){this.mO(t),this._F().fP(),this.VA=0,this.XA=2}AO(){return 2===this.XA}FO(t=!0){this.mO(t),this._F().pP(),this.VA=0,this.XA=0}OO(t){this.DO()&&(this._F().JC(t),this.VA=0)}LO(t){this.DO()&&(this._F().XC(t),this.VA=0)}YG(t){const s=new Promise(s=>kc.add({resolve:s,oA:t}));return-1===Nc&&(Nc=self.requestAnimationFrame(Mc)),s}Xb(){return this.Vy*this.Wy*(this.pA.alpha?4:3)}Yb(){let t=0;for(const s of Gc.qS.rG.jG())s.EG()||(t+=s.tG());return t}Kb(){let t=0;for(const s of Gc.qS.TM.sG())t+=s.tG();return t}kO(){return this.mA}LM(){return this.FE}n_(){return this.CA}NO(){return"webgl"+this.LM()}kM(){return this.LM()>=2}OM(){return this.ZA}BO(){return this.QA}UO(){return this.tF}VO(){return this.sF}WO(){return this.iF}zO(){if(this.LM()>=2)return"webgl2";{const t=[];return this.lF&&t.push("EXT_frag_depth"),this.uF&&t.push("OES_standard_derivatives"),this.cF&&t.push("EXT_shader_texture_lod"),t.length>0?"webgl1:"+t.join(","):"webgl1:none"}}jO(){return this.eF}DO(){return!!this.OE}DE(){return this.OE}XG(){return this.rF}SF(){return!!this.oF}jM(){return this.hF}HM(){return this.dF}sA(t){this.mF.add(t)}iA(t){this.mF.delete(t)}$E(){return this.gF}DM(){return this.ZG}yF(t){let s=t.FUNC_ADD,i=t.FUNC_ADD;this.FE>=2?(s=t.MAX,i=t.MIN):this.fF&&(s=this.fF.MAX_EXT,i=this.fF.MIN_EXT),this.Hv([["normal",[t.ONE,t.ONE_MINUS_SRC_ALPHA]],["additive",[t.ONE,t.ONE]],["xor",[t.ONE,t.ONE_MINUS_SRC_ALPHA]],["copy",[t.ONE,t.ZERO]],["destination-over",[t.ONE_MINUS_DST_ALPHA,t.ONE]],["source-in",[t.DST_ALPHA,t.ZERO]],["destination-in",[t.ZERO,t.SRC_ALPHA]],["source-out",[t.ONE_MINUS_DST_ALPHA,t.ZERO]],["destination-out",[t.ZERO,t.ONE_MINUS_SRC_ALPHA]],["source-atop",[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA]],["destination-atop",[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]],["lighten",[t.ONE,t.ONE,t.ONE,t.ONE,s,s]],["darken",[t.ONE,t.ONE,t.ONE,t.ONE,i,i]],["multiply",[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA]],["screen",[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA]]])}HO(){return this.Qb()}}}{const Bc=self._s,Uc=self.hs,Vc=(Uc.ys,Uc.fs),Wc=(self.assert,self.GPUBufferUsage),zc=self.GPUShaderStage,jc=(self.GPUMapMode,self.GPUTextureUsage),Hc={powerPreference:"default",depth:!1,failIfMajorPerformanceCaveat:!1,JO:!1,qO:"bilinear",$O:!1,lA:!1,XO:!0},Jc=Math.floor(65535/4),qc=4*Jc-16,$c=new Bc.Cl(0,0,1,0,1,1,0,1),Xc=Bc.jn(Bc.Ca),Yc=Bc.jn(Bc.Rect),Kc=(Bc.jn(Bc.Rect),Bc.jn(Bc.Cl));Bc.qS.YO=class extends Bc.qS.uw{constructor(t){super(t),this.KO=null,this.ZO=null,this.QO=null,this.tD=null,this.sD=null,this.iD=null,this.eD="",this.nD=null,this.rD=null,this.hD=0,this.oD=0,this.aD=Vc.create(),this.TA=null,this.lD=null,this.uD=null,this.cD=null,this.fD=null,this.dD=null,this.GA=0,this._A=0,this.pD=null,this.mD=null,this.gD=null,this.yD=null,this.s_=null,this.i_=null,this.SD=null,this.e_=null,this.IA=null,this.wD=null,this.r_=null,this.vD=Bc.qS.xD.bD(),this.TD=Bc.qS.xD.MD(),this.GD=null,this._D=null,this.ID=Bc.qS.xD.CD(),this.PD=Bc.qS.xD.RD(),this.ED=null,this.AD=null,this.FD=Bc.qS.xD.OD(),this.DD=Bc.qS.xD.LD(),this.kD=null,this.ND=null,this.BD=null,this.PA=new Float32Array(196605),this.EA=new Float32Array(131070),this.UD=new Uint32Array(65535),this.AA=null,this.RA=new Uint16Array(393210),this.FA=new Float32Array(4*Jc),this.OA=0,this.DA=0,this.VD=0,this.WD=Bc.jn(Bc.To,1,1,1,1),this.LA=0,this.zD=Bc.jn(Bc.qS.jD,this),this.HD=32768,this.JD=0,this.qD=0,this.$D=0,this.XD=0,this.YD=0,this.KD=0,this.ZD=0,this.QD=0,this.tL=0,this.sL=Bc.jn(Bc.Rect,0,0,0,0),this.iL=Bc.jn(Bc.To,1,1,1,1),this.eL=Bc.jn(Bc.To,1,1,1,1),this.nL=Bc.jn(Bc.Rect,0,0,0,0),this.rL=0,this.hL="",this.oL=null,this.aL=null,this.lL=null,this.uL=null,this.cL=null,this.fL=null,this.dL=null,this.pL=null,this.mL=null,this.gL=null,this.yL=null,this.SL=null,this.wL=null,this.vL=new Set,this.bL=new Set,this.ZA=8192,this.xL=null,this.TL=null,this.ML=null,this.GL=null,this._L=0,this.IL=0,this.CL=0,this.PL=0,this.RL=null,this.EL=null,this.AL=new Map,this.FL=null,this.OL=null,this.DL=[],this.LL=null,this.WA=null,this.kL=!1,this.NL="bilinear",this.BL=!1,this.vA=!1,this.UL=null,this.VL=!1,this.WL=-1,this.zL=-1,this.jL=new Set,this.HL=null,this.JL=null,this.yF()}dv(){return!0}qL(t,s){s?this.HD|=t:this.HD&=~t}$L(t){return 0!==(this.HD&t)}XL(t,s){s?this.JD|=t:this.JD&=~t}YL(t){return 0!==(this.JD&t)}async KG(t,s){if(s=Object.assign({},Hc,s),!navigator.gpu)throw new Error("renderer-unavailable (WebGPU not supported)");s.depth&&(this.HD|=524288),s.XO&&(this.HD|=65536),this.kL=!!s.JO,this.NL=s.qO,this.BL=!!s.$O,this.KO={},this.vA=!(!s.depth||!s.lA),"default"!==s.powerPreference&&(this.KO.powerPreference=s.powerPreference),this.sD=t,await this.KL(s.failIfMajorPerformanceCaveat)}async KL(t){for(this.tD=null,await this.ZL(t);!this.tD;)this.ZO=null,await this.ZL(t);await this.Yw()}async ZL(t){if(!this.ZO){if(this.ZO=await navigator.gpu.requestAdapter(this.KO),!this.ZO)throw new Error("renderer-unavailable (no WebGPU adapter available)");const s=this.ZO.info;if(t&&s.isFallbackAdapter)throw new Error("renderer-unavailable (WebGPU provided fallback adapter)");if("adreno-7xx"===s.architecture)throw new Error("WebGPU disabled on adreno-7xx devices - see https://issues.chromium.org/issues/329702056");if("intel"===s.vendor&&("gen-7"===s.architecture||"gen7"===s.architecture))throw new Error("WebGPU disabled on Intel Gen7 GPUs - see https://issues.chromium.org/issues/462468373")}const s=[];if(this.ZO.features.has("timestamp-query")&&s.push("timestamp-query"),this.ZO.features.has("shader-f16")&&s.push("shader-f16"),this.tD=await this.ZO.requestDevice({requiredFeatures:s,requiredLimits:{maxTextureDimension2D:this.ZO.limits.maxTextureDimension2D}}),!this.tD)return null;this.ZA=this.tD.limits.maxTextureDimension2D,this.qL(134217728,this.tD.features.has("timestamp-query")),this.qL(268435456,this.tD.features.has("shader-f16")),this.qL(536870912,this.$L(268435456)&&void 0!==globalThis.Float16Array),this.tD.lost.then(t=>this.QL(t)),this.qL(32768,!1)}async QL(t){console.log("[WebGPU] Device lost: ",t),super.Kw(),this.zD.Qx(),Bc.qS.tk.Qx(),Bc.qS.sk.Qx(),Bc.qS.tx.Qx(),this.eD="",this.nD=null,this.rD=null,this.TA=null,this.uD=null,this.lD=null,this.cD=null,this.fD=null,this.dD=null,this.s_=null,this.i_=null,this.SD=null,this.e_=null,this.IA=null,this.wD=null,this.r_=null,this.pD=null,this.mD=null,this.gD=null,this.yD=null,this.aL=null,this.oL=null,this.SL=null,this.lL=null,this.uL=null,this.cL=null,this.xL=null,this.GL=null,this.fL=null,this.dL=null,this.pL=null,this.mL=null,this.gL=null,this.yL=null,this.TL=null,this.ML=null,this.LL=null,this.WA=null,this.wL=null,this.UL=null,this.RL=null,this.EL=null,this.vL.clear(),this.bL.clear(),this.AL.clear();for(const t of this.Fw.values())t.Qx();this.tD=null,this.ZO=null,this.QO=null,this.HD|=32768,this.HL&&this.HL(),await this.KL();for(const t of this.Fw.values())t.tT(this);this.QR(this.Vy,this.Wy,!0),this.JL&&this.JL()}async Yw(){super.Yw();const t=this.tD;this.eD=navigator.gpu.getPreferredCanvasFormat(),this.nD=null,this.rD=null;let s=jc.RENDER_ATTACHMENT;this.kL&&(s|=jc.TEXTURE_BINDING),this.BL&&(s|=jc.COPY_SRC),this.eD.startsWith("rgba8")||this.eD.startsWith("bgra8")?this.hL=this.eD:this.hL="rgba8unorm",this.HD&=940113920,this.HD|=7680,this.JD=0,this.$L(524288)&&(this.HD|=70254592),this.OA=0,this.DA=0,this._L=0,this.CL=0,this.PL=0,this.IL=0,this.WD.Co(1,1,1,1),this.iL.Co(1,1,1,1),this.eL.Co(1,1,1,1),this.AA=this.n_()?new globalThis.Float16Array(262140):new Float32Array(262140),this.GD=new ArrayBuffer(this.TD),this._D=new Float32Array(this.GD),this.ED=new ArrayBuffer(this.PD),this.AD=new Float32Array(this.ED),this.kD=new ArrayBuffer(this.DD),this.ND=new Float32Array(this.kD),this.BD=new Uint32Array(this.kD),this.s_=t.createBuffer({label:"vertexbuffer",size:this.PA.byteLength,usage:Wc.VERTEX|Wc.COPY_DST}),this.i_=t.createBuffer({label:"texcoordbuffer",size:this.EA.byteLength,usage:Wc.VERTEX|Wc.COPY_DST}),this.SD=t.createBuffer({label:"texindexbuffer",size:this.UD.byteLength,usage:Wc.VERTEX|Wc.COPY_DST}),this.e_=t.createBuffer({label:"colorbuffer",size:this.AA.byteLength,usage:Wc.VERTEX|Wc.COPY_DST}),this.IA=t.createBuffer({label:"indexbuffer",size:this.RA.byteLength,usage:Wc.INDEX|Wc.COPY_DST}),this.wD=t.createBuffer({label:"pointsindexbuffer",size:6*Jc*2,usage:Wc.INDEX,mappedAtCreation:!0});const i=this.wD.getMappedRange();this.ik(i),this.wD.unmap(),this.r_=t.createBuffer({label:"pointbuffer",size:this.FA.byteLength,usage:Wc.VERTEX|Wc.STORAGE|Wc.COPY_DST}),this.oL=t.createBindGroupLayout({label:"bufferbindgrouplayout",entries:[{binding:0,visibility:zc.VERTEX,buffer:{type:"uniform",minBindingSize:this.TD}},{binding:1,visibility:zc.FRAGMENT,buffer:{type:"uniform",minBindingSize:this.PD}},{binding:3,visibility:zc.VERTEX,buffer:{type:"read-only-storage",minBindingSize:this.FA.byteLength}},{binding:4,visibility:zc.FRAGMENT,buffer:{type:"uniform",minBindingSize:this.DD}},{binding:5,visibility:zc.FRAGMENT,buffer:{type:"uniform"}}]});const e=[],n=Bc.qS.nk.ek();for(let t=0;t<n;++t)e.push({binding:2*t,visibility:zc.FRAGMENT,sampler:{type:"filtering"}},{binding:2*t+1,visibility:zc.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}});this.lL=t.createBindGroupLayout({label:"texturebindgrouplayout",entries:e}),this.uL=t.createBindGroupLayout({label:"backtexturebindgrouplayout",entries:[{binding:0,visibility:zc.FRAGMENT,sampler:{type:"nearest"===this.NL?"non-filtering":"filtering"}},{binding:1,visibility:zc.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}}]}),this.cL=t.createBindGroupLayout({label:"depthtexturebindgrouplayout",entries:[{binding:0,visibility:zc.FRAGMENT,sampler:{type:"non-filtering"}},{binding:1,visibility:zc.FRAGMENT,texture:{sampleType:"depth",viewDimension:"2d"}}]}),this.xL=t.createPipelineLayout({bindGroupLayouts:[this.oL,this.lL,this.uL,this.cL]});const r=Bc.qS.xD,h=this.rk(),o=this.n_();this.TL=t.createShaderModule({label:"<default vertex module>",code:r.hk(r.vI(o),h)}),this.TL.getCompilationInfo().then(t=>r.ak("<default>","vertex",t)),this.ML=t.createShaderModule({label:"<normalized vertex module>",code:r.hk(r.lk(o),h)}),this.ML.getCompilationInfo().then(t=>r.ak("<normalized>","vertex",t));const a=await Promise.all([r.KG(this,{name:"<default>",src:r.uk(!1,o),ck:r.uk(!0,o),$G:r.fk(o),dk:r.pk(o)}),r.KG(this,{name:"<single-texture-fill>",src:r.mk(!1,o),ck:r.mk(!0,o),$G:r.fk(o),dk:r.pk(o)}),r.KG(this,{name:"<generate-mipmap>",src:r.gk(),$G:r.yk()}),r.KG(this,{name:"<point>",src:r.Sk(!1),ck:r.Sk(!0),$G:r.wk()}),r.KG(this,{name:"<tilemap>",src:r.vk(!1),ck:r.vk(!0)}),r.KG(this,{name:"<fill>",src:r.bk()}),r.KG(this,{name:"<lineargradient>",src:r.xk()}),r.KG(this,{name:"<penumbra>",src:r.Tk()}),r.KG(this,{name:"<hardellipse>",src:r.Mk()}),r.KG(this,{name:"<hardellipseoutline>",src:r.Gk()}),r.KG(this,{name:"<smoothellipse>",src:r._k()}),r.KG(this,{name:"<smoothellipseoutline>",src:r.Ik()}),r.KG(this,{name:"<tilerandomization>",src:r.CI(!1),ck:r.CI(!0)}),r.KG(this,{name:"<smoothline>",src:r.Ck()})]);this.bw=a[0],this.EL=a[1],this.RL=a[2],this.xw=a[3],this.Tw=a[4],this.Gw=a[5],this._w=a[6],this.Iw=a[7],this.Cw=a[8],this.Pw=a[9],this.Rw=a[10],this.Ew=a[11],this.Mw=a[12],this.Aw=a[13];for(const t of a)this.yv(t);65536&this.HD?(this.HD|=393216,this.GL=this.bw):this.GL=this.EL,this.wL=this.RL.Pk(),this.pD=t.createBuffer({label:"vertexuniformbuffer",size:this.TD,usage:Wc.UNIFORM|Wc.COPY_DST}),this.mD=t.createBuffer({label:"fragmentuniformbuffer",size:this.PD,usage:Wc.UNIFORM|Wc.COPY_DST}),this.gD=t.createBuffer({label:"fragmentc3paramsuniformbuffer",size:this.DD,usage:Wc.UNIFORM|Wc.COPY_DST}),this.yD=t.createBuffer({label:"fragmentdefaultcustomparamsbuffer",size:16,usage:Wc.UNIFORM|Wc.COPY_DST}),this.XD=0,this.YD=this.TD,this.Rk(),this.Ek(),this.Ak(),this.KD=0,this.ZD=this.PD,this.Fk(),this.Ok(),this.aL=this.Dk(this.yD),this.SL=this.aL;const l=Bc.uo(32,32);l.getContext("2d"),this.fL=await this.TO(l),this.dL=null,this.pL=this.fL.Lk(),this.VD=0,this.mL=null,this.gL=this.fL.kk(),this.fL.Nk(),this.lD=this.tD.createTexture({label:"nulldepthbuffer",size:[8,8,1],format:this.Bk(),usage:jc.TEXTURE_BINDING}),this.cD=this.lD.createView({label:"nulldepthbufferview",aspect:"depth-only"}),this.dD=this.tD.createBindGroup({label:"nulldepthbufferbindgroup",layout:this.cL,entries:[{binding:0,resource:this.Uk({gM:"nearest"})},{binding:1,resource:this.cD}]}),this.yL=this.dD,this.LL=Bc.jn(Bc.qS.sk,this,!0),this.LL.EG().Vk(s,this.eD),this.WA=this.LL,this.Wk(),this.QO=this.ZO.info,this.iD||(this.iD=this.sD.getContext("webgpu")),this.iD.configure({device:t,format:this.eD,usage:s,alphaMode:"premultiplied"})}Dk(t){return this.tD.createBindGroup({layout:this.oL,entries:[{binding:0,resource:{buffer:this.pD}},{binding:1,resource:{buffer:this.mD}},{binding:3,resource:{buffer:this.r_}},{binding:4,resource:{buffer:this.gD}},{binding:5,resource:{buffer:t}}]})}ik(t){const s=new Uint16Array(t);let i=0,e=s.length,n=0;for(;i<e;)s[i++]=n,s[i++]=n+1,s[i++]=n+2,s[i++]=n,s[i++]=n+2,s[i++]=n+3,n+=4}zk(){return this.tD}jk(){return this.TL}Hk(){return this.ML}async wF(t){const s=await Bc.qS.xD.KG(this,t);return this.yv(s),s}NO(){return"webgpu"}Jk(){return this.eD}Bk(){return"depth24plus-stencil8"}qk(){return this.nD}$k(){return this.rD}Xk(){return this.kL}Yk(){return this.BL}Kk(){return this.xL}Zk(){return this.lL}Qk(){return this.uL}tN(){return this.NL}sN(){return this.hL}OM(){return this.ZA}PE(){return this.$L(32768)}DO(){return this.$L(134217728)}rk(){return this.$L(268435456)}n_(){return this.$L(536870912)}Xb(){const t=this.xy()*this.My();let s=t*Bc.qS.tk.iN(this.eD);return this.eN()&&(s+=t*Bc.qS.tk.iN(this.Bk())),s}Yb(){let t=0;for(const s of Bc.qS.sk.jG())s.nN()||(t+=s.EG().tG());return t}Kb(){let t=0;for(const s of Bc.qS.tk.sG())s.rN()||(t+=s.tG());return t}kM(){return!0}hN(){return this.zD}QR(t,s,i){(this.Vy!==t||this.Wy!==s||i)&&(this.Vb(),this.Vy=t,this.Wy=s,this.hD=t,this.oD=s,this.LL.wG(),this.xF(this.LL.AG()),this.WA&&this.WA.TG(this.Vy,this.Wy),this.$L(524288)&&this.$L(67108864)&&this.TF(t,s))}TF(t,s){if(this.TA){if(this.GA===t&&this._A===s)return;this.TA.destroy()}let i=jc.RENDER_ATTACHMENT;this.vA&&(i|=jc.TEXTURE_BINDING),this.TA=this.tD.createTexture({label:"depthbuffer",size:[t,s,1],format:this.Bk(),usage:i}),this.uD=this.TA.createView({label:"depthbufferview"}),this.vA&&(this.fD=this.tD.createBindGroup({label:"depthbufferbindgroup",layout:this.cL,entries:[{binding:0,resource:this.Uk({gM:"nearest"})},{binding:1,resource:this.TA.createView({label:"depthbufferview",aspect:"depth-only"})}]})),this.GA=t,this._A=s}MF(t,s){this.eN()&&(this.qL(67108864,!1),this.TF(t,s))}GF(){this.eN()&&(this.qL(67108864,!0),this.TF(this.Vy,this.Wy))}xF(t){Vc.F(this.dw,t)||(Vc.m(this.dw,t),this.Rk())}IF(){this.xF(this.WA.AG())}CF(t){Vc.F(this.pw,t)||(Vc.m(this.pw,t),this.Rk())}PF(){this.XL(1,!1)}RF(){return this.YL(1)}xO(t,s){if(t&&!Bc.qS.tk.oN(t)){const s=t.width||t.videoWidth,i=t.height||t.videoHeight,e=Bc.uo(s,i);e.getContext("2d").drawImage(t,0,0,s,i),t=e}this.Vb();const i=Bc.jn(Bc.qS.tk,this);return i.SG(t,s),i}async TO(t,s){if(Bc.qS.tk.oN(t))return this.xO(t,s);{if(!Bc.Ri.ImageBitmapOptions)throw new Error("no support for ImageBitmapOptions");const i=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});return this.xO(i,s)}}Uk(t){const s=t.pM||"clamp-to-edge",i=t.mM||"clamp-to-edge",e=t.gM;let n=t.yM||0;"trilinear"!==e&&(n=0);const r=`${s},${i},${e},${n}`;let h=this.AL.get(r);if(h)return h;const o={addressModeU:s,addressModeV:i,magFilter:"nearest",minFilter:"nearest",mipmapFilter:"nearest"};return"bilinear"!==e&&"trilinear"!==e||(o.magFilter="linear",o.minFilter="linear"),"trilinear"===e&&(o.mipmapFilter="linear",n>1&&(o.maxAnisotropy=n)),h=this.tD.createSampler(o),this.AL.set(r,h),h}Pk(){return this.wL}vG(t,s,i){this.Vb();const e=Bc.jn(Bc.qS.tk,this);return e.VM(t,s,i),e}RE(t,s,i){return s.JM(t,i)}MG(t){t&&(t.KM(),t.ZM()>0||(this.PE()||(this.Vb(),this.dL===t&&this.NF(null),this.mL===t&&this.aN(null)),t.qM()))}lN(t,s){this.PE()||(s?this.vL.add(t):this.vL.delete(t))}uN(t,s){s?this.bL.add(t):this.bL.delete(t)}cN(t){const s=[t],i=Bc.qS.nk.ek();for(const t of this.bL)t.Hn();for(const e of this.vL){if(s.length>=i)break;e!==t&&s.push(e)}s.length<2||Bc.jn(Bc.qS.nk,this,s)}dO(){this.fN()}dN(){this.fN()}fN(){this.nD=this.iD.getCurrentTexture(),this.rD=this.nD.createView({label:"swapchaintextureview"}),this.LL.EG().pN()}Ub(){null===this.OL&&this.LL.mN()&&this.gN(),super.Ub(),this.zD.yN(this.Hw),this.LL.EG().SN(),this.nD=null,this.rD=null}Wk(){this.FL=this.tD.createCommandEncoder(),this.HD&=-16385}wN(t){if(!this.DO())throw new Error("GPU profiling not supported");if(this.UL)throw new Error("already started frame timing");return this.VL=!1,this.jL.clear(),this.UL=Bc.jn(Bc.qS.vN,this,t),this.UL}bN(t,s){if(this.DO()){if(!this.UL)throw new Error("not started frame timing");if(t<0||s<0||t===s)throw new Error("invalid timestamp index");this.xN(),this.VL=!0,this.WL=t,this.zL=s}}TN(){this.VL&&(this.xN(),this.VL=!1)}qF(t,s){if(this.OA+t>65535||this.DA+s>393210)this.Vb();else if(1&this.HD)return void(this.$D+=s);null===this.OL&&this.gN(),this.HD|=1,this.qD=this.DA,this.$D=s}$F(){const t=this.OA;let s=this.DA;this.DA+=6;const i=this.RA;i[s++]=t,i[s++]=t+1,i[s++]=t+2,i[s++]=t,i[s++]=t+2,i[s]=t+3}MN(){const t=this.HD;if(!(1&t))return;const s=this.OL;if(16&t){const i=this.WA;s.setViewport(0,0,i.xy(),i.My(),0,1),2&t?s.setIndexBuffer(this.wD,"uint16"):s.setIndexBuffer(this.IA,"uint16"),s.setVertexBuffer(0,this.s_),s.setVertexBuffer(1,this.i_),s.setVertexBuffer(2,this.e_),s.setVertexBuffer(3,this.SD),25165824&t&&s.setStencilReference(1),4&t&&this.GN(s,this.sL,i)}if(32&t){let i=0;1073741824&t?i=4:8388608&t?i=2:16777216&t?i=3:3145728&~t||(i=1),s.setPipeline(this.GL._N(this._L,i,this.CL,this.PL,this.IL))}if(8192&t&&s.setBindGroup(0,this.SL),64&t&&s.setBindGroup(1,this.pL),128&t&&s.setBindGroup(2,this.gL),256&t&&s.setBindGroup(3,this.yL),8&t){const i=this.WA;4&t?this.GN(s,this.sL,i):s.setScissorRect(0,0,i.xy(),i.My())}s.drawIndexed(this.$D,1,this.qD,0,0),this.HD&=-8698}GN(t,s,i){const e=i.xy(),n=i.My();let r=Bc.Yn(s.Za(),0,e),h=Bc.Yn(s.Qa(),0,n),o=Bc.Yn(s.tl(),r,e),a=Bc.Yn(s.sl(),h,n);Number.isNaN(r)&&(r=0),Number.isNaN(h)&&(h=0),Number.isNaN(o)&&(o=e),Number.isNaN(a)&&(a=n),t.setScissorRect(r,h,o-r,a-h)}gN(){const t=this.HD;7680&t&&this.IN();let s=null;s=8388608&t?this.CN():16777216&t?this.PN():this.RN(),this.OL=this.FL.beginRenderPass(s),this.HD|=25072}RN(){const t=this.HD,s=this.WA,i={colorAttachments:[{view:s.EN(),loadOp:s.mN()?"clear":"load",clearValue:s.AN().toJSON(),storeOp:"store"}]};return this.FN(i),s.ON(!1),3145728&~t||(i.depthStencilAttachment={view:this.uD,depthLoadOp:4194304&t?"clear":"load",depthClearValue:1,depthStoreOp:"store",stencilLoadOp:"clear",stencilClearValue:0,stencilStoreOp:"discard"},this.HD&=-4194305),i}CN(){const t=this.HD,s={colorAttachments:[],depthStencilAttachment:{view:this.uD,depthLoadOp:4194304&t?"clear":"load",depthClearValue:1,depthStoreOp:"store",stencilLoadOp:33554432&t?"clear":"load",stencilClearValue:0,stencilStoreOp:"store"}};return this.FN(s),this.HD&=-37748737,s}PN(){const t=this.WA,s={colorAttachments:[{view:t.EN(),loadOp:t.mN()?"clear":"load",clearValue:t.AN().toJSON(),storeOp:"store"}],depthStencilAttachment:{view:this.uD,depthReadOnly:!0,stencilReadOnly:!0}};return this.FN(s),t.ON(!1),s}FN(t){if(!this.VL)return;const s={querySet:this.UL.DN(),endOfPassWriteIndex:this.zL};this.jL.has(this.WL)||(s.beginningOfPassWriteIndex=this.WL,this.jL.add(this.WL)),t.timestampWrites=s}LN(t){t.mN()&&(this.xN(),this.FL.beginRenderPass({colorAttachments:[{view:t.EN(),loadOp:"clear",clearValue:t.AN().toJSON(),storeOp:"store"}]}).end(),this.HD|=16384,t.ON(!1))}xN(){null!==this.OL&&(this.MN(),this.OL.end(),this.OL=null)}Vb(t=!1){this.xN(),this.UL&&t&&(this.UL.kN(this.FL),this.HD|=16384),16384&this.HD&&(this.DL.push(this.FL.finish()),this.Wk()),0!==this.DL.length&&(this.EF(),this.tD.queue.submit(this.DL),Bc.wh(this.DL),this.zD.NN(),this.UL&&t&&(this.UL.BN(),this.UL=null))}EF(){const t=this.tD.queue;if(this.OA>0){const s=this.OA;t.writeBuffer(this.s_,0,this.PA.buffer,0,3*s*4),t.writeBuffer(this.i_,0,this.EA.buffer,0,2*s*4),65536&this.HD&&t.writeBuffer(this.SD,0,this.UD.buffer,0,4*s);const i=this.n_()?2:4;t.writeBuffer(this.e_,0,this.AA.buffer,0,4*s*i),this.OA=0}this.DA>0&&(this.DA%2!=0&&(this.RA[this.DA++]=0),t.writeBuffer(this.IA,0,this.RA.buffer,0,2*this.DA),this.DA=0),this.LA>0&&(t.writeBuffer(this.r_,0,this.FA.buffer,0,4*this.LA),this.LA=0)}Rk(){this.HD|=512,this.JD|=1,this.UN(this.vD.transform)}Ek(){const t=this.vD.VN;this.nL.Wo(this._D,t.offset/4),this.UN(t)}Ak(){const t=this.vD.WN;this._D[t.offset/4]=this.rL,this.UN(t)}UN(t){const s=t.offset,i=t.end;1024&this.HD?(this.XD=Math.min(this.XD,s),this.YD=Math.max(this.YD,i)):(this.HD|=1024,this.XD=s,this.YD=i,this.xN())}Fk(){this.zN(this.iL,this.ID.jN)}Ok(){this.zN(this.eL,this.ID.HN)}zN(t,s){t.Wo(this.AD,s.offset/4),this.JN(s)}qN(t,s){t.Wo(this.AD,s.offset/4),this.JN(s)}JN(t){const s=t.offset,i=t.end;2048&this.HD?(this.KD=Math.min(this.KD,s),this.ZD=Math.max(this.ZD,i)):(this.HD|=2048,this.KD=s,this.ZD=i,this.xN())}$N(t,s){this.ND[s.offset/4]!==Math.fround(t)&&(this.ND[s.offset/4]=t,this.XN(s))}YN(t,s){this.BD[s.offset/4]!==t&&(this.BD[s.offset/4]=t,this.XN(s))}KN(t,s){t.$o(this.ND,s.offset/4)||(t.Wo(this.ND,s.offset/4),this.XN(s))}XN(t){const s=t.offset,i=t.end;4096&this.HD?(this.QD=Math.min(this.QD,s),this.tL=Math.max(this.tL,i)):(this.HD|=4096,this.QD=s,this.tL=i,this.xN())}IN(){const t=this.HD;512&t&&(Vc.multiply(this.aD,this.dw,this.pw),this._D.set(this.aD,this.vD.transform.offset/4)),1024&t&&this.zD.ZN(this.FL,this.pD,this.GD,this.XD,this.YD-this.XD),2048&t&&this.zD.ZN(this.FL,this.mD,this.ED,this.KD,this.ZD-this.KD),4096&t&&this.zD.ZN(this.FL,this.gD,this.kD,this.QD,this.tL-this.QD),this.HD=-7681&t|16384}MO(t){let s=this.Vy,i=this.Wy,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height&&(i=Math.floor(t.height),e=!1)),s<=0||i<=0)throw new Error("invalid size");this.Vb();const n=Bc.jn(Bc.qS.sk,this);return n.SG(s,i,Object.assign({eG:e},t)),n}GO(t,s=!0){null===t&&(t=this.LL),this.WA!==t&&(this.xN(),this.WA=t,this.qL(2097152,t.LG()),t.kG()&&!t.nN()&&t.TG(this.Vy,this.Wy),s&&this.IF())}CO(t){}wO(){return this.WA===this.LL?null:this.WA}tO(t){return null===t?[this.Vy,this.Wy]:[t.xy(),t.My()]}QN(){return this.LL}PO(t){this.Vb(),this.WA===t&&this.GO(null);const s=t.EG();this.dL===s&&this.NF(null),this.mL===s&&this.aN(null),t.qM()}async zG(t,s,i){this.LN(t),this.Vb(),null===t&&(t=this.LL);const e=this.tD,n=t.xy(),r=t.My();let h=0,o=0,a=n,l=r;if(i){h=Bc.Yn(Math.floor(i.Za()),0,n-1),o=Bc.Yn(Math.floor(i.Qa()),0,r-1);let t=i.width();t=0===t?n-h:Bc.Yn(Math.floor(t),0,n-h);let s=i.height();s=0===s?r-o:Bc.Yn(Math.floor(s),0,r-o),a=t,l=s}const u=e.createCommandEncoder(),c=t.EG();let f=c.XM(),d=null;"rgba8unorm"===c.tB()?c.sB()||Bc.Sn():(d=this.iB(c,"rgba8unorm",u),f=d);const p=4*a,m=256*Math.ceil(p/256),g=e.createBuffer({size:m*l,usage:Wc.MAP_READ|Wc.COPY_DST});u.copyTextureToBuffer({texture:f,origin:[h,o,0]},{buffer:g,bytesPerRow:m},[a,l,1]);const y=u.finish();e.queue.submit([y]),d&&d.destroy(),await g.mapAsync(self.GPUMapMode.READ);const S=g.getMappedRange().slice(0);let w;if(m===p)w=new ImageData(new Uint8ClampedArray(S),a,l);else{const t=new ArrayBuffer(p*l),s=new Uint8Array(t);for(let t=0;t<l;++t){const i=t*m,e=t*p;s.set(new Uint8Array(S,i,p),e)}w=new ImageData(new Uint8ClampedArray(t),a,l)}return g.destroy(),w}iB(t,s,i){const e=this.tD,n=t.xy(),r=t.My();if(t.tB()===s)throw new Error("no conversion necessary");t.DG()||Bc.Sn();const h=e.createTexture({size:[n,r,1],format:s,usage:jc.COPY_SRC|jc.RENDER_ATTACHMENT}),o=this.RL.Pk(s),a=o.getBindGroupLayout(0),l=this.Uk({gM:"nearest"}),u=t.XM().createView({baseMipLevel:0,mipLevelCount:1}),c=h.createView({baseMipLevel:0,mipLevelCount:1}),f=i.beginRenderPass({colorAttachments:[{view:c,loadOp:"clear",clearValue:[0,0,0,0],storeOp:"store"}]}),d=e.createBindGroup({layout:a,entries:[{binding:0,resource:l},{binding:1,resource:u}]});return f.setPipeline(o),f.setBindGroup(0,d),f.draw(4),f.end(),h}mO(t){524288&this.HD&&(t=!!t,!!(1048576&this.HD)!==t&&(2097152&this.HD&&this.xN(),this.qL(1048576,t)))}gO(){return this.$L(1048576)}eN(){return this.$L(524288)}yO(t){if(!this.vA)return;if(t&&this.gO())throw new Error("depth still enabled");const s=t?this.fD:this.dD;this.yL!==s&&(this.MN(),this.yL=s,this.HD|=256)}Pu(t){this.xN(),this.WA.ON(!0),this.WA.AN().set(t)}fO(t,s,i,e){this.xN(),this.WA.ON(!0),this.WA.AN().Co(t,s,i,e)}pO(){2621440&~this.HD||(this.xN(),this.HD|=4194304)}SO(t,s,i,e){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),4&this.HD&&this.sL.Ka(t,s,i,e)||(this.MN(),this.HD|=12,this.sL.ja(t,s,i,e))}vO(){4&this.HD&&(this.MN(),this.HD&=-5,this.HD|=8)}vv(){return 65536&this.HD?this.bw:this.EL}bv(){this.xv(this.vv())}xv(t){if(this.GL!==t){if(t===this.bw&&!(65536&this.HD))throw new Error("cannot set multitexture fill program when multitexturing not allowed");this.MN(),this.GL=t,this.Ow=null,this.HD|=32,this.eB(t===this.bw)}}nO(){return this.GL}eB(t){if(t=!!t,!!(131072&this.HD)===t)return;this.qL(131072,t);const s=null===this.dL?this.fL:this.dL;this.nB(s)}rB(t){t=!!t,!!(262144&this.HD)!==t&&(this.MN(),this.qL(262144,t),this.qL(32,!0))}hB(t){t=!!t,!!(1073741824&this.HD)!==t&&(this.MN(),this.qL(1073741824,t),this.HD|=32)}oB(){return this.$L(1073741824)}NF(t){t!==this.dL&&(this.dL=t,null===t&&(t=this.fL),this.nB(t))}nB(t){if(131072&this.HD){const s=t.aB();if(null!==s)return this.lB(s),this.VD=t.uB(),void this.rB(!0)}this.lB(t.Lk()),this.VD=0,this.rB(!1)}lB(t){t!==this.pL&&(this.MN(),this.pL=t,this.HD|=64)}cB(t){this.dL===t&&(this.MN(),this.pL=t.Lk(),this.HD|=64)}fB(t){if(this.pL!==t)return;this.MN();const s=null===this.dL?this.fL:this.dL;this.pL=s.Lk(),this.VD=0,this.HD|=64}aN(t){t!==this.mL&&(this.mL=t,null===t&&(t=this.fL),this.MN(),this.gL=t.kk(),this.HD|=128)}dB(t,s,i,e,n,r){const h=t.pB(),o=s.pB();if(0===(h&jc.COPY_SRC))throw new Error("source texture missing COPY_SRC usage");if(0===(o&jc.COPY_DST))throw new Error("destination texture missing COPY_DST usage");if(t===s)throw new Error("invalid destination");const a=Math.min(t.xy(),s.xy()),l=Math.min(t.My(),s.My());n=Math.min(n,a-i),r=Math.min(r,l-e),n<=0||r<=0||(this.xN(),this.FL.copyTextureToTexture({texture:t.XM(),origin:[i,e]},{texture:s.XM(),origin:[i,e]},[n,r]),this.HD|=16384)}mB(t){return t>=2?4:1}gB(t){t=this.mB(t),this.IL!==t&&(this.MN(),this.IL=t,this.HD|=32)}Kx(t){t!==this._L&&(this.MN(),this._L=t,this.Ow=null,this.HD|=32)}UF(t){this.Kx(this.qv(t))}WF(){this.Kx(0)}HF(){this.Kx(3)}OF(t,s,i,e){const n=this.WD;n.qo(t,s,i,e)||(n.Co(t,s,i,e),this.Ow=null)}DF(t){const s=this.WD;s.Uo()!==t&&(s.Do(t),this.Ow=null)}FF(){return this.WD.Uo()}Zx(t){const s=this.WD;s.equals(t)||(s.set(t),this.Ow=null)}LF(){this.OF(1,1,1,1)}kF(){return this.WD}Lb(t){t!==this.CL&&(this.MN(),this.CL=t,this.Ow=null,this.HD|=32)}zF(){return this.CL}kb(t){t!==this.PL&&(this.MN(),this.PL=t,this.Ow=null,this.HD|=32)}jF(){return this.PL}Rect(t){this.JF(t.Za(),t.Qa(),t.tl(),t.sl())}JF(t,s,i,e){this.Bb(t,s,i,s,i,e,t,e)}yB(t){const s=this.UD,i=this.VD;s[t++]=i,s[t++]=i,s[t++]=i,s[t]=i}Cl(t){this.XF(t,$c)}Bb(t,s,i,e,n,r,h,o){this.qF(4,6),this.$F();const a=this.PA,l=this.OA;this.OA+=4;let u=3*l;const c=this.kw+this.Nw;a[u++]=t,a[u++]=s,a[u++]=c,a[u++]=i,a[u++]=e,a[u++]=c,a[u++]=n,a[u++]=r,a[u++]=c,a[u++]=h,a[u++]=o,a[u]=c,$c.Wo(this.EA,2*l),262144&this.HD&&this.yB(l),this.WD.zo(this.AA,4*l)}ob(t,s){this.qF(4,6),this.$F();const i=this.OA;this.OA+=4,t.$l(this.PA,3*i,this.kw+this.Nw),s.nl(this.EA,2*i),262144&this.HD&&this.yB(i),this.WD.zo(this.AA,4*i)}XF(t,s){this.qF(4,6),this.$F();const i=this.OA;this.OA+=4,t.$l(this.PA,3*i,this.kw+this.Nw),s.Wo(this.EA,2*i),262144&this.HD&&this.yB(i),this.WD.zo(this.AA,4*i)}YF(t,s,i){this.qF(4,6),this.$F();const e=this.OA;this.OA+=4,t.$l(this.PA,3*e,this.kw+this.Nw),s.Wo(this.EA,2*e),262144&this.HD&&this.yB(e),this.AA.set(i,4*e)}KF(t,s,i,e,n,r,h,o,a,l,u,c,f){this.qF(4,6),this.$F();const d=this.PA,p=this.OA;this.OA+=4;let m=3*p;const g=this.kw+this.Nw;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.nl(this.EA,2*p),262144&this.HD&&this.yB(p),this.WD.zo(this.AA,4*p)}ib(t,s,i,e,n,r,h,o,a,l,u,c,f){this.qF(4,6),this.$F();const d=this.PA,p=this.OA;this.OA+=4;let m=3*p;const g=this.kw+this.Nw;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=n,d[m++]=g+r,d[m++]=h,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.Wo(this.EA,2*p),262144&this.HD&&this.yB(p),this.WD.zo(this.AA,4*p)}ZF(t,s,i,e,n,r,h,o,a,l,u,c,f,d){this.qF(4,6),this.$F();const p=this.PA,m=this.OA;this.OA+=4;let g=3*m;const y=this.kw+this.Nw;p[g++]=t,p[g++]=s,p[g++]=y+i,p[g++]=e,p[g++]=n,p[g++]=y+r,p[g++]=h,p[g++]=o,p[g++]=y+a,p[g++]=l,p[g++]=u,p[g]=y+c,f.Wo(this.EA,2*m),262144&this.HD&&this.yB(m),this.AA.set(d,4*m)}rM(t,s,i,e){if(t.length%3!=0)throw new Error("vertex buffer length not multiple of 3");if(t.length>196605)throw new Error(`too many vertices (${t.length/3}, limit 65535)`);if(i.length%3!=0)throw new Error("index buffer length not multiple of 3");if(i.length>393210)throw new Error(`too many indices (${i.length}, limit 393210)`);this.qF(t.length,i.length);const n=this.OA;this.PA.set(t,3*n),this.EA.set(s,2*n),262144&this.HD&&this.UD.fill(this.VD,n,n+t.length);const r=this.RA;if(0===n)r.set(i,this.DA);else{let t=this.DA;for(let s=0,e=i.length;s<e;++s)r[t++]=i[s]+n}const h=this.AA;if(null!=e)h.set(e,4*n);else{const s=this.WD,i=s.ko(),e=s.No(),r=s.Bo(),o=s.Uo();let a=4*n;for(let s=0,n=t.length;s<n;++s)h[a++]=i,h[a++]=e,h[a++]=r,h[a++]=o}this.OA+=t.length/3,this.DA+=i.length}sO(t){this.nL.equals(t)||(this.nL.m(t),this.Ek());const s=this.kw+this.Nw;this.rL!==s&&(this.rL=s,this.Ak()),this.eL.equals(this.WD)||(this.eL.m(this.WD),this.Ok()),this.xv(this.Tv()),this.$D=0,this.HD|=18}iO(){this.$D>0&&this.MN(),this.HD&=-3,this.HD|=16}eO(t,s,i,e){let n=this.LA;n>qc&&(this.Vb(),n=0),1&this.HD?this.$D+=6:(null===this.OL&&this.gN(),this.HD|=1,this.qD=n/4*6,this.$D=6);const r=this.FA;r[n++]=t,r[n++]=s,r[n++]=i,r[n++]=e,this.LA=n}hO(t){this.iL.equals(t)||(this.iL.m(t),this.Fk())}oO(t,s,i=1){const e=this.ID,n=this.AD;Xc.set(t,s),Xc.$o(n,e.SB.offset/4)||this.qN(Xc,e.SB),n[e.wB.offset/4]!==Math.fround(i)&&(n[e.wB.offset/4]=i,this.JN(e.wB))}aO(t,s,i,e,n,r,h){const o=this.ID,a=this.AD;t.$o(a,o.vB.offset/4)||(t.Wo(a,o.vB.offset/4),this.JN(o.vB)),Xc.set(e/s,n/i),Xc.$o(a,o.bB.offset/4)||this.qN(Xc,o.bB),Xc.set(r/s,h/i),Xc.$o(a,o.xB.offset/4)||this.qN(Xc,o.xB)}lO(t,s,i,e,n,r,h){const o=this.ID,a=this.AD;Xc.set(i,e),Xc.$o(a,o.bB.offset/4)||this.qN(Xc,o.bB),a[o.wB.offset/4]!==Math.fround(n)&&(a[o.wB.offset/4]=n,this.JN(o.wB)),Xc.set(r,h),Xc.$o(a,o.xB.offset/4)||this.qN(Xc,o.xB)}uO(t,s,i,e,n,r,h,o,a,l,u){const c=this.FD,f=this.GL;u%=10800,f.Nx()&&this.aN(t),f.TB()&&(this.KN(s,c.MB),this.KN(i,c.vB),this.KN(e,c.GB),this.KN(n,c._B)),this.$N(o,c.devicePixelRatio),this.$N(a,c.IB),this.$N(l,c.CB),this.$N(u,c.tg),this.$N(this.nv(),c.PB),this.$N(this.hv(),c.RB)}cO(t){t&&(t.EB()&&(this.xN(),t.AB(this.FL)),this.OB(t.DB()))}LB(t){this.YN(t?1:0,this.FD.kB)}OB(t){t!==this.SL&&(this.MN(),this.SL=t,this.HD|=8192)}NB(t){this.SL===t&&this.OB(this.aL)}_O(t){if(t.mN())return this.WA.ON(!0),void this.WA.AN().set(t.AN());t.NG()>=2&&this.WA.NG()<2?this.BB(t):(this.fO(0,0,0,0),this.HF(),this.LF(),this.IO(t))}IO(t){this.LN(t);const s=t.EG();this.NF(s),this.QF()}QF(){const t=this.oB();t||this.hB(!0),this.Yv(0);const s=Kc,i=Yc;s.set(0,-1,0,-1,2,1,0,1),i.set(0,-1,2,1),this.ob(s,i),t||this.hB(!1)}BB(t){this.LN(t),this.xN(),this.FL.beginRenderPass({colorAttachments:[{view:t.EG().EN(),resolveTarget:this.WA.EG().EN(),loadOp:"load",storeOp:"store"}]}).end(),this.HD|=16384}RO(){this.xN(),this.mO(!0),this.HD|=41943040}EO(t=!1){this.xN(),this.mO(t),this.HD&=-8388609,this.HD|=16777216}AO(){return this.$L(16777216)}FO(t=!0){this.xN(),this.mO(t),this.HD&=-16777217}yF(){this.Hv([["normal",["one","one-minus-src-alpha"]],["additive",["one","one"]],["xor",["one","one-minus-src-alpha"]],["copy",["one","zero"]],["destination-over",["one-minus-dst-alpha","one"]],["source-in",["dst-alpha","zero"]],["destination-in",["zero","src-alpha"]],["source-out",["one-minus-dst-alpha","zero"]],["destination-out",["zero","one-minus-src-alpha"]],["source-atop",["dst-alpha","one-minus-src-alpha"]],["destination-atop",["one-minus-dst-alpha","src-alpha"]],["lighten",["one","one","one","one","max","max"]],["darken",["one","one","one","one","min","min"]],["multiply",["dst","one-minus-src-alpha","one","one-minus-src-alpha"]],["screen",["one","one-minus-src","one","one-minus-src-alpha"]]])}UB(){return this.ZO?[...this.ZO.features]:[]}VB(){return this.QO}WB(){const t=this.QO;if(!t)return"unknown/unknown";const s=t.vendor||"unknown",i=t.architecture||"unknown",e=[];return t.device&&e.push(t.device),t.description&&e.push(t.description),t.type&&e.push(t.type),t.backend&&e.push(t.backend),s+"/"+i+(e.length>0?` (${e.join(", ")})`:"")}}}{const Zc=self._s;Zc.qS.jD=class{constructor(t){this.ix=t,this.zB=new Map,this.jB=[],this.HB=[],this.JB=[],this.qB=0,this.$B=0,this.XB=0,this.YB=0,this.KB=0,this.ZB=0}Px(){return this.ix}Qx(){this.zB.clear(),Zc.wh(this.jB),Zc.wh(this.HB),Zc.wh(this.JB)}QB(t){return Math.max(Zc.vr(t),16)}tU(t){this.KB++;const s=this.QB(t);{const t=this.zB.get(s);if(void 0!==t&&t.length>0){const i=t.pop();return i.sU(),0===t.length&&this.zB.delete(s),i}}return this.qB++,this.$B+=s,this.XB++,Zc.jn(Zc.qS.iU,this,s)}eU(t){this.ZB++;const s=t.Fu(),i=this.zB.get(s);void 0===i?this.zB.set(s,[t]):i.push(t)}nU(t){this.JB.push(t)}NN(){for(const t of this.jB)t.rU();Zc.wh(this.jB);for(const t of this.HB)this.qB--,this.$B-=t.Fu(),t.Hn();Zc.wh(this.HB);for(const t of this.JB)t.destroy();Zc.wh(this.JB)}yN(t){t%30==0&&this.hU(t)}hU(t){for(const[s,i]of this.zB.entries()){let e=0;for(let s=0,n=i.length;s<n;++s){const n=i[s];n.oU(t)?(this.qB--,this.$B-=n.Fu(),n.Hn(),this.YB++):(i[e]=n,++e)}0===e?this.zB.delete(s):Zc.Sh(i,e)}this.aU()}ZN(t,s,i,e,n){const r=this.tU(n),h=r.lU(),o=h.getMappedRange(0,n);new Uint8Array(o).set(new Uint8Array(i,e,n)),h.unmap(),t.copyBufferToBuffer(h,0,s,e,n),this.jB.push(r)}aU(){this.XB=0,this.YB=0,this.KB=0,this.ZB=0}}}{const Qc=self._s,tf=self.GPUBufferUsage,sf=self.GPUMapMode;self.assert;Qc.qS.iU=class{constructor(t,s){this.zD=t,this.uU=1,this.cU=s,this.tA=this.Px().zk().createBuffer({mappedAtCreation:!0,size:s,usage:tf.COPY_SRC|tf.MAP_WRITE}),this.fU=0}Px(){return this.zD.Px()}dU(){return this.uU}Fu(){return this.cU}lU(){return this.tA}sU(){this.uU=1}async rU(){this.uU=2;try{await this.tA.mapAsync(sf.WRITE)}catch(t){return void console.warn("[WebGPU] Error recycling buffer, assuming device was lost: ",t)}this.Px().PE()||(this.uU=0,this.fU=this.Px().Wb(),this.zD.eU(this))}pU(){this.uU=0}oU(t){return this.fU<=t-25}Hn(){this.tA.destroy(),this.tA=null,this.zD=null}}}{const ef=self._s,nf=(self.assert,self.GPUBufferUsage);ef.qS.mU=class{constructor(t){const s=t.Px();this.zx=t,this.gU=t.yU(),this.SU=new ArrayBuffer(this.gU),this.wU=new Float32Array(this.SU),this.vU=!1,this.tA=s.zk().createBuffer({size:this.gU,usage:nf.UNIFORM|nf.COPY_DST}),this.bU=s.Dk(this.tA)}Hn(){this.Px().NB(this.bU),this.Px().hN().nU(this.tA),this.tA=null,this.zx=null,this.SU=null,this.wU=null,this.bU=null}Px(){return this.zx.Px()}Q_(){return this.zx}DB(){return this.bU}xU(t,s){const i=this.zx.TU(t),e=i.type,n=i.offset/4,r=this.wU;if("color"===e){if(s.Xo(r,n))return;s.jo(r,n),this.vU=!0}else{if("float"!==e&&"percent"!==e)throw new Error(`unexpected shader param type '${e}'`);if(r[n]===Math.fround(s))return;r[n]=s,this.vU=!0}}EB(){return this.vU}AB(t){this.Px().hN().ZN(t,this.tA,this.SU,0,this.gU),this.vU=!1}}}{let rf=function(t){for(const s of Object.values(t))s.end=s.offset+s.size},hf=function(t){const s=[];for(let i=0;i<t;++i)s.push(null);return s},of=function(t){return`\nstruct FragmentInput {\n\t@location(1) fragUV : vec2<f32>,\n\t@location(2) fragColor : vec4<${t?"f16":"f32"}>,\n\t@builtin(position) fragPos : vec4<f32>\n};\n\nfn c3_getBackUV(fragPos : vec2<f32>, texBack : texture_2d<f32>) -> vec2<f32>\n{\n\treturn fragPos / vec2<f32>(textureDimensions(texBack));\n}\n\nfn c3_getDepthUV(fragPos : vec2<f32>, texDepth : texture_depth_2d) -> vec2<f32>\n{\n\treturn fragPos / vec2<f32>(textureDimensions(texDepth));\n}\n`},af=function(t,s,i,e,n){return t<<10|s<<7|i<<5|e<<4|n};0;const lf=self._s,uf="\nstruct Uniforms {\n\ttransform\t\t: mat4x4<f32>,\n\tpointTexStart\t: vec2<f32>,\n\tpointTexEnd\t\t: vec2<f32>,\n\tzElevation\t\t: f32\n};\n@binding(0) @group(0) var<uniform> uniforms : Uniforms;\n",cf={transform:{offset:0,size:64,end:0},VN:{offset:64,size:16,end:0},MU:{offset:64,size:8,end:0},GU:{offset:72,size:8,end:0},WN:{offset:80,size:4,end:0}};rf(cf);const ff=cf.WN.end,df="\nstruct Uniforms {\n\tcolor2\t\t\t\t: vec4<f32>,\n\tpointColor \t\t\t: vec4<f32>,\n\ttileSize\t\t\t: vec2<f32>,\n\ttileSpacing\t\t\t: vec2<f32>,\n\tsrcRectStart\t\t: vec2<f32>,\n\tsrcRectEnd\t\t\t: vec2<f32>,\n\tpixelSize\t\t\t: vec2<f32>,\n\toutlineThickness\t: f32\n};\n@binding(1) @group(0) var<uniform> uniforms : Uniforms;\n",pf={jN:{offset:0,size:16,end:0},HN:{offset:16,size:16,end:0},bB:{offset:32,size:8,end:0},xB:{offset:40,size:8,end:0},vB:{offset:48,size:16,end:0},_U:{offset:48,size:8,end:0},IU:{offset:56,size:8,end:0},SB:{offset:64,size:8,end:0},wB:{offset:72,size:4,end:0}};rf(pf);const mf=pf.wB.end,gf="\nstruct C3Params {\n\tsrcStart\t\t\t: vec2<f32>,\n\tsrcEnd\t\t\t\t: vec2<f32>,\n\tsrcOriginStart\t\t: vec2<f32>,\n\tsrcOriginEnd\t\t: vec2<f32>,\n\tlayoutStart\t\t\t: vec2<f32>,\n\tlayoutEnd\t\t\t: vec2<f32>,\n\tdestStart\t\t\t: vec2<f32>,\n\tdestEnd\t\t\t\t: vec2<f32>,\n\tdevicePixelRatio\t: f32,\n\tlayerScale\t\t\t: f32,\n\tlayerAngle\t\t\t: f32,\n\tseconds\t\t\t\t: f32,\n\tzNear\t\t\t\t: f32,\n\tzFar\t\t\t\t: f32,\n\tisSrcTexRotated\t\t: u32\n};\n@binding(4) @group(0) var<uniform> c3Params : C3Params;\n\nfn c3_srcToNorm(p : vec2<f32>) -> vec2<f32>\n{\n\treturn (p - c3Params.srcStart) / (c3Params.srcEnd - c3Params.srcStart);\n}\n\nfn c3_normToSrc(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p, c3Params.srcEnd - c3Params.srcStart, c3Params.srcStart);\n}\n\nfn c3_clampToSrc(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.srcStart, c3Params.srcEnd), max(c3Params.srcStart, c3Params.srcEnd));\n}\n\nfn c3_srcOriginToNorm(p : vec2<f32>) -> vec2<f32>\n{\n\treturn (p - c3Params.srcOriginStart) / (c3Params.srcOriginEnd - c3Params.srcOriginStart);\n}\n\nfn c3_normToSrcOrigin(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p, c3Params.srcOriginEnd - c3Params.srcOriginStart, c3Params.srcOriginStart);\n}\n\nfn c3_clampToSrcOrigin(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.srcOriginStart, c3Params.srcOriginEnd), max(c3Params.srcOriginStart, c3Params.srcOriginEnd));\n}\n\nfn c3_getLayoutPos(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p - c3Params.srcOriginStart, (c3Params.layoutEnd - c3Params.layoutStart) / (c3Params.srcOriginEnd - c3Params.srcOriginStart), c3Params.layoutStart);\n}\n\nfn c3_srcToDest(p : vec2<f32>) -> vec2<f32>\n{\n\treturn fma(p - c3Params.srcStart, (c3Params.destEnd - c3Params.destStart) / (c3Params.srcEnd - c3Params.srcStart), c3Params.destStart);\n}\n\nfn c3_clampToDest(p : vec2<f32>) -> vec2<f32>\n{\n\treturn clamp(p, min(c3Params.destStart, c3Params.destEnd), max(c3Params.destStart, c3Params.destEnd));\n}\n\nfn c3_linearizeDepth(depthSample : f32) -> f32\n{\n\treturn c3Params.zNear * c3Params.zFar / (c3Params.zFar + depthSample * (c3Params.zNear - c3Params.zFar));\n}\n",yf=["srcStart","srcEnd","srcOriginStart","srcOriginEnd","c3_srcToNorm","c3_normToSrc","c3_clampToSrc","c3_srcOriginToNorm","c3_normToSrcOrigin","c3_clampToSrcOrigin","c3_getLayoutPos","c3_srcToDest"],Sf=["layoutStart","layoutEnd","destStart","destEnd","c3_clampToDest"],wf={vB:{offset:0,size:16,end:0},CU:{offset:0,size:8,end:0},PU:{offset:8,size:8,end:0},GB:{offset:16,size:16,end:0},RU:{offset:16,size:8,end:0},EU:{offset:24,size:8,end:0},_B:{offset:32,size:16,end:0},AU:{offset:32,size:8,end:0},FU:{offset:40,size:8,end:0},MB:{offset:48,size:16,end:0},OU:{offset:48,size:8,end:0},DU:{offset:56,size:8,end:0},devicePixelRatio:{offset:64,size:4,end:0},IB:{offset:68,size:4,end:0},CB:{offset:72,size:4,end:0},tg:{offset:76,size:4,end:0},PB:{offset:80,size:4,end:0},RB:{offset:84,size:4,end:0},kB:{offset:88,size:4,end:0}};rf(wf);const vf=wf.kB.end,bf="\nstruct FragmentOutput {\n\t@location(0) color : vec4<f32>\n};\n",xf=new Map([["float",4],["percent",4],["color",12]]),Tf=new Map([["float",4],["percent",4],["color",16]]),Mf="\nfn c3_premultiply(c : vec4<f32>) -> vec4<f32>\n{\n\treturn vec4<f32>(c.rgb * c.a, c.a);\n}\n\nfn c3_unpremultiply(c : vec4<f32>) -> vec4<f32>\n{\n\tif (c.a == 0.0)\n\t{\n\t\treturn vec4<f32>(0.0);\n\t}\n\t\n\treturn vec4<f32>(c.rgb / c.a, c.a);\n}\n\nfn c3_grayscale(rgb : vec3<f32>) -> f32\n{\n\treturn dot(rgb, vec3<f32>(0.299, 0.587, 0.114));\n}\n\nfn c3_getPixelSize(t : texture_2d<f32>) -> vec2<f32>\n{\n\treturn vec2<f32>(1.0) / vec2<f32>(textureDimensions(t));\n}\n\nfn c3_clamp2(v : vec2<f32>, l : f32, u : f32) -> vec2<f32>\n{\n\treturn clamp(v, vec2<f32>(l), vec2<f32>(u));\n}\n\nfn c3_mod(x : f32, y : f32) -> f32\n{\n\treturn x - y * floor(x / y);\n}\n\nfn c3_mod2(x : vec2<f32>, y : vec2<f32>) -> vec2<f32>\n{\n\treturn x - y * floor(x / y);\n}\n\nfn c3_RGBtoHSL(color : vec3<f32>) -> vec3<f32>\n{\n\tvar hsl : vec3<f32> = vec3<f32>(0.0);\n\t\n\tvar fmin : f32 = min(min(color.r, color.g), color.b);\n\tvar fmax : f32 = max(max(color.r, color.g), color.b);\n\tvar delta : f32 = fmax - fmin;\n\n\thsl.z = (fmax + fmin) / 2.0;\n\n\tif (delta == 0.0)\n\t{\n\t\thsl.x = 0.0;\n\t\thsl.y = 0.0;\n\t}\n\telse \n\t{\n\t\tif (hsl.z < 0.5)\n\t\t{\n\t\t\thsl.y = delta / (fmax + fmin);\n\t\t}\n\t\telse\n\t\t{\n\t\t\thsl.y = delta / (2.0 - fmax - fmin);\n\t\t}\n\t\t\n\t\tvar dR : f32 = (((fmax - color.r) / 6.0) + (delta / 2.0)) / delta;\n\t\tvar dG : f32 = (((fmax - color.g) / 6.0) + (delta / 2.0)) / delta;\n\t\tvar dB : f32 = (((fmax - color.b) / 6.0) + (delta / 2.0)) / delta;\n\n\t\tif (color.r == fmax)\n\t\t{\n\t\t\thsl.x = dB - dG;\n\t\t}\n\t\telse if (color.g == fmax)\n\t\t{\n\t\t\thsl.x = (1.0 / 3.0) + dR - dB;\n\t\t}\n\t\telse if (color.b == fmax)\n\t\t{\n\t\t\thsl.x = (2.0 / 3.0) + dG - dR;\n\t\t}\n\n\t\tif (hsl.x < 0.0)\n\t\t{\n\t\t\thsl.x = hsl.x + 1.0;\n\t\t}\n\t\telse if (hsl.x > 1.0)\n\t\t{\n\t\t\thsl.x = hsl.x - 1.0;\n\t\t}\n\t}\n\n\treturn hsl;\n}\n\nfn c3_hueToRGB(f1 : f32, f2 : f32, hue_ : f32) -> f32\n{\n\tvar hue : f32 = hue_;\n\tif (hue < 0.0)\n\t{\n\t\thue = hue + 1.0;\n\t}\n\telse if (hue > 1.0)\n\t{\n\t\thue = hue - 1.0;\n\t}\n\t\t\n\tvar ret : f32;\n\t\n\tif ((6.0 * hue) < 1.0)\n\t{\n\t\tret = f1 + (f2 - f1) * 6.0 * hue;\n\t}\n\telse if ((2.0 * hue) < 1.0)\n\t{\n\t\tret = f2;\n\t}\n\telse if ((3.0 * hue) < 2.0)\n\t{\n\t\tret = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\n\t}\n\telse\n\t{\n\t\tret = f1;\n\t}\n\t\n\treturn ret;\n}\n\nfn c3_HSLtoRGB(hsl : vec3<f32>) -> vec3<f32>\n{\n\tvar rgb : vec3<f32> = vec3<f32>(hsl.z);\n\t\n\tif (hsl.y != 0.0)\n\t{\n\t\tvar f2 : f32;\n\t\t\n\t\tif (hsl.z < 0.5)\n\t\t{\n\t\t\tf2 = hsl.z * (1.0 + hsl.y);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tf2 = (hsl.z + hsl.y) - (hsl.y * hsl.z);\n\t\t}\n\t\t\t\n\t\tvar f1 : f32 = 2.0 * hsl.z - f2;\n\t\t\n\t\trgb.r = c3_hueToRGB(f1, f2, hsl.x + (1.0 / 3.0));\n\t\trgb.g = c3_hueToRGB(f1, f2, hsl.x);\n\t\trgb.b = c3_hueToRGB(f1, f2, hsl.x - (1.0 / 3.0));\n\t}\n\t\n\treturn rgb;\n}\n";lf.qS.xD=class extends lf.qS.sx{constructor(t,s){if(super(t,s),this.LU=s.kU,this.NU=s.BU,this.UU=s.VU,this.ML=s.WU,this.zU=new Map,this.jU=new Map,this.HU=!1,this.JU=!1,this.Us=[],this.qU=0,s.parameters){let t=0;for(const i of s.parameters){const s=i[2];if(!xf.has(s))throw new Error(`unrecognized effect param type '${s}'`);const e=xf.get(s),n=Tf.get(s),r=t%n;0!==r&&(t+=n-r),this.Us.push({type:s,offset:t,size:e,end:t+e}),t+=e}this.qU=16*Math.ceil(t/16)}}static async KG(t,s){const i=t.zk(),e=s.name,n=t.rk(),r=t.n_(),h=s.src,o=lf.qS.xD.$U(h,n,r),a=i.createShaderModule({label:e,code:o});let l,u=null;if(s.ck){const t=lf.qS.xD.$U(s.ck,n,r);u=i.createShaderModule({label:e,code:t})}a.getCompilationInfo().then(t=>lf.qS.xD.ak(e,"fragment",t));const c=lf.qS.xD.hk(s.$G,n);let f;c?(l=i.createShaderModule({label:e,code:c}),l.getCompilationInfo().then(t=>lf.qS.xD.ak(e,"vertex",t))):l=t.jk();const d=lf.qS.xD.hk(s.dk,n);d?(f=i.createShaderModule({label:e,code:d}),f.getCompilationInfo().then(t=>lf.qS.xD.ak(e,"vertex (norm)",t))):f=t.Hk();const p=lf.jn(lf.qS.xD,t,Object.assign({kU:a,BU:u,VU:l,WU:f},s));if(p.Ix=h.includes("%%C3PARAMS_STRUCT%%")&&yf.some(t=>h.includes(t)),p.HU=p.Ix||h.includes("%%C3PARAMS_STRUCT%%")&&Sf.some(t=>h.includes(t)),p.JU=h.includes("%%C3PARAMS_STRUCT%%")&&h.includes("isSrcTexRotated"),"<generate-mipmap>"!==e){const s=p.XU(0,0,0,0,0);let i=null;t.eN()&&(i=p.XU(0,1,0,0,0));const[e,n]=await Promise.all([s,i]);p.zU.set(af(0,0,0,0,0),e),n&&p.zU.set(af(0,1,0,0,0),n)}return p}static YU(t,s){if(!t)return t;let i="";return i=s?"enable f16;\nalias f16or32 = f16;\n":"alias f16or32 = f32;\n",i+t}static $U(t,s,i){return t=lf.qS.xD.YU(t,s),lf.Wm(t,{"%%SAMPLERFRONT_BINDING%%":"@binding(0) @group(1)","%%TEXTUREFRONT_BINDING%%":"@binding(1) @group(1)","%%SAMPLERBACK_BINDING%%":"@binding(0) @group(2)","%%TEXTUREBACK_BINDING%%":"@binding(1) @group(2)","%%SAMPLERDEPTH_BINDING%%":"@binding(0) @group(3)","%%TEXTUREDEPTH_BINDING%%":"@binding(1) @group(3)","%%SHADERPARAMS_BINDING%%":"@binding(5) @group(0)","%%FRAGMENTINPUT_STRUCT%%":of(i),"%%FRAGMENTOUTPUT_STRUCT%%":bf,"%%C3PARAMS_STRUCT%%":gf,"%%C3_UTILITY_FUNCTIONS%%":Mf})}static hk(t,s){return lf.qS.xD.YU(t,s)}static ak(t,s,i){for(const e of i.messages){const i=`[WebGPU] Message (${e.type}) compiling ${s} shader '${t}': ${e.message} (line ${e.lineNum}, pos ${e.linePos})`;"error"===e.type?console.error(i):"warning"===e.type?console.warn(i):console.log(i)}}Hn(){this.LU=null,this.NU=null,this.UU=null,this.ML=null,this.zU.clear(),this.jU.clear(),super.Hn()}zk(){return this.ix.zk()}Kk(){return this.ix.Kk()}Px(){return this.ix}TB(){return this.HU}Wx(){return this.JU}tI(){return this.Us.length}sI(t){return t<0||t>=this.Us.length?null:this.Us[t].type}yU(){return this.qU}TU(t){return this.Us[t]}KU(t,s,i,e,n){const r=this.ix,h=r.n_(),o=r.Jv(t);let a=o[0],l=o[1],u=a,c=l,f="add",d="add";o.length>=4&&(u=o[2],c=o[3]),6===o.length&&(f=o[4],d=o[5]);let p="none";switch(i){case 1:p="back";break;case 2:p="front"}const m={label:`${this.Pc()} blendMode ${t} variant ${s} multisampleCount ${n}`,layout:this.Kk(),primitive:{cullMode:p,frontFace:0===e?"cw":"ccw"},vertex:{module:4===s?this.ML:this.UU,entryPoint:"main",buffers:[{arrayStride:12,attributes:[{shaderLocation:0,offset:0,format:"float32x3"}]},{arrayStride:8,attributes:[{shaderLocation:1,offset:0,format:"float32x2"}]},{arrayStride:4*(h?2:4),attributes:[{shaderLocation:2,offset:0,format:h?"float16x4":"float32x4"}]},{arrayStride:4,attributes:[{shaderLocation:3,offset:0,format:"uint32"}]}]},fragment:{module:this.LU,entryPoint:"main",targets:[{format:r.Jk(),blend:{color:{srcFactor:a,dstFactor:l,operation:f},alpha:{srcFactor:u,dstFactor:c,operation:d}}}]}};if(n>=2&&(m.multisample={count:n}),1===s)m.fragment.module=this.NU||this.LU,m.depthStencil={format:r.Bk(),depthWriteEnabled:!0,depthCompare:"less-equal"};else if(2===s){m.fragment.module=this.NU||this.LU,m.fragment.targets=[];const t={compare:"always",failOp:"keep",depthFailOp:"keep",passOp:"replace"};m.depthStencil={format:r.Bk(),depthWriteEnabled:!0,depthCompare:"less-equal",stencilFront:t,stencilBack:t,stencilReadMask:1,stencilWriteMask:1}}else if(3===s){m.fragment.module=this.NU||this.LU;const t={compare:"equal",failOp:"keep",depthFailOp:"keep",passOp:"keep"};m.depthStencil={format:r.Bk(),depthWriteEnabled:!1,depthCompare:"always",stencilFront:t,stencilBack:t,stencilReadMask:1,stencilWriteMask:0}}return m}ZU(t,s,i,e,n){return this.zk().createRenderPipeline(this.KU(t,s,i,e,n))}XU(t,s,i,e,n){return this.zk().createRenderPipelineAsync(this.KU(t,s,i,e,n))}_N(t,s,i,e,n){const r=af(t,s,i,e,n);let h=this.zU.get(r);return h||(h=this.ZU(t,s,i,e,n),this.zU.set(r,h),h)}static bD(){return cf}static MD(){return 16*Math.ceil(ff/16)}static CD(){return pf}static RD(){return 16*Math.ceil(mf/16)}static OD(){return wf}static LD(){return 16*Math.ceil(vf/16)}static vI(t){const s=t?"f16":"f32";return`\n\t\t${uf}\n\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(input.position, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`}static lk(t){const s=t?"f16":"f32";return`\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p = input.position;\n\t\t\tp.y = 1.0 - p.y;\n\t\t\toutput.Position = vec4<f32>(p.xy * 2.0 - 1.0, p.z, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\toutput.fragColor = input.color;\n\t\t\treturn output;\n\t\t}`}static fk(t){const s=t?"f16":"f32";return`\n\t\t${uf}\n\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(input.position, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`}static pk(t){const s=t?"f16":"f32";return`\n\t\tstruct VertexInput {\n\t\t\t@location(0) position : vec3<f32>,\n\t\t\t@location(1) uv : vec2<f32>,\n\t\t\t@location(2) color : vec4<${s}>,\n\t\t\t@location(3) texIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p = input.position;\n\t\t\tp.y = 1.0 - p.y;\n\t\t\toutput.Position = vec4<f32>(p.xy * 2.0 - 1.0, p.z, 1.0);\n\t\t\toutput.fragUV = input.uv;\n\t\t\toutput.fragColor = input.color;\n\t\t\toutput.texIndex = input.texIndex;\n\t\t\treturn output;\n\t\t}`}static uk(t,s){return`\n\t\t@binding(0) @group(1) var sampler0 : sampler;\n\t\t@binding(1) @group(1) var texture0 : texture_2d<f32>;\n\t\t@binding(2) @group(1) var sampler1 : sampler;\n\t\t@binding(3) @group(1) var texture1 : texture_2d<f32>;\n\t\t@binding(4) @group(1) var sampler2 : sampler;\n\t\t@binding(5) @group(1) var texture2 : texture_2d<f32>;\n\t\t@binding(6) @group(1) var sampler3 : sampler;\n\t\t@binding(7) @group(1) var texture3 : texture_2d<f32>;\n\t\t@binding(8) @group(1) var sampler4 : sampler;\n\t\t@binding(9) @group(1) var texture4 : texture_2d<f32>;\n\t\t@binding(10) @group(1) var sampler5 : sampler;\n\t\t@binding(11) @group(1) var texture5 : texture_2d<f32>;\n\t\t@binding(12) @group(1) var sampler6 : sampler;\n\t\t@binding(13) @group(1) var texture6 : texture_2d<f32>;\n\t\t@binding(14) @group(1) var sampler7 : sampler;\n\t\t@binding(15) @group(1) var texture7 : texture_2d<f32>;\n\t\t@binding(16) @group(1) var sampler8 : sampler;\n\t\t@binding(17) @group(1) var texture8 : texture_2d<f32>;\n\t\t@binding(18) @group(1) var sampler9 : sampler;\n\t\t@binding(19) @group(1) var texture9 : texture_2d<f32>;\n\t\t@binding(20) @group(1) var sampler10 : sampler;\n\t\t@binding(21) @group(1) var texture10 : texture_2d<f32>;\n\t\t@binding(22) @group(1) var sampler11 : sampler;\n\t\t@binding(23) @group(1) var texture11 : texture_2d<f32>;\n\t\t@binding(24) @group(1) var sampler12 : sampler;\n\t\t@binding(25) @group(1) var texture12 : texture_2d<f32>;\n\t\t@binding(26) @group(1) var sampler13 : sampler;\n\t\t@binding(27) @group(1) var texture13 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s?"f16":"f32"}>,\n\t\t\t@location(3) @interpolate(flat, either) texIndex : u32,\n\t\t\t${t?"@builtin(position) fragPos: vec4<f32>":""}\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar texXy : vec2<f32> = input.fragUV.xy;\n\t\t\tvar texIndex : u32 = input.texIndex;\n\t\t\tvar c : vec4<f32>;\n\n\t\t\tlet dx = dpdx(texXy);\n\t\t\tlet dy = dpdy(texXy);\n\t\t\t\n\t\t\tif (texIndex <= 6)\n\t\t\t{\n\t\t\t\tif (texIndex <= 2)\n\t\t\t\t{\n\t\t\t\t\tif (texIndex == 0)\t\t\t{\tc = textureSampleGrad(texture0, sampler0, texXy, dx, dy);\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 1)\t\t{\tc = textureSampleGrad(texture1, sampler1, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture2, sampler2, texXy, dx, dy);\t}\n\t\t\t\t\t}\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (texIndex <= 4)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 3)\t\t{\tc = textureSampleGrad(texture3, sampler3, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture4, sampler4, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex <= 5)\t\t{\tc = textureSampleGrad(texture5, sampler5, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture6, sampler6, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (texIndex <= 9)\n\t\t\t\t{\n\t\t\t\t\tif (texIndex == 7)\t\t\t{\tc = textureSampleGrad(texture7, sampler7, texXy, dx, dy);\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 8)\t\t{\tc = textureSampleGrad(texture8, sampler8, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture9, sampler9, texXy, dx, dy);\t}\n\t\t\t\t\t}\t\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (texIndex <= 11)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 10)\t\t{\tc = textureSampleGrad(texture10, sampler10, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture11, sampler11, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif (texIndex == 12)\t\t{\tc = textureSampleGrad(texture12, sampler12, texXy, dx, dy);\t}\n\t\t\t\t\t\telse\t\t\t\t\t{\tc = textureSampleGrad(texture13, sampler13, texXy, dx, dy);\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toutput.color = c * vec4<f32>(input.fragColor);\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static mk(t,s){return`\n\t\t@binding(0) @group(1) var sampler0 : sampler;\n\t\t@binding(1) @group(1) var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(1) fragUV : vec2<f32>,\n\t\t\t@location(2) fragColor : vec4<${s?"f16":"f32"}>,\n\t\t\t${t?"@builtin(position) fragPos: vec4<f32>":""}\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, input.fragUV) * vec4<f32>(input.fragColor);\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static yk(){return"\n\t\tstruct VertexInput {\n\t\t\t@builtin(vertex_index) VertexIndex : u32\n\t\t};\n\t\t\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(0) fragUV : vec2<f32>\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\n\t\t\tvar pos : array<vec2<f32>, 4> = array<vec2<f32>, 4>(\n\t\t\t\tvec2<f32>(-1.0, 1.0),\n\t\t\t\tvec2<f32>(1.0, 1.0),\n\t\t\t\tvec2<f32>(-1.0, -1.0),\n\t\t\t\tvec2<f32>(1.0, -1.0));\n\t\t\t\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p : vec2<f32> = pos[input.VertexIndex];\n\t\t\toutput.Position = vec4<f32>(p, 0.0, 1.0);\n\t\t\toutput.fragUV = p / 2.0 + 0.5;\n\t\t\treturn output;\n\t\t}"}static gk(){return"\n\t\t@binding(0) @group(0) var sampler0 : sampler;\n\t\t@binding(1) @group(0) var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(0) fragUV : vec2<f32>\n\t\t};\n\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>\n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, vec2<f32>(input.fragUV.x, 1.0 - input.fragUV.y));\n\t\t\treturn output;\n\t\t}"}Pk(t){t||(t=this.ix.sN());let s=this.jU.get(t);return s||(s=this.zk().createRenderPipeline({label:"<mipmap generator>",layout:"auto",vertex:{module:this.UU,entryPoint:"main"},primitive:{topology:"triangle-strip",stripIndexFormat:"uint16"},fragment:{module:this.LU,entryPoint:"main",targets:[{format:t,blend:{color:{srcFactor:"one",dstFactor:"zero"},alpha:{srcFactor:"one",dstFactor:"zero"}}}]}}),this.jU.set(t,s)),s}static wk(){return`\n\t\t${uf}\n\n\t\tstruct PointData {\n\t\t\tdata : array<vec4<f32>>\n\t\t};\n\t\t@binding(3) @group(0) var<storage> pointBuffer : PointData;\n\n\t\tstruct VertexInput {\n\t\t\t@builtin(vertex_index) VertexIndex : u32\n\t\t};\n\n\t\tstruct VertexOutput {\n\t\t\t@builtin(position) Position : vec4<f32>,\n\t\t\t@location(0) fragUV : vec2<f32>,\n\t\t\t@location(1) pointOpacity : f32\n\t\t};\n\n\t\t@vertex\n\t\tfn main(input : VertexInput) -> VertexOutput {\n\n\t\t\tvar normPos : array<vec2<f32>, 4> = array<vec2<f32>, 4>(\n\t\t\t\tvec2<f32>(-0.5, -0.5),\n\t\t\t\tvec2<f32>(0.5, -0.5),\n\t\t\t\tvec2<f32>(0.5, 0.5),\n\t\t\t\tvec2<f32>(-0.5, 0.5));\n\t\t\t\n\t\t\tvar output : VertexOutput;\n\t\t\tvar p : vec2<f32> = normPos[input.VertexIndex % u32(4)];\n\t\t\tvar pointData : vec4<f32> = pointBuffer.data[input.VertexIndex / u32(4)];\n\n\t\t\tvar size : f32 = pointData.z;\n\t\t\toutput.Position = uniforms.transform * vec4<f32>(p * size + pointData.xy, uniforms.zElevation, 1.0);\n\t\t\toutput.pointOpacity = pointData.w;\n\n\t\t\tvar pointTexMin : vec2<f32> = min(uniforms.pointTexStart, uniforms.pointTexEnd);\n\t\t\tvar pointTexMax : vec2<f32> = max(uniforms.pointTexStart, uniforms.pointTexEnd);\n\t\t\tvar pn : vec2<f32> = p + vec2<f32>(0.5, 0.5);\n\t\t\tvar pointCoord : vec2<f32> = select(vec2<f32>(1.0 - pn.y, pn.x), pn, uniforms.pointTexEnd.x > uniforms.pointTexStart.x);\n\n\t\t\toutput.fragUV = mix(pointTexMin, pointTexMax, pointCoord);\n\t\t\treturn output;\n\t\t}`}static Sk(t){return`\n\t\t${df}\n\n\t\t%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n\t\t%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n\t\tstruct FragmentInput {\n\t\t\t@location(0) fragUV : vec2<f32>,\n\t\t\t@location(1) pointOpacity : f32,\n\t\t\t@builtin(position) fragPos : vec4<f32>\n\t\t};\n\t\t\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = textureSample(texture0, sampler0, input.fragUV) * uniforms.pointColor * input.pointOpacity;\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static vk(t){return`\n\t\t${df}\n\n\t\t%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n\t\t%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t\n\t\tstruct FragmentOutput {\n\t\t\t@location(0) color : vec4<f32>,\n\t\t\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n\t\t};\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar halfPixelSize : vec2<f32> = vec2<f32>(0.5, 0.5) / vec2<f32>(textureDimensions(texture0));\n\n\t\t\tvar tile : vec2<f32> = floor(input.fragUV);\n\t\t\tvar tex : vec2<f32> = fract(input.fragUV);\n\t\t\tvar tileOrigin : vec2<f32> = uniforms.srcRectStart + tile * (uniforms.tileSize + uniforms.tileSpacing);\n\t\t\tvar lowerBound : vec2<f32> = tileOrigin + halfPixelSize;\n\t\t\tvar upperBound : vec2<f32> = tileOrigin + uniforms.tileSize - halfPixelSize;\n\n\t\t\toutput.color = textureSampleLevel(texture0, sampler0, clamp(tex, lowerBound, upperBound), 0.0) * vec4<f32>(input.fragColor);\n\t\t\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\t\t\treturn output;\n\t\t}`}static CI(t){return`\n${df}\n\n%%SAMPLERFRONT_BINDING%% var sampler0 : sampler;\n%%TEXTUREFRONT_BINDING%% var texture0 : texture_2d<f32>;\n\n%%FRAGMENTINPUT_STRUCT%%\n\nstruct FragmentOutput {\n\t@location(0) color : vec4<f32>,\n\t${t?"@builtin(frag_depth) fragDepth: f32":""} \n};\n\n%%C3_UTILITY_FUNCTIONS%%\n\nconst PI : f32 = 3.1415926;\n\nfn cospVec4(a : vec4<f32>, b : vec4<f32>, x : f32) -> vec4<f32>\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nfn randVec3(seed : vec2<f32>) -> vec3<f32>\n{\n\treturn vec3<f32>(\n\t\tfract(sin(dot(seed.xy, vec2<f32>(12.9898,78.233))) * 43758.5453),\n\t\tfract(sin(dot(seed.yx, vec2<f32>(12.9898,-78.233))) * 43758.5453),\n\t\tfract(sin(dot(seed.xy, vec2<f32>(-12.9898,-78.233))) * 43758.5453));\n}\n\nfn sampleTile(tile : vec2<f32>, uv : vec2<f32>, ddx : vec2<f32>, ddy : vec2<f32>) -> vec4<f32>\n{\n\tvar posRandom = uniforms.tileSize;\n\tvar angleRandom = uniforms.outlineThickness;\n\tvar pixelSize = c3_getPixelSize(texture0);\n\t\n\tvar rand = (randVec3(round(tile)) - 0.5) * 2.0;\n\t\n\tvar angle = angleRandom * rand.z * PI;\n\tvar sin_a = sin(angle);\n\tvar cos_a = cos(angle);\n\tvar aspect = pixelSize.x / pixelSize.y;\n\n\tvar mid = tile + vec2<f32>(0.5, 0.5);\n\tvar dp = uv - mid;\n\tdp.x /= aspect;\n\tvar r = vec2<f32>(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvar p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\treturn textureSampleGrad(texture0, sampler0, p, ddx, ddy);\n}\n\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\n\tvar output : FragmentOutput;\n\t\n\tvar blendMarginX = uniforms.tileSpacing.x;\n\tvar blendMarginY = uniforms.tileSpacing.y;\n\t\n\tvar tile = floor(input.fragUV);\n\tvar tex = fract(input.fragUV);\n\tvar ddx = dpdx(input.fragUV);\n\tvar ddy = dpdy(input.fragUV);\n\t\n\tvar curTile = sampleTile(tile, input.fragUV, ddx, ddy);\n\t\n\tvar inLeftMargin = (tex.x < blendMarginX);\n\tvar inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tvar inTopMargin = (tex.y < blendMarginY);\n\tvar inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tvar leftTile = sampleTile(tile + vec2<f32>(-1.0, 0.0), input.fragUV, ddx, ddy);\n\t\tvar leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tvar leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tvar topTile =     sampleTile(tile + vec2<f32>(0.0,  -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topLeftTile = sampleTile(tile + vec2<f32>(-1.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tvar bottomTile =     sampleTile(tile + vec2<f32>(0.0,  1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomLeftTile = sampleTile(tile + vec2<f32>(-1.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutput.color = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tvar rightTile = sampleTile(tile + vec2(1.0, 0.0), input.fragUV, ddx, ddy);\n\t\tvar rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tvar rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tvar topTile =      sampleTile(tile + vec2<f32>(0.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topRightTile = sampleTile(tile + vec2<f32>(1.0, -1.0), input.fragUV, ddx, ddy);\n\t\t\tvar topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tvar bottomTile =      sampleTile(tile + vec2<f32>(0.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomRightTile = sampleTile(tile + vec2<f32>(1.0, 1.0), input.fragUV, ddx, ddy);\n\t\t\tvar bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutput.color = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutput.color = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tvar topTile = sampleTile(tile + vec2<f32>(0.0, -1.0), input.fragUV, ddx, ddy);\n\t\toutput.color = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tvar bottomTile = sampleTile(tile + vec2<f32>(0.0, 1.0), input.fragUV, ddx, ddy);\n\t\toutput.color = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutput.color = curTile;\n\t}\n\t\n\toutput.color *= vec4<f32>(input.fragColor);\n\t${t?"output.fragDepth = select(input.fragPos.z, 1.0, output.color.a == 0.0);":""}\n\treturn output;\n}\n`}static bk(){return"\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\toutput.color = vec4<f32>(input.fragColor);\n\t\t\treturn output;\n\t\t}"}static xk(){return`\n\t\t${df}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\tfn fromLinear(linearRGB : vec3<f32>) -> vec3<f32>\n\t\t{\n\t\t\tvar cutoff : vec3<bool> = (linearRGB < vec3<f32>(0.0031308));\n\t\t\tvar higher : vec3<f32> = vec3<f32>(1.055) * pow(abs(linearRGB), vec3<f32>(1.0/2.4)) - 0.055;\n\t\t\tvar lower : vec3<f32> = linearRGB * 12.92;\n\t\t\treturn select(higher, lower, cutoff);\n\t\t}\n\n\t\tfn toLinear(sRGB : vec3<f32>) -> vec3<f32>\n\t\t{\n\t\t\tvar cutoff : vec3<bool> = (sRGB < vec3<f32>(0.04045));\n\t\t\tvar higher : vec3<f32> = pow(abs((sRGB + 0.055) / 1.055), vec3<f32>(2.4));\n\t\t\tvar lower : vec3<f32> = sRGB / 12.92;\n\t\t\treturn select(higher, lower, cutoff);\n\t\t}\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar linearGrad : vec3<f32> = mix(toLinear(vec3<f32>(input.fragColor.rgb)), toLinear(uniforms.color2.rgb), vec3<f32>(input.fragUV.x));\n\n\t\t\tvar a : f32 = mix(f32(input.fragColor.a), uniforms.color2.a, input.fragUV.x);\n\t\t\toutput.color = vec4<f32>(fromLinear(linearGrad) * a, a);\n\t\t\treturn output;\n\t\t}\n\t\t`}static Tk(){return`\n\t\t${df}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar grad : f32 = input.fragUV.x / (1.0 - input.fragUV.y);\n\t\t\toutput.color = vec4<f32>(input.fragColor) * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);\n\t\t\treturn output;\n\t\t}\n\t\t`}static Mk(){return"\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\n\t\t\tvar f : f32 = step(diffSq.x + diffSq.y, 0.25);\n\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}"}static Gk(){return`\n\t\t${df}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar distSq : f32 = diffSq.x + diffSq.y;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\n\t\t\tvar innerF : f32 = step(distSq, 0.25);\n\n\t\t\tvar innerEdge : vec2<f32> = halfNorm - uniforms.pixelSize * norm * uniforms.outlineThickness;\n\t\t\tvar innerEdgeSq : vec2<f32> = innerEdge * innerEdge;\n\t\t\tvar outerF : f32 = step(innerEdgeSq.x + innerEdgeSq.y, distSq);\n\t\t\t\n\t\t\toutput.color = vec4<f32>(input.fragColor) * innerF * outerF;\n\t\t\treturn output;\n\t\t}`}static _k(){return`\n\t\t${df}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\t\t\tvar halfNormSq : vec2<f32> = halfNorm * halfNorm;\n\n\t\t\tvar innerEdge : vec2<f32> = halfNorm - uniforms.pixelSize * norm;\n\t\t\tvar innerEdgeSq : vec2<f32> = innerEdge * innerEdge;\n\n\t\t\tvar f : f32 = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);\n\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}`}static Ik(){return`\n\t\t${df}\n\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar diff : vec2<f32> = input.fragUV - 0.5;\n\t\t\tvar diffSq : vec2<f32> = diff * diff;\n\t\t\tvar distSq : f32 = diffSq.x + diffSq.y;\n\t\t\tvar norm : vec2<f32> = normalize(diff);\n\t\t\tvar halfNorm : vec2<f32> = norm * 0.5;\n\t\t\tvar halfNormSq : vec2<f32> = halfNorm * halfNorm;\n\n\t\t\tvar pxNorm : vec2<f32> = uniforms.pixelSize * norm;\n\t\t\tvar innerEdge1 : vec2<f32> = halfNorm - pxNorm;\n\t\t\tvar innerEdge1Sq : vec2<f32> = innerEdge1 * innerEdge1;\n\n\t\t\tvar innerF : f32 = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);\n\n\t\t\tvar innerEdge2 : vec2<f32> = halfNorm - pxNorm * uniforms.outlineThickness;\n\t\t\tvar innerEdge2Sq : vec2<f32> = innerEdge2 * innerEdge2;\n\t\t\tvar innerEdge3 : vec2<f32> = halfNorm - pxNorm * (uniforms.outlineThickness + 1.0);\n\t\t\tvar innerEdge3Sq : vec2<f32> = innerEdge3 * innerEdge3;\n\n\t\t\tvar outerF : f32 = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);\n\t\t\t\n\t\t\toutput.color = vec4<f32>(input.fragColor) * innerF * outerF;\n\t\t\treturn output;\n\t\t}`}static Ck(){return"\n\t\t%%FRAGMENTINPUT_STRUCT%%\n\t\t%%FRAGMENTOUTPUT_STRUCT%%\n\n\t\t@fragment\n\t\tfn main(input : FragmentInput) -> FragmentOutput {\n\t\t\tvar output : FragmentOutput;\n\t\t\tvar f : f32 = 1.0 - abs(input.fragUV.y - 0.5) * 2.0;\n\t\t\toutput.color = vec4<f32>(input.fragColor) * f;\n\t\t\treturn output;\n\t\t}"}}}{const Gf=self._s,_f=new Set(["nearest","bilinear","trilinear"]),If=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Cf=self.GPUTextureUsage,Pf={pM:"clamp-to-edge",mM:"clamp-to-edge",gM:"trilinear",yM:0,wM:!0,QU:!1,iG:!1,tV:!1,sV:!1,nG:0,width:-1,height:-1},Rf=[[1,["r8unorm","r8snorm","r8uint","r8sint","stencil8"]],[2,["r16uint","r16sint","r16float","rg8unorm","rg8snorm","rg8uint","rg8sint","depth16unorm"]],[3,["depth24plus"]],[4,["r32uint","r32sint","r32float","rg16uint","rg16sint","rg16float","rgba8unorm","rgba8unorm-srgb","rgba8snorm","rgba8uint","rgba8sint","bgra8unorm","bgra8unorm-srgb","rgb9e5ufloat","rgb10a2uint","rgb10a2unorm","rg11b10ufloat","depth24plus-stencil8","depth32float"]],[8,["rg32uint","rg32sint","rg32float","rgba16uint","rgba16sint","rgba16float"]],[16,["rgba32uint","rgba32sint","rgba32float"]],[5,["depth32float-stencil8"]]],Ef=new Map;for(const[Of,Df]of Rf)for(const Lf of Df)Ef.set(Lf,Of);const Af=new Set,Ff={bM:!0,flipY:!1};Gf.qS.tk=class{constructor(t,s){this.ix=t,this.MM=null,this.iV="",this.eV=null,this.nV=null,this.rV=null,this.hV=null,this.Vy=0,this.Wy=0,this.GM=!0,this._M="clamp-to-edge",this.IM="clamp-to-edge",this.CM="trilinear",this.PM=0,this.EM=!1,this.jp=0,this.oV=!1,this.fG=!1,this.aV=!1,this.lV=!1,this.dG=0,this.uV=0,this.cV=!0,this.fV=null,this.dV=0,this.pV=!!s,this.pV&&(this.iV=this.ix.Jk(),this.oV=!0,this.fG=this.ix.Xk(),this.CM=this.ix.tN(),this.nV=this.ix.Uk({gM:this.CM}))}mV(t){if(this._M=t.pM,this.IM=t.mM,this.CM=t.gM,this.PM=t.yM,this.EM=!!t.wM&&this.ix.Hb()&&"nearest"!==t.gM,this.oV=!!t.QU,this.fG=!!t.iG,this.aV=!!t.tV,this.lV=!!t.sV,this.dG=this.ix.mB(t.nG),!_f.has(this.CM))throw new Error("invalid sampling");if(!If.has(this._M)||!If.has(this.IM))throw new Error("invalid wrap mode");if(this.dG>=2&&this.fG)throw new Error("invalid use of multisampling");"nearest"===this.CM&&(this.PM=0),this.nV=this.ix.Uk({pM:this._M,mM:this.IM,gM:this.CM,yM:this.PM}),this.gV(),this.jp=1}gV(){const t=this.ix,s=t.zk();this.uV=0,this.oV?(this.uV=Cf.RENDER_ATTACHMENT,this.fG&&(this.uV|=Cf.TEXTURE_BINDING),this.lV&&(this.uV|=Cf.COPY_DST),this.iV=this.ix.Jk()):(this.uV=Cf.COPY_DST|Cf.TEXTURE_BINDING,this.iV=this.ix.sN()),this.aV&&(this.uV|=Cf.COPY_SRC),this.MM=s.createTexture({size:[this.Vy,this.Wy,1],mipLevelCount:this.yV(),format:this.iV,usage:this.uV,sampleCount:this.dG>=2?this.dG:1}),this.eV=this.MM.createView();const i=[],e=Gf.qS.nk.ek();for(let t=0;t<e;++t)i.push({binding:2*t,resource:this.nV},{binding:2*t+1,resource:this.eV});this.oV&&!this.fG||(this.rV=s.createBindGroup({layout:t.Zk(),entries:i}),this.hV=s.createBindGroup({layout:t.Qk(),entries:[{binding:0,resource:this.ix.Uk({gM:this.ix.tN()})},{binding:1,resource:this.eV}]})),this.SV()&&this.lN(!0),Af.add(this)}wV(){Af.delete(this),this.fV&&this.fV.Hn(),this.lN(!1),this.MM.destroy(),this.MM=null,this.eV=null,this.rV=null,this.hV=null}static oN(t){return t instanceof ImageBitmap||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas}static vV(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||t instanceof ImageData}bV(t){return[t.width||t.videoWidth,t.height||t.videoHeight]}SG(t,s){if(t&&!Gf.qS.tk.oN(t))throw new TypeError("invalid texture source");if(s=Object.assign({},Pf,s),this.MM)throw new Error("already created texture");if(this.GM=!0,t){const[s,i]=this.bV(t);this.Vy=s,this.Wy=i}else if(this.Vy=s.width,this.Wy=s.height,this.Vy<=0||this.Wy<=0)throw new Error("invalid texture size");if(this.mV(s),this.oV||this.fG)throw new Error("static texture cannot be render target");t&&this.xV(t)}xV(t,s=!0){if(this.EM)this.TV(t,this.yV(),s);else{const i=this.ix.zk(),e=i.createCommandEncoder(),n=i.createTexture({size:[this.Vy,this.Wy,1],mipLevelCount:1,format:this.iV,usage:Cf.COPY_SRC|Cf.COPY_DST|Cf.RENDER_ATTACHMENT});this.MV(n,t,0,s),e.copyTextureToTexture({texture:n,mipLevel:0},{texture:this.MM,mipLevel:0},[this.Vy,this.Wy,1]),i.queue.submit([e.finish()]),n.destroy()}}MV(t,s,i,e=!0){const[n,r]=this.bV(s);this.ix.zk().queue.copyExternalImageToTexture({source:s},{texture:t,mipLevel:i,premultipliedAlpha:!!e},[n,r,1])}yV(){return this.EM?Math.floor(Math.log2(Math.max(this.Vy,this.Wy))+1):1}TV(t,s,i=!0){const e=this.ix.zk(),n=e.createTexture({size:[this.Vy,this.Wy,1],mipLevelCount:this.yV(),format:this.iV,usage:Cf.COPY_DST|Cf.COPY_SRC|Cf.TEXTURE_BINDING|Cf.RENDER_ATTACHMENT}),r=this.ix.Pk(),h=r.getBindGroupLayout(0),o=this.ix.Uk({gM:"bilinear"}),a=e.createCommandEncoder();this.MV(n,t,0,i),a.copyTextureToTexture({texture:n,mipLevel:0},{texture:this.MM,mipLevel:0},[this.Vy,this.Wy,1]);const l=[];for(let t=0;t<s;++t)l.push(n.createView({baseMipLevel:t,mipLevelCount:1}));let u=this.Vy,c=this.Wy;for(let t=1;t<s;++t){u/=2,c/=2;const s=Math.max(Math.floor(u),1),i=Math.max(Math.floor(c),1),f=a.beginRenderPass({colorAttachments:[{view:l[t],loadOp:"clear",clearValue:[0,0,0,0],storeOp:"store"}]}),d=e.createBindGroup({layout:h,entries:[{binding:0,resource:o},{binding:1,resource:l[t-1]}]});f.setPipeline(r),f.setBindGroup(0,d),f.draw(4),f.end(),a.copyTextureToTexture({texture:n,mipLevel:t},{texture:this.MM,mipLevel:t},[s,i,1])}e.queue.submit([a.finish()]),n.destroy()}VM(t,s,i){if(i=Object.assign({},Pf,i),this.MM)throw new Error("already created texture");this.GM=!1,this.Vy=t,this.Wy=s,this.mV(i)}async JM(t,s){if(!Gf.qS.tk.oN(t)&&!Gf.qS.tk.vV(t))throw new Error("invalid texture source");if(!this.MM||this.jp<=0)throw new Error("texture not created");if(this.GM)throw new Error("cannot update static texture");if(s=Object.assign({},Ff,s),(Gf.qS.tk.vV(t)||s.flipY||!s.bM)&&(t=await createImageBitmap(t,{premultiplyAlpha:s.bM?"premultiply":"none",imageOrientation:s.flipY?"flipY":"none"}),!this.MM))return;this.ix.Vb();const[i,e]=this.bV(t);this.Vy===i&&this.Wy===e||(this.wV(),this.Vy=i,this.Wy=e,this.gV(),this.ix.cB(this)),this.xV(t,s.bM)}qM(){if(this.jp>0)throw new Error("texture still has references");if(!this.MM)throw new Error("already deleted texture");this.wV()}Nk(){this.cV=!1,this.lN(!1)}SV(){return this.GM&&this.cV&&!this.oV}lN(t){this.ix.lN(this,t)}GV(t,s){if(this.fV)throw new Error("already in a group");this.fV=t,this.dV=s,this.lN(!1)}_V(){this.fV=null,this.dV=0,this.SV()&&this.lN(!0)}Lk(){return this.rV}kk(){return this.hV}aB(){return null!==this.fV?this.fV.IV():this.SV()?(this.ix.cN(this),null!==this.fV?this.fV.IV():null):null}uB(){return this.dV}xy(){return this.pV?this.ix.xy():this.Vy}My(){return this.pV?this.ix.My():this.Wy}Px(){return this.ix}XM(){return this.MM}EN(){return this.eV}tB(){return this.iV}Uk(){return this.nV}CV(){return this.CM}FG(){return"nearest"!==this.CM}rN(){return this.oV}DG(){return this.fG}sB(){return this.aV}YM(){this.jp++}KM(){if(this.jp<=0)throw new Error("no more references");this.jp--}ZM(){return this.jp}pB(){return this.uV}Vk(t,s){this.uV=t,this.iV=s}pN(){const t=this.ix,s=t.zk();this.MM=t.qk(),this.eV=t.$k(),t.Xk()&&(this.hV=s.createBindGroup({layout:t.Qk(),entries:[{binding:0,resource:this.nV},{binding:1,resource:this.eV}]}))}SN(){this.MM=null,this.eV=null,this.hV=null}tG(){let t=this.xy()*this.My()*Gf.qS.tk.iN(this.tB());return this.EM&&(t+=Math.floor(t/3)),t}static Qx(){}static sG(){return Af.values()}static iN(t){const s=Ef.get(t);return"number"==typeof s?s:NaN}}}{const kf=self._s;kf.qS.nk=class{constructor(t,s){if(s.length<2)throw new Error("invalid multi-texture group");this.ix=t,this.PV=s,this.RV=null;for(let t=0,i=s.length;t<i;++t)s[t].GV(this,t);s.length<kf.qS.nk.ek()&&this.ix.uN(this,!0),this.EV()}Hn(){this.ix.uN(this,!1);for(const t of this.PV)t._V();this.AV(),kf.wh(this.PV),this.ix=null}EV(){this.AV();const t=this.ix.zk(),s=[],i=kf.qS.nk.ek();for(let t=0;t<i;++t){const i=this.PV[Math.min(t,this.PV.length-1)];s.push({binding:2*t,resource:i.Uk()},{binding:2*t+1,resource:i.EN()})}this.RV=t.createBindGroup({layout:this.ix.Zk(),entries:s})}AV(){null!==this.RV&&this.ix.fB(this.RV),this.RV=null}IV(){return this.RV}static ek(){return 14}}}{const Nf=self._s,Bf=self.hs,Uf=(Bf.ys,Bf.fs),Vf={gM:"trilinear",alpha:!0,depth:!1,iG:!0,tV:!1,sV:!1,eG:!0,nG:0},Wf=new Set;Nf.qS.sk=class{constructor(t,s){this.ix=t,this.FV=!!s,this.cG=!!s&&t.eN(),this.OV=null,this.lG=!0,this.dG=0,this.DV=!1,this.LV=Nf.jn(Nf.To),this.pG=Uf.create(),this.mG=0,this.gG=0,this.yG=0,this.FV&&(this.OV=Nf.jn(Nf.qS.tk,t,!0))}SG(t,s,i){if(i=Object.assign({},Vf,i),this.OV)throw new Error("already created render target");if(this.cG=!!i.depth,this.lG=!!i.eG,this.dG=this.ix.mB(i.nG),this.dG>=2&&i.iG)throw new Error("invalid use of multisampling");this.OV=this.ix.vG(t,s,{gM:i.gM,wM:!1,QU:!0,iG:i.iG,tV:i.tV,sV:i.sV,nG:this.dG}),this.wG(),Wf.add(this)}qM(){Wf.delete(this),this.OV.wV(),this.OV=null,this.ix=null}TG(t,s){if(t===this.xy()&&s===this.My())return;const i=this.OV.CV(),e=this.OV.DG(),n=this.OV.sB();this.OV.wV(),this.OV=null,this.OV=this.ix.vG(t,s,{gM:i,wM:!1,QU:!0,iG:e,tV:n}),this.wG()}EN(){return this.FV?this.ix.$k():this.OV.EN()}wG(){this.ix.fv(this.pG,this.xy()/this.My()),this.mG=this.ix.av(),this.gG=this.ix.nv(),this.yG=this.ix.hv()}kG(){return this.lG}nN(){return this.FV}LG(){return this.cG}xy(){return this.FV?this.ix.xy():this.OV.xy()}My(){return this.FV?this.ix.My():this.OV.My()}EG(){if(this.OV)return this.OV;throw new Error("no texture")}Px(){return this.ix}NG(){return this.dG}AG(){return this.ix.av()===this.mG&&this.ix.nv()===this.gG&&this.ix.hv()===this.yG||this.wG(),this.pG}FG(){return this.OV.FG()}DG(){return this.OV.DG()}sB(){return this.OV.sB()}UG(t){return"nearest"!==(t=Object.assign({},Vf,t)).gM===this.FG()&&!!t.iG===this.DG()&&!!t.tV===this.sB()&&!!t.depth===this.LG()&&("number"==typeof t.width||"number"==typeof t.height?!this.kG()&&this.xy()===Math.floor(t.width)&&this.My()===Math.floor(t.height):this.kG())}ON(t){this.DV=!!t}mN(){return this.DV}AN(){return this.LV}static Qx(){}static jG(){return Wf.values()}}}self._s.qS.vN=class{constructor(t,s){this.ix=t,this.Hw=this.ix.Wb(),this.kV=s;const i=this.ix.zk();this.NV=i.createQuerySet({count:this.kV,type:"timestamp"});const e=self.GPUBufferUsage;this.BV=i.createBuffer({size:this.UV(),usage:e.QUERY_RESOLVE|e.COPY_SRC}),this.VV=i.createBuffer({size:this.UV(),usage:e.COPY_DST|e.MAP_READ}),this.NE=null}UV(){return 8*this.kV}DN(){return this.NV}kN(t){t.resolveQuerySet(this.NV,0,this.kV,this.BV,0),t.copyBufferToBuffer(this.BV,0,this.VV,0,this.UV())}async BN(){const t=this.UV();await this.VV.mapAsync(self.GPUMapMode.READ,0,t);const s=this.VV.getMappedRange(0,t);this.NE=new BigUint64Array(s.slice(0)),this.VV.destroy(),this.VV=null,this.BV.destroy(),this.BV=null,this.NV.destroy(),this.NV=null}VE(){return null!==this.NE}WE(){if(!this.NE)throw new Error("not yet got result");return this.NE}Wb(){return this.Hw}};{const zf=self._s,jf={WV:null,zV:null,jV:null,getTime:null,HV:null};zf.qS.JV=class{constructor(t){t=Object.assign({},jf,t),this.qV=t.WV,this.$V=t.zV,this.XV=t.jV,this.YV=t.getTime,this.KV=t.HV,this.ZV=null,this.QV=new Set}tW(t){this.QV.add(t)}sW(t){this.QV.delete(t)}Qx(){this.ZV=null;for(const t of this.QV)t.Qx()}iW(t){return this.qV?this.qV(t):[t.xy(),t.My()]}wO(t){return this.$V(t)}eW(t,s){this.XV(t,s)}nW(){return this.YV()}Fp(t){this.KV(t)}rW(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.ZV||this.ZV.xy()===s&&this.ZV.My()===i||(t.MG(this.ZV),this.ZV=null),null===this.ZV&&(this.ZV=t.xO(null,{width:s,height:i,gM:"nearest",wM:!1})),this.ZV}}}{const Hf=self._s,Jf=(self.assert,self.hs.fs),qf=Hf.jn(Hf.Rect),$f=Hf.jn(Hf.Rect),Xf=Hf.jn(Hf.Rect),Yf=Hf.jn(Hf.Rect),Kf=Jf.create(),Zf=Jf.create(),Qf={hW:null,oW:null,aW:null,lW:!1},td={uW:null,cW:!1,fW:!1,dW:!1,pW:!1,mW:!1,gW:!1};Hf.qS.yW=class{constructor(t,s){s=Object.assign({},Qf,s),this.Wp=t,this.SW=s.hW,this.wW=s.oW,this.vW=s.aW,this.bW=null,this.xW=[],this.TW=[],this.MW=[],this.GW=!1,this.Hx=0,this._W=!1,this.IW=!1,this.PW=!1,this.RW=!1,this.EW=!1,this.AW=!1,this.yA=!1,this.FW=!1,this.OW=!1,this.DW=!1,this.LW=!1,this.kW=!1,this.NW=0,this.BW=[null,null,null],this.UW=!!s.lW,this.VW=0,this.WW=0,this.zW=0,this.jW=0,this.HW=null,this.JW=null,this.qW=Hf.jn(Hf.Rect),this.$W=Hf.jn(Hf.Rect),this.XW=Hf.jn(Hf.Rect),this.YW=Hf.jn(Hf.Rect),this.KW=Hf.jn(Hf.Rect),this.ZW=1,this.QW=1,this.tz=0,this.sz=0,this.iz=null,this.ez=null,this.nz=0,this.rz=0,this.hz=0,this.oz=0,this.az=!1,this.pG=Jf.create(),this.lz=Jf.create(),this.Wp.tW(this)}Hn(){this.Wp.sW(this),Hf.wh(this.MW),Hf.wh(this.xW),Hf.wh(this.TW),this.HW=null,this.JW=null,this.SW=null,this.wW=null,this.vW=null}Qx(){this.GW=!0,Hf.wh(this.MW),Hf.wh(this.xW),Hf.wh(this.TW)}uz(){return this.GW}cz(t,s){if(s=Object.assign({},td,s),Hf.wh(this.MW),this.VW=0,this.WW=0,this._W=!1,this.IW=!1,this.PW=!1,this.RW=!1,this.EW=!1,this.AW=!1,this.NW=0,this.kW=!!s.pW,this.LW=!!s.gW,this.GW=!1,Hf.Mh(this.xW,t),0===t.length)return;if(s.uW){if(s.uW.length!==t.length)throw new Error("incorrect indexMap length");Hf.Mh(this.TW,s.uW)}else{Hf.wh(this.TW);for(let s=0,i=t.length;s<i;++s)this.TW.push(s)}for(const s of t)this.VW+=s.Ex(),this.WW+=s.Ax(),s.kx()&&(this._W=!0),s.Bx()&&(this.IW=!0),s.Nx()&&(this.PW=!0),s.Fx()&&(this.RW=!0),s.Wx()&&(this.EW=!0);this.AW=this.fz(t[0].Px());const i=this.dz(t[0],s),e=this.pz(t.at(-1),s);if(1===t.length&&!i&&!e)return void(this.DW=!0);this.DW=!1;let n=0;i&&(this.NW=1,this.MW.push(Hf.jn(Hf.qS.yW.gz.mz,this,-1,1)),n=1);for(let s=0,r=t.length;s<r;++s)if(0!==s||i){let t=1===n?2:1;s!==r-1||e||(t=0),this.NW=Math.max(this.NW,t),this.MW.push(Hf.jn(Hf.qS.yW.gz.yz,this,n,t,s)),n=t}else this.NW=1,this.MW.push(Hf.jn(Hf.qS.yW.gz.Sz,this,-1,1,s)),n=1;e&&this.MW.push(Hf.jn(Hf.qS.yW.gz.wz,this,n,0))}dz(t,s){return!!(s.cW||t.Ox()||s.dW&&!t.Lx()||t.Bx()&&!this.LW||0!==this.VW||0!==this.WW)||(t.Px().$b()?t.Nx()&&(s.mW||s.pW)||t.Ux()&&s.pW:t.Nx()&&!this.AW&&s.mW)}pz(t,s){return!!s.fW||(t.Px().$b()?t.Nx()||t.Fx():(t.Nx()||t.Fx())&&this.vz())}fz(t){return t.dv()&&this.PW&&!this.RW}bz(t,s,i){t.dv()&&null===s&&(s=t.QN()),this.iz=s,this.HW=i.xz||null,this.JW=i.Tz||null,this.Hx=i.Mz||0,this.ZW=i.devicePixelRatio||1,this.QW=i.IB||1,this.tz=i.CB||0,this.sz="number"==typeof i.time?i.time:this.Wp.nW(),this.yA=!1,t.PF(),this._W&&this.Gz();let e=!1;if(this._z()&&(this.Iz(t,i),e=!0,this.ez=this.Wp.rW(t,this.zW,this.jW),qf.m(this.$W),qf.vl(),t.dv()&&t.LN(this.iz),t.dB(this.iz.EG(),this.ez,qf.Za(),qf.Qa(),qf.width(),qf.height())),this.DW)this.Cz(t,i);else if(e||this.Iz(t,i),0!==this.XW.width()||0!==this.XW.height()){t.WF(),t.Db(),t.LF(),t.$v(0),t.Yv(0),this.bW=i.Pz||null,this.nz=i.Rz||0,this.rz=i.Ez||0,this.hz=i.Az||0,this.oz=i.Fz||0,this.az=!!i.Oz,this.Dz(t),this.BW[0]=s,this.BW[1]=this.NW>=1?this.Lz():null,this.BW[2]=2===this.NW?this.Lz():null;for(const s of this.MW){const i=this.kz(s.Nz()),e=this.kz(s.Bz());t.dv()?s.Uz(t,i,e):s.Vz(t,i,e)}t.NF(null),this.BW[1]&&this.Wz(this.BW[1]),this.BW[2]&&this.Wz(this.BW[2]),this.BW.fill(null),this.zz(t),this.iz=null,this.ez=null,this.HW=null,this.JW=null,this.bW=null}}Iz(t,s){const[i,e]=this.Wp.iW(t);this.jz(t,i,e),this.Jz(s)}jz(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.zW===s&&this.jW===i||this.qz(t,s,i,0,0,this.pG,this.lz),this.zW=s,this.jW=i}qz(t,s,i,e,n,r,h){const o=s/2+e,a=i/2+n;t.fv(r,s/i);const l=t.gv(o,a,t.Zw(i),o,a,0,i);Jf.m(h,l)}Jz(t){if(this.qW.m(t._B),t.$z?this.$W.m(t.$z):this.$W.set(0,0,this.zW,this.jW),this.DW){const s=t.Rz??0,i=t.Ez??0;this.$W.offset(-s,-i)}this.XW.m(this.$W),this.XW.St(this.zW,this.jW);const s=this.QW*this.ZW;this.$W.cl(this.VW*s,this.WW*s),this.KW.m(this.$W),this.KW.St(this.zW,this.jW),this.$W.bl(0,0,this.zW,this.jW),this.YW.m(this.$W),this.YW.St(this.zW,this.jW)}Dz(t){if(this.FW=t.gO(),this.OW=t.AO(),this.LW)t.mO(!1),this.IW&&t.yO(!0);else{if(qf.m(this.$W),t.$b()){const t=this.QW*this.ZW;qf.cl(Math.max(this.VW,1)*t,Math.max(this.WW,1)*t),qf.vl(),qf.Yn(0,0,this.zW,this.jW)}else qf.vl();t.SO(qf.Za(),qf.Qa(),qf.width(),qf.height(),this.jW)}}Xz(t){t.LF(),this.LW||(this.OW?t.FO(!1):t.mO(!1),this.IW&&t.yO(!0)),t.dv()&&t.hB(!0)}zz(t){t.yO(!1),this.OW?t.EO(this.FW):t.mO(this.FW),this.LW||t.vO(),t.dv()&&t.hB(!1),this.yA=t.RF()}Yz(){this.KW.Yn(0,0,1,1)}kz(t){return t<0?null:this.BW[t]}Lz(){return this.Wp.wO(this)}Kz(){return this.iz}Wz(t){this.Wp.eW(t,this)}Zz(t){return this.xW[t]}Qz(t){this.bW?this.bW(this,t,()=>this.SW(t,this)):this.SW(t,this),this.DW||this.Xz(t)}tj(t){if(this.LW)return!0;if(0!==this.nz||0!==this.rz||0!==this.hz||0!==this.oz)return!1;const[s,i]=t.tO(t.wO());return s===this.zW&&i===this.jW}sj(t,s){let i=this.pG,e=this.lz;if(s&&!this.tj(t)){let s,n;i=Kf,e=Zf,0!==this.hz&&0!==this.oz?[s,n]=[this.hz,this.oz]:[s,n]=t.tO(t.wO()),this.qz(t,s,n,this.nz,this.rz,i,e),this.LW||t.vO()}t.xF(i),t.CF(e)}Gz(){this.Wp.Fp(this)}ij(t,s){return this.vW(this.TW[t],s)}ej(t,s){let i=this.KW,e=this.YW,n=this.XW;t.$b()&&($f.m(i),$f.pl(1),i=$f,Xf.m(e),Xf.pl(1),e=Xf,Yf.m(n),Yf.pl(1),n=Yf),this.nj(t,s,e,n,i,1/this.zW,1/this.jW)}rj(t,s){let i=this.YW,e=this.XW,n=1/this.zW,r=1/this.jW;if(this.wW){let{hj:t,oj:s,aj:h}=this.wW(this.HW);t||(qf.set(0,0,0,0),t=qf),s||(s=this.zW),h||(h=this.jW),i=t,e=t,n=1/s,r=1/h}else t.$b()&&(Xf.m(i),Xf.pl(1),i=Xf,Yf.m(e),Yf.pl(1),e=Yf);let h=this.KW;t.$b()&&(h=$f,h.m(this.KW),h.pl(1)),this.nj(t,s,i,e,h,n,r),t.dv()&&this.EW&&t.LB(this.kW)}lj(t){return this.PW?t.dv()?this._z()?this.ez:this.iz.EG():this.iz:null}nj(t,s,i,e,n,r,h){t.uO(this.lj(t),n,i,e,this.qW,r,h,this.ZW,this.QW,this.tz,this.sz),t.cO(this.ij(s,t))}Cz(t,s){const i=this.xW[0],e=t.gO(),n=i.Bx();n&&(t.mO(!1),t.yO(!0),this.KW.set(0,0,1,1),this.XW.set(0,0,1,1)),t.xv(i),t.Kx(this.Hx),t.GO(this.iz),t.Db();let r=0,h=1;if(this.XW.set(0,0,1,1),i.Ux()&&this.wW){const{hj:t,oj:s,aj:i}=this.wW(this.HW);t&&this.XW.m(t),r=Number.isFinite(s)?1/s:0,h=Number.isFinite(i)?1/i:0}else{const[s,i]=this.Wp.iW(t);r=1/s,h=1/i}s._B?this.qW.m(s._B):this.qW.set(0,0,0,0),t.uO(this.lj(t),this.KW,this.XW,this.XW,this.qW,r,h,this.ZW,this.QW,this.tz,this.sz),t.cO(this.ij(0,t)),t.dv()&&this.EW&&t.LB(this.kW),t.$v(0),this.Qz(t),n&&(t.yO(!1),t.mO(e))}_z(){return this.AW}vz(){return!this.AW}uj(){return this.PW}cj(){return!!this.DW&&!this._z()}fj(){return this.LW}dj(){return this.HW}pj(){return this.JW}mj(){return this.Hx}gj(){return this.az}RF(){return this.yA}yj(){return this.$W}Sj(){return this.YW}wj(){return this.UW}async vj(t,s,i){}}}self._s.qS.yW.gz=class{constructor(t,s,i,e=-1){this.bj=t,this.xj=s,this.Tj=i,this.US=e}Mj(){return this.bj}Nz(){return this.xj}Bz(){return this.Tj}Gj(){return this.US}Q_(){return this.Mj().Zz(this.Gj())}Vz(t,s,i){}Uz(t,s,i){}};{const sd=self._s;sd.qS.yW.gz.mz=class extends sd.qS.yW.gz{constructor(t,s,i,e){super(t,s,i,e)}Vz(t,s,i){const e=this.Mj();t.WF(),t.Db(),t.bv(),t.GO(i,e.gj()),t.fO(0,0,0,0),e.Qz(t),e.Yz()}Uz(t,s,i){const e=this.Mj();t.WF(),t.Db(),t.bv(),t.GO(i,!1),t.fO(0,0,0,0),e.Qz(t),e.Yz()}}}{const id=self._s,ed=id.jn(id.Rect),nd=id.jn(id.Cl);id.qS.yW.gz.wz=class extends id.qS.yW.gz{constructor(t,s,i,e){super(t,s,i,e)}Vz(t,s,i){const e=this.Mj();t.bv(),t.GO(i),e.sj(t,!0),t.Kx(e.mj()),t.NF(s.EG()),nd.Xl(e.yj()),ed.m(e.Sj()),ed.pl(1),t.ob(nd,ed),e.wj()&&t.CO(s)}Uz(t,s,i){const e=this.Mj();t.bv(),t.GO(i,!1),e.tj(t)?nd.Xl(e.Sj()):(t.hB(!1),e.sj(t,!0),nd.Xl(e.yj())),t.aN(null),t.Kx(e.mj()),t.NF(s.EG()),e.fj()?t.QF():t.ob(nd,e.Sj())}}}{const rd=self._s;rd.qS.yW.gz.Sz=class extends rd.qS.yW.gz{constructor(t,s,i,e){super(t,s,i,e)}Vz(t,s,i){const e=this.Mj();t.GO(i,e.gj()),t.fO(0,0,0,0),t.HF(),t.xv(this.Q_()),e.rj(t,this.Gj()),e.Qz(t),e.Yz()}Uz(t,s,i){const e=this.Mj();t.GO(i,!1),t.fO(0,0,0,0),t.HF(),t.xv(this.Q_()),e.rj(t,this.Gj()),e.Qz(t),e.Yz()}}}{const hd=self._s,od=hd.jn(hd.Rect),ad=hd.jn(hd.Cl);hd.qS.yW.gz.yz=class extends hd.qS.yW.gz{constructor(t,s,i,e){super(t,s,i,e)}Vz(t,s,i){const e=this.Mj();t.GO(i);const n=0===this.Bz();n?t.Kx(e.mj()):(t.fO(0,0,0,0),t.HF()),t.xv(this.Q_()),e.ej(t,this.Gj()),t.NF(s.EG()),e.sj(t,n),ad.Xl(e.yj()),od.m(e.Sj()),od.pl(1),t.ob(ad,od),e.wj()&&t.CO(s)}Uz(t,s,i){const e=this.Mj();t.GO(i,!1),0===this.Bz()?(t.Kx(e.mj()),t.aN(null),e.tj(t)?ad.Xl(e.Sj()):(t.hB(!1),e.sj(t,!0),ad.Xl(e.yj()))):(t.fO(0,0,0,0),t.HF(),ad.Xl(e.Sj())),t.xv(this.Q_()),e.ej(t,this.Gj()),t.NF(s.EG()),e.fj()?t.QF():t.ob(ad,e.Sj())}}}{let ld=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]};0;const ud=self._s,cd=self.ks;let fd=null;const dd=new Set,pd=[],md=[];let gd=!1,yd=!1,Sd=!1;const wd=new Set(["vsync","unlimited-tick","unlimited-frame"]);self._j=class{constructor(t){fd=t,Object.defineProperties(this,{Ij:{value:fd.Pj().Cj(),writable:!1},Rj:{value:fd.Aj().Ej(),writable:!1},Fj:{value:{},writable:!1},Oj:{value:{},writable:!1},Dj:{value:fd.Lj(),writable:!1},kj:{value:fd.Nj(),writable:!1},Bj:{value:fd.Uj(),writable:!1},Vj:{value:fd.Wj(),writable:!1},zj:{value:new Date(fd.jj()),writable:!1},storage:{value:new self.Hj(fd),writable:!1},Jj:{value:fd.qj(),writable:!1},$j:{value:fd.Xj(),writable:!1},Yj:{value:fd.Kj(),writable:!1},gM:{value:fd.CV(),writable:!1},Zj:{value:new self.Qj(t),writable:!1},tH:{value:new self.sH(t),writable:!1}}),fd.iH().addEventListener("keydown",t=>{dd.has(t.key)?t.stopPropagation():dd.add(t.key)}),fd.iH().addEventListener("keyup",t=>dd.delete(t.key)),fd.Sf().addEventListener("window-blur",()=>dd.clear()),fd.qj()&&(self.alert=t=>(gd||(gd=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}eH(t){Object.defineProperties(this.Fj,t)}nH(t){Object.defineProperties(this.Oj,t)}addEventListener(t,s){fd.iH().addEventListener(t,s)}removeEventListener(t,s){fd.iH().removeEventListener(t,s)}rH(t,...s){cd.le(t);const i=fd.hH(),e=i.oH(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e._u())return e.aH();if(s.length<e.lH())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.lH()} expected)`);const n=e.uH();let r=n.cH();const h=i.fH();if(h){r=r.slice(0);const t=new Set(r);for(const s of h.cH())t.has(s)||(r.push(s),t.add(s));for(const s of i.dH())t.has(s)||(r.push(s),t.add(s))}return n.pH(r,e.mH(),e.gH(),e.aH(),null,...s)}yH(t){const s=fd.wH().SH();if(!s)throw new Error("not in a function which returns a value");switch(s.vH()){case 1:"number"==typeof t&&s.bH(t);break;case 2:"string"==typeof t&&s.bH(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.bH(t)}}signal(t){cd.le(t),fd.hH().xH(t)}TH(t){return cd.le(t),fd.hH().MH(t)}GH(){return[fd.Xj(),fd.Kj()]}get _H(){return fd.IH()}get CH(){return fd.PH()}get RH(){return fd.EH()}get AH(){return fd.FH()}get OH(){return fd.DH()}get LH(){return fd.kH()}get NH(){return fd.BH()}set NH(t){cd.re(t),fd.UH(t)}get VH(){return yd||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),yd=!0),fd.WH()}get framesPerSecond(){return fd.WH()}get zH(){return fd.jH()}get HH(){return fd.JH()}get qH(){return fd.$H()}get XH(){return fd.YH()}set XH(t){if(!wd.has(t))throw new Error("invalid framerate mode");fd.KH(t)}get ZH(){return fd.QH()}set ZH(t){cd.re(t),fd.tJ(t)}get sJ(){return fd.iJ()}set sJ(t){fd.eJ(t)}set nJ(t){fd.rJ(!!t)}get nJ(){return fd.hJ()}get oJ(){return fd.Pj().aJ()}get lJ(){return fd.Pj().uJ()}random(){return fd.cJ()}get layout(){const t=fd.fJ();if(!t)throw new Error("no layout is running - make sure a layout is loaded before accessing");return t.dJ()}pJ(t){const s=fd.mJ();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.gJ(t),!i)throw new Error("invalid layout");return i.dJ()}yJ(){return fd.mJ().SJ().map(t=>t.dJ())}wJ(t){const s=fd.mJ();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.gJ(t),!i)throw new Error("invalid layout");s.vJ()||s.bJ(i)}get keyboard(){const t=fd.xJ().keyboard;if(!t)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return t}get TJ(){const t=fd.xJ().TJ;if(!t)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return t}get MJ(){const t=fd.xJ().MJ;if(!t)throw new Error("runtime.touch used but Touch object missing - add it to your project first");return t}get GJ(){const t=fd.xJ().GJ;if(!t)throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");return t}get tC(){return fd.IJ()._J()}CJ(t,s){cd.le(t),cd.le(s),fd.PJ(t,s)}RJ(t){cd.re(t);const s=fd.EJ(t);return s?s.AJ():null}FJ(t,s){cd.Ee(s);const i=fd.OJ();for(const s of t){const t=fd.DJ(s),i=t.LJ();i.kJ()||(pd.push([i.NJ().Gj(),i.BJ()]),md.push(t))}if(0===pd.length)return;pd.sort(ld),md.sort((t,i)=>s(t.AJ(),i.AJ()));let e=!1;for(let t=0,s=pd.length;t<s;++t){const s=md[t],n=i.UJ(pd[t][0]),r=pd[t][1],h=n.VJ();h[r]!==s&&(h[r]=s,s.LJ().WJ(n,!0),n.zJ(s),e=!0)}e&&fd.jJ(),ud.wh(pd),ud.wh(md)}HJ(t){for(const s of t){const t=fd.DJ(s);fd.JJ(t)}fd.hH().qJ()||fd.mJ().$J()||fd.hH().XJ()||fd.YJ()}async KJ(t,s){Sd||(console.warn("IRuntime.createWorker() is deprecated. All modern browsers now support nested workers so this method is no longer needed."),Sd=!0);const i=new MessageChannel,e=i.port1,n=i.port2;return await fd.ZJ("runtime","script-create-worker",{url:t,opts:s,port2:n},[n]),e}alert(t){return fd.ZJ("runtime","alert",{message:t+(fd.qj()?" [via Web Worker]":"")})}QJ(t){return cd.re(t),fd.tq(t)}sq(t){fd.iq(t)}async eq(t,s,i){cd.ue(t),cd.se(s),cd.Be(i,DOMRect),i||(i=new DOMRect(0,0,0,0));const e=fd.IJ();if(!e)return;fd.jJ();const n=await e.nq(t||"image/png",s,i.x,i.y,i.width,i.height);return await fd.rq(ud.lq.aq.oq.hq,null),n}}}{self._s,self.ks;let vd=null;self.uq=class{constructor(t){vd=t,Object.defineProperties(this,{cq:{value:!0,writable:!1}})}fq(t){const s=self.mq.pq(t);if(!s)throw new Error("invalid IImageInfo");s.gq(vd.yq())}Sq(t){return vd.so(t)}wq(t){return vd.io(t)}vq(t){return vd.eo(t)}bq(t){return vd.no(t)}xq(t){return Promise.resolve(vd.Tq(t))}Mq(t){return vd.Gq(t)}get _q(){return vd.Iq()}async Cq(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}Pq(...t){return vd.Rq(...t)}Eq(t){return vd.Aq(t)}Fq(t){return vd.Oq(t)}get Dq(){return vd.Lq()}}}{const bd=self._s,xd=self.ks;let Td=null;self.kq=class{constructor(t){Td=t,Object.defineProperties(this,{runtime:{value:Td.yq(),writable:!1}})}Nq(t,s){const i=Td.yq(),e=i.DJ(t),n=i.DJ(s);return Td.Bq(e,n)}Uq(t,s){const i=Td.yq(),e=i.DJ(t);for(const t of s){const s=i.DJ(t);if(Td.Bq(e,s))return t}return null}Vq(t){const s=Td.yq().DJ(t),i=Td.Wq(s);return i?i.AJ():null}zq(t,s){if(xd.re(t),xd.re(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");Td.jq(t,s)}Hq(){return Td.Jq()}qq(t,s){const i=Td.yq();let e;e=Array.isArray(t)?t.map(t=>i.$q(t)):[i.$q(t)];const n=bd.Rect.Ya(s),r=[];return Td.Xq(null,e,n,r),r.map(t=>t.AJ())}}}{const Md=self._s;self.ks;let Gd=null;const _d=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),Id=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["Firefox","firefox"],["Safari","safari"]]),Cd=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.Qj=class{constructor(t){Gd=t,Object.defineProperties(this,{Yq:{value:Md.Ks.hi,writable:!1},os:{value:_d.get(Md.Ks.Zs)||"unknown",writable:!1},Kq:{value:Md.Ks.Qs,writable:!1},browser:{value:Id.get(Md.Ks.ti)||"unknown",writable:!1},Zq:{value:Md.Ks.si,writable:!1},Qq:{value:Cd.get(Md.Ks.ei)||"unknown",writable:!1}})}get t$(){let t=Gd.s$();return Gd.i$()?t="windows-webview2":"cordova"===t?t="Android"===Md.Ks.Zs?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get tC(){return Gd.IJ().e$()}get n$(){return Gd.IJ().r$()}get h$(){return Gd.IJ().o$()}get a$(){return Gd.IJ().l$()}get u$(){return Gd.IJ().c$()}get f$(){return Gd.IJ().d$()}get p$(){return Gd.IJ().m$()}get g$(){return Gd.IJ().y$()}get devicePixelRatio(){return Gd.S$()}}}{self._s;const Pd=self.ks;self.Hj=class{constructor(t){this.w$=t.v$()}getItem(t){return Pd.le(t),this.w$.getItem(t)}setItem(t,s){return Pd.le(t),this.w$.setItem(t,s)}removeItem(t){return Pd.le(t),this.w$.removeItem(t)}clear(){return this.w$.clear()}keys(){return this.w$.keys()}}}{const Rd=self._s,Ed=(self.ks,Rd.Is());self.b$=class{#t;constructor(){const t=Rd.T$.x$(Ed);this.#t=t,Object.defineProperties(this,{runtime:{value:t.yq().M$(),writable:!1},id:{value:t.G$(),writable:!1},_$:{value:t.I$(),writable:!1},C$:{value:t.P$(),writable:!1},R$:{value:t.E$(),writable:!1},A$:{value:t.F$(),writable:!1},O$:{value:t.D$(),writable:!1},L$:{value:t.k$(),writable:!1},N$:{value:t.B$(),writable:!1},U$:{value:t.V$(),writable:!1}}),t.yq().W$(this,t)}static z$(t){if(!t)return null;const s=Rd.T$.j$(t);return s?s.H$():null}J$(){return this.#t.$$().q$()}X$(){return this.#t.Y$().AJ()}}}{const Ad=globalThis._s,Fd=globalThis.ks,Od=Ad.Is();globalThis.K$=class{#t;constructor(){const t=Ad.T$.x$(Od);this.#t=t,Object.defineProperties(this,{name:{value:t.Pc(),writable:!1},runtime:{value:t.yq().M$(),writable:!1},Z$:{value:t.Q$().H$(),writable:!1}}),t.yq().W$(this,t)}addEventListener(t,s){Fd.le(t),Fd.Ee(s),this.#t.iH().addEventListener(t,s)}removeEventListener(t,s){Fd.le(t),Fd.Ee(s),this.#t.iH().removeEventListener(t,s)}tX(){return[...this.sX()]}iX(){return Ad.Bh(this.sX())}eX(){return[...this.nX()]}rX(){return Ad.Bh(this.nX())}hX(t){const s=this.#t,i=s.yq().oX(t),e=s.aX(i);return e?e.AJ():null}*sX(){for(const t of this.#t.lX())yield t.AJ()}*nX(){for(const t of this.#t.cX().uX())yield t.AJ()}fX(t,s,...i){Fd.le(t);const e=this.#t,n=e.yq(),r=n.hH(),h=r.dX(e,t);if(!h)throw new Error(`cannot find '${this.name}' custom action '${t}'`);if(!h._u())return null;if(i.length<h.lH())throw new Error(`not enough function parameters passed for '${this.name}' custom action '${t}' (${i.length} passed, ${h.lH()} expected)`);const o=h.uH();let a=o.cH();const l=r.fH();if(l){a=a.slice(0);const t=new Set(a);for(const s of l.cH())t.has(s)||(a.push(s),t.add(s));for(const s of r.dH())t.has(s)||(a.push(s),t.add(s))}if(e.pX()&&h.mX()){const r=new Map,l=[];for(const i of s){const s=n.oX(i),e=s.gX();if(e.yX(t)){const t=r.get(e);Array.isArray(t)?t.push(s):r.set(e,[s])}else l.push(s)}const u=[];if(l.length>0){const t={SX:e,wX:l},s=o.pH(a,h.mH(),0,null,t,...i);u.push(s)}if(r.size>0)for(const[s,e]of r){const n=s.vX(t).uH(),r=[...new Set([...a,...n.bX()])],o={SX:s,wX:e},l=n.pH(r,h.mH(),0,null,o,...i);u.push(l)}return Promise.all(u)}{const t={SX:h.gX(),wX:(Array.isArray(s)?s:[...s]).map(t=>n.oX(t))},e=o.pH(a,h.mH(),0,null,t,...i);return e instanceof Promise?e:Promise.resolve()}}}}{const Dd=globalThis._s,Ld=globalThis.ks,kd=Dd.Is();globalThis.xX=class extends globalThis.K${#t;constructor(){super();const t=Dd.T$.x$(kd);this.#t=t}TX(t){Ld.Ee(t);const s=this.#t;if(s.MX()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.GX(t)}Gi(t,s,i,e,n){if(Ld.te(s),Ld.te(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#t,h=r.yq(),o=h.fJ().NJ(t);if(!o)throw new Error("invalid layer");const a=h._X(r,o,s,i,e,n);e&&o.IX(a);const l=h.hH();return l.CX(!0),a.PX(),l.CX(!1),l.qJ()||h.mJ().$J()||h.YJ(),a.AJ()}RX(){return this.#t.EX().map(t=>t.q$())}*AX(){for(const t of this.#t.EX())yield t.q$()}FX(t){return Ld.Ne(t,globalThis.OX),t.DX(this)}}}{const Nd=globalThis._s,Bd=globalThis.ks,Ud=globalThis.xX,Vd=Nd.Is();globalThis.OX=class extends globalThis.K${#t;constructor(){super();const t=Nd.T$.x$(Vd);this.#t=t}LX(){return this.#t.kX().map(t=>t.q$())}*NX(){for(const t of this.#t.kX())yield t.q$()}DX(t){Bd.Ne(t,Ud);const s=this.#t,i=s.yq().$q(t);return s.BX(i)}}}{self._s;const Wd=self.ks,zd=["above","below","top-sublayer","bottom-sublayer"];self.UX=class{#t;constructor(t){this.#t=t;const s=[],i=t.VX(),e=i.WX().length;for(let t=0;t<e;++t)s.push(new self.zX(i,t));Object.defineProperties(this,{runtime:{value:t.yq().M$(),writable:!1},name:{value:t.Pc(),writable:!1},index:{value:t.Gj(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){Wd.le(t),Wd.Ee(s),this.#t.iH().addEventListener(t,s)}removeEventListener(t,s){Wd.le(t),Wd.Ee(s),this.#t.iH().removeEventListener(t,s)}get width(){return this.#t.xy()}set width(t){Wd.re(t),this.#t.ny(t)}get height(){return this.#t.My()}set height(t){Wd.re(t),this.#t.hy(t)}jX(t,s){Wd.re(t),Wd.re(s);const i=this.#t;i.ny(t),i.hy(s)}getSize(){const t=this.#t;return[t.xy(),t.My()]}set scale(t){Wd.re(t),this.#t.HX(t)}get scale(){return this.#t.JX()}set angle(t){Wd.re(t),this.#t.qX(t)}get angle(){return this.#t.$X()}set scrollX(t){Wd.te(t),this.#t.XX(t)}get scrollX(){return this.#t.YX()}set scrollY(t){Wd.te(t),this.#t.KX(t)}get scrollY(){return this.#t.ZX()}scrollTo(t,s){Wd.te(t),Wd.te(s);const i=this.#t;i.XX(t),i.KX(s)}QX(){const t=this.#t;return[t.YX(),t.ZX()]}get tY(){return this.#t.sY()}iY(t){const s=this.#t;let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return i=s.NJ(t),i?i.eY():null}nY(){return this.#t.rY().map(t=>t.eY())}*hY(){for(const t of this.#t.hY())yield t.eY()}oY(t,s,i){const e=this.#t,n=self.aY;Wd.le(t),Wd.Be(s,n);const r=s?e.yq().lY(s):null,h=zd.indexOf(i);if(h<0)throw new Error("invalid location");e.uY(t,r,h)}cY(t,s,i){const e=this.#t,n=e.yq(),r=self.aY;Wd.Ne(t,r);const h=n.lY(t);if(!h)throw new Error("invalid layer");Wd.Be(s,r);const o=s?n.lY(s):null,a=zd.indexOf(i);if(a<0)throw new Error("invalid location");e.fY(h,o,a)}dY(t){const s=this.#t,i=self.aY;Wd.Ne(t,i);const e=s.yq().lY(t);if(!e)throw new Error("invalid layer");const n=e.yq();s.pY(e),n.hH().qJ()||n.YJ()}mY(){const t=this.#t,s=t.yq();t.gY(),s.hH().qJ()||s.YJ()}yY(t,s){Wd.re(t),Wd.re(s),this.#t.SY(t,s)}wY(){return this.#t.vY()}set W(t){Wd.le(t);const s=this.#t;if("perspective"===t)s.bY();else{if("orthographic"!==t)throw new Error("invalid projection");s.xY()}}get W(){return this.#t.TY()?"orthographic":"perspective"}}}{const jd=self._s,Hd=self.ks,Jd=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10],["lighten",11],["darken",12],["multiply",13],["screen",14]]),qd=new Map([...Jd.entries()].map(t=>[t[1],t[0]])),$d=new Set(["2d","3d"]),Xd=jd.jn(jd.To);self.aY=class{#t;constructor(t){this.#t=t;const s=[],i=t.VX(),e=i.WX().length;for(let t=0;t<e;++t)s.push(new self.zX(i,t));Object.defineProperties(this,{runtime:{value:t.yq().M$(),writable:!1},name:{value:t.Pc(),writable:!1},layout:{value:t.gJ().dJ(),writable:!1},effects:{value:s,writable:!1}}),t.yq().W$(this,t)}addEventListener(t,s){this.#t.iH().addEventListener(t,s)}removeEventListener(t,s){this.#t.iH().removeEventListener(t,s)}get MY(){const t=this.#t.GY();return t?t.eY():null}*_Y(){for(const t of this.#t._Y())yield t.eY()}*IY(){for(const t of this.#t.CY())yield t.eY()}*PY(){for(const t of this.#t.CY())for(const s of t.RY())yield s.eY()}get index(){return this.#t.Gj()}get isVisible(){return this.#t.EY()}set isVisible(t){this.#t.AY(t)}get FY(){return this.#t.OY()}get DY(){return this.#t.LY()}set DY(t){this.#t.kY(t)}get NY(){return this.#t.BY()}set NY(t){this.#t.UY(!!t)}get VY(){return this.#t.WY()}get opacity(){return this.#t.FF()}set opacity(t){t=jd.Yn(+t,0,1),isNaN(t)||this.#t.DF(t)}set scale(t){Hd.re(t),this.#t.zY(t)}get scale(){return this.#t.jY()}set HY(t){Hd.re(t),this.#t.JY(t)}get HY(){return this.#t.qY()}set angle(t){Hd.re(t),this.#t.qX(t)}get angle(){return this.#t.$Y()}set XY(t){Hd.re(t),this.#t.YY(t)}get XY(){return this.#t.KY()}set ZY(t){Hd.re(t),this.#t.QY(t)}get ZY(){return this.#t.tK()}set WN(t){Hd.re(t),this.#t.pT(t)}get WN(){return this.#t.dT()}set renderingMode(t){if(!$d.has(t))throw TypeError("invalid rendering mode");this.#t.sK("3d"===t)}get renderingMode(){return this.#t.iK()?"3d":"2d"}set eK(t){this.#t.nK(t)}get eK(){return this.#t.rK()}set hK(t){this.#t.oK(t)}get hK(){return this.#t.aK()}set Mz(t){Hd.le(t);const s=Jd.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");this.#t.Kx(s)}get Mz(){return qd.get(this.#t.lK())}set backgroundColor(t){if(Hd.Me(t),t.length<3)throw new Error("expected 3 elements");Xd.Po(t[0],t[1],t[2]);const s=this.#t,i=s.uK();i.Ho(Xd)||(i.Lo(Xd),s.yq().jJ())}get backgroundColor(){const t=this.#t.uK();return[t.ko(),t.No(),t.Bo()]}set scrollX(t){Hd.te(t);const s=this.#t;s.cK(!0),s.XX(t)}get scrollX(){return this.#t.YX()}set scrollY(t){Hd.te(t);const s=this.#t;s.cK(!0),s.KX(t)}get scrollY(){return this.#t.ZX()}scrollTo(t,s){Hd.te(t),Hd.te(s);const i=this.#t;i.cK(!0),i.XX(t),i.KX(s)}QX(){const t=this.#t;return[t.YX(),t.ZX()]}fK(){this.#t.cK(!1)}getViewport(){return this.#t.dK().il()}pK(t,s,i=0){Hd.te(t),Hd.te(s),Hd.te(i);const e=this.#t,n=e.yq();return e.mK(t-n.o$(),s-n.l$(),i)}gK(t,s,i=0){Hd.te(t),Hd.te(s),Hd.te(i);const e=this.#t,n=e.yq(),[r,h]=e.yK(t,s,i);return[r+n.o$(),h+n.l$()]}SK(t,s,i=0){return Hd.te(t),Hd.te(s),Hd.te(i),this.#t.wK(t,s,i)}vK(t,s,i=0){return Hd.te(t),Hd.te(s),Hd.te(i),this.#t.bK(t,s,i)}get xK(){return this.#t.TK()}}}{let Yd=function(t){let s=Qd.get(t);return s||(s=Kd.jn(Kd.Event.Sf),Qd.set(t,s),s)};0;const Kd=self._s,Zd=self.ks,Qd=new WeakMap,tp=Kd.Is();self.MK=class{#t;constructor(){const t=Kd.T$.x$(tp);this.#t=t;const s={runtime:{value:t.yq().M$(),writable:!1},objectType:{value:t.gX().q$(),writable:!1},Z$:{value:t.Q$().H$(),writable:!1}};t.GK(s),t._K(s),Object.defineProperties(this,s),t.yq().W$(this,t)}static IK(){return Kd.T$.CK()}PK(){const t=Qd.get(this);t&&(t.Hn(),Qd.delete(this))}addEventListener(t,s,i){Zd.le(t),Zd.Ee(s),Yd(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Zd.le(t),Zd.Ee(s),Yd(this).removeEventListener(t,s,i)}dispatchEvent(t){Yd(this).dispatchEvent(t)}destroy(){const t=this.#t,s=t.yq();s.JJ(t),s.hH().qJ()||s.mJ().$J()||s.hH().XJ()||s.YJ()}RK(){const t=this.#t.EK();return t?t.map(t=>t.AJ()):[]}*AK(){const t=this.#t;if(t.FK())for(const s of t.DK())yield s.AJ()}get uid(){return this.#t.LK()}get kK(){return this.#t.NK()}get BK(){return this.#t.UK()}set NH(t){Zd.re(t),this.#t.UH(t)}get NH(){return this.#t.VK()}WK(){this.#t.zK()}get CH(){const t=this.#t;return t.yq().PH(t)}jK(t){return Zd.le(t),this.#t.HK(t)}JK(...t){Zd.Me(t);const s=new Set(t.map(t=>t.toLowerCase())),i=this.#t.qK();return s.isSubsetOf(i)}$K(t){t instanceof Set||(t=new Set(t)),this.#t.XK(t)}YK(){return new Set(this.#t.KK())}signal(t){Zd.le(t);const s=this.#t;s.yq().hH().ZK(s,t)}TH(t){Zd.le(t);const s=this.#t;return s.yq().hH().QK(s,t)}fX(t,...s){return this.objectType.fX(t,[this],...s)}}}{const sp=self._s,ip=self.ks,ep=sp.Is();self.tZ=class extends self.MK{#t;#s=!1;#i=null;#e=!1;#n=null;#r;#h;constructor(t){super(),this.#t=sp.T$.x$(ep),this.#s=!1,this.#i=null,this.#e=!1,this.#n=null,this.#r=t?.sZ,this.#h=t?.iZ}PK(){this.eZ(!1),this.nZ(!1),super.PK()}rZ(){return sp.T$.hZ()}oZ(t){const s=this.#t;s.yq().aZ(t,s)}lZ(t){const s=this.#t;return s.yq().rq(t,s)}uZ(t,s){if(ip.le(t),ip.Ee(s),!this.#r)throw new Error("no DOM component id set");this.#t.yq().cZ(this.#r,t,s)}fZ(t){ip.Me(t);for(const[s,i]of t)this.uZ(s,i)}dZ(t,s){if(ip.le(t),!this.#r)throw new Error("no DOM component id set");this.#t.yq().Vc(this.#r,t,s)}pZ(t,s){if(ip.le(t),!this.#r)throw new Error("no DOM component id set");return this.#t.yq().ZJ(this.#r,t,s)}mZ(t,s){if(!this.#t.yq().qj())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#r,handler:t,data:s,responseId:null});this.dZ(t,s)}eZ(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=this.#t.yq();if(t){if(!this.#i)if(this.#t.yq().gZ()){const t=globalThis.yZ,s=this.Z$;this.#i=()=>{const i=performance.now();this.SZ(),t.wZ(s,performance.now()-i)}}else this.#i=()=>this.SZ();s.Sf().addEventListener("tick",this.#i)}else s.Sf().removeEventListener("tick",this.#i)}vZ(){return this.#s}SZ(){}nZ(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=this.#t.yq();if(t){if(!this.#n)if(this.#t.yq().gZ()){const t=globalThis.yZ,s=this.Z$;this.#n=()=>{const i=performance.now();this.bZ(),t.wZ(s,performance.now()-i)}}else this.#n=()=>this.bZ();s.Sf().addEventListener("tick2",this.#n)}else s.Sf().removeEventListener("tick2",this.#n)}xZ(){return this.#e}bZ(){}TZ(){return[]}MZ(){return null}GZ(t){}_Z(){if(!this.#h)throw new Error("no wrapper component id set");return this.#t.yq().IZ(this.#h)}CZ(t,s){if(ip.le(t),ip.Ee(s),!this.#h)throw new Error("no wrapper component id set");this.#t.yq().PZ(this.#h,t,s)}RZ(t){ip.Me(t);for(const[s,i]of t)this.CZ(s,i)}EZ(t,s){if(!this.#h)throw new Error("no wrapper component id set");this.runtime.tH.AZ(this.#h,t,s)}FZ(t,s){if(!this.#h)throw new Error("no wrapper component id set");return this.runtime.tH.OZ(this.#h,t,s)}}}{let np=function(t){return class s extends t{#t;#s;constructor(t){super(t);const s=rp.T$.x$(cp),i=s.LJ();this.#t=s,this.#s=i,up.set(this,s);const e=[],n=i.DZ();if(n){const t=i.gX().VX().WX().length;for(let s=0;s<t;++s)e.push(new self.zX(n,s))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#s.gJ().dJ()}get LZ(){return this.#s.NJ().eY()}get x(){return this.#s.aT()}set x(t){t=+t;const s=this.#s;isNaN(t)||s.aT()===t||(s.lT(t),s.kZ())}get y(){return this.#s.cT()}set y(t){t=+t;const s=this.#s;isNaN(t)||s.cT()===t||(s.fT(t),s.kZ())}setPosition(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.aT()===t&&i.cT()===s||(i.NZ(t,s),i.kZ())}BZ(){const t=this.#s;return[t.aT(),t.cT()]}offsetPosition(t,s){if(t=+t,s=+s,isNaN(t)||isNaN(s)||0===t&&0===s)return;const i=this.#s;i.UZ(t,s),i.kZ()}set VZ(t){t=+t;const s=this.#s;isNaN(t)||s.WZ()===t||(s.zZ(t),s.kZ())}get VZ(){return this.#s.WZ()}set jZ(t){t=+t;const s=this.#s;isNaN(t)||s.HZ()===t||(s.JZ(t),s.kZ())}get jZ(){return this.#s.HZ()}qZ(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.WZ()===t&&i.HZ()===s||(i.zZ(t),i.JZ(s),i.kZ())}$Z(){const t=this.#s;return[t.WZ(),t.HZ()]}get WN(){return this.#s.dT()}set WN(t){t=+t;const s=this.#t,i=this.#s;isNaN(t)||i.dT()===t||(i.pT(t),s.yq().jJ())}get XZ(){return this.#s.YZ()}get width(){return this.#s.xy()}set width(t){t=+t;const s=this.#s;isNaN(t)||s.xy()===t||(s.ny(t),s.kZ())}get height(){return this.#s.My()}set height(t){t=+t;const s=this.#s;isNaN(t)||s.My()===t||(s.hy(t),s.kZ())}jX(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.xy()===t&&i.My()===s||(i.QR(t,s),i.kZ())}getSize(){const t=this.#s;return[t.xy(),t.My()]}get angle(){return this.#s.$X()}set angle(t){t=rp.Kn(+t);const s=this.#s;isNaN(t)||s.$X()===t||(s.qX(t),s.kZ())}get KZ(){return rp.Qn(this.angle)}set KZ(t){this.angle=rp.Zn(t)}Zl(t){return t?(this.#s.ZZ(ap,lp,!1),ap.il()):this.#s.QZ().il()}tQ(t){return t?(this.#s.ZZ(ap,lp,!1),lp.Jl()):this.#s.sQ().Jl()}iQ(){return this.#s.eQ()}get isVisible(){return this.#s.OY()}set isVisible(t){t=!!t;const s=this.#t,i=this.#s;i.OY()!==t&&(i.AY(t),s.yq().jJ())}get opacity(){return this.#s.FF()}set opacity(t){t=rp.Yn(+t,0,1);const s=this.#t,i=this.#s;isNaN(t)||i.FF()===t||(i.DF(t),s.yq().jJ())}set nQ(t){if(hp.Me(t),t.length<3)throw new Error("expected 3 elements");pp.Po(t[0],t[1],t[2]);const s=this.#t,i=this.#s;i.rQ().Ho(pp)||(i.hQ(pp),s.yq().jJ())}get nQ(){const t=this.#s.rQ();return[t.ko(),t.No(),t.Bo()]}set Mz(t){hp.le(t);const s=fp.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#t;this.#s.Kx(s),i.yq().jJ()}get Mz(){return dp.get(this.#s.lK())}oQ(){this.#s.aQ()}lQ(){this.#s.uQ()}cQ(t){hp.Ne(t,op);const s=this.#t,i=s.yq().lY(t);if(!i)throw new Error("invalid layer");s.LJ().fQ(i)}dQ(t,i){hp.Ne(t,s),this.#s.pQ(up.get(t),i)}get zIndex(){return this.#s.BJ()}get mQ(){return this.#s.gQ()}set mQ(t){this.#s.yQ(!!t)}Ml(t,s){return hp.te(t),hp.te(s),this.#s.SQ(+t,+s)}Nq(t){hp.Ne(t,s);const i=this.#t,e=up.get(t);return i.yq().Aj().Bq(i,e)}Vq(){const t=this.#t,s=t.yq().Aj().Wq(t);return s?s.AJ():null}getParent(){const t=this.#t.wQ();return t?t.AJ():null}vQ(){const t=this.#t.bQ();return t?t.AJ():null}*xQ(){for(const t of this.#t.xQ())yield t.AJ()}TQ(){return this.#t.MQ()}GQ(t){const s=this.#t._Q(t);return s?s.AJ():null}*children(){for(const t of this.#t.children())yield t.AJ()}*IQ(){for(const t of this.#t.IQ())yield t.AJ()}CQ(t,i){hp.Ne(t,s),hp.ye(i),i||(i={});const e=this.#t,n=up.get(t);e.PQ(n,i)}removeChild(t){hp.Ne(t,s);const i=this.#t,e=up.get(t);i.RQ(e)}EQ(){const t=this.#t;t.AQ()&&t.wQ().RQ(t)}FQ(){const t=this.#s;return{OQ:t.DQ(),LQ:t.kQ(),NQ:t.BQ(),UQ:t.VQ(),WQ:t.zQ(),jQ:t.HQ(),JQ:t.qQ(),$Q:t.XQ(),YQ:t.KQ()}}ZQ(t,s){hp.re(t),hp.re(s),this.#s.QQ(t,s)}t0(){const t=this.#s;t.s0(),t.kZ()}i0(t,s,i){hp.re(t),hp.re(s),hp.ge(i);const e=this.#s;e.e0(t,s,i)&&e.kZ()}n0(t,s){let i=NaN,e=NaN,n=NaN,r=NaN,h=NaN;const o=this.#s;if(o.r0()){const a=o.h0().KT(t,s);null!==a&&(i=a.aT(),e=a.cT(),n=a.dT(),r=a.mT(),h=a.yT())}return{x:i,y:e,WN:n,o0:r,a0:h}}l0(){const t=this.#s;if(!t.r0())return[0,0];const s=t.h0();return[s.UT(),s.VT()]}}};0;const rp=self._s,hp=self.ks,op=(self.MK,self.aY),ap=rp.jn(rp.Rect),lp=rp.jn(rp.Cl),up=new WeakMap,cp=rp.Is(),fp=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10],["lighten",11],["darken",12],["multiply",13],["screen",14]]),dp=new Map([...fp.entries()].map(t=>[t[1],t[0]])),pp=rp.jn(rp.To);self.u0=np(self.MK),self.c0=np(self.tZ)}{self._s;const mp=self.ks;self.f0=class extends self.u0{#t;constructor(){super(),this.#t=self.MK.IK()}d0(){return this.#t.m0().p0()}focus(){this.#t.m0().g0()}blur(){this.#t.m0().y0()}S0(t,s){mp.le(t),this.#t.m0().w0(t,s)}}}{let gp=function(t){let s=wp.get(t);return s||(s=yp.jn(yp.Event.Sf),wp.set(t,s),s)};0;const yp=self._s,Sp=self.ks,wp=new WeakMap,vp=yp.Is();self.v0=class{#t;constructor(){const t=yp.T$.x$(vp);this.#t=t;const s={runtime:{value:t.yq().M$(),writable:!1},behavior:{value:t.x0().b0(),writable:!1},T0:{value:t.G0().M0(),writable:!1}};Object.defineProperties(this,s),t.yq().W$(this,t)}static IK(){return yp.T$.CK()}get _0(){return this.#t.I0().AJ()}PK(){const t=wp.get(this);t&&(t.Hn(),wp.delete(this))}addEventListener(t,s,i){Sp.le(t),Sp.Ee(s),gp(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Sp.le(t),Sp.Ee(s),gp(this).removeEventListener(t,s,i)}dispatchEvent(t){gp(this).dispatchEvent(t)}}}{const bp=self._s,xp=(self.ks,bp.Is());self.C0=class{constructor(){const t=bp.T$.x$(xp),s={runtime:{value:t.yq().M$(),writable:!1},behavior:{value:t.x0().b0(),writable:!1},name:{value:t.Pc(),writable:!1}};Object.defineProperties(this,s)}}}{const Tp=self._s,Mp=(self.ks,Tp.Is());self.P0=class{#s;constructor(){const t=Tp.T$.x$(Mp);this.#s=t;const s={runtime:{value:t.yq().M$(),writable:!1},id:{value:t.G$(),writable:!1}};Object.defineProperties(this,s),t.yq().W$(this,t)}tX(){return this.#s.uX().map(t=>t.AJ())}static z$(t){if(!t)return null;const s=Tp.T$.R0(t);return s?s.b0():null}}}{const Gp=self._s,_p=self.ks,Ip=Gp.jn(Gp.To);self.zX=class{#t;constructor(t,s){this.#t=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){return this.#t.WX()[this.index].Pc()}get isActive(){return this.#t.E0(this.index)}set isActive(t){t=!!t;const s=this.#t;s.E0(this.index)!==t&&(s.A0(this.index,t),s.F0(),s.yq().jJ())}setParameter(t,s){_p.re(t),t=Math.floor(+t);const i=this.#t,e=i.O0(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof Gp.To){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Ip.Po(s[0],s[1],s[2]),s=Ip}else if("number"!=typeof s)throw new TypeError("expected number");i.D0(this.index,t,s)&&i.E0(this.index)&&i.yq().jJ()}getParameter(t){_p.re(t),t=Math.floor(+t);const s=this.#t.O0(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof Gp.To?[s.ko(),s.No(),s.Bo()]:s}}}self._s,self.ks;self.L0=class{#t;constructor(t){this.#t=t,Object.defineProperties(this,{name:{value:t.Pc(),writable:!1}})}get speed(){return this.#t.k0()}get N0(){return this.#t.B0()}get U0(){return this.#t.V0()}get W0(){return this.#t.z0()}get j0(){return this.#t.H0()}get frameCount(){return this.#t.J0()}q0(){return this.#t.$0().map(t=>t.X0())}*frames(){for(const t of this.#t.$0())yield t.X0()}};self._s,self.ks;self.mq=class{#s;constructor(t){this.#s=t}static pq(t){return t.#s}get width(){return this.#s.xy()}get height(){return this.#s.My()}getSize(){const t=this.#s;return[t.xy(),t.My()]}Y0(t){return t.K0(this)}Z0(){return this.#s.EE().il()}};{self._s;const Cp=self.ks;self.Q0=class extends self.mq{#s;constructor(t){super(t.t1()),this.#s=t,Object.defineProperties(this,{duration:{value:t.s1(),writable:!1},VZ:{value:t.WZ(),writable:!1},jZ:{value:t.HZ(),writable:!1}})}$Z(){const t=this.#s;return[t.WZ(),t.HZ()]}i1(){return this.#s.e1()}n1(t){return this.h1(t)[0]}o1(t){return this.h1(t)[1]}h1(t){const s=this.#s;let i=null;if("number"==typeof t)i=s.a1(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.l1(t)}return i?[i.aT(),i.cT()]:this.$Z()}u1(){const t=this.#s.c1();return t?t.pu():0}f1(t){return this.d1(t)[0]}m1(t){return this.d1(t)[1]}d1(t){Cp.re(t),t=Math.floor(t);const s=this.#s.c1();if(!s||t<0||t>=s.pu())return[0,0];const i=s.du();return[i[2*t],i[2*t+1]]}get tag(){return this.#s.g1()}}}{let Pp=function(t){const s=Ep.get(t);if(s.S1())throw new Error("timeline/tween was released and is no longer valid");return s};0;self._s;const Rp=self.ks,Ep=new WeakMap;self.w1=class{constructor(t){Ep.set(this,t),t.yq().W$(this,t)}pause(){Pp(this).v1()}resume(){Pp(this).b1()}stop(){Pp(this).Bf()}JK(t){return Pp(this).T1(t)}set time(t){Rp.re(t),Pp(this).M1(t)}get time(){return Pp(this).nW()}set totalTime(t){Rp.re(t),Pp(this).G1(t)}get totalTime(){return Pp(this)._1()}set N0(t){Pp(this).I1(!!t)}get N0(){return Pp(this).C1()}set j0(t){Pp(this).P1(!!t)}get j0(){return Pp(this).R1()}set playbackRate(t){Rp.re(t),Pp(this).E1(t)}get playbackRate(){return Pp(this).A1()}get progress(){const t=Pp(this);return t.nW()/t._1()}get tags(){return Pp(this).F1()}get finished(){return Pp(this).O1()}get D1(){return Pp(this).IsPlaying()}get L1(){return Pp(this).N1()}get B1(){return Ep.get(this).S1()}}}{let Ap=function(t){const s=Fp.get(t);if(s.S1())throw new Error("timeline was released and is no longer valid");return s};0;self._s,self.ks;const Fp=new WeakMap;self.U1=class extends self.w1{constructor(t){super(t),Fp.set(this,t);const s={name:{value:t.Pc(),writable:!1}};Object.defineProperties(this,s)}}}{let Op=function(t){const s=Lp.get(t);if(s.S1())throw new Error("tween was released and is no longer valid");return s};0;self._s;const Dp=self.ks,Lp=new WeakMap,kp=new WeakMap;let Np=null;self.V1=class extends self.w1{constructor(t,s,i){super(t),Np||(Np=i.W1),Lp.set(this,t),s&&kp.set(this,s)}stop(){const t=Op(this);kp.get(this).z1(t)}j1(t){Dp.le(t);const s=self.Wu.oc(Np(t));Op(this).H1(s)}get _0(){const t=Op(this).J1();return t?t.AJ():null}get q1(){return Op(this).X1()}set q1(t){Op(this).Y1(!!t)}get finished(){const t=Op(this);return t.O1().then(()=>new Promise(s=>{t.K1()&&s()}))}get released(){return Op(this).Z1()}get value(){const t=Op(this);if("value"!==t.Q1())throw new Error("not a value tween");return t.s2("value").t2()}}}self._s,self.ks;self.i2=class extends self.b${constructor(){super()}};{const Bp=self._s,Up=self.ks,Vp=Bp.Is();self.e2=class extends self.i2{#t;#i;#s=0;#r=new Map;constructor(t){if(super(),this.#t=Bp.T$.x$(Vp),!t?.sZ)throw new Error("no DOM component ID specified");this.#i=t.sZ,this.n2("elem-focused",t=>t.h2()),this.n2("elem-blurred",t=>{t&&t.o2()})}a2(t){const s=this.#s++;return this.#r.set(s,t),s}l2(t){this.#r.delete(t)}n2(t,s){this.#t.yq().cZ(this.#i,t,t=>{const i=this.#r.get(t.elementId);s(i,t)})}u2(t){Up.Me(t);for(const[s,i]of t)this.u2(s,i)}}}{const Wp=self._s,zp=(self.ks,Wp.Is());self.c2=class extends self.xX{#t;constructor(){super(),this.#t=Wp.T$.x$(zp)}f2(){}d2(){return this.#t.t1().m2()}g2(t){}S2(t){}w2(){}v2(t){}}}{const jp=self._s,Hp=(self.ks,jp.Is());self.b2=class extends self.c0{#t;#n=null;#s=null;constructor(t){super(t),this.#t=jp.T$.x$(Hp)}PK(){if(super.PK(),this.#n){const t=this.#t.yq().Sf();t.removeEventListener("renderercontextlost",this.#n),t.removeEventListener("renderercontextrestored",this.#s),this.#n=null,this.#s=null}}T2(){if(this.#n)return;this.#n=()=>this.M2(),this.#s=()=>this.G2();const t=this.#t.yq().Sf();t.addEventListener("renderercontextlost",this.#n),t.addEventListener("renderercontextrestored",this.#s)}M2(){}G2(){}_2(t){}I2(){return!0}gx(){return!1}}}{const Jp=self._s,qp=(self.ks,Jp.jn(Jp.Rect)),$p=new WeakMap,Xp=Jp.Is();self.C2=class extends self.b2{#t=-1;#s=!0;#r=!1;#e=!1;#i=-.2;#h=Jp.jn(Jp.Rect,0,0,-1,-1);#o=0;#a=0;#l=-1;#u=-1;#c=!1;constructor(t){if(!t?.sZ)throw new Error("no DOM component ID specified");super(t);const s=Jp.T$.x$(Xp);$p.set(this,s),this.#t=this.Z$.a2(this);const i=s.yq().IJ();this.#o=i.P2(),this.#a=i.R2(),this.eZ(!0)}PK(){super.PK(),this.Z$.l2(this.#t),this.E2("destroy"),this.#t=-1,$p.delete(this)}A2(){if($p.get(this).yq().qj())throw new Error("not valid in worker mode");return this.F2("get-element")}E2(t,s){s||(s={}),s.elementId=this.#t,this.dZ(t,s)}F2(t,s){return s||(s={}),s.elementId=this.#t,this.mZ(t,s)}O2(t,s){return s||(s={}),s.elementId=this.#t,this.pZ(t,s)}D2(t){t||(t={});const s=$p.get(this).LJ();t.elementId=this.#t,t.isVisible=s.OY(),t.htmlIndex=s.NJ().L2(),t.htmlZIndex=s.N2(),Object.assign(t,this.B2()),this.#s=!!t.isVisible,this.mZ("create",t),this.U2(!0)}V2(t){t=!!t,this.#s!==t&&(this.#s=t,this.E2("set-visible",{isVisible:t}))}SZ(){this.U2(!1)}W2(){const t=$p.get(this).yq().IJ().z2();return"Android"===Jp.Ks.Zs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}U2(t){const s=$p.get(this);if(s.kJ())return;const i=s.LJ(),e=i.NJ(),n=i.QZ();let[r,h]=e.yK(n.Za(),n.Qa()),[o,a]=e.yK(n.tl(),n.sl());const l=s.yq().IJ(),u=l.c$(),c=l.d$();if(!i.OY()||!e.OY())return void this.V2(!1);if(!this.W2()&&(o<=0||a<=0||r>=u||h>=c))return void this.V2(!1);qp.set(r,h,o,a);const f=l.P2(),d=l.R2(),p=e.L2(),m=i.N2();if(!t&&qp.equals(this.#h)&&this.#o===f&&this.#a===d&&this.#l===p&&this.#u===m)return void this.V2(!0);this.#h.m(qp),this.#o=f,this.#a=d,this.#l=p,this.#u=m,this.V2(!0);let g=null;this.#e&&(g=e.j2()+this.#i),this.E2("update-position",{left:Math.round(this.#h.Za()),top:Math.round(this.#h.Qa()),width:Math.round(this.#h.width()),height:Math.round(this.#h.height()),htmlIndex:p,htmlZIndex:m,fontSize:g})}H2(){this.F2("focus",{focus:!0})}J2(){this.F2("focus",{focus:!1})}h2(){this.#r=!0}o2(){this.#r=!1}q2(){return this.#r}X2(t,s){this.Y2("set-css-style",{prop:Jp.vo(t),val:s})}K2(t,s){this.Y2("set-attribute",{name:t,val:s})}Z2(t){this.Y2("remove-attribute",{name:t})}Q2(){this.#c||(this.#c=!0,Promise.resolve().then(()=>{this.#c=!1,this.E2("update-state",this.B2())}))}B2(){}t3(){return this.#t}}}self._s,self.ks;self.s3=class extends self.P0{constructor(){super()}};self._s,self.ks;self.i3=class extends globalThis.C0{constructor(){super()}f2(){}};{const Yp=self._s,Kp=(self.ks,new WeakMap),Zp=Yp.Is();self.e3=class extends self.v0{#e=!1;#s=!1;#t=!1;constructor(){super(),Kp.set(this,Yp.T$.x$(Zp))}PK(){super.PK(),this.eZ(!1),this.nZ(!1),this.n3(!1),Kp.delete(this)}rZ(){return Yp.T$.hZ()}r3(){}oZ(t){const s=Kp.get(this);s.yq().aZ(t,s.I0(),s.G0())}lZ(t){const s=Kp.get(this);return s.yq().rq(t,s.I0(),s.G0())}eZ(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=Kp.get(this).yq();t?s.h3(this):s.o3(this)}vZ(){return this.#e}SZ(){}nZ(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=Kp.get(this).yq();t?s.a3(this):s.l3(this)}xZ(){return this.#s}bZ(){}n3(t){if(t=!!t,this.#t===t)return;this.#t=t;const s=Kp.get(this).yq();t?s.u3(this):s.c3(this)}f3(){return this.#t}d3(){}TZ(){return[]}MZ(){return null}GZ(t){}}}{self._s;const Qp=self.ks;let tm=null;self.sH=class{constructor(t){tm=t,Object.defineProperties(this,{m3:{value:tm.g3(),writable:!1}})}y3(){tm.jJ()}sq(t){tm.iq(t)}S3(t){return Qp.le(t),tm.IZ(t)}AZ(t,s,i){Qp.le(t),Qp.le(s),Qp.Ge(i),tm.w3(t,s,i)}OZ(t,s,i){return Qp.le(t),Qp.le(s),Qp.Ge(i),tm.v3(t,s,i)}b3(t){return Qp.ue(t),new self.x3(tm,t)}set T3(t){tm.M3(!!t)}get T3(){return tm.G3()}_3(t){tm.I3(!!t)}C3(t){Qp.te(t);const s=tm.P3(t);return s?s.q$():null}}}self._s,self.ks;self.x3=class{#t;#s;#h;#i;#r;#n;constructor(t,s){this.#t=t;const i=t.hH(),e=t.fH();this.#s=e,this.#h=e.bX();const n=t.wH();this.#i=n.R3(),this.#r=n.E3(e);const r=i.A3().E3();this.#n=r,s&&r.F3(s),t.O3(!1)}D3(){const t=this.#t.hH(),s=this.#h,i=this.#n;t.L3(s),this.#s.N3(this.#i,this.#r),t.B3(s),i.U3(i.Gj()+1)}get V3(){return this.#n.W3()}release(){const t=this.#t,s=t.wH(),i=t.hH().A3();t.O3(!0),i.z3(),s.z3()}};{let sm=function(t){return t instanceof ImageBitmap||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas};0;const im=self._s,em=self.ks;let nm=null,rm=null;const hm=["none","back","front"],om=["cw","ccw"];self.j3=class{constructor(t,s){rm=t,nm=s}H3(){nm.WF()}J3(t){nm.UF(t)}q3(){nm.Iv()}X3(){nm.bv()}Y3(){nm.Ov()}setColor(t){nm.OF(t[0],t[1],t[2],t[3])}K3(t,s,i,e){nm.OF(t,s,i,e)}Z3(){nm.LF()}Q3(t){nm.DF(t)}t4(t){nm.Yv(t)}s4(){return nm.Kv()}i4(t){const s=hm.indexOf(t);if(-1===s)throw new Error("invalid cull mode");nm.Lb(s)}e4(){return hm[nm.zF()]}n4(t){const s=om.indexOf(t);if(-1===s)throw new Error("invalid front face winding");nm.kb(s)}r4(){return nm.jF()}rect(t){nm.JF(t.left,t.top,t.right,t.bottom)}h4(t,s,i,e){nm.JF(t,s,i,e)}o4(t){nm.Cl(im.Cl.ql(t))}a4(t,s,i,e,n,r,h,o){nm.Bb(t,s,i,e,n,r,h,o)}l4(t,s){nm.ob(im.Cl.ql(t),im.Rect.el(s))}u4(t,s){nm.XF(im.Cl.ql(t),im.Cl.ql(s))}c4(t,s,i){nm.YF(im.Cl.ql(t),im.Cl.ql(s),i)}f4(t,s,i,e,n,r,h,o,a,l,u,c,f){nm.KF(t,s,i,e,n,r,h,o,a,l,u,c,im.Rect.el(f))}d4(t,s,i,e,n,r,h,o,a,l,u,c,f){nm.ib(t,s,i,e,n,r,h,o,a,l,u,c,im.Cl.ql(f))}m4(t,s,i,e,n,r,h,o,a,l,u,c,f,d){nm.ZF(t,s,i,e,n,r,h,o,a,l,u,c,im.Cl.ql(f),d)}g4(t,s,i,e){nm.rM(t,s,i,e)}y4(t){nm.Nb(t)}line(t,s,i,e){nm.Py(t,s,i,e)}S4(t,s,i,e,n,r){nm.eb(t,s,i,e,n,r)}w4(t,s,i,e){nm.ab(t,s,i,e)}v4(t){nm.fb(im.Rect.el(t))}b4(t){nm.pb(im.Cl.ql(t))}x4(t){nm.bb(t)}T4(){nm.xb()}M4(t){nm._b(t)}G4(){nm.Rb()}_4(t){em.Be(t,self.I4);const s=t?rm.lY(t):null;nm.NF(s)}C4(t,s){const i=self.mq.pq(t);if(!i)throw new Error("invalid IImageInfo");return i.P4(nm,{pM:s?.pM??"clamp-to-edge",mM:s?.mM??"clamp-to-edge",gM:s?.gM??"trilinear",wM:s?.wM??!0})}R4(t){const s=self.mq.pq(t);if(!s)throw new Error("invalid IImageInfo");s.wR()}K0(t){const s=self.mq.pq(t);if(!s)throw new Error("invalid IImageInfo");const i=s.EG();return self.I4.E4(rm,i)}A4(t,s){if(!sm(t))throw new TypeError("invalid texture data");const i=nm.xO(t,{pM:s?.pM??"clamp-to-edge",mM:s?.mM??"clamp-to-edge",gM:s?.gM??"trilinear",wM:s?.wM??!0});return self.I4.E4(rm,i)}F4(t,s,i){em.re(t),em.re(s);const e=nm.vG(t,s,{pM:i?.pM??"clamp-to-edge",mM:i?.mM??"clamp-to-edge",gM:i?.gM??"trilinear",wM:i?.wM??!0});return self.I4.E4(rm,e)}O4(t,s,i){em.Ne(s,self.I4);const e=rm.lY(s);nm.RE(t,e,{bM:i?.bM??!0})}deleteTexture(t){em.Ne(t,self.I4);const s=rm.lY(t);nm.MG(s)}D4(){const t=nm.Qb();return new self.L4(rm,t)}N4(){rm.IJ().B4(nm)}U4(t){em.Ne(t,globalThis.aY),rm.lY(t).V4(nm)}}}{self._s,self.ks;const am=new WeakMap,lm=new WeakMap;self.I4=class{constructor(t,s){am.set(this,{runtime:t,texture:s}),lm.set(s,this),t.W$(this,s),Object.defineProperties(this,{width:{value:s.xy(),writable:!1},height:{value:s.My(),writable:!1}})}static E4(t,s){if(!s)return null;return lm.get(s)||new self.I4(t,s)}}}{let um=function(t){return fm.get(t).W4};0;self._s;const cm=self.ks,fm=new WeakMap;self.L4=class{constructor(t,s){fm.set(this,{runtime:t,W4:s}),t.W$(this,s)}release(){um(this).Hn()}set z4(t){cm.le(t),um(this).IR(t)}get z4(){return um(this).GP()}set j4(t){cm.re(t),um(this).CR(t)}get j4(){return um(this).PR()}set lineHeight(t){cm.re(t),um(this).ER(t)}get lineHeight(){return um(this).AR()}set H4(t){um(this).FR(t)}get H4(){return um(this).OR()}set J4(t){um(this).DR(t)}get J4(){return um(this).LR()}setColor(t){cm.Me(t),this.q4(t[0],t[1],t[2])}q4(t,s,i){um(this).VR(t,s,i)}X4(t){cm.le(t),um(this).Zx(t)}set Y4(t){um(this).WR(t)}get Y4(){return um(this).zR()}set verticalAlign(t){um(this).jR(t)}get verticalAlign(){return um(this).HR()}set K4(t){um(this).JR(t)}get K4(){return um(this).qR()}set Z4(t){um(this).$R(t)}get Z4(){return um(this).XR()}set text(t){cm.le(t),um(this).Wc(t)}get text(){return um(this).YR()}jX(t,s,i){cm.re(t),cm.re(s),cm.re(i),um(this).QR(t,s,i)}Y0(){const{runtime:t,W4:s}=fm.get(this),i=s.EG();return self.I4.E4(t,i)}Z0(){return um(this).EE().il()}Q4(t){cm.Ee(t),um(this).xR=t}t5(){um(this).wR()}get s5(){return um(this).sE()}get i5(){return um(this).eE()}}}{let dm=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return ym.get(i)||""},pm=function(t){return new Promise((s,i)=>{const e=document.createElement("script");e.onload=s,e.onerror=i,e.async=!1,e.type="module",e.src=t,document.head.appendChild(e)})};0;const mm=self._s,gm=new Set(["local","remote"]),ym=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);mm.e5=class extends mm.Wn{constructor(t,s){super();const i=s.exportType;this.Nc=t,this.n5=new Map,this.r5="cordova"===i,this.h5=!!s.isiOSCordova,this.o5=s.swClientId,this.a5=s.supportedAudioFormats||{},this.l5=new Map,this.u5=!1,this.c5=s.scriptFolder,this.f5="",this.d5="",this.p5="",this.m5=s.fileMap||new Map,this.g5=new Map,this.y5=[];const e="html5"===i||"scirra-arcade"===i||"instant-games"===i;this.S5=e?"remote":"local",this.w5=new Map,this.v5=[],this.b5=[],this.x5=!1,this.T5=0,this.M5=0,this.G5=0,this._5=!1,this.I5=mm.jn(mm.Qd,()=>this.C5(),50),this.P5=mm.jn(mm.jd,Math.max(mm.hardwareConcurrency,8)),this.R5=mm.jn(mm.jd,20),this.E5=new self.uq(this)}Hn(){for(const t of this.w5.values())t.Hn();this.w5.clear(),mm.wh(this.b5),this.Nc=null}yq(){return this.Nc}A5(){return this.c5}F5(t){this.f5=t}Iq(){return this.f5}O5(t){this.d5=t}D5(){return this.d5}L5(t){this.p5=t}k5(){return this.p5}N5(t){this.y5=t}Lq(){return this.y5}eo(t,s){return s=s||this.S5,mm.Kh(t)?"playable-ad-single-file"===this.Nc.s$()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):"local"===s?this.P5.Bu(()=>mm.eo(t)):this.R5.Bu(()=>mm.eo(t)):mm.eo(t)}no(t){return mm.Kh(t)?"playable-ad-single-file"===this.Nc.s$()?mm.ho(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.S5?this.P5.Bu(()=>mm.no(t)):this.R5.Bu(()=>mm.no(t)):mm.no(t)}so(t){return mm.Kh(t)?"playable-ad-single-file"===this.Nc.s$()?mm.oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.S5?this.P5.Bu(()=>mm.so(t)):this.R5.Bu(()=>mm.so(t)):mm.so(t)}async io(t){const s=await this.so(t);return JSON.parse(s)}Gq(t){let s=this.f5+t;return"Gecko"===mm.Ks.ei&&"preview"===this.Nc.s$()&&(s=this.B5(s)),s}Tq(t){return"playable-ad-single-file"===this.Nc.s$()&&mm.Kh(t)?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):t}U5(t){if(mm.Yh(t)||"preview"!==this.Nc.s$()||!this.o5||!t)return t;try{const s=new URL(t,location.href);return s.searchParams.set("__c3_client_id",this.o5),s.toString()}catch(s){return console.warn("Invalid iframe URL: "+t),t}}V5(t,s){return(s?"true":"false")+"|"+t}W5(t){const s=!!t.z5;if(t.j5&&!gm.has(t.j5))throw new Error("invalid load policy");const i=this.V5(t.url,s);let e=this.w5.get(i);return e||(e=mm.jn(mm.H5,this,{url:t.url,size:t.size||0,j5:t.j5||this.S5,z5:s}),this.w5.set(i,e),this.x5||(this.T5+=e.Fu(),this.b5.push(e.J5().then(()=>this.q5(e.Fu())))),e)}X5(t){const s=this.V5(t.Y5(),t.K5());this.w5.delete(s)}async Z5(t){try{await Promise.all(this.b5),this.G5=1,t&&0===this.T5&&this.C5()}catch(t){console.error("Error loading: ",t),this._5=!0,this.C5()}}Q5(){this.x5=!0}t6(){return this._5}q5(t){this.M5+=t,this.I5.pp()}C5(){const t=mm.jn(mm.Event,"loadingprogress");0===this.T5?this.G5=1:this.G5=mm.Yn(this.M5/this.T5,0,1),t.progress=this.G5,this.Nc.Sf().dispatchEvent(t),this.Nc.s6(mm.jn(mm.Event,"loadingprogress"))}aJ(){return this.G5}uJ(){return this.Nc.e6().i6()}n6(t){mm.Mh(this.v5,t),this.v5.length&&this.b5.push(this.r6())}async r6(){const t=[],s=[];for(const[i,e,n]of this.v5)this.T5+=n,t.push(this.h6(i,e,s).then(()=>this.q5(n)));await Promise.all(t),this.Nc.qj()&&s.length>0&&await this.Nc.ZJ("runtime","load-webfonts",{webfonts:s})}async h6(t,s,i){try{let e=this.Tq(s);"Gecko"===mm.Ks.ei&&(t=`'${t}'`),("Gecko"===mm.Ks.ei&&"preview"===this.Nc.s$()||"playable-ad-single-file"===this.Nc.s$())&&(e=this.B5(e));const n=new FontFace(t,`url('${e}')`);this.Nc.qj()?self.fonts.add(n):document.fonts.add(n),await n.load(),this.Nc.qj()&&i.push({name:t,url:e})}catch(s){console.warn(`[C3 runtime] Failed to load web font '${t}': `,s)}}o6(t){return!!this.a5[t]}a6(t,s){this.u5=!!s;for(const[s,i,e]of t)this.l5.set(s,{fileName:s,l6:i.map(t=>({type:t[0],u6:t[1],fullName:s+t[1],fileSize:t[2]})),c6:e})}f6(t){const s=this.l5.get(t);if(!s)return null;let i=null;for(const t of s.l6)if(i||"audio/webm; codecs=opus"!==t.type||(i=t),this.o6(t.type))return t;return i}d6(t){const s=this.f6(t);return s?{url:this.Gq(s.fullName),type:s.type}:null}p6(){if(this.u5){const t=[];for(const s of this.l5.values()){if(s.c6)continue;const i=this.f6(s.fileName);i&&t.push({m6:s.fileName,url:this.Gq(i.fullName),type:i.type,fileSize:i.fileSize})}return t}return[]}g6(t){return"preview"===this.Nc.s$()&&(t=new URL(t,location.href).toString()),this.m5.get(t)||null}B5(t){let s=this.g5.get(t);if(s)return s;const i=this.g6(t);return i?(s=URL.createObjectURL(i),this.g5.set(t,s),s):t}Cj(){return this.E5}async Rq(...t){const s=t.map(t=>this.Tq(t));if(this.Nc.qj())if(1===t.length){const s=t[0];await import(new URL(s,location.href).toString())}else{const s=t.map(t=>`import "${new URL(t,location.href).toString()}";`).join("\n"),i=URL.createObjectURL(new Blob([s],{type:"application/javascript"}));await import(i)}else await Promise.all(s.map(t=>pm(t)))}async Aq(t){if(WebAssembly.compileStreaming){const s=this.Tq(t);return await WebAssembly.compileStreaming(fetch(s))}{const s=await mm.no(t);return await WebAssembly.compile(s)}}async Oq(t){const s=this.Tq(t);return await this.Nc.ZJ("runtime","add-stylesheet",{url:s})}}}{const Sm=self._s;Sm.y6=class extends Sm.Wn{constructor(t,s){super(),this.S6=t,this.Nc=t.yq(),this.w6=s.url||"",this.cU=s.size,this.v6=s.j5,this.b6=s.blob||null,this.x6=!!this.b6,this.RS=null}Hn(){this.RS=null,this.S6=null,this.Nc=null,this.b6=null}Y5(){return this.w6}Fu(){return this.cU}J5(){return"local"===this.v6||this.b6?(this.x6=!0,Promise.resolve()):(this.RS||(this.RS=this.S6.eo(this.w6,this.v6).then(t=>(this.x6=!0,this.RS=null,this.b6=t,t)).catch(t=>{console.error("Error loading resource: ",t),this.RS=null})),this.RS)}T6(){return this.x6}M6(){return this.b6?Promise.resolve(this.b6):this.RS?this.RS:this.S6.eo(this.w6,this.v6)}}}{const wm=self._s,vm=new wm.jd,bm=new Set;wm.H5=class extends wm.y6{constructor(t,s){super(t,s),this.G6=null,this._6=null,this.jp=0,this.I6=-1,this.C6=-1,this.P6=!!s.z5,bm.add(this)}Hn(){if(0!==this.jp)throw new Error("released image asset which still has references");this.S6.X5(this),this.G6=null,bm.delete(this),super.Hn()}static R6(){for(const t of bm)t.G6=null,t._6=null,t.jp=0}P4(t,s){return s=s||{},this.jp++,this._6?Promise.resolve(this._6):(this.G6||(s.yM=this.Nc.IJ().E6(),this.G6=this.A6(t,s)),this.G6)}async A6(t,s){try{const i=await this.M6();return 0===this.jp?(this.G6=null,null):await vm.Bu(async()=>{const e=await t.TO(i,s);return this.G6=null,0===this.jp?(t.MG(e),null):(this._6=e,this.I6=e.xy(),this.C6=e.My(),this._6)})}catch(t){throw console.error("Failed to load texture: ",t),t}}wR(){if(this.jp<=0)throw new Error("texture released too many times");this.jp--,0===this.jp&&this._6&&(this._6.Px().MG(this._6),this._6=null)}F6(){this.jp++}O6(){return this.jp}D6(){this.jp--}EG(){return this._6}xy(){return this.I6}My(){return this.C6}K5(){return this.P6}async L6(){const t=await this.M6();return wm.Ri.ImageBitmap?await createImageBitmap(t):await wm.lo(t)}}}{let xm=function(t,s){return t.LJ().k6()-s.LJ().k6()};0;const Tm=self._s;self.assert;Tm.N6=class extends Tm.Wn{constructor(t,s,i){super(),this.B6=t,this.Pa=s,this.Ra=i,this.U6=[],this.V6=!0,this.W6=new Set,this.z6=!1}Hn(){Tm.wh(this.U6),this.W6.clear(),this.B6=null}Bf(){Tm.wh(this.U6),this.V6=!0,this.W6.clear(),this.z6=!1}j6(){this.V6=!1}Ru(){return!this.U6.length||!(this.U6.length>this.W6.size)&&(this.H6(),!0)}J6(t){if(this.W6.has(t))return this.W6.delete(t),void(0===this.W6.size&&(this.z6=!1));this.U6.push(t),this.V6=1===this.U6.length}Kf(t){this.W6.add(t),this.z6=!0,this.W6.size>=50&&this.H6()}H6(){this.z6&&(this.U6.length!==this.W6.size?(Tm.Ph(this.U6,this.W6),this.W6.clear(),this.z6=!1):this.Bf())}q6(){this.V6||(this.U6.sort(xm),this.V6=!0)}X6(t){this.H6(),this.q6(),this.U6.length&&t.push(this.U6)}}}{const Mm=self._s;Mm.Y6=class extends Mm.Wn{constructor(t,s){super(),this.K6=t,this.Z6=s,this.Q6=Mm.jn(Mm.Iu)}Hn(){this.Q6.Hn(),this.Q6=null}t8(t,s,i){let e=this.Q6.Hs(t,s);return e||(i?(e=Mm.jn(Mm.N6,this,t,s),this.Q6.Set(t,s,e),e):null)}s8(t){return Math.floor(t/this.K6)}i8(t){return Math.floor(t/this.Z6)}e8(t,s,i){if(s)for(let e=s.Za(),n=s.tl();e<=n;++e)for(let n=s.Qa(),r=s.sl();n<=r;++n){if(i&&i.Ml(e,n))continue;const s=this.t8(e,n,!1);s&&(s.Kf(t),s.Ru()&&this.Q6.Eu(e,n))}if(i)for(let e=i.Za(),n=i.tl();e<=n;++e)for(let n=i.Qa(),r=i.sl();n<=r;++n)s&&s.Ml(e,n)||this.t8(e,n,!0).J6(t)}n8(t,s){let i=this.s8(t.Za());const e=this.i8(t.Qa()),n=this.s8(t.tl()),r=this.i8(t.sl());for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.t8(i,t,!1);e&&e.X6(s)}}r8(t){let s=t.Za();const i=t.Qa(),e=t.tl(),n=t.sl();for(;s<=e;++s)for(let t=i;t<=n;++t){const i=this.t8(s,t,!1);i&&i.j6()}}}}{let Gm=function(t,s){return t.LJ().k6()-s.LJ().k6()},_m=function(t,s){return t.LJ().dT()-s.LJ().dT()};0;const Im=self._s,Cm=(self.assert,new Im.Rect),Pm=new Im.Cl,Rm=[],Em=(new Im.Rect,new Im.Rect,self.hs),Am=Em.ys,Fm=Em.Ss,Om=Em.fs,Dm=Om.create(),Lm=Am.create(),km=Fm.create(),Nm=Am.create(),Bm=Am.create(),Um=Am.create(),Vm=Im.jn(Im.Ca),Wm=(Im.jn(Im.Rect),[]),zm=[],jm=[],Hm={name:"",h8:-1,o8:!1,isVisible:!0,DY:!0,NY:!1,backgroundColor:[1,1,1,1],eK:!0,a8:[1,1],opacity:1,hK:!1,l8:!1,u8:!1,c8:!1,HY:1,Mz:0,WN:0,f8:[],d8:[],p8:[]},Jm=new Map,qm=t=>{if(!t._0.gX().m8())return;const s=t._0.LK();Jm.has(s)&&(Jm.delete(s),Jm.size||t._0.yq().Sf().removeEventListener("instancedestroy",qm))};Im.g8=class extends Im.Wn{constructor(t,s,i){super(),i=Object.assign({},Hm,i),this.y8=t,this.Nc=t.yq(),this.S8=s,this.$n=i.name,this.US=-1,this.w8=!!i.NY,this.v8=-1,this.b8=i.h8,this.x8=!!i.o8,this.T8=!!i.isVisible,this.M8=!!i.DY,this.G8=Im.jn(Im.To),this.G8.Sa(i.backgroundColor),this._8=!!i.eK,this.I8=i.a8[0],this.C8=i.a8[1],this.Jx=Im.jn(Im.To,1,1,1,i.opacity),this.P8=Im.jn(Im.To),this.E8=!!i.hK,this.A8=!!i.l8,this.F8=!!i.u8,this.O8=!!i.c8,this.D8=i.HY,this.Hx=i.Mz,this.L8=null,this.k8=1,this.qx=i.WN,this.N8=0,this.B8=0,this.U8=0,this.V8=!1,this.gA=Im.jn(Im.Rect),this.W8=Im.jn(Im.Rect),this.z8=Im.jn(Im.Rect),this.j8=!0,this.pG=Om.create(),this.H8=!0,this.lz=Om.create(),this.J8=!0,this.q8=Im.jn(Im.qS.KS),this.X8=!0,this.Y8=[],this.K8=i.f8,this.Z8=[],this.Q8=[],this.t7=new Map,this.U6=[],this.s7=!1,this.i7=!1,this.e7=!1;const e=this.Nc.IJ();this.n7=Im.jn(Im.r7,this,i.d8),this.bj=Im.jn(Im.qS.yW,e.h7(),{hW:(t,s)=>{const i=s.dj(),n=i.wO();t.Zx(i.o7()),t.IO(n),t.CO(n),e.a7(n)},aW:t=>this.VX().l7(t)}),this.u7=!0,this.c7=!0,this.f7=null,this.d7=[],this.p7=!1,this.m7=Im.jn(Im.Rect,0,0,-1,-1),this.g7=Im.jn(Im.Rect,0,0,-1,-1),this.y7=new self.aY(this),this.S7=Im.jn(Im.Event.Sf),this.w7(),this.v7()&&(this.f7=Im.jn(Im.Y6,this.Nc.Xj(),this.Nc.Kj())),this.b7=i.p8.map(t=>Im.g8.x7(this.y8,this,t))}T7(){for(const t of this.K8){const s=this.Nc.M7(t[1]);this.y8.G7(s),s._7()||(s.I7(t),s.C7(this.US)),this.Z8.push(t),this.t7.set(t[2],t)}Im.Mh(this.Y8,this.Z8),this.K8=null}static x7(t,s,i){return Im.jn(Im.g8,t,s,{name:i[0],h8:i[2],isVisible:i[3],DY:i[13],NY:i[19],backgroundColor:i[4].map(t=>t/255),eK:i[5],a8:[i[6],i[7]],opacity:i[8],hK:i[9],l8:i[17],u8:i[18],c8:i[10],HY:i[11],Mz:i[12],WN:i[16],f8:i[14],d8:i[15],p8:i[20]})}Hn(){for(const t of this.b7)t.Hn();Im.wh(this.b7);for(const t of this.U6)this.Nc.JJ(t);Im.wh(this.U6),this.n7.Hn(),this.n7=null,this.bj.Hn(),this.bj=null,this.y7=null,this.S8=null,this.y8=null,this.Nc=null}Jn(){return!this.y8}P7(t){return this.t7.get(t)}R7(t){const s=this.y8.E7(),i=this.Z8;let e=0;for(let n=0,r=i.length;n<r;++n){const r=i[n],h=this.Nc.M7(r[1]);let o=!0;if(!h.A7()||s)if(h.m8()&&Jm.has(r[2]))o=!1;else{const s=this.Nc.F7(r,this,!0);t.push(s),h.m8()&&(Jm.size||this.Nc.Sf().addEventListener("instancedestroy",qm),Jm.set(s.LK(),s),o=!1,this.Q8.push(s.LK()))}o&&(i[e]=i[n],++e)}Im.Sh(i,e),this.Nc.YJ(),this.zJ()}O7(t,s){if(!t.Q$().P$())throw new Error("instance is not of world type");const i=t.LJ();if(i.NJ()!==this)throw new Error("instance added to wrong layer");this.U6.push(t),0!==i.dT()&&(this.e7=!0),s&&this.v7()&&t.LJ().kZ(),this.zJ(t)}D7(t){this.U6.includes(t)||(this.U6.push(t),0!==t.LJ().dT()&&(this.e7=!0),this.zJ(t))}L7(t,s){const i=t.LJ();if(i.NJ()!==this)throw new Error("instance added to wrong layer");this.U6.unshift(t),0!==i.dT()&&(this.e7=!0),this.zJ(t),s&&this.v7()&&t.LJ().kZ()}k7(t,s){const i=this.U6.indexOf(t);i<0||(s&&this.v7()&&t.LJ().N7(),this.U6.splice(i,1),this.zJ(t),this.B7())}U7(){this.e7=!0}B7(){0===this.U6.length&&(this.e7=!1)}V7(t){if(t){const t=new Set;for(const s of this.U6){const i=s.LJ().k6();i>=0&&t.add(i)}let s=-1;for(const i of this.U6){const e=i.LJ();if(!(e.k6()>=0)){for(++s;t.has(s);)++s;e.W7(s)}}}this.U6.sort(Gm)}z7(){}j7(){for(const t of this.U6)t.gX().m8()||this.Nc.JJ(t);this.Nc.YJ(),Im.wh(this.U6),this.e7=!1,this.zJ()}H7(t,s,i,e,n,r){const h=this.Nc.hH(),o=this.Nc.J7(),a=t.pX(),l=[];for(const u of this.Z8){const c=u[0],f=c[0],d=c[1];if(!s.Ml(f,d))continue;const p=o[u[1]];if(p!==t){if(!a)continue;if(!t.BX(p))continue}let m=n;if(!m){const t=this.Nc.OJ();this.gJ()===t?m=this:(m=t.q7(this.Pc()),m||(m=t.UJ(this.Gj())))}const g=this.Nc.F7(u,m,!1,void 0,void 0,!1,r,void 0,r);r&&m.IX(g);const y=g.LJ();y.UZ(i,e),y.kZ(),h.CX(!0),g.PX(),h.CX(!1),l.push(g)}return l}MX(){return this.U6.length}gJ(){return this.y8}Pc(){return this.$n}X7(t){this.US=t}Gj(){return this.US}Y7(t){this.v8=t}L2(){return this.v8}BY(){return this.w8}UY(t){t=!!t,this.w8!==t&&(this.w8=t,this.y8.K7(),this.Nc.jJ())}Z7(){let t=-1;const s=this.GY();return t=s?s.CY().indexOf(this):this.gJ().Q7().indexOf(this),t}t9(){return this.b8}yq(){return this.Nc}s9(){return this.x8}i9(){for(const t of this._Y())if(t.s9())return!0;return!1}S$(){return this.Nc.S$()}VX(){return this.n7}Mj(){return this.e9(),this.bj}e9(){const t=this.n9();if(!this.u7&&t===this.c7&&!this.bj.uz())return;const s=this.VX().r9();this.bj.cz(s.map(t=>t.Q_()),{uW:s.map(t=>t.Gj()),cW:!t,gW:!0}),this.u7=!1,this.c7=t}F0(){this.VX().F0(),this.u7=!0}v7(){return this.O8&&!this.F8}h9(){return this.f7}o9(){this.p7=!1}OY(){for(const t of this.a9())if(!t.EY())return!1;return!0}EY(){return this.T8}AY(t){t=!!t,this.T8!==t&&(this.T8=t,this.Nc.jJ())}kY(t){this.M8=!!t}LY(){return this.M8}WY(){for(const t of this.a9())if(!t.LY())return!1;return!0}cK(t){if(t=!!t,this.V8!==t){if(this.V8=t,t){const t=this.gJ();this.B8=t.YX(),this.U8=t.ZX()}this.l9(),this.Nc.jJ()}}u9(){return this.V8}XX(t){const s=this.gJ(),i=s.c9(),e=s.f9();t>e&&(t=e),t<i&&(t=i),this.B8!==t&&(this.B8=t,this.u9()&&(this.l9(),this.Nc.jJ()))}KX(t){const s=this.gJ(),i=s.d9(),e=s.p9();t>e&&(t=e),t<i&&(t=i),this.U8!==t&&(this.U8=t,this.u9()&&(this.l9(),this.Nc.jJ()))}YX(){return this.u9()?this.B8:this.gJ().YX()}ZX(){return this.u9()?this.U8:this.gJ().ZX()}dK(){return this.m9(),this.gA}g9(){return this.m9(),this.W8}y9(){return this.m9(),this.z8}S9(){return this.gJ().vY()}Zw(t){return this.Nc.Zw(t)}w9(t,s){const i=this.g9();if(0===t)s.m(i);else{let e=i.hl(),n=i.ol();const r=this.v9(t),h=i.width()/r,o=i.height()/r,[a,l]=this.S9();if(.5!==a||.5!==l){const s=this.b9(),i=this.Nc,r=this.Zw()/s;let h=(a-.5)*i.x9()/r,o=(l-.5)*i.T9()/r;const u=this.$X();0!==u&&(Vm.set(h,o),Vm.rotate(u),h=Vm.Fa(),o=Vm.Da());const c=Im.pr(s,0,t);e+=Im._t(h,0,c),n+=Im._t(o,0,c)}s.set(e-h/2,n-o/2,e+h/2,n+o/2)}}FF(){return this.Jx.Uo()}DF(t){t=Im.Yn(t,0,1),this.Jx.Uo()!==t&&(this.Jx.Do(t),this.w7(),this.Nc.jJ())}w7(){this.P8.m(this.Jx),this.P8.Ko()}o7(){return this.P8}n9(){return this.Jx.qo(1,1,1,1)}qY(){return this.D8}JY(t){this.D8!==t&&(this.D8=t,this.l9(),this.Nc.jJ())}KY(){return this.I8}tK(){return this.C8}M9(t,s){this.I8===t&&this.C8===s||(this.I8=t,this.C8=s,this.l9(),this.Nc.jJ())}YY(t){this.M9(t,this.tK())}QY(t){this.M9(this.KY(),t)}pT(t){this.qx!==t&&(this.qx=t,this.Nc.jJ())}dT(){return this.qx}qX(t){t=Im.Kn(t),this.N8!==t&&(this.N8=t,this.l9(),this.Nc.jJ())}$X(){return Im.Kn(this.y8.$X()+this.N8)}$Y(){return this.N8}G9(){return this.U6.length>0}VJ(){return this.U6}_9(){return this.I9()&&this.F8?(Im.Mh(jm,this.VJ()),jm.sort((t,s)=>this.C9(t,s)),jm):this.VJ()}P9(t){Im.An(t,this._9());for(const s of this.b7)s.OY()&&s.FF()>0&&s.P9(t)}C9(t,s){const i=this.gJ().R9(),e=i[0],n=i[1],r=i[2],h=t.LJ(),o=s.LJ(),a=h.aT()-e,l=h.cT()-n,u=h.dT()-r,c=o.aT()-e,f=o.cT()-n,d=o.dT()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}uK(){return this.G8}rK(){return this._8}nK(t){t=!!t,this._8!==t&&(this._8=t,this.Nc.jJ())}aK(){return this.E8}oK(t){t=!!t,this.E8!==t&&(this.E8=t,this.Nc.jJ())}sK(t){t=!!t,this.A8!==t&&(this.A8=t,this.l9(),this.Nc.jJ())}iK(){return this.A8}E9(){return!this.yq().A9()||!this.A8}I9(){return!this.E9()}F9(){return this.I9()&&this.gJ().O9()}D9(){if(!this.F9())return!1;for(const t of this.b7)if(!t.D9())return!1;return!0}Kx(t){this.Hx!==t&&(this.Hx=t,this.Nc.jJ())}lK(){return this.Hx}L9(){return!this.S8}GY(){return this.S8}k9(t){this.S8=t}CY(){return this.b7}N9(){return this.b7.length>0}B9(t,s=!0){s?this.b7.push(t):this.b7.unshift(t)}U9(t,s,i){let e=this.b7.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.b7.splice(e,0,t)}V9(t){const s=this.b7.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.b7.splice(s,1)}W9(){for(const t of this.b7)if(t.z9())return!0;return!1}*RY(){for(const t of this.b7)yield*t.RY();yield this}*_Y(){let t=this.GY();for(;t;)yield t,t=t.GY()}*a9(){yield this,yield*this._Y()}j9(t){for(const s of this._Y())if(s===t)return!0;return!1}H9(t){return this===t||this.I8===t.I8&&this.C8===t.C8&&this.k8===t.k8&&this.D8===t.D8&&this.N8===t.N8&&this.YX()===t.YX()&&this.ZX()===t.ZX()}J9(){return{parallaxX:this.KY(),parallaxY:this.tK(),scale:this.jY(),scaleRate:this.qY(),angle:this.$Y(),hasOwnScroll:this.u9(),scrollX:this.YX(),scrollY:this.ZX()}}q9(t){this.M9(t.parallaxX,t.parallaxY),this.zY(t.scale),this.JY(t.scaleRate),this.qX(t.angle),this.cK(t.hasOwnScroll),this.XX(t.scrollX),this.KX(t.scrollY),this.m9()}X9(t){0!==t.size&&Im.Ph(this.U6,t)>0&&(this.B7(),this.zJ())}zJ(t){this.s7=!1,this.p7=!1,t&&!t.gX().Q$().E$()||(this.i7=!1)}Y9(){if(!this.s7){if(this.U6.sort(_m),this.v7())for(let t=0,s=this.U6.length;t<s;++t){const s=this.U6[t].LJ();s.W7(t),this.f7.r8(s.K9())}else for(let t=0,s=this.U6.length;t<s;++t)this.U6[t].LJ().W7(t);this.s7=!0}}Z9(){if(this.i7)return;const t=this.y8.Q9(this.L2()).map(t=>[...t.RY()]).flat();let s=0;for(const i of t){for(const t of i.VJ())t.gX().Q$().E$()&&t.LJ().ttt(s++);i.stt()}}stt(){this.i7=!0}itt(){return{isVisible:this.OY(),opacity:this.FF(),isInteractive:this.LY()}}ett(t,s,i){const e=t.LJ(),n=s.LJ();if(e.NJ()!==this||n.NJ()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const r=e.BJ();let h=n.BJ();return r!==h+(i?1:-1)&&(Im.Gh(this.U6,r),r<h&&h--,i&&h++,h===this.U6.length?this.U6.push(t):this.U6.splice(h,0,t),this.zJ(t),!0)}ntt(t,s){const i=[];let e=0,n=0,r=t.length,h=s.length;for(;e<r&&n<h;){const r=t[e],h=s[n];r.LJ().k6()<h.LJ().k6()?(i.push(r),++e):(i.push(h),++n)}for(;e<r;++e)i.push(t[e]);for(;n<h;++n)i.push(s[n]);return i}htt(t){const s=[],i=t.length;for(let e=0;e<i-1;e+=2){const i=t[e],n=t[e+1];s.push(this.ntt(i,n))}return i%2==1&&s.push(t[i-1]),s}ott(t){for(;t.length>1;)t=this.htt(t);return t[0]}att(){return this.Y9(),Im.wh(Rm),this.f7.n8(this.dK(),Rm),Rm.length?1===Rm.length?Rm[0]:this.ott(Rm):[]}z9(){return this.OY()&&this.FF()>0&&this.ltt()}ltt(){if(this.G9()||!this.rK()||this.S7.Tf("beforedraw")||this.S7.Tf("afterdraw"))return!0;for(const t of this.b7)if(t.ltt())return!0;return!1}utt(){return this.aK()||!this.n9()||0!==this.lK()||this.n7.ctt()}ftt(){if(this.utt())return!0;for(const t of this.b7)if(t.ftt())return!0;return!1}wO(){return this.L8}v9(t){if(this.y8.TY())return 1;{const s=this.dtt();return s/(s-t)}}ptt(t){const s=this.Nc.TK();if(this.y8.TY())return s;{const i=this.dtt();return this.Zw()/Math.abs(i-t)*s}}l9(){this.J8=!0,this.X8=!0,this.j8=!0}mtt(t){return this.J8&&(this.gtt(t,this.lz,0,0,null),this.J8=!1),this.lz}b9(t){return this.Zw(t)/this.ytt()}dtt(){return this.F9()?this.gJ().R9()[2]:this.b9()}Stt(){if(this.F9()){const t=this.gJ().R9();return[t[0],t[1],t[2]]}return this.wtt()}wtt(t=0,s=0,i=0){const e=this.Nc,n=this.gJ(),r=e.vtt(),h=e.btt();let o=(this.YX()-r)*this.I8+r,a=(this.ZX()-h)*this.C8+h;e.hJ()&&(o=Math.round(o),a=Math.round(a));let l=o+t,u=a+s;const c=n.TY()?this.Zw(i):this.b9(i),[f,d]=this.S9();if(.5!==f||.5!==d){const t=this.Zw(i)/c;let s=(f-.5)*e.x9()/t,n=(d-.5)*e.T9()/t;const r=this.$X();0!==r&&(Vm.set(s,n),Vm.rotate(r),s=Vm.Fa(),n=Vm.Da()),l+=s,u+=n}return[l,u,c]}gtt(t,s,i,e,n){const r=this.Nc,h=this.gJ();if(this.F9()){Am.m(Nm,h.R9()),Am.m(Bm,h.xtt()),Am.m(Um,h.Ttt());const t=r.vtt(),s=r.btt(),i=Bm[0]-Nm[0],e=Bm[1]-Nm[1],n=Bm[2]-Nm[2];Nm[0]=(Nm[0]-t)*this.I8+t,Nm[1]=(Nm[1]-s)*this.C8+s,Nm[2]*=Math.max(this.I8,this.C8),Bm[0]=Nm[0]+i,Bm[1]=Nm[1]+e,Bm[2]=Nm[2]+n}else{const[t,s,r]=this.wtt(i,e,n);Am.set(Nm,t,s,r),Am.set(Bm,t,s,r-100);const h=this.$X();0===h?Am.set(Um,0,1,0):Am.set(Um,Math.sin(h),Math.cos(h),0)}t.mv(s,Nm,Bm,Um,n||r.T9())}Mtt(){this.H8=!0,this.X8=!0,this.j8=!0}Gtt(t){return this.H8&&(this._tt(t),this.H8=!1),this.pG}_tt(t){const s=this.Nc.IJ(),[i,e]=this.S9();if(this.y8.TY())t.pv(this.pG,s.Itt(),s.Ctt());else if(.5===i&&.5===e)Om.m(this.pG,s.Ptt());else{const n=s.Itt(),r=s.Ctt();t.fv(this.pG,n/r,i,e)}}V4(t,s=!0,i=0,e=0,n=0){s&&t.xF(this.Gtt(t));let r=null;0===i&&0===e&&0===n?r=this.mtt(t):(this.gtt(t,Dm,i,e,n),r=Dm),t.CF(r)}Rtt(t){this.V4(t),t.$v(this.dT())}Ett(t){let s=null;if(t.$b()&&this.Nc.Att()){const i=this.Nc.IJ().Ftt(this);i&&(s=i.eA(),t.OO(s))}return s}Ott(t){if(t.dv()&&this.Nc.Att()){const s=2*(this.Gj()+1);t.bN(s,s+1)}}Dtt(t,s){if(this.S7.Tf(s)){t.bv(),t.NF(null),t.WF(),t.Db(),t.OF(1,1,1,1),t.$v(this.dT()),t.Yv(0);const i=new Im.Event(s);i.tC=this.Nc.IJ()._J(),this.s6(i)}}nM(t,s,i){const e=this.Nc.IJ(),n=this.utt();let r=null;const h=this.Ett(t);if(this.Ott(t),n){const s={gM:this.Nc.CV(),iG:!0,tV:!!t.dv()&&this.Nc.Ltt()};"low"===e.ktt()&&(s.width=e.Itt(),s.height=e.Ctt()),r=this.Nc.Ntt(s),this.L8=r,t.GO(r),this.rK()&&t.fO(0,0,0,0)}else this.L8=s,t.GO(s);if(this.rK()||t.Pu(this.G8),this.y8.Btt(t,this.L8,this.b7,n&&this.rK()),this.Ott(t),this.V4(t),t.$v(this.dT()),t.mO(this.I9()),this.Dtt(t,"beforedraw"),this.ytt()>Number.EPSILON){this.Y9();const s=this.v7()&&0===this.dT()&&!this.e7;this.F9()?this.Utt(t):s?this.Vtt(t):this.Wtt(t,this._9())}this.Dtt(t,"afterdraw"),t.$v(0),t.Yv(0),n&&(t.mO(!1),this.ztt(t,r,s,i)),h&&t.LO(h),this.L8=null}Wtt(t,s){const i=this.dK(),e=this.L8,n=this.gJ().TY(),r=this.gJ().jtt();let h=null;for(let o=0,a=s.length;o<a;++o){const a=s[o];if(a===h)continue;h=a;const l=a.LJ();l.OY()&&l.Htt(i,r,n)&&this.Jtt(a,l,t,e)}}Utt(t){const s=this.L8,i=this.qtt(),e=Wm,n=zm,r=this._9();for(let h=0,o=r.length;h<o;){const a=r[h],l=a.LJ();if(!l.OY()||!l.$tt(i)){++h;continue}(!a.Xtt()||l.Ytt()>0)&&n.push(a);const u=a.LJ().YZ();e.push(a);let c=h+1;for(;c<o;++c){const t=r[c],s=t.LJ();if(s.OY()&&s.$tt(i)){if(s.YZ()!==u)break;t.Xtt()?(s.Ytt()>0&&n.push(t),e.push(t)):n.push(t)}}if(1!==e.length||e[0].Ktt()){this.Ztt(t,e);for(let i=0,e=n.length;i<e;++i){const e=n[i],r=e.LJ();r.Qtt(!0),this.Jtt(e,r,t,s),r.Qtt(!1)}}else{this.Jtt(a,l,t,s);for(let i=0,e=n.length;i<e;++i){const e=n[i];if(e===a)continue;const r=e.LJ();r.NJ().Jtt(e,r,t,s)}}h=c,Im.wh(e),Im.wh(n)}}Ztt(t,s){const i=this.L8;t.RO();for(let i=0,e=s.length;i<e;++i){const e=s[i],n=e.LJ();n.tst(!0),this.sst(e,n,t)}t.EO();for(let e=0,n=s.length;e<n;++e){const n=s[e],r=n.LJ();this.Jtt(n,r,t,i),r.tst(!1)}t.FO()}Vtt(t){const s=this.f7,i=this.g7,e=this.m7,n=this.dK();let r;i.set(s.s8(n.Za()),s.i8(n.Qa()),s.s8(n.tl()),s.i8(n.sl())),this.p7&&i.equals(e)?r=this.d7:(r=this.att(),this.p7=!0,e.m(i)),this.Wtt(t,r),r!==this.d7&&Im.Mh(this.d7,r)}Jtt(t,s,i,e){s.ctt()?this.ist(t,s,i,e):this.sst(t,s,i)}sst(t,s,i){const e=s.est();i.Lv()!==e&&e.Yx(),t.nM(i)}ist(t,s,i,e){this.nst(t,s,i,e,null)&&this.V4(i)}nst(t,s,i,e,n){const r=s.DZ().Mj();return r.bz(i,e,{xz:t,Mz:s.lK(),devicePixelRatio:this.Nc.rst(),time:t.hst(),IB:this.Nc.ost()*this.ytt(),CB:this.$X(),_B:s.QZ(),$z:r.cj()?null:this.ast(s),Pz:n&&n.Pz,Rz:n&&n.Rz,Ez:n&&n.Ez,Az:n&&n.Az,Fz:n&&n.Fz,Oz:n&&n.Oz}),i.$v(this.dT()),r.RF()}ztt(t,s,i,e){const n=this.n7.r9(),r=this.Nc;0===n.length?(t.GO(i),t.bv(),e&&0===this.Hx&&this.n9()?t._O(s):(t.Kx(this.Hx),t.Zx(this.P8),t.IO(s)),t.CO(s),r.a7(s)):this.Mj().bz(t,i,{xz:this,Mz:this.lK(),devicePixelRatio:r.rst(),IB:r.ost()*this.ytt(),CB:this.$X(),_B:this.dK(),$z:null,lW:!0})}jY(){return this.k8}zY(t){this.k8!==t&&(this.k8=t,this.y8.lst(),this.l9(),this.Nc.jJ())}TK(){return this.ytt()*this.Nc.TK()}j2(){return this.ytt()*this.Nc.j2()}ytt(){return(this.k8*this.y8.JX()-1)*this.D8+1}m9(){if(!this.j8)return;this.j8=!1;const t=this.Nc.vtt(),s=this.Nc.btt(),i=(this.YX()-t)*this.I8+t,e=(this.ZX()-s)*this.C8+s,n=this.ytt(),r=this.Nc.x9()/n,h=this.Nc.T9()/n;let o=i-r/2,a=e-h/2;this.Nc.hJ()&&(o=Math.round(o),a=Math.round(a));const l=this.W8;l.set(o,a,o+r,a+h);const u=this.$X();0!==u&&(Cm.m(l),Cm.offset(-l.hl(),-l.ol()),Pm.Yl(Cm,u),Pm.Zl(Cm),Cm.offset(l.hl(),l.ol()),l.m(Cm));const c=this.qx;this.w9(c,this.gA),this.F9()?this.ust(c,this.z8):this.z8.m(this.gA)}ust(t,s){const i=this.Nc.IJ(),e=i.c$(),n=i.d$(),[r,h]=this.mK(0,0,t),[o,a]=this.mK(e,0,t),[l,u]=this.mK(e,n,t),[c,f]=this.mK(0,n,t);let d=Math.min(r,o,l,c),p=Math.min(h,a,u,f),m=Math.max(r,o,l,c),g=Math.max(h,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}mK(t,s,i=0){return this.cst(t,s,i,this.j2())}wK(t,s,i=0){return this.cst(t,s,i,this.TK()*this.S$())}cst(t,s,i,e){const n=this.Nc,r=n.Px(),h=this.ytt(),o=n.x9()/h,a=n.T9()/h,l=km;Fm.set(l,0,0,o,a),t/=e,s=l[3]-s/e;const u=this.Gtt(r),c=this.mtt(r),f=Lm;return Im.qS.YS(t,s,i,c,u,l,f)?[f[0],f[1]]:[NaN,NaN]}fst(t,s){const i=this.k8,e=this.D8,n=this.I8,r=this.C8,h=this.N8,o=this.F9();o&&this.gJ().dst(!1),this.k8=1,this.D8=1,this.I8=1,this.C8=1,this.N8=0,this.l9();const a=this.mK(t,s);return this.k8=i,this.D8=e,this.I8=n,this.C8=r,this.N8=h,this.l9(),o&&this.gJ().dst(!0),a}yK(t,s,i=0){return this.pst(t,s,i,this.j2())}bK(t,s,i=0){return this.pst(t,s,i,this.TK()*this.S$())}pst(t,s,i,e){const n=this.Nc,r=n.Px(),h=this.ytt(),o=n.x9()/h,a=n.T9()/h,l=km;Fm.set(l,0,0,o,a);const u=this.Gtt(r),c=this.mtt(r),f=Lm;return Im.qS.$S(t,s,i,c,u,l,f)?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}mst(t,s){return t*=this.TK()*this.S$(),0!==s&&(t*=this.v9(s)),t}ast(t){const s=t.QZ(),i=t.YZ(),e=t.Ytt(),n=i+e,r=s.Za(),h=s.Qa(),o=s.tl(),a=s.sl();if(this.F9()){if(this.gst(r,h,i)||this.gst(o,h,i)||this.gst(o,a,i)||this.gst(r,a,i))return null;if(e>0&&(this.gst(r,h,n)||this.gst(o,h,n)||this.gst(o,a,n)||this.gst(r,a,n)))return null}else if(n>=this.b9())return null;let[l,u]=this.bK(r,h,i),[c,f]=this.bK(o,a,i);if(0!==this.$X()||e>0||this.F9()){const[t,s]=this.bK(o,h,i),[d,p]=this.bK(r,a,i);if(e>0){const[i,e]=this.bK(r,h,n),[m,g]=this.bK(o,h,n),[y,S]=this.bK(o,a,n),[w,v]=this.bK(r,a,n);let b=Math.min(l,c,t,d,i,m,y,w);c=Math.max(l,c,t,d,i,m,y,w),l=b,b=Math.min(u,f,s,p,e,g,S,v),f=Math.max(u,f,s,p,e,g,S,v),u=b}else{let i=Math.min(l,c,t,d);c=Math.max(l,c,t,d),l=i,i=Math.min(u,f,s,p),f=Math.max(u,f,s,p),u=i}}return Cm.set(l,u,c,f),Cm}qtt(){return this.X8&&(this.yst(),this.X8=!1),this.q8}yst(){const t=this.Nc.Px(),s=this.Gtt(t),i=this.mtt(t);this.q8.rw(i,s)}gst(t,s,i){return this.qtt().ow(t,s,i)}Sst(){return{d:this.s9(),s:this.jY(),a:this.$Y(),v:this.EY(),i:this.LY(),html:this.BY(),bc:this.G8.toJSON(),t:this.rK(),sx:this.B8,sy:this.U8,hosp:this.V8,px:this.KY(),py:this.tK(),c:this.Jx.toJSON(),sr:this.qY(),fx:this.n7.bT(),cg:this.Q8}}wst(t){this.x8=!!t.d,this.k8=t.s,this.N8=t.a,this.T8=!!t.v,this.M8=!t.hasOwnProperty("i")||t.i,this.w8=!!t.html,this.G8.Sa(t.bc),this._8=!!t.t,t.hasOwnProperty("sx")&&(this.B8=t.sx),t.hasOwnProperty("sy")&&(this.U8=t.sy),t.hasOwnProperty("hosp")&&(this.V8=!!t.hosp),this.I8=t.px,this.C8=t.py,this.Jx.Sa(t.c),this.w7(),this.D8=t.sr,Im.Mh(this.Q8,t.cg),Im.Mh(this.Z8,this.Y8);const s=new Set(this.Q8);let i=0;for(let t=0,e=this.Z8.length;t<e;++t)s.has(this.Z8[t][2])||(this.Z8[i]=this.Z8[t],++i);Im.Sh(this.Z8,i),this.n7.xT(t.fx),this.u7=!0}vst(){this.V7(!1),this.zJ(),this.l9(),this.Mtt()}eY(){return this.y7}iH(){return this.S7}s6(t){t.LZ=this.eY(),this.S7.dispatchEvent(t)}IX(t,s=!1,i=!1){if(this.U6.includes(t))return s&&this.U6.sort((t,s)=>(t.LJ().bst()??0)-(s.LJ().bst()??0)),void(i&&this.U6.forEach((t,s)=>t.LJ().W7(s)));if(t.xst()){const s=[...t.IQ()];s.push(t),s.sort((t,s)=>(t.LJ().bst()??0)-(s.LJ().bst()??0));for(const t of s)if(t.FK())for(const i of t.DK()){if(s.includes(i))continue;const t=[...i.IQ()];t.push(i),t.sort((t,s)=>(t.LJ().bst()??0)-(s.LJ().bst()??0)),t&&t.length&&s.splice(s.length,0,...t)}for(const t of s)t.Q$().P$()&&this.O7(t,!0);i&&this.U6.forEach((t,s)=>t.LJ().W7(s))}else{if(t.Q$().P$()&&this.O7(t,!0),!t.FK())return void(i&&this.U6.forEach((t,s)=>t.LJ().W7(s)));for(const s of t.DK()){const t=[...s.IQ()];if(t.push(s),t.sort((t,s)=>(t.LJ().bst()??0)-(s.LJ().bst()??0)),t&&t.length)for(const s of t)s.Q$().P$()&&this.O7(s,!0)}i&&this.U6.forEach((t,s)=>t.LJ().W7(s))}}}}{let $m=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},Xm=function(t,s){rg!==t&&(t.Rtt(s),rg=t)};0;const Ym=self._s,Km=self.yZ,Zm=(self.assert,Ym.jn(Ym.Rect),Ym.jn(Ym.Rect),Ym.jn(Ym.Rect)),Qm=Ym.jn(Ym.To),tg=self.hs.ys,sg=[],ig=[],eg=[],ng=[];let rg=null;Ym.Tst=class extends Ym.Wn{constructor(t,s,i){super(),this.Mst=t,this.Nc=t.yq(),this.$n=i[0],this.Gst=i[1],this._st=i[2],this.Vy=i[1],this.Wy=i[2],this.Ist=!!i[3],this.Cst=!!i[4],this.Pst=i[5],this.Rst=i[6],this.Est=i[7],this.Ast=null,this.b8=i[8],this.US=s,this.B8=0,this.U8=0,this.k8=1,this.N8=0,this.Fst=new Set,this.Ost=new Set,this.Dst=new Set,this.Lst=[],this.kst=[],this.Nst=new Map,this.Bst=new Map,this.Ust=[],this.Vst=!1,this.Wst=tg.create(),this.zst=tg.create(),this.jst=tg.create(),this.Hst=[],this.Jst=[],this.qst=new Map,this.$st=new Map,this.Xst=-1;const e=this.Nc.IJ();this.n7=Ym.jn(Ym.r7,this,i[11]),this.bj=Ym.jn(Ym.qS.yW,e.h7(),{hW:(t,s)=>{const i=s.dj().wO();t.LF(),t.IO(i),t.CO(i),e.a7(i)},aW:t=>this.VX().l7(t)}),this.u7=!0,this.Yst=!1,this.L8=null,this.Kst={},this.Zst=new Map,this.Qst=!0,this.tit=new self.UX(this),this.S7=Ym.jn(Ym.Event.Sf);for(const t of i[9])this.Hst.push(Ym.g8.x7(this,null,t));this.sit();for(const t of this.hY())t.T7();for(const t of i[10]){const s=this.Nc.M7(t[1]);if(!s)throw new Error("missing nonworld object class");s._7()||s.I7(t),this.Ust.push(t),this.G7(s)}}Hn(){for(const t of this.Jst)t.Hn();Ym.wh(this.Jst),this.Dst.clear(),this.Ast=null,this.Mst=null,this.Nc=null}yq(){return this.Nc}Pc(){return this.$n}t9(){return this.b8}Gj(){return this.US}VX(){return this.n7}Mj(){return this.e9(),this.bj}e9(){const t="low"===this.Nc.IJ().ktt();if(!this.u7&&this.Yst===t&&!this.bj.uz())return;const s=this.VX().r9();this.bj.cz(s.map(t=>t.Q_()),{uW:s.map(t=>t.Gj()),fW:t,gW:!0}),this.u7=!1,this.Yst=t}F0(){this.VX().F0(),this.u7=!0}iit(){let t=this.Jst[0].ytt();for(let s=1,i=this.Jst.length;s<i;++s){const i=this.Jst[s];0===i.KY()&&0===i.tK()||(t=Math.min(t,i.ytt()))}return t}eit(){return.5*this.Nc.x9()/this.iit()}nit(){return.5*this.Nc.T9()/this.iit()}c9(){return this.sY()?-1/0:this.eit()}f9(){return this.sY()?1/0:this.xy()-this.eit()}d9(){return this.sY()?-1/0:this.nit()}p9(){return this.sY()?1/0:this.My()-this.nit()}XX(t){const s=this.c9(),i=this.f9();t>i&&(t=i),t<s&&(t=s),this.B8!==t&&(this.B8=t,this.rit(),this.Nc.jJ())}YX(){return this.B8}KX(t){const s=this.d9(),i=this.p9();t>i&&(t=i),t<s&&(t=s),this.U8!==t&&(this.U8=t,this.rit(),this.Nc.jJ())}ZX(){return this.U8}sY(){return this.Ist}lst(){this.XX(this.YX()),this.KX(this.ZX());for(const t of this.Jst)t.u9()&&(t.XX(t.YX()),t.KX(t.ZX()))}SY(t,s){this.Pst===t&&this.Rst===s||(this.Pst=t,this.Rst=s,this.hit()&&(this.oit(),this.rit(),this.Nc.jJ()))}ait(){return this.TY()?.5:this.Pst}lit(){return this.TY()?.5:this.Rst}vY(){return[this.ait(),this.lit()]}jtt(){const t=this.ait(),s=this.lit();return t<0||t>1||s<0||s>1}bY(){this.Cst&&(this.Cst=!1,this.oit(),this.rit(),this.Nc.jJ())}xY(){this.Cst||(this.Cst=!0,this.oit(),this.rit(),this.Nc.jJ())}TY(){return this.Cst}hit(){return!this.TY()}dst(t){t=!!t,this.Vst!==t&&(this.Vst=t,this.rit(),this.Nc.jJ())}O9(){return this.Vst}uit(t,s,i,e,n,r,h,o,a){$m(this.Wst,t,s,i)&&$m(this.zst,e,n,r)&&$m(this.jst,h,o,a)||(tg.set(this.Wst,t,s,i),tg.set(this.zst,e,n,r),tg.set(this.jst,h,o,a),this.cit())}cit(){this.rit(),this.Nc.jJ()}R9(){return this.Wst}xtt(){return this.zst}Ttt(){return this.jst}JX(){return this.k8}HX(t){this.k8!==t&&(this.k8=t,this.rit(),this.lst(),this.Nc.jJ())}qX(t){t=Ym.Kn(t),this.N8!==t&&(this.N8=t,this.rit(),this.Nc.jJ())}$X(){return this.N8}xy(){return this.Vy}ny(t){!isFinite(t)||t<1||(this.Vy=t)}My(){return this.Wy}hy(t){!isFinite(t)||t<1||(this.Wy=t)}fit(){return this.Ast}Q7(){return this.Hst}*hY(){for(const t of this.Hst)yield*t.RY()}rY(){return this.Jst}dit(){return this.Jst.length}NJ(t){return"number"==typeof t?this.UJ(t):this.q7(t.toString())}UJ(t){return t=Ym.Yn(Math.floor(t),0,this.Jst.length-1),this.Jst[t]}q7(t){return this.qst.get(t.toLowerCase())||null}pit(t){return!!this.q7(t)}mit(t){return this.$st.get(t)||null}oit(){for(const t of this.Jst)t.Mtt()}rit(){for(const t of this.Jst)t.l9()}uY(t,s,i){if(this.pit(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=i>=2?s:s.GY(),n=Ym.jn(Ym.g8,this,e,{name:t,h8:Math.floor(1e15*Math.random()),o8:!0});this.git(n,s,i),this.yq().jJ(),this.K7()}fY(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.yit(t),this.git(t,s,i),this.yq().jJ(),this.K7())}pY(t){if(this.yit(t)){const s=this.Nc.hH();s.CX(!0),t.Hn(),s.CX(!1),this.yq().jJ(),this.K7()}}gY(){const t=new Set;for(const s of this.hY())s.s9()&&!s.i9()&&t.add(s);if(0===t.size)return;const s=this.Nc.hH();s.CX(!0);for(const s of t)this.yit(s),s.Hn();s.CX(!1),this.yq().jJ(),this.K7()}git(t,s,i){if(i>=2)if(s){if(s===t||s.j9(t))throw new Error(`cannot move layer '${t.Pc()}' to sub-layer of itself`);s.B9(t,2===i),t.k9(s)}else 2===i?this.Hst.push(t):this.Hst.unshift(t),t.k9(null);else{const e=s.GY();if(e){if(s.j9(t))throw new Error(`cannot move layer '${t.Pc()}' to sub-layer of itself`);e.U9(t,s,0===i),t.k9(e)}else{let e=this.Hst.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");0===i&&++e,this.Hst.splice(e,0,t),t.k9(null)}}}yit(t){const s=t.GY();if(s)return s.V9(t),!0;if(this.Hst.length>1){const s=this.Hst.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this.Hst.splice(s,1),!0}return!1}sit(){this.Jst=[...this.hY()],this.qst.clear(),this.$st.clear();for(let t=0,s=this.Jst.length;t<s;++t){const s=this.Jst[t];s.X7(t),this.qst.set(s.Pc().toLowerCase(),s),this.$st.set(s.t9(),s)}}Sit(){let t=0;for(const s of this.Hst){for(const i of s.RY())i.Y7(t);s.BY()&&t++}}wit(){return this.Hst.at(-1).L2()+1}async K7(){this.sit(),this.Sit(),this.Xst=this.wit()}vit(){return this.Xst}bit(){this.Xst=-1}Q9(t){const s=[];for(const i of this.Hst){const e=i.L2();if(e===t)s.push(i);else if(e>t)break}return s}J9(){return{scrollX:this.YX(),scrollY:this.ZX(),scale:this.JX(),angle:this.$X(),vpX:this.ait(),vpY:this.lit()}}q9(t){this.XX(t.scrollX),this.KX(t.scrollY),this.HX(t.scale),this.qX(t.angle),this.SY(t.vpX,t.vpY)}xit(){let t=this.Hst.filter(t=>t.z9())[0];for(;t;){if(!t.rK())return Qm.Lo(t.uK()),Qm.Do(1),Qm;if(t.utt())return Qm.Co(0,0,0,0),Qm;t=t.CY().filter(t=>t.z9())[0]}return Qm.Co(0,0,0,0),Qm}E7(){return this.Qst}Tit(){return[...this.Fst]}G7(t){if(t.FK())for(const s of t.Git().Mit())this.Fst.add(s);else this.Fst.add(t)}_it(){return[...this.Ost]}Iit(t,s){if(t===this||!s)return Promise.resolve();t&&(Ym.po(this.Ost,t.Ost),t.Ost.clear());const i=[];for(const t of this.Fst)this.Ost.has(t)||(i.push(t.Cit(s)),this.Ost.add(t));return Promise.all(i)}async Pit(t){if(t.pX())throw new Error("cannot load textures for family");const s=this.Nc.Px();if(!s||s.PE()||this.Ost.has(t))return;this.Ost.add(t);const i=t.Cit(s);this.Rit(i),await i,t.Eit(),this.Nc.jJ()}Rit(t){this.Dst.add(t),t.then(()=>this.Dst.delete(t)).catch(()=>this.Dst.delete(t))}Ait(){return Promise.all([...this.Dst])}Fit(t){if(t.pX()||t.MX()>0)throw new Error("cannot unload textures");const s=this.Nc.Px();s&&this.Ost.has(t)&&(this.Ost.delete(t),t.Oit(s))}Dit(t,s){if(t!==this&&s)for(const s of this.Ost)s.m8()||t.Fst.has(s)||(s.Oit(),this.Ost.delete(s))}Lit(){this.Ost.clear()}async kit(t){const s=this.Nc,i=this.Mst,e=s.hH();this.Est&&(this.Ast=e.Nit(this.Est),this.Ast.Bit()),i.Uit(this),this.Vy=this.Gst,this.Wy=this._st,this.B8=s.Xj()/2,this.U8=s.Kj()/2,this.lst(),this.oit(),this.rit(),this.Sit(),await this.Nc.IJ().Vit(this.wit(),!0),this.Wit(t),this.Nc.zit(!0),this.jit(),this.Qst||this.Hit(),this.Jit(this.Lst),this.Jit(this.kst),this.qit(),i.$it(),s.YJ(),this.Nc.zit(!1);const n=this.Nc.Xit();if(await Promise.all(n),Ym.wh(n),!s.Yit()){for(const t of this.Lst)t.Kit();for(const t of this.kst)t.Zit(this.Nst,this.Bst);for(const[t,s]of Object.entries(this.Kst)){const i=this.Nc.P3(parseInt(t,10));i&&!i.pX()&&i.A7()&&Ym.wh(s)}for(const t of this.Lst)t.Qit();for(const t of this.kst)t.Qit();for(const t of this.Lst)t.AQ()||t.tet();for(const t of this.kst)t.AQ()||t.tet()}Ym.wh(this.Lst),Ym.wh(this.kst),this.Nst.clear(),this.Bst.clear(),await Promise.all([...this.Fst].map(t=>t.iet(this.Nc.Px()))),t&&(s.Sf().dispatchEvent(new Ym.Event("beforefirstlayoutstart")),await s.eet(new Ym.Event("beforeprojectstart"))),await this.net(new Ym.Event("beforeanylayoutstart")),s.Sf().dispatchEvent(new Ym.Event("beforelayoutstart")),await this.eet(new Ym.Event("beforelayoutstart")),s.Yit()||await s.rq(Ym.lq.aq.oq.ret,null,null),s.Sf().dispatchEvent(new Ym.Event("afterlayoutstart")),await this.eet(new Ym.Event("afterlayoutstart")),await this.net(new Ym.Event("afteranylayoutstart")),t&&(s.Sf().dispatchEvent(new Ym.Event("afterfirstlayoutstart")),await s.eet(new Ym.Event("afterprojectstart"))),e.het(i),await this.Ait(),this.Qst=!1}Wit(t){for(const t of this.Nc.J7())if(!t.pX()&&t.P$())for(const s of t.uX()){const t=s.LJ(),i=t.NJ(),e=i.Pc(),n=this.q7(e);if(n)t.WJ(n,!0),n.D7(s);else{const e=Ym.Yn(i.Gj(),0,this.Jst.length-1),n=this.Jst[e];t.WJ(n,!0),n.D7(s)}}if(!t)for(const t of this.Jst)t.V7(!1)}jit(){for(const t of this.Jst)t.R7(this.Lst),t.z7()}Hit(){let t=!1;for(const[s,i]of Object.entries(this.Kst)){const e=this.Nc.P3(parseInt(s,10));if(e&&!e.pX()&&e.A7())for(const s of i){let i=null;if(e.P$()&&(i=s.hasOwnProperty("instJson")?this.mit(s.instJson.w.l):this.mit(s.w.l),!i))continue;const n=this.Nc.F7(e,i,!1,0,0,!0);s.hasOwnProperty("instJson")?n.xT(s.instJson):n.xT(s),t=!0,this.kst.push(n),s.hasOwnProperty("instJson")&&(this.Nst.set(n,s),this.Bst.set(s.index,n))}}for(const t of this.Jst)t.V7(!0),t.zJ();t&&(this.Nc.YJ(),this.Nc.oet())}Jit(t){for(const s of t){if(!s.FK())continue;const i=s.LJ(),e=s.NK();for(const n of s.gX().Git().NX()){if(n===s.gX())continue;const r=n.uX();if(r.length>e)s.aet(r[e]);else{let e;e=i?this.Nc.F7(n,i.NJ(),!0,i.aT(),i.cT(),!0):this.Nc.F7(n,null,!0,0,0,!0),this.Nc.YJ(),n.let(),s.aet(e),t.push(e)}}}}qit(){for(const t of this.Ust)this.Nc.M7(t[1]).FK()||this.Nc.F7(t,null,!0)}uet(){const t=[],s=this.Ust;let i=0;for(let e=0,n=s.length;e<n;++e){const n=s[e],r=this.Nc.M7(n[1]);r.m8()?r.FK()&&r.Git().cet()||t.push(this.Nc.F7(n,null,!0)):(s[i]=n,++i)}Ym.Sh(s,i),this.Nc.YJ(),this.Jit(t)}H7(t,s,i,e,n,r,h){if(i)return i.H7(t,s,n,r,e,h);{const i=[];for(const o of this.Jst)i.push(o.H7(t,s,n,r,e,h));return i.flat()}}async fet(){const t=this.Mst;this.Nc.Yit()||(await this.net(new Ym.Event("beforeanylayoutend")),await this.eet(new Ym.Event("beforelayoutend")),await this.Nc.rq(Ym.lq.aq.oq.det,null,null),await this.eet(new Ym.Event("afterlayoutend")),await this.net(new Ym.Event("afteranylayoutend"))),t.pet(!0),this.Nc.hH().met(),this.Qst||this.yet();for(const t of this.Jst)t.j7();for(const t of this.Nc.J7())if(!(t.m8()||t.P$()||t.Q$().I$()||t.pX())){for(const s of t.uX())this.Nc.JJ(s);this.Nc.YJ()}t.pet(!1),t.fJ()===this&&t.Uit(null)}wet(t,s){const i=t.gX().t9().toString();this.Kst.hasOwnProperty(i)||(this.Kst[i]=[]);const e=this.Kst[i],n={index:s,instJson:t.bT(),sceneGraphJson:{children:[]}};e.push(n),this.Zst.set(t,n)}vet(t){const s=this.Zst.get(t);for(const i of t.bet()){const t=this.Zst.get(i);t&&s.sceneGraphJson.children.push({index:t.index,flags:Ym.Tet.xet(i.LJ())})}}yet(){this.Zst.clear();let t=0;for(const s of this.Jst){s.Y9();for(const i of s.VJ()){const s=i.gX();!s.m8()&&s.A7()&&(this.wet(i,t),t++)}}for(const t of this.Jst)for(const s of t.VJ()){const t=s.gX();!t.m8()&&t.A7()&&this.vet(s)}this.Zst.clear()}Met(){this.Kst={},this.Qst=!0}wO(){return this.L8}utt(){const t=this.Nc,s=t.Px().$b();return"low"===t.IJ().ktt()||s&&t.Ltt()||this.n7.ctt()||s&&t.A9()}Get(t){const s=this.Nc.IJ();if(this.utt()){t.GO(null),t.fO(0,0,0,0);const i={gM:this.Nc.CV(),iG:t.dv()||this.Nc.Ltt()||this.n7.ctt(),tV:!!t.dv()&&this.Nc.Ltt()};"low"===s.ktt()&&(i.width=s.Itt(),i.height=s.Ctt()),this.L8=this.Nc.Ntt(i)}else this.L8=null}_et(t){this.Nc.Iet(t)&&(t.mO(!1),t.GO(null),t.bv(),t._O(this.L8))}Cet(t){this.utt()&&(t.mO(!1),this.Pet(t,this.L8))}Ret(t){t.GO(this.L8),t.Pu(this.xit()),this.Nc.A9()&&t.pO();const s=this.Q9(0);this.Btt(t,this.L8,s,!0),t.dv()&&t.bN(0,1),this.Cet(t),this.L8=null}Eet(t,s){let i=null;this.Nc.Iet(t)&&(i=this.L8),t.GO(i),t.fO(0,0,0,0),this.Nc.A9()&&t.pO();const e=this.Q9(s);this.Btt(t,i,e,!0),this._et(t),t.Vb(),this.Nc.IJ().Aet(s)}Btt(t,s,i,e){const n=i.filter(t=>t.z9());for(let i=0,r=n.length;i<r;){const h=n[i];if(h.D9()&&!h.ftt()){sg.push(h);for(let t=i+1;t<r;++t){const s=n[t];if(!s.D9()||s.ftt())break;sg.push(n[t])}if(sg.length>=2||1===sg.length&&sg[0].W9()){this.Fet(t,s,sg),i+=sg.length,Ym.wh(sg);continue}Ym.wh(sg)}h.nM(t,s,e&&0===i),++i}}Pet(t,s){const i=this.n7.r9(),e=this.Nc;0===i.length?(t.GO(null),t.bv(),t._O(s),t.CO(s),e.a7(s)):(Zm.set(0,0,e.x9(),e.T9()),this.Mj().bz(t,null,{xz:this,Mz:3,devicePixelRatio:this.Nc.rst(),IB:this.Nc.ost()*this.JX(),CB:this.$X(),_B:Zm,$z:null,lW:!0}))}Fet(t,s,i){const e=i[0],n=e.Ett(t);e.Ott(t),i[0].rK()||(Qm.Lo(i[0].uK()),Qm.Do(1),t.Pu(Qm)),t.mO(!0);const r=ig,h=eg,o=ng;for(const s of i)s.Y9(),s.P9(r),s.Dtt(t,"beforedraw");for(let i=0,e=r.length;i<e;){const n=r[i],a=n.LJ(),l=a.NJ();if(!a.OY()||!a.$tt(l.qtt())){++i;continue}(!n.Xtt()||a.Ytt()>0)&&o.push(n);const u=n.LJ().YZ();h.push(n);let c=i+1;for(;c<e;++c){const t=r[c],s=t.LJ();if(s.OY()&&s.$tt(s.NJ().qtt())){if(s.YZ()!==u)break;t.Xtt()?(s.Ytt()>0&&o.push(t),h.push(t)):o.push(t)}}if(1!==h.length||h[0].Ktt()){this.Oet(t,s,h);for(let i=0,e=o.length;i<e;++i){const e=o[i],n=e.LJ(),r=n.NJ();n.Qtt(!0),Xm(r,t),r.Jtt(e,n,t,s),n.Qtt(!1)}}else{Xm(l,t),l.Jtt(n,a,t,s);for(let i=0,e=o.length;i<e;++i){const e=o[i];if(e===n)continue;const r=e.LJ(),h=r.NJ();Xm(h,t),h.Jtt(e,r,t,s)}}i=c,Ym.wh(h),Ym.wh(o)}for(const s of i)s.Dtt(t,"afterdraw");n&&t.LO(n),Ym.wh(r),rg=null}Oet(t,s,i){t.RO();for(let s=0,e=i.length;s<e;++s){const e=i[s],n=e.LJ(),r=n.NJ();n.tst(!0),Xm(r,t),r.sst(e,n,t)}t.EO();for(let e=0,n=i.length;e<n;++e){const n=i[e],r=n.LJ(),h=r.NJ();Xm(h,t),h.Jtt(n,r,t,s),r.tst(!1)}t.FO()}Sst(){const t={sx:this.YX(),sy:this.ZX(),s:this.JX(),a:this.$X(),w:this.xy(),h:this.My(),ortho:this.TY(),vpX:this.ait(),vpY:this.lit(),fv:this.Qst,persist:this.Kst,fx:this.n7.bT(),layers:{},dynamicLayers:[]};for(const s of this.Jst)if(s.s9()){const i=s.GY();t.dynamicLayers.push({sid:s.t9(),name:s.Pc(),parentSid:i?i.t9():null,siblingIndex:s.Z7(),data:s.Sst()})}else t.layers[s.t9().toString()]=s.Sst();return t}wst(t){this.B8=t.sx,this.U8=t.sy,this.k8=t.s,this.N8=t.a,this.Vy=t.w,this.Wy=t.h,this.Cst=!!t.ortho,t.hasOwnProperty("vpX")&&(this.Pst=t.vpX),t.hasOwnProperty("vpY")&&(this.Rst=t.vpY),this.Qst=!!t.fv,this.Kst=t.persist,this.n7.xT(t.fx),this.u7=!0;for(const[s,i]of Object.entries(t.layers)){const t=parseInt(s,10),e=this.mit(t);e&&e.wst(i)}if(t.hasOwnProperty("dynamicLayers")){this.gY(),this.Nc.YJ();const s=new Map,i=t.dynamicLayers;for(let t=i.length-1;t>=0;--t){const e=i[t],n=e.sid,r=e.name,h=e.parentSid,o=e.siblingIndex,a=e.data;if(this.sit(),this.pit(r)||this.mit(n))continue;let l,u;if(null===h)l=null,u=this.Hst;else{if(l=this.mit(h),!l)continue;u=l.CY()}const c=Ym.jn(Ym.g8,this,l,{name:r,h8:n,o8:!0});u.push(c);let f=s.get(u);f||(f=[],s.set(u,f)),f.push({LZ:c,Det:o}),c.wst(a)}for(const[t,i]of s){i.sort((t,s)=>t.Det-s.Det);for(const s of i){const i=s.LZ,e=s.Det;let n=t.indexOf(i);t.splice(n,1),t.splice(e,0,i)}}}this.K7(),this.oit(),this.rit()}dJ(){return this.tit}iH(){return this.S7}s6(t){t.layout=this.dJ();const s=this.Nc,i=s.gZ()&&!s.hH().qJ();i&&Km.Let(),this.S7.dispatchEvent(t),i&&Km.ket()}eet(t){return t.layout=this.dJ(),this.S7._f(t)}net(t){return t.layout=this.dJ(),this.Nc.eet(t)}Net(){this.Bet(this.Hst)}Bet(t,s=0){const i=t.slice(0);i.reverse();for(const t of i)console.log(`${"\t".repeat(s)}- ${t.Pc()}`),this.Bet(t.CY(),s+1)}}}{const hg=self._s;hg.Uet=class extends hg.Wn{#s;#i=[];#f=new Map;#a=new Map;#e=null;#t=[];#r=null;#h=0;#d=null;constructor(t){super(),this.#s=t}Hn(){this.#s=null,this.#e=null,this.#r=null,this.#d=null,hg.wh(this.#i),this.#f.clear(),this.#a.clear(),hg.wh(this.#t)}KG(t){const s=hg.jn(hg.Tst,this,this.#i.length,t);this.#i.push(s),this.#f.set(s.Pc().toLowerCase(),s),this.#a.set(s.t9(),s)}yq(){return this.#s}Vet(t){this.#r=t}Wet(){if(this.#r)return this.#r;if(this.#i.length)return this.#i[0];throw new Error("no first layout")}zet(t){return this.#f.get(t.toLowerCase())||null}jet(t){return this.#a.get(t)||null}Het(t){return t=hg.Yn(Math.floor(t),0,this.#i.length-1),this.#i[t]}gJ(t){return"number"==typeof t?this.Het(t):this.zet(t.toString())}SJ(){return this.#i}Uit(t){this.#e=t}fJ(){return this.#e}Jet(t){if(this.#t.includes(t))throw new Error("layout already running");this.#t.push(t)}qet(t){const s=this.#t.indexOf(t);if(-1===s)throw new Error("layout not running");this.#t.splice(s,1)}*$et(){this.#e&&(yield this.#e),this.#t.length&&(yield*this.#t)}Xet(t){return this.#e===t||this.#t.includes(t)}pet(t){if(t)this.#h++;else{if(this.#h<=0)throw new Error("already unset");this.#h--}}$J(){return this.#h>0}bJ(t){this.#d=t}$it(){this.#d=null}vJ(){return!!this.#d}Yet(){return this.#d}Ket(){const t=this.fJ();t&&t.oit()}Zet(){const t=this.fJ();t&&t.rit()}}}{const og=self._s,ag=new RegExp("<(.+?)>","g");og.Qet=class extends og.Wn{constructor(t){super(),this.Nc=t,this.tnt=og.jn(og.snt),this.int=null,this.ent=[],this.nnt=new Map,this.rnt=new Map,this.hnt=new Map,this.ont=[],this.ant=[],this.lnt=[],this.unt=!1,this.cnt=!1,this.fnt=!1,this.dnt=()=>this.pnt(),this.mnt=()=>this.gnt(),this.ynt=()=>this.Snt(),this.wnt=()=>this.vnt(),this.bnt=t=>this.xnt(t._0),this.Tnt=t=>this.Mnt(),this.Gnt=t=>this._nt(),this.Int=t=>this.Cnt(),this.Pnt=[],this.Rnt=0}Hn(){this.Ent(),this.dnt=null,this.mnt=null,this.ynt=null,this.wnt=null,this.bnt=null,this.Gnt=null;for(const t of this.ent)t.v1(),t.Hn();og.wh(this.ent),this.ent=null,this.tnt.Hn(),this.tnt=null,og.wh(this.ont),this.ont=null,og.wh(this.ant),this.ant=null,og.wh(this.lnt),this.lnt=null,this.nnt.clear(),this.nnt=null,this.rnt.clear(),this.rnt=null,this.hnt.clear(),this.hnt=null,og.wh(this.Pnt),this.Pnt=null,this.Nc=null}Ant(){const t=this.Nc.Sf();t.addEventListener("pretick",this.dnt),t.addEventListener("tick2",this.mnt),t.addEventListener("beforelayoutchange",this.ynt),t.addEventListener("layoutchange",this.wnt),t.addEventListener("instancedestroy",this.bnt),t.addEventListener("beforeload",this.Tnt),t.addEventListener("afterload",this.Gnt),t.addEventListener("afterlayoutstart",this.Int)}Ent(){const t=this.Nc.Sf();t.removeEventListener("pretick",this.dnt),t.removeEventListener("tick2",this.mnt),t.removeEventListener("beforelayoutchange",this.ynt),t.removeEventListener("layoutchange",this.wnt),t.removeEventListener("instancedestroy",this.bnt),t.removeEventListener("beforeload",this.Tnt),t.removeEventListener("afterload",this.Gnt),t.removeEventListener("afterlayoutstart",this.Int)}KG(t){this.tnt.Bu(t);const s=og.Ont.Fnt(t,this);this.Bu(s),this.Dnt(s),this.hnt.set(s.Pc(),0)}Lnt(t){const s=this.knt(),i=t.UK(),e=s.Hs(i),n=og.Ont.Lnt(`${i}:${this.hnt.get(i)}`,e,this);return this.Nnt(i),this.Bu(n),this.Nc.gZ()&&globalThis.yZ.Bnt(n),n}Unt(t){return this.hnt.get(t)}Nnt(t){this.hnt.set(t,this.hnt.get(t)+1)}Vnt(){for(const t of this.ent){if(t.Wnt())continue;const s=t.UK();this.Nnt(s)}}znt(){for(const t of this.hnt.keys())this.hnt.set(t,0)}Bu(t){this.ent.push(t),this.nnt.set(t.Pc().toLowerCase(),t)}Kf(t){t.jnt(),t.Wnt()||(og._h(this.ent,t),og._h(this.ont,t),og._h(this.ant,t),og._h(this.lnt,t),this.nnt.delete(t.Pc().toLowerCase()),this.Hnt(t),this.Nc.gZ()&&globalThis.yZ.Jnt(t),t.S1()||t.Hn())}aZ(t){this.Nc.aZ(t,this.int,null)}yq(){return this.Nc}knt(){return this.tnt}qnt(t){this.int=t}$nt(){return this.int}*Xnt(){for(const t of this.ent)yield t}*Ynt(){for(const t of this.ant)yield t}Knt(t,s){this.rnt.has(t)||this.rnt.set(t,new Set),this.rnt.get(t).add(s)}Dnt(t){for(const s of t.Znt())this.Knt(s,t)}Hnt(t){for(const[s,i]of this.rnt.entries())i.has(t)&&(i.delete(t),0===i.size&&this.rnt.delete(s))}Qnt(t){if(this.rnt.has(t))return this.rnt.get(t)}trt(t,s){if(s)for(const i of this.ent)if(s.every(t=>i.srt(t._0,t.trackId))&&i.Pc().includes(t.Pc()))return i}irt(t){return this.nnt.get(t.toLowerCase())||null}ert(t){for(const s of this.ont)if(s.Pc()===t)return s;for(const s of this.ant)if(s.Pc()===t)return s;return null}*nrt(t){if(ag.test(t)){let s;ag.lastIndex=0;const i=new Set;do{if(s=ag.exec(t),s){const t=s[1].split(",");for(const s of t)i.add(s)}}while(s);for(const t of i.values()){const s=this.irt(t);s&&(yield s)}i.clear()}else{const s=this.irt(t);s&&(yield s)}}*rrt(t){for(const s of this.ent)s.T1(t)&&(yield s)}hrt(t){this.ont.includes(t)||this.ont.push(t),this.ort()}art(t){og._h(this.ant,t),this.lrt()}urt(t){this.ant.includes(t)?(t.crt(!0),t.frt(!1),t.drt(!1)):(t.crt(!1),t.frt(!0),t.drt(!1),this.ont.includes(t)||this.ont.push(t)),this.ort()}prt(t){t.crt(!1),t.frt(!1),t.mrt(),og._h(this.ont,t),this.lrt()}grt(t){t.crt(!1),t.frt(!1),this.ant.includes(t)&&(t.drt(!0),this.lnt.push(t),og._h(this.ant,t)),this.ont.includes(t)&&t.drt(!0)}yrt(t){t.crt(!1),t.frt(!1),t.drt(!1),t.E1(1),og._h(this.ant,t)}Srt(t){this.grt(t),t.mrt()}pnt(){const t=this.yq();if(t.Yit())return;if(!this.unt)return;if(this.cnt)return;let s=0;for(t.gZ()&&(s=performance.now()),this.fnt=!0;this.ont.length;){const t=this.ont.pop();t.wrt()?(t.vrt(),this.lnt.push(t)):(t.brt(),this.ant.push(t)),0!==t.xrt()&&(this.Rnt=1)}const i=this.Nc.Trt(),e=this.Nc.Mrt(),n=this.Nc.BH();for(let t=this.ant.length-1;t>=0;t--){const s=this.ant[t];s&&s.Grt(i,n,e)}this.fnt=!1,t.gZ()&&globalThis.yZ._rt(performance.now()-s),0!==this.Rnt&&t.jJ()}gnt(){const t=this.yq();if(t.Yit())return;if(!this.unt)return;if(this.cnt)return;let s,i=0;t.gZ()&&(i=performance.now());for(let t=0,i=this.lnt.length;t<i;t++){const i=this.lnt[t];s||(s=new Set),i.jnt(),this.Irt(i),s.add(i)}if(s){og.Ph(this.lnt,s),this.Rnt=0;for(let t=0,s=this.ant.length;t<s;t++)if(0!==this.ant[t].xrt()){this.Rnt=1;break}}this.lrt(),t.gZ()&&globalThis.yZ._rt(performance.now()-i)}Irt(t){t.S1()||t.Crt()&&t.K1()&&t.Prt()&&t.Rrt()}ort(){this.unt||(this.unt=!0)}lrt(){this.lnt.length||this.ant.length||this.ont.length||this.fnt||(this.unt=!1)}Snt(){for(this.cnt=!0;this.ont.length;)this.prt(this.ont.pop());const t=new Set;for(const s of this.ant)s.Snt()&&(s.jnt(),t.add(s));og.Ph(this.ant,t),t.clear();for(const s of this.lnt)s.Snt()&&(s.jnt(),t.add(s));og.Ph(this.lnt,t),this.lrt();for(const t of this.ent)t.Ert()}vnt(){this.cnt=!1}xnt(t){const s=t.gX(),i=this.Qnt(s);if(i)if(this.Nc.Yit())this.Pnt.push(t);else for(const t of i)t.Wnt()||(t.S1()?this.Kf(t):t.Crt()||(this.Irt(t),this.Kf(t)))}Mnt(){for(const t of this.ont.map(t=>t))this.Irt(t),this.Kf(t);for(const t of this.ant.map(t=>t))this.Irt(t),this.Kf(t)}_nt(){for(const t of this.Pnt)this.xnt(t);og.wh(this.Pnt);for(const t of this.ent)t._nt()}Cnt(){const t=this.Nc.mJ().fJ();if(t)for(const s of this.ent){const i=s.Art();i&&t.Pc()===i&&this.urt(s)}}Sst(){return{timelinesJson:this.Frt(),scheduledTimelinesJson:this.Ort(),playingTimelinesJson:this.Drt(),markedForRemovalTimelinesJson:this.Lrt(),hasRuntimeListeners:this.unt,changingLayout:this.cnt,isTickingTimelines:this.fnt}}wst(t){t&&(this.znt(),this.krt(t.timelinesJson),this.Nrt(t.scheduledTimelinesJson),this.Brt(t.playingTimelinesJson),this.Urt(t.markedForRemovalTimelinesJson),this.unt=!t.hasRuntimeListeners,this.cnt=!!t.changingLayout,this.fnt=!!t.isTickingTimelines,this.Vnt(),this.ort(),this.lrt())}Frt(){return this.ent.map(t=>t.Sst())}krt(t){for(const s of t){let t=this.irt(s.name);if(t)t.wst(s);else{const i=this.Vrt(s);if(!i)continue;const e=this.irt(i);t=this.Lnt(e),t.wst(s)}t.Wrt()||this.Kf(t)}}Vrt(t){const s=t.name.split(":");return s&&2===s.length?s[0]:null}Ort(){return this.zrt(this.ont)}Nrt(t){this.jrt(t,this.ont)}Drt(){return this.zrt(this.ant)}Brt(t){this.jrt(t,this.ant)}Lrt(){return this.zrt(this.lnt)}Urt(t){this.jrt(t,this.lnt)}Hrt(t,s){if(!s)return!1;for(const i of s)if(i===t.Pc())return!0;return!1}zrt(t){return t.map(t=>t.Pc())}jrt(t,s){const i=new Set;for(const e of s)this.Hrt(e,t)||i.add(e);if(og.Ph(s,i),t){const i=t=>s=>s.Pc()===t;for(const e of t){const t=this.irt(e);t&&(s.find(i(e))||s.push(t))}}}}}{const lg=self._s,ug=[0,0],cg=[0,0],fg=[0,0],dg=[0,0,0,0,0],pg=new Array(4),mg=[{x:0,y:0,t:0,vt:0},{x:0,y:0,t:0,vt:0},{x:0,y:0,t:0,vt:0}],gg={x:0,y:0,t:0,vt:0};lg.Jrt=class{constructor(t,s){this.qrt=!1,this.$rt=t,this.Xrt=[];let i=null;if(i=s?this.$rt.Yrt(s):lg.Bh(this.$rt.Krt()),!i)return;const e=i.s2("offsetX"),n=i.s2("offsetY");if(!e||!n)return;this.Zrt=e,this.Qrt=n;const r=e.tht(),h=n.tht();for(let t=1,s=Math.min(r.length,h.length);t<s;++t){const s=r[t],i=(s.sht(),s.iht()),e=h[t],n=(e.sht(),e.iht());i&&"cubic-bezier"===i.eht()&&n&&"cubic-bezier"===n.eht()?this.Xrt.push(lg.jn(lg.nht,i,n,s,e,this.Xrt.length)):(i&&"line"===i.eht()&&n&&n.eht(),this.Xrt.push(lg.jn(lg.rht,s,e,this.Xrt.length)))}this.qrt=!0}Hn(){for(const t of this.Xrt)t.Hn();lg.wh(this.Xrt),this.Xrt=null,this.$rt=null,this.Zrt=null,this.Qrt=null}hht(){return this.qrt}oht(){return this.Xrt}aht(t){const s="relative"===this.Zrt.lht()?t.aT():0,i="relative"===this.Qrt.lht()?t.cT():0;for(const t of this.Xrt)t.aht(s,i)}$S(t,s,i){let e=NaN,n=this.Xrt.length;for(let i=0;i<n;i++){const n=this.Xrt[i];if("cubic-bezier"===n.iI()){const i=n.$S(t,s);(isNaN(e)||i[3]<e)&&(e=i[3],fg[0]=i[2],fg[1]=n.Gj())}}return fg}uht(t,s,i){const e=i.cht;lg.Qi(e[0])||(e[0]=0),lg.Qi(e[1])||(e[1]=1);let n=NaN,r=this.Xrt.length;for(let i=0;i<r;i++){const r=this.Xrt[i];if("cubic-bezier"===r.iI()){const i=r.fht(t,s,e);(isNaN(n)||i[3]<n)&&(n=i[3],fg[0]=i[2],fg[1]=r.Gj())}}return fg}dht(t,s){return this.Xrt[s].dht(t)}pht(t,s){return this.Xrt[s].pht(t)}},lg.nht=class{constructor(t,s,i,e,n){this.US=n;const r=t.mht("cubic-bezier"),h=i.mht("cubic-bezier"),o=s.mht("cubic-bezier"),a=e.mht("cubic-bezier");this.ght=t.yht(),this.Sht=s.yht(),this.wht=t.yht()+r.vht(),this.bht=s.yht()+o.vht(),this.xht=i.yht()+h.Tht(),this.Mht=e.yht()+a.Tht(),this.Ght=i.yht(),this._ht=e.yht(),this.Iht=0,this.Cht=0,this.Pht=0,this.Rht=0,this.Eht=0,this.Aht=0,this.Fht=0,this.Oht=0,this.Dht=0,this.Lht=0,this.kht=0,this.Nht=0,this.Bht=0,this.Uht=0,this.Vht=0,this.Wht=0,this.zht=0,this.jht=0,this.Hht=0,this.Jht=0,this.qht=NaN,this.qrt=!1,this.$ht=100,this.Xht=new Array(this.$ht+1),this.Xht[0]=0,this.Yht=0,this.Kht=[],this.Zht=[];for(let t=0;t<100;t++)this.Zht.push({x:0,y:0,t:0,vt:0});this.Qht()}Hn(){lg.wh(this.Xht),this.Xht=null,lg.wh(this.Kht),this.Kht=null,lg.wh(this.Zht),this.Zht=null}iI(){return"cubic-bezier"}Gj(){return this.US}tot(){return Math.floor(this.Yht/25)}sot(){return 1/this.tot()}aht(t,s){this.iot=t,this.eot=s,this.Xht=new Array(this.$ht+1),this.Xht[0]=0,this.Qht(),this.Iht=this.ght+this.iot,this.Cht=this.Sht+this.eot,this.Pht=this.wht+this.iot,this.Rht=this.bht+this.eot,this.Eht=this.xht+this.iot,this.Aht=this.Mht+this.eot,this.Fht=this.Ght+this.iot,this.Oht=this._ht+this.eot,this.Dht=3*(this.Pht-this.Iht),this.Lht=3*(this.Rht-this.Cht),this.kht=3*(this.Eht-this.Pht),this.Nht=3*(this.Aht-this.Rht),this.Bht=3*(this.Fht-this.Eht),this.Uht=3*(this.Oht-this.Aht),this.Vht=3*(this.Pht-this.Iht),this.Wht=3*(this.Iht+this.Eht-2*this.Pht),this.zht=this.Fht-this.Iht+3*(this.Pht-this.Eht),this.jht=3*(this.Rht-this.Cht),this.Hht=3*(this.Cht+this.Aht-2*this.Rht),this.Jht=this.Oht-this.Cht+3*(this.Rht-this.Aht)}Map(t){if(!this.qrt)return NaN;const s=this.not(t);return cg[0]=this.rot(s),cg[1]=this.hot(s),cg}$S(t,s){const i=this.oot(100),e=this.aot(t,s,i),n=this.lot(t,s,i,e);return dg[0]=n.x,dg[1]=n.y,dg[2]=n.t,dg[3]=n.vt,dg}fht(t,s,i){const e=this.oot(100),n=this.uot(t,s,e,i),r=this.lot(t,s,e,n);return dg[0]=r.x,dg[1]=r.y,dg[2]=r.t,dg[3]=r.vt,dg}dht(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.Dht+e*this.kht+n*this.Bht,h=i*this.Lht+e*this.Nht+n*this.Uht,o=lg.tr(r,h);return ug[0]=r/o,ug[1]=h/o,ug}pht(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.Dht+e*this.kht+n*this.Bht,h=i*this.Lht+e*this.Nht+n*this.Uht;return Math.atan2(h,r)}not(t){if(!this.qrt)return;let s=t*this.Xht[this.$ht],i=0,e=this.$ht,n=0;for(;i<e;)n=i+((e-i)/2|0),this.Xht[n]<s?i=n+1:e=n;this.Xht[n]>s&&n--;const r=this.Xht[n];return r===s?n/this.$ht:(n+(s-r)/(this.Xht[n+1]-r))/this.$ht}rot(t){return this.qrt?self.Wu.rc("cubicbezier")(t,this.ght+this.iot,this.wht+this.iot,this.xht+this.iot,this.Ght+this.iot):NaN}hot(t){return this.qrt?self.Wu.rc("cubicbezier")(t,this.Sht+this.eot,this.bht+this.eot,this.Mht+this.eot,this._ht+this.eot):NaN}oot(t){if(t=t||100,this.Kht.length>=t)return this.Kht;this.Kht=new Array(t),t++;for(let s=0;s<t-1;s++){const i=s/(t-1),e=i**2,n=i**3,r=this.Vht*i,h=this.Wht*e,o=this.zht*n,a=this.jht*i,l=this.Hht*e,u=this.Jht*n,c=this.Iht+r+h+o,f=this.Cht+a+l+u;this.Zht[s].x=c,this.Zht[s].y=f,this.Zht[s].t=i,this.Zht[s].vt=0,this.Kht[s]=this.Zht[s]}return this.Kht}aot(t,s,i,e=null,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.qht))for(let e=0;e<100;e++){const h=i[e],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=e)}else{for(let e=this.qht;e<this.qht+5&&!(e>=i.length);e++){const h=i[e],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=e)}for(let e=this.qht;e>this.qht-5&&!(e<0);e--){const h=i[e],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=e)}}return this.qht=r,r}uot(t,s,i,e,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.qht))for(let h=0;h<100;h++){const o=i[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.vt<n&&(n=o.vt,r=h)}else{for(let h=this.qht;h<this.qht+5&&!(h>=i.length);h++){const o=i[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.vt<n&&(n=o.vt,r=h)}for(let h=this.qht;h>this.qht-5&&!(h<0);h--){const o=i[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.vt<n&&(n=o.vt,r=h)}}return this.qht=r,r}lot(t,s,i,e){let n=i[e],r=1,h=Number.MAX_SAFE_INTEGER;t:do{const r=i.length;let o=0===e?0:e-1,a=e===r-1?r-1:e+1,l=i[o].t,u=(i[a].t-l)/4;if(u<.001)break;pg[0]=i[o];for(let i=1;i<=2;i++){const r=l+i*u,o=r**2,a=r**3,c=this.Vht*r,f=this.Wht*o,d=this.zht*a,p=this.jht*r,m=this.Hht*o,g=this.Jht*a,y=this.Iht+c+f+d,S=this.Cht+p+m+g,w=y-t,v=S-s,b=w*w+v*v;if(b<h){h=b,e=i,gg.x=y,gg.y=S,gg.t=r,gg.vt=b,n=gg;break t}const x=mg[i-1];x.x=y,x.y=S,x.t=r,x.vt=b,pg[i]=x}pg[3]=i[a],i=pg}while(r++<20);return n}Qht(){this.qrt=!0;let t=this.rot(0),s=this.hot(0),i=0;for(let e=1;e<=this.$ht;e++){const n=this.rot(.01*e),r=this.hot(.01*e),h=t-n,o=s-r;i+=lg.tr(h,o),this.Xht[e]=i,t=n,s=r}this.Yht=i}},lg.rht=class{constructor(t,s,i){this.US=i,this.cot=t.yht(),this.fot=s.yht(),this.iot=0,this.eot=0}Hn(){}iI(){return"line"}Gj(){return this.US}aht(t,s){this.iot=t,this.eot=s}aT(){return this.cot+this.iot}cT(){return this.fot+this.eot}}}{const yg=self._s;yg.Ont=class extends yg.Wn{constructor(t,s,i){super(),this.Nc=i.yq(),this.dot=i,this.pot=s,this.$n=t,this.mot=[],this.got=0,this.yot=null,this.Sot=0,this.wot(),this.vot=null,this.bot=null,this.xot=0,this.Tot=0,this.Mot=1,this.Got=0,this._ot=-1,this.Iot=1,this.Cot=!1,this.Pot=!1,this.Rot=!1,this.Eot=!0,this.Aot=!1,this.Fot=!1,this.Oot=-1,this.Dot=!1,this.Lot=!1,this.kot=!1,this.Not=!1,this.Bot=NaN,this.Uot=[""],this.Vot="",this.Wot=!1,this.Rnt=0,this.zot=0,this.jot=null,this.Hot=null}static Fnt(t,s){const i=s.knt(),e=i.Jot(),n=i.Hs(t[e]),r=yg.jn(yg.Ont,t[e],n,s);return r.qot(!0),r}static Lnt(t,s,i){return yg.jn(yg.Ont,t,s,i)}Hn(){if(this.S1())return;const t=this.Nc.Sf();this.dot.prt(this),this.dot.Srt(this);for(const t of this.mot)t.Hn();yg.wh(this.mot),this.mot=null,this.Nc=null,this.dot=null,this.pot=null,this.Aot=!0,this.vot=null,this.bot=null,this.$ot(t)}$ot(t){const s=yg.jn(yg.Event,"timelinestatereleased");s.Xot=this,t.dispatchEvent(s)}iI(){return 0}wot(){for(const t of this.pot.Kot().Yot())this.got=this.mot.push(yg.Zot.KG(this,t))}Qot(){return this.dot}yq(){return this.Nc}Krt(){return this.mot}tat(t,s,i,e){if(!this.zot)return;let n;for(let r=0;r<this.mot.length;r++){let h=this.mot[r];if(t!==h.J1())continue;const o=h.s2(i);o&&s.constructor===o.sat().constructor&&o.lht()===e.lht()&&(n||(n=[]),n.push(o))}return n}Wrt(){return!!this.mot.length}Yrt(t){for(const s of this.mot)if(yg.Ke(s.Q1(),t))return s;return null}iat(t){for(const s of this.mot)if(!s.eat()&&yg.Ke(s.Pc(),t))return s;return null}F3(t){this.$n=t}Pc(){return this.$n}nat(){return this.pot}UK(){return this.pot.Pc()}_1(){return this.pot._1()}G1(t){this.pot.G1(t)}rat(){return this.pot.rat()}hat(t){this.pot.hat(t)}oat(){return this.pot.oat()}aat(t){this.pot.aat(t)}lht(){return this.pot.lht()}lat(t){this.pot.lht(t)}H1(t){for(const s of this.Krt())s.H1(t)}C1(){return this.pot.C1()}I1(t){return this.pot.I1(t)}R1(){return this.pot.R1()}P1(t){return this.pot.P1(t)}V0(){return this.pot.V0()}uat(){return this.Iot}cat(t){return this.pot.cat(t)}E1(t){if(t=Number(t),yg.Qi(t))return this.Mot=t}A1(){return this.Mot}Art(){return this.pot.Art()}fat(){return this.pot.fat()}dat(){return this.pot.dat()}pat(){return this.Got}mat(){return!this.IsPlaying()||this.Mot>0}gat(){return this.IsPlaying()?"playing":this.N1()?"paused":this.K1()?"complete":"other"}O1(){return this.vot||(this.vot=new Promise(t=>{this.bot=t})),this.vot}mrt(){this.vot&&(this.bot(),this.vot=null,this.bot=null)}yat(t){this.Uot=yg.Ont.Sat(t),this.Wot=!0}F1(){return this.Uot}wat(){return this.Wot&&(this.Vot=this.Uot.join(" ")),this.Wot=!1,this.Vot}T1(t){if(!this.Uot)return!1;if(!this.Uot.length)return!1;const s=yg.Ont.Sat(t);return!!s&&!!s.length&&s.every(yg.Ont.vat,this)}bat(){yg.lq.xat&&this.constructor===yg.Ont&&(yg.lq.xat.oq.Tat(this),this.dot.aZ(yg.lq.xat.oq.Mat),this.dot.aZ(yg.lq.xat.oq.Gat),this.dot.aZ(yg.lq.xat.oq._at),this.dot.aZ(yg.lq.xat.oq.Iat),yg.lq.xat.oq.Cat())}Pat(){this.Oot=this.Nc.DH()}Rrt(){this.kot||(this.kot=!0,yg.lq.xat&&this.constructor===yg.Ont&&(yg.lq.xat.oq.Tat(this),this.dot.aZ(yg.lq.xat.oq.Rat),this.dot.aZ(yg.lq.xat.oq.Eat),this.dot.aZ(yg.lq.xat.oq.Aat),this.dot.aZ(yg.lq.xat.oq.Fat),yg.lq.xat.oq.Cat()))}crt(t){this.Cot=t}Oat(){return this.Oot===this.Nc.DH()}IsPlaying(t=!1){return!!this.Oat()||!(!this.Dat()||t)||this.Cot}Lat(){return this.IsPlaying(!0)}N1(){return this.kat()}kat(){return!(this.S1()||this.Dat()||this.Lat()||this.K1())}frt(t){this.Pot=t}Dat(){return this.Pot}Nat(t){this.Eot=t;const s=this.C1(),i=this.R1();if(s||i){if(s&&!i);else if(!s&&i){const t=this.nW();1===this.Got&&(t<=0||t>=this._1())&&(this.Eot=!0)}}else{const t=this.nW();(t<=0||t>=this._1())&&(this.Eot=!0)}}K1(){return this.Eot}S1(){return this.Aot}drt(t){this.Fot=t}wrt(){return this.Fot}Bat(t){this.Dot=t}Uat(){return this.Dot}qot(t){this.Lot=!!t}Wnt(){return this.Lot}Prt(){return this.Rot}nW(){return this.xot}M1(t){if(t=Number(t),!yg.Qi(t))return;const s=this.nW();this.Vat(t),this.Nat(!1),this.K1()||this.Bat(!0),(this.Lat()||this.Dat()||!this.Rot)&&(this.Lat()||this.Dat()||this.Rot?this.Lat()?this.v1():this.Dat()&&(this.dot.prt(this),this.Wat()):this.Wat()),this.zat(),this.jat(this.nW(),!1,!0,!0,s),this.Hat(),this.Rnt&&this.yq().jJ(),this.Jat()}Vat(t){yg.Qi(t)||(t=this._1()),t<0?this.xot=0:t>=this._1()?this.xot=this._1():this.xot=t}qat(t){yg.Qi(t)||(t=this._1()),t<0?this.xot=0:t>=this._1()?this.xot=this._1():this.xot=t;for(const t of this.mot)t.$at()}Jat(){yg.lq.xat&&this.constructor===yg.Ont&&(yg.lq.xat.oq.Tat(this),this.dot.aZ(yg.lq.xat.oq.Xat),this.dot.aZ(yg.lq.xat.oq.Yat),this.dot.aZ(yg.lq.xat.oq.Kat),yg.lq.xat.oq.Cat())}Zat(){if(this.C1())return!0;if(this.R1()&&1===this.Got){if(this.mat()){if(this.nW()>=this._1())return!1}else if(this.nW()<=0)return!1}else if(!this.C1()&&!this.R1())if(this.mat()){if(this.nW()>=this._1())return!1}else if(this.nW()<=0)return!1;return!0}b1(){this.S1()||this.Zat()&&this.Play(!0)}Play(t=!1){return!this.S1()&&!this.Dat()&&(this.Lat()&&this.Oat()?this.Qat():!this.Lat()&&!!(this.K1()||t||this.Uat())&&this.tlt())}Qat(){return this.Bat(!1),this.dot.art(this),this.dot.urt(this),this.O1(),!0}tlt(){return this.Bat(!1),this.dot.urt(this),this.O1(),!0}v1(t=!1){this.S1()||(this.Nat(t),this.dot.grt(this),this.K1()&&this.mrt())}Bf(t=!0,s=!1){if(this.S1())return;if(!this.Lat()&&this.Dat())return this.dot.prt(this);if(this.K1())return;this.v1(!0),this.mat()?this.Vat(0):this.Vat(this._1());const i=this.nW();this.zat(),s?this.slt(i):this.jat(i,!1,!1,!0),t&&this.Jat(),this.Hat(),this.Rnt&&t&&this.yq().jJ()}ilt(){this.Bf(!1,!0)}slt(t){this.jat(t,!1,!1,!0,NaN,!1,!0)}Snt(){return!!this.S1()||!(!this.yq().Yit()&&this.elt())&&(this.dot.yrt(this),this.yq().Yit()||this.ilt(),!0)}Wat(){this.brt(!0)}vrt(){this.brt(!1,!0),this.crt(!1),this.frt(!1)}brt(t=!1,s=!1){if(!this.wrt()||s)if(t){this.kot=!1,this.Rot=!0,this.Not=!0,this.zat();for(const t of this.mot)t.brt();this.Hat()}else if(this.crt(!0),this.frt(!1),this.bat(),this.K1()){this.Oot=-1,0!==this.Got&&(this.Mot=Math.abs(this.Mot)),this.Got=0,this._ot=-1,this.Iot=1,this.Eot=!1,this.kot=!1,this.Rot=!0,this.Not=!0,this.mat()?this.Vat(0):this.Vat(this._1()),this.zat();for(const t of this.mot)t.brt();this.Hat()}else{-1!==this._ot&&(this.Got=this._ot),this.Not=!0,this.kot=!1,this.zat();for(const t of this.mot)t.nlt();this.Hat()}}xrt(){return this.Rnt}zat(){this.zot=0;for(const t of this.mot)t.KE()&&(this.zot=1)}Hat(){this.Rnt=0;for(const t of this.mot)t.rlt(),0===this.Rnt&&1===t.xrt()&&(this.Rnt=1),this.yot||1!==t.hlt()||(this.yot||(this.yot=[]),this.Sot=this.yot.push(t))}Grt(t,s,i){if(this.dat()){if(0===t&&0===this.Bot)return;this.Bot=t,t=i}else{if(0===i&&0===this.Bot)return;this.Bot=i,t=i,s=1}const e=this.xot+this.Tot,n=e+t*s*this.Mot,r=this.pot.olt;n<0?(this.xot=0,this.Tot=-n):n>=r?(this.xot=r,this.Tot=this.xot-n):(this.xot=n,this.Tot=0);let h=!1,o=!1;const a=this.C1(),l=this.R1();let u;a||l?a&&!l?this.Mot>0?this.xot>=r&&(this.qat(0),o=!0):this.xot<=0&&(this.qat(r),o=!0):!a&&l?this.Mot>0?this.xot>=r&&(this.Vat(r),this.E1(-1*this.A1()),o=!0,1===this.Got?this.Iot<this.V0()?(this.Iot++,this.Got=0):h=!0:0===this.Got&&(this.Got=1)):this.xot<=0&&(this.Vat(0),this.E1(-1*this.A1()),o=!0,1===this.Got?this.Iot<this.V0()?(this.Iot++,this.Got=0):h=!0:0===this.Got&&(this.Got=1)):a&&l&&(this.Mot>0?this.xot>=r&&(this.Vat(r),this.E1(-1*this.A1()),o=!0,this.Got++,yg.wrap(this.Got,0,2)):this.xot<=0&&(this.Vat(0),this.E1(-1*this.A1()),o=!0,this.Got++,yg.wrap(this.Got,0,2))):this.Mot>0?this.xot>=r&&(this.Iot<this.V0()?(this.Iot++,this.qat(0),o=!0):(this.Vat(r),h=!0)):this.xot<=0&&(this.Iot<this.V0()?(this.Iot++,this.qat(r),o=!0):(this.Vat(0),h=!0));const c=this.got;if(h){for(u=0;u<c;u++)this.mot[u].llt();return this.v1(!0),void this.Pat()}const f=this.Sot;for(u=0;u<f;u++){const t=this.yot[u],s=t.ult();this.xot-s<0&&e-s>0?t.clt(s):t.clt(this.xot)}if(1===this.zot)for(u=0;u<c;u++){const t=this.mot[u],s=t.ult();this.xot-s<0&&e-s>0?t.wc(s,!0,!1,o,this.Not,!1):t.wc(this.xot,!0,!1,o,this.Not,!1)}else for(u=0;u<c;u++)this.mot[u].wc(this.xot,!0,!1,o,this.Not,!1);if(!this.IsPlaying()&&this.jot){const t=this.jot.nW()+this.jot.dlt().flt().ult(),s=this.xot-t;this.xot-=s,0!==this.Tot&&(this.Tot-=s),this.jot=null}for(u=0;u<f;u++){const t=this.yot[u],s=t.ult();this.xot-s<0&&e-s>0?t.plt(s):t.plt(this.xot)}this.Not&&(this.Not=!1)}mlt(t){this.jot=t}glt(){return this.jot}ylt(t,s,i,e=!1){let n=t;if("number"==typeof s&&!isNaN(s)){const t=this.nW()-i.ult(),r=s-i.ult();t<0&&r>0&&(n=i.ult(),e&&this.Vat(n))}return n}jat(t,s=!1,i=!1,e=!1,n=NaN,r=!1,h=!1){for(const s of this.mot){const e=this.ylt(t,n,s);s.clt(e,i)}for(const r of this.mot){const o=this.ylt(t,n,r,!0);r.wc(o,s,i,e,this.Not,h)}for(const s of this.mot){const e=this.ylt(t,n,s);s.plt(e,i)}this.Not&&r&&(this.Not=!1)}Slt(){const t=this.pot.Kot().wlt(),s=yg.Zot.KG(this,t);return this.got=this.mot.push(s),s}jnt(){if(!this.S1())for(const t of this.mot)t.vlt()}Ert(){for(const t of this.mot)t.Ert()}*uX(){for(const t of this.mot)t.J1()&&(yield t.J1())}blt(){for(const t of this.mot)t.xlt()}Tlt(t,s,i){if(s){if("number"==typeof i&&i>=0){const t=this.mot[i];if(!t)return;return t.Mlt(s),void this.dot.Knt(s.gX(),this)}for(const i of this.mot)if(i.eat()){if(t){if(i.Q1()!==t)continue;i.Mlt(s),this.dot.Knt(s.gX(),this);break}if(!i.Glt()){i.Mlt(s),this.dot.Knt(s.gX(),this);break}}}}srt(t,s){for(const i of this.mot)if(i.eat())if(s){if(s===i.Q1()&&t===i.J1())return!0}else if(t===i.J1())return!0;return!1}Crt(){return this.mot.some(t=>!t.eat()||t._lt())}elt(){return this.mot.some(t=>{if(t.eat()){if(!t._lt())return!1;const s=t.gX();return!!s&&s.m8()}return!1})}s2(t){for(const s of this.Krt())for(const i of s.Ilt())if(i.Clt()===t)return i}Plt(t){for(const s of this.mot)if(t===s.J1())return s;return null}Rlt(t){let s=t?t.split(" "):[];const i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const t of this.Krt())for(const i of t.Elt())if(s.every(t=>i.HK(t)))return i}Znt(){const t=[];for(const s of this.Krt())t.push(s.gX());return t.filter(t=>t)}_nt(){for(const t of this.Krt())t._nt()}Sst(){return{tracksJson:this.Alt(),name:this.$n,playheadTime:this.nW(),playbackRate:this.Mot,pingPongState:this.Got,resumePingPongState:this._ot,currentRepeatCount:this.Iot,isPlaying:this.Cot,isScheduled:this.Pot,initialStateSet:this.Rot,finishedTriggers:this.kot,complete:this.Eot,released:this.Aot,markedForRemoval:this.Fot,completedTick:this.Oot,implicitPause:this.Dot,isTemplate:this.Lot,tags:this.Uot.join(" "),stringTags:this.Vot,tagsChanged:this.Wot,firstTick:this.Not}}wst(t){t&&(this.Flt(t.tracksJson),this.$n=t.name,this.xot=t.playheadTime,this.Mot=t.playbackRate,this.Got=t.pingPongState,this._ot=t.hasOwnProperty("resumePingPongState")?t.resumePingPongState:-1,this.Iot=t.currentRepeatCount,this.Cot=!!t.isPlaying,this.Pot=!!t.isScheduled,this.Rot=!!t.initialStateSet,this.kot=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.Eot=!!t.complete,this.Aot=!!t.released,this.Fot=!!t.markedForRemoval,this.Oot=t.completedTick,this.Dot=!!t.implicitPause,this.Lot=!!t.isTemplate,this.Uot=t.tags.split(" "),this.Vot=t.stringTags,this.Wot=!!t.tagsChanged,this.Not=!!t.firstTick)}Alt(){return this.mot.map(t=>t.Sst())}Flt(t){this.blt(),t.forEach((t,s)=>{this.mot[s].wst(t)}),this.mot.filter(t=>t._lt())}static vat(t){const s=this.F1();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static Sat(t){if(yg.Te(t))return t.slice(0);if(yg.ae(t))return t.split(" ");throw new Error("invalid tags")}Olt(){return this.Hot||(this.Hot=yg.jn(self.U1,this)),this.Hot}}}{const Sg=self._s;Sg.Zot=class extends Sg.Wn{constructor(t,s){super(),this.$rt=t,this.Dlt=s,this.Llt=s.Kot(),this.klt=NaN,this.Nlt=NaN,this.Blt=null,this.Ult=null,this.Vlt=!1,this.HE=s.ult()>0,this.Wlt=!1,this.zlt=!1,this.jlt=NaN,this.Hlt=null,this.Jlt=this.Dlt.dlt().qlt(),this.$lt=[],this.Xlt(),this.Ylt=0,this.Rnt=0,this.Klt=0,this.Zlt=null}static KG(t,s){return Sg.jn(Sg.Zot,t,s)}Hn(){this.Jlt=null;for(const t of this.$lt)t.Hn();Sg.wh(this.$lt),this.$lt=null,this.$rt=null,this.Blt=null,this.Ult=null,this.Dlt=null,this.Hlt=null}Xlt(){for(const t of this.Dlt.tut().Qlt())this.$lt.push(Sg.sut.KG(this,t))}vlt(){for(const t of this.$lt)t.vlt()}Ert(){for(const t of this.$lt)t.Ert();this.Blt=null,this.Ult=null}iut(){return this.$rt}yq(){return this.$rt.yq()}Elt(){return this.Jlt||(this.Jlt=this.Dlt.dlt().qlt()),this.Jlt}Ilt(){return this.$lt}s2(t){for(let s=0;s<this.$lt.length;s++){const i=this.$lt[s];if(i.Clt()===t)return i}}eut(){this.Blt||this.J1()}nut(){return!!this.Blt&&!this.Blt.kJ()}_lt(){if(!this.eat())return!1;if(this.Vlt)return!1;const t=this.rut(),s=this.yq().EJ(t);return!!s&&!s.kJ()}gX(){if(!this.eat())return;const t=this.hut();return-1!==t?this.yq().M7(t):void 0}out(){return this.$rt.Krt().indexOf(this)}xlt(){this.Blt=null,this.klt=NaN,this.Ult=null,this.Nlt=NaN,this.Vlt=!0}Glt(){return!!this.Blt}J1(){if(this.Vlt)return;if(this.Blt&&this.nut())return this.Blt;const t=this.rut();return this.Blt=this.yq().EJ(t),this.Blt}Mlt(t){if(this.Vlt=!1,this.Blt!==t){this.Ert(),this.Blt=t,this.Nlt=t.gX().Gj(),this.klt=t.LK(),this.Ult=t.LJ();for(const s of this.aut()){const i=s.lut,e=s.uut;switch(i.cut()){case"instance-variable":{e.fut();const i=t.gX(),n=i.dut(s.name),r=i.mut(n),h=i.gut(n);r===s.name&&h===s.type&&e.yut(n);break}case"behavior":{const i=s.T0,n=this.gX(),r=t.gX(),h=e.G0(r);if(i&&h){const t=i.Pc();n.Sut(t),r.Sut(t),e.fut(),e.wut(h.t9())}break}}}}}*aut(){for(const t of this.$lt){const s=t.sat(),i=this.gX(),e={lut:t,uut:s};switch(t.cut()){case"world-instance":e.vut=t.Clt();break;case"instance-variable":{const t=s.fut();e.name=i.mut(t),e.type=i.gut(t);break}case"effect":{const t=i.VX(),n=s.but(t);e.xut=n;break}case"behavior":{const t=s.G0(i);e.T0=t;break}case"plugin":e.Z$=i.Q$()}yield e}}LJ(){if(this.Ult&&this.nut())return this.Ult;const t=this.J1();return t&&(this.Ult=t.LJ()),this.Ult}flt(){return this.Dlt}rut(){return isNaN(this.klt)?this.Dlt.rut():this.klt}Tut(t){this.Dlt.Tut(t)}oat(){return this.Dlt.oat()}aat(t){this.Dlt.aat(t)}lht(){return this.Dlt.lht()}Q1(){return this.Dlt.Q1()}ult(){return this.Dlt.ult()}Mut(){return this.Dlt.Mut()}Gut(t){this.Dlt.Gut(t)}lat(t){this.Dlt.lat(t)}H1(t){for(const s of this.Elt())s.H1(t);for(const s of this.Ilt())s.H1(t)}_ut(){return this.Dlt._ut()}Iut(t){this.Dlt.Iut(t)}hut(){return isNaN(this.Nlt)?this.Dlt.hut():this.Nlt}Cut(t){this.Dlt.Cut(t)}Put(t){this.Dlt.Put(t)}Rut(){const t=this.J1();return t&&t.m0().Eut()?t.m0().Rut():this.Dlt.Rut()}Aut(t){this.Dlt.Aut(t)}Fut(){const t=this.J1();return t&&t.m0().Eut()?t.m0().Fut():this.Dlt.Fut()}iI(){return this.Dlt.iI()}Pc(){return this.Dlt.Pc()}eat(){return 0===this.iI()}Out(){return 1===this.iI()}Dut(){return 2===this.iI()}Lut(){return this.Ylt}xrt(){return this.Rnt}hlt(){return this.Klt}KE(){return this.HE}$at(){for(const t of this.$lt)t.$at();const t=this.iut(),s=t.nW();t.mat()?this.Hlt=this.kut(s):this.Hlt=this.Nut(s)}brt(){if(this.eut(),!this.nut()&&this.eat())return;const t=this.iut().mat(),s=t?0:this.Mut();for(const t of this.$lt)t.brt(s),0===this.Ylt&&1===t.Lut()&&(this.Ylt=1),0===this.Rnt&&1===t.xrt()&&(this.Rnt=1);this.Klt=0,this.$lt.some(t=>t.hlt())&&(this.Klt=1),this.Hlt=t?this.kut(s):this.Nut(s),this.Wlt=!1,this.zlt=!1,this.wc(s),this.But(this.Hlt)}Uut(){const t=this.Vut(),s=this.Wut();let i,e;return this.$rt.mat()?(i={nW:()=>t.nW()+this.ult(),F1:()=>t.zut()||"<no tags>"},e={nW:()=>s?s.nW()+this.ult():this.Mut(),F1:()=>s?.zut()||"<no tags>"}):(i={nW:()=>s?s.nW()+this.ult():this.Mut(),F1:()=>s?.zut()||"<no tags>"},e={nW:()=>t.nW()+this.ult(),F1:()=>t.zut()||"<no tags>"}),[i,e]}Vut(){const t=this.$rt.nW()-this.ult();return this.$rt.mat()?this.kut(t):this.Nut(t)}Wut(){return this.$rt.mat()?this.Vut().sht():this.Vut().jut()}nlt(){if(this.eut(),!this.nut()&&this.eat())return;const t=this.$rt.mat(),s=this.$rt.nW()-this.ult();this.Hlt=t?this.kut(s):this.Nut(s);for(const t of this.$lt)t.nlt(s)}llt(){if(!this.iut().K1()&&(this.eut(),(this.nut()||!this.eat())&&!this.HE)){const t=this.$rt.nW();t>=this.ult()+this.Mut()?this.wc(this.Mut(),!0,!1,!0,!1,!1,!0):t<=0&&this.wc(0,!0,!1,!0,!1,!1,!0)}}rlt(){for(let t=0,s=this.$lt.length;t<s;t++){const s=this.$lt[t];s.rlt(),0===this.Ylt&&1===s.Lut()&&(this.Ylt=1),0===this.Rnt&&1===s.xrt()&&(this.Rnt=1)}}clt(t,s=!1){const i=this.$lt.length;for(let e=0;e<i;e++)this.$lt[e].clt(t,s)}wc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){this.Blt||this.J1();const o=this.Blt&&!this.Blt.kJ(),a=0===this.Dlt.Jc;if((o||!a)&&!(r&&a&&this.gX().m8()||(t-=this.ult())<0)){this.Hut(t,s),this.Jut(t,s,n),!this.iut().IsPlaying()&&this.iut().glt()&&(t=this.iut().glt().nW());for(let s=0,n=this.$lt.length;s<n;s++)this.$lt[s].wc(t,i,e,h);this.qut(t,s),0!==this.Ylt&&(this.Ult||(this.Ult=this.Blt.LJ()),this.Ult&&this.Ult.kZ())}}plt(t,s=!1){const i=this.$lt.length;for(let e=0;e<i;e++)this.$lt[e].plt(t,s)}Hut(t,s){if(s&&this.HE&&!this.Wlt){if(this.iut().mat()){if(t<0)return}else if(t>this.Mut())return;for(const t of this.$lt)t.brt();this.Wlt=!0}}qut(t,s){if(s&&this.HE&&!this.zlt)if(this.iut().mat()){if(t>=this.Mut()){for(const t of this.$lt)t.wc(this.Mut(),!1,!0);this.zlt=!0}}else if(t<=0){for(const t of this.$lt)t.wc(0,!1,!0);this.zlt=!0}}Jut(t,s,i){if(this.Zlt=null,i)return;if(!s)return;if(!Sg.lq.xat)return;const e=this.iut();if(e.mat()){const s=this.Hlt.sht(),i=this.Hlt.nW(),n=s?s.nW():e._1();(t<=i||t>=n)&&(this.Hlt=this.Llt.$ut(t,this.Dlt),s&&this.Xut(this.Hlt))}else{if(!this.Llt.Yut(t,this.Dlt))return;this.Hlt||(this.Hlt=this.Llt.Yut(t,this.Dlt));const s=this.Hlt.jut(),i=this.Hlt.nW(),e=s?s.nW():0;(t>=i||t<=e)&&(this.Hlt=this.Llt.Yut(t,this.Dlt),this.Hlt&&this.Xut(this.Hlt))}}kut(t){return this.Llt.Kut(t,this.Dlt)||this.Llt.$ut(t,this.Dlt)}Nut(t){return this.Llt.Kut(t,this.Dlt)||this.Llt.Yut(t,this.Dlt)}Xut(t,s=!1){if(!Sg.lq.xat)return;const i=this.iut(),e=i.Qot();Sg.lq.xat.oq.Tat(i),Sg.lq.xat.oq.Zut(t),e.aZ(Sg.lq.xat.oq.Qut),e.aZ(Sg.lq.xat.oq.Xut),i.IsPlaying()||s||i.mlt(t),Sg.lq.xat.oq.Cat(i),Sg.lq.xat.oq.tct(t),this.Zlt=t}sct(){return this.Zlt}But(t){this.Xut(t,!0)}ict(){return this.Dlt.dlt().ect()}nct(){const t=this.Dlt.tut().rct(),s=Sg.sut.KG(this,t);return this.$lt.push(s),s}hct(t){this.Dlt.dlt().oct(t)}act(t){for(const s of this.$lt)s.act(t)}lct(){for(const t of this.$lt)t.lct()}uct(){if(this.eut(),this.nut()||!this.eat())for(const t of this.$lt)t.uct()}cct(){if(this.eut(),!this.nut()&&this.eat())return;let t=!1;for(const s of this.$lt){const i=s.cct();!t&&i&&(t=!0)}if(t){const t=this.ict();t.M1(this.iut().nW()),t.H1("noease"),t.Iut(!0),t.yat("")}}_nt(){isNaN(this.jlt)||this.fct(this.jlt),this.jlt=NaN}Sst(){const t=this.J1(),s=t?t.LK():this.rut();return{propertyTracksJson:this.dct(),lastKeyframeDataItemJson:this.pct(),initialStateOfNestedSet:this.Wlt,endStateOfNestedSet:this.zlt,instanceUid:s,cleared:this.Vlt}}wst(t){if(t){this.mct(t.propertyTracksJson),this.gct(t.lastKeyframeDataItemJson),this.jlt=t.instanceUid,this.Wlt=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Wlt=t.initialStateOfNestedSet),this.zlt=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.zlt=t.endStateOfNestedSet),this.Vlt=!!t.hasOwnProperty("cleared")&&t.cleared;for(const t of this.$lt)0===this.Ylt&&1===t.Lut()&&(this.Ylt=1),0===this.Rnt&&1===t.xrt()&&(this.Rnt=1);this.Klt=0,this.$lt.some(t=>t.hlt())&&(this.Klt=1)}}pct(){return this.Dlt.dlt().yct(this.Hlt)}dct(){return this.$lt.map(t=>t.Sst())}mct(t){t.forEach((t,s)=>{this.$lt[s].wst(t)})}fct(t){if(!Sg.Qi(t))return;const s=this.yq().EJ(t);s&&this.iut().Tlt(this.Dlt.Q1(),s,this.out())}gct(t){const s=this.Dlt.dlt();this.Hlt=s.Sct(t)}}}{const wg=self._s;wg.sut=class extends wg.Wn{constructor(t,s){super(),this.wct=t,this.vct=s,this.bct=s.tut(),this.Ylt=0,this.Rnt=0,this.Klt=0,this.xct=this.sat(),this.Tct=this.vct.Gct().Mct(),this._ct=null,this.Ict=null}static KG(t,s){return wg.jn(wg.sut,t,s)}Hn(){this.wct=null,this.xct&&(this.xct.Hn(),this.xct=null),this.Tct=null,this.vct=null,this.bct=null}Lut(){return this.Ylt}xrt(){return this.Rnt}hlt(){return this.Klt}Cct(){return!!this.Ict}Pct(t){this.Ict=t}Rct(){return this.Ict}Ect(){return this.wct}Act(){return this.vct}tut(){return this.bct}iut(){return this.wct.iut()}yq(){return this.wct.yq()}J1(){return this.wct.J1()}sat(){if(this.xct)return this.xct;let t;switch(this.vct.cut()){case"behavior":t=new wg.sut.Fct(this);break;case"effect":t=new wg.sut.Oct(this),this.Rnt=1;break;case"instance-variable":t=new wg.sut.Dct(this);break;case"plugin":t=new wg.sut.Lct(this),this.Rnt=1;break;case"world-instance":t=new wg.sut.kct(this),this.Rnt=1,this.Ylt=1;break;case"value":t=new wg.sut.Nct(this);break;case"audio":t=new wg.sut.Bct(this)}return this.xct=t,this.xct}cut(){return this.vct.cut()}Uct(t){this.vct.Uct(t)}Vct(){return this.vct.Wct()}zct(t){this.vct.jct(t)}t2(){return this.sat().Hct()}Clt(){return this.vct.Jct()}qct(t){this.vct.$ct(t)}Xct(){return this.vct.iI()}Yct(t){this.vct.Kct(t)}Zct(){return this.tut().Qct(this.vct).iI()}tft(){return this.vct.tft()}sft(t){this.vct.sft(t)}ift(){return this.vct.ift()}eft(t){this.vct.eft(t)}_ut(){return this.vct._ut()}Iut(t){this.vct.Iut(t)}oat(){return this.vct.oat()}aat(t){this.vct.aat(t)}lht(){return this.vct.lht()}lat(t){this.vct.lat(t)}H1(t){for(const s of this.nft())s.H1(t)}rft(){return this.vct.rft()}nft(){return this.Tct||(this.Tct=this.vct.Gct().Mct()),this.Tct}tht(){return this.vct.Gct().tht()}hft(t){return this.bct.hft(t,this.vct)}oft(t){return this.bct.oft(t,this.vct)}aft(t){let s,i=this.bct.hft(t,this.vct);return i?s=this.bct.lft(t,this.vct):(i=this.bct.oft(t,this.vct),s=this.bct.uft(t,this.vct)),{start:i,end:s}}*cft(){for(const t of this.nft())yield t.yht()}*fft(){for(const t of this.nft())yield t.nW()}vlt(){this.sat().vlt()}Ert(){this.sat().Ert()}dft(){return this.sat().dft()}$at(){this.sat().$at()}brt(t){this.sat().brt(),this._ct=this.pft(t),this.rlt()}nlt(t){this.sat().nlt(),this._ct=this.pft(t)}rlt(){const t=this.Ect();if(this.Klt=0,t.eat()){const s=this.iut(),i=t.J1(),e=this.sat(),n=this.Clt();if(e.mft()){const t=s.tat(i,e,n,this);t&&t.length&&(this.Klt=1)}else this.Klt=0}}pft(t){const s=this.iut();return this.bct.hft(t,this.vct)||(s.mat()?this.bct.oft(t,this.vct):this.bct.uft(t,this.vct))}clt(t,s){let i,e;if(s)i=this.bct.oft(t,this.vct);else{if(this._ct){const s=this.iut(),i=this._ct.sht(),e=this._ct.nW(),n=i?i.nW():s._1();(t<=e||t>=n)&&(this._ct=this.bct.oft(t,this.vct))}else this._ct=this.bct.oft(t,this.vct);i=this._ct}i&&(e=i.sht()),this.xct.clt(i,e)}wc(t,s=!1,i=!1,e=!1){let n,r,h=!1;if(s)n=this.bct.oft(t,this.vct);else{if(this._ct){const s=this.iut(),i=this._ct.sht(),e=this._ct.nW(),n=i?i.nW():s._1();(t<=e||t>=n)&&(this._ct=this.bct.oft(t,this.vct),h=!0)}else this._ct=this.bct.oft(t,this.vct),h=!0;n=this._ct}n&&(r=n.sht()),this.xct.wc(t,n,r,s,i,e,h)}gft(t){if(this._ct){const s=this.iut(),i=this._ct.sht(),e=this._ct.nW(),n=i?i.nW():s._1();(t<=e||t>=n)&&(this._ct=this.bct.oft(t,this.vct))}else this._ct=this.bct.oft(t,this.vct);const s=this._ct,i=s.sht();return this.xct.gft(t,s,i)}yft(t,s,i){return this.xct.gft(t,s,i)}plt(t,s){let i,e;if(s)i=this.bct.oft(t,this.vct);else{if(this._ct){const s=this.iut(),i=this._ct.sht(),e=this._ct.nW(),n=i?i.nW():s._1();(t<=e||t>=n)&&(this._ct=this.bct.oft(t,this.vct))}else this._ct=this.bct.oft(t,this.vct);i=this._ct}i&&(e=i.sht()),this.xct.plt(i,e)}static Sft(t,s){const i=s.Act();return s.bct.oft(t,i)}static wft(t,s){const i=s.Act();return s.bct.uft(t,i)}static vft(t,s,i){return s?i.iut().mat()?t.yht():s.yht():t.yht()}bft(){const t=this.vct.Gct().xft();return this._ct=null,t}act(t){this._ct=null,this.vct.Gct().Tft(t)}lct(){this.sat().lct()}uct(){if(this.sat().uct()){const t=this.bct.Qct(this.vct),s=this.sat().dft();t.Mft(s)}}cct(){const t=this.sat().cct();return t&&this.Gft(),this.sat()._ft(),t}Gft(){const t=this.iut().nW(),s=this.sat(),i=wg.sut.Sft(t,this),e=this.bft();e.Kct(i.iI()),e.M1(t),e.H1(i.Ift()),e.Iut(!0),e.Cft(s.Pft()),e.Mft(s.dft())}Sst(){return{sourceAdapterJson:this.sat().Sst()}}wst(t){t&&this.sat().wst(t.sourceAdapterJson)}}}{const vg=self._s.sut;vg.kct=class{constructor(t){this.Rft=t,this.Eft=null,this.Aft()}Hn(){this.Eft&&(this.Eft.Hn(),this.Eft=null),this.Rft=null}mft(){return this.Eft.mft()}s2(){return this.Rft}vlt(){this.Eft&&this.Eft.vlt()}Ert(){this.Eft&&this.Eft.Ert()}Aft(){return this.Eft||(this.Eft=this.Fft()),this.Eft}fut(){}Gj(){return this.fut()}Oft(){}$at(){this.Aft().$at()}brt(){this.Aft().brt()}nlt(){this.Aft().nlt()}clt(t,s){this.Eft.Dft(t,s)}wc(t,s,i,e,n,r,h){let o;switch(this.Rft.Zct()){case"numeric":o=vg.Lft.wc(t,s,i,this.Rft);break;case"angle":o=vg.kft.wc(t,s,i,this.Rft);break;case"boolean":o=vg.Nft.wc(t,s,i,this.Rft);break;case"color":o=vg.Bft.wc(t,s,i,this.Rft);break;case"text":o=vg.Uft.wc(t,s,i,this.Rft)}this.Eft.Vft(t,o,s,i,e,n,r,h)}gft(t,s,i){switch(this.Rft.Zct()){case"numeric":return vg.Lft.wc(t,s,i,this.Rft);case"angle":return vg.kft.wc(t,s,i,this.Rft);case"boolean":return vg.Nft.wc(t,s,i,this.Rft);case"color":return vg.Bft.wc(t,s,i,this.Rft);case"text":return vg.Uft.wc(t,s,i,this.Rft)}}plt(t,s){this.Eft.Wft(t,s)}lct(){this.Aft().zft()}_ft(){this.Aft()._ft()}dft(){return this.Aft().dft()}uct(){return this.Aft().uct()}cct(){return this.Aft().cct()}Pft(){const t=this.Rft,s=t.Ect().iut().nW(),i=vg.Sft(s,t),e=i.sht();switch(t.Zct()){case"numeric":return vg.Lft.wc(s,i,e,t);case"angle":return vg.kft.wc(s,i,e,t);case"boolean":return vg.Nft.wc(s,i,e,t);case"color":return vg.Bft.wc(s,i,e,t);case"text":return vg.Uft.wc(s,i,e,t)}}Fft(){const t=this.Rft;switch(t.rft()?t.Zct():""){case"combo":case"boolean":case"text":case"string":return new vg.Hft.jft(this);case"numeric":case"number":case"angle":return"combo"===this.Rft.Xct()?new vg.Hft.jft(this):new vg.Hft.Jft(this);case"color":case"offsetColor":return new vg.Hft.qft(this);default:return new vg.Hft.Jft(this)}}Sst(){return{propertyAdapterJson:this.Aft().Sst()}}wst(t){t&&this.Aft().wst(t.propertyAdapterJson)}}}{const bg=self._s;class xg extends bg.sut.kct{constructor(t){super(t),this.$ft=NaN}fut(){return this.Rft.Act().Wct()[0]}Gj(){return this.$ft?this.$ft:super.Gj()}Oft(){return this.Rft.Ect().J1()}yut(t){this.Rft.Act().Wct()[0]!==t&&(this.$ft=t)}wc(t,s,i,e,n,r,h){this.Aft().Xft(s.Hct())&&super.wc(t,s,i,e,n,r,h)}gft(t,s,i){if(this.Aft().Xft(s.Hct()))return super.gft(t,s,i)}Sst(){return Object.assign(super.Sst(),{index:this.$ft})}wst(t){t&&(super.wst(t),this.$ft=t.index)}}bg.sut.Dct=xg}{const Tg=self._s;class Mg extends Tg.sut.kct{constructor(t){super(t),this.b8=NaN}fut(){return this.Rft.Act().Wct()[1]}Oft(){const t=this.Rft.Act(),s=this.Rft.Ect(),i=this.b8?this.b8:t.Wct()[0],e=s.J1(),n=e.Yft(i);return e.Kft()[n].m0()}G0(t){const s=this.Rft.Act().Wct()[2];return t.Zft(s)}wut(t){this.Rft.Act().Wct()[0]!==t&&(this.b8=t)}wc(t,s,i,e,n,r,h){const o=this.Rft.Ect().J1();this.G0(o.gX())&&super.wc(t,s,i,e,n,r,h)}gft(t,s,i){const e=this.Rft.Ect().J1();if(this.G0(e.gX()))return super.gft(t,s,i)}Sst(){return Object.assign(super.Sst(),{sid:this.b8})}wst(t){t&&(super.wst(t),this.b8=t.sid)}}Tg.sut.Fct=Mg}{const Gg=self._s;class _g extends Gg.sut.kct{constructor(t){super(t)}fut(){return this.Rft.Act().Wct()[1]}Oft(){const t=this.Rft.Ect().LJ().DZ(),s=t.VX(),i=this.but(s).Gj();return t.E0(i)?t.Qft(i):null}but(t){const s=this.Rft.Act().Wct()[0];return t.tdt(s)}wc(t,s,i,e,n,r,h){this.sdt()&&super.wc(t,s,i,e,n,r,h)}gft(t,s,i){if(this.sdt())return super.gft(t,s,i)}sdt(){const t=this.Rft.Ect().LJ().DZ(),s=t.VX(),i=this.but(s);if(!i)return;const e=i.Gj();return t.E0(e)}}Gg.sut.Oct=_g}{const Ig=self._s;class Cg extends Ig.sut.kct{constructor(t){super(t),this.idt=null,this.edt=null,this.ndt=!1}fut(){return this.Rft.Act().Wct()[0]}Oft(){return this.Rft.Ect().J1().m0()}wc(t,s,i,e,n,r,h){const o=this.Rft.Ect();o.gX().Q$()===o.J1().gX().Q$()&&super.wc(t,s,i,e,n,r,h)}gft(t,s,i){const e=this.Rft.Ect();if(e.gX().Q$()===e.J1().gX().Q$())return super.gft(t,s,i)}rdt(t,s){if(!s)return!0;if(t?.yht()===s?.yht())return!0;const i=this.Rft?.oat();return"discrete"===i}hdt(t,s,i){const e=t.sct();return!!e&&(this.Rft.iut().mat()?e.nW()===s.nW():e.nW()===i.nW())}$at(){this.Aft().$at();const t=this.Rft.Ect().gX().Q$();this.ndt=!1,Ig.lq.odt&&t instanceof Ig.lq.odt&&"initial-animation"===this.Rft.Clt()&&(this.ndt=!0)}adt(){const t=this.ndt;return this.ndt=!1,t}ldt(t,s){const i=this.Rft.Ect(),e=i.gX().Q$();if(Ig.lq.odt&&e instanceof Ig.lq.odt&&("initial-frame"===this.Rft.Clt()||"initial-animation"===this.Rft.Clt()))switch(this.Rft.lht()){case"relative":return this.idt?(this.idt.udt=t.mht("initial-animation")?.cdt()??0,this.idt.fdt=this.hdt(i,t,s),this.idt.ddt=this.rdt(t,s),this.idt):(this.idt={pdt:(t,s,e,n,r)=>{if(s!==n){const e=n/s,r=i.s2("offsetWidth"),h=i.s2("offsetScaleX");if(r||h){const o=r?.sat()?.Aft(),a=h?.sat()?.Aft();if(t.AQ()&&t.BQ())a&&a.mdt(n),t.ny(this.gdt(n,s,t,i,o,a));else{const s=n*((t.Sdt()?.ydt()??this.wdt(t,i))/this.wdt(t,i));a&&a.mdt(n);const r=o?.vdt()??0,h=a?.vdt()??0;t.ny(s+(r+h*e))}}else t.ny(t.xy()*e)}if(e!==r){const s=r/e,n=i.s2("offsetHeight"),h=i.s2("offsetScaleY");if(n||h){const o=n?.sat()?.Aft(),a=h?.sat()?.Aft();if(t.AQ()&&t.VQ())a&&a.mdt(r),t.hy(this.bdt(r,e,t,i,o,a));else{const e=r*((t.Sdt()?.xdt()??this.Tdt(t,i))/this.Tdt(t,i));a&&a.mdt(r);const n=o?.vdt()??0,h=a?.vdt()??0;t.hy(e+(n+h*s))}}else t.hy(t.My()*s)}},udt:t.mht("initial-animation")?.cdt()??0,fdt:this.hdt(i,t,s),ddt:this.rdt(t,s)},this.idt);case"absolute":return this.edt?(this.edt.udt=t.mht("initial-animation")?.cdt()??0,this.edt.fdt=this.hdt(i,t,s),this.edt.ddt=this.rdt(t,s),this.edt):(this.edt={udt:t.mht("initial-animation")?.cdt()??0,fdt:this.hdt(i,t,s),ddt:this.rdt(t,s)},this.edt)}}Mdt(t,s,i,e=0){const n=s.iut().Plt(t.J1());if(!n)return e;const r=n.s2(i);if(!r)return e;const h=r.Act().Gct();if(!h)return e;const o=h.Gdt();return o?o.Hct():e}wdt(t,s){const i=s.iut().Plt(t.J1());if(i)return i.Rut();const e=t.J1().m0();return e.Eut()?e.Rut():t.Sdt().ydt()}Tdt(t,s){const i=s.iut().Plt(t.J1());if(i)return i.Fut();const e=t.J1().m0();return e.Eut()?e.Fut():t.Sdt().xdt()}gdt(t,s,i,e,n,r){const h=i.Sdt().ydt(),o=h/i.wQ().Sdt().ydt();let a=1;const l=r?._dt()??0;if(0!==l){const t=h/this.wdt(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?.Idt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.wQ().xy()*o*a*f}bdt(t,s,i,e,n,r){const h=i.Sdt().xdt(),o=h/i.wQ().Sdt().xdt();let a=1;const l=r?.Cdt()??0;if(0!==l){const t=h/this.Tdt(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=h*(t/s);let c=n?.Pdt()??0;c+=u-h;const f=(h+c)/(0===h?Number.EPSILON:h);return i.wQ().My()*o*a*f}}Ig.sut.Lct=Cg}{const Pg=self._s;class Rg extends Pg.sut.kct{constructor(t){super(t),this.Rdt=0,this.Edt=!1}mft(){return!1}brt(){const t=this.Rft.tut();let s=this.Rft.Act();s=t.Qct(s),this.Rdt=s.yht()}nlt(){}Hct(){return this.Edt||this.Rft.wc(0),this.Rdt}wc(t,s,i,e,n,r,h){this.Rdt=Pg.sut.Lft.wc(t,s,i,this.Rft),this.Edt=!0}lct(){}_ft(){}dft(){return this.Rdt}uct(){return!1}cct(){return!1}Sst(){return{value:this.Rdt,init:this.Edt}}wst(t){t&&(this.Rdt=t.value,this.Edt=!t.hasOwnProperty("init")||t.init)}}Pg.sut.Nct=Rg}{const Eg=self._s;class Ag extends Eg.sut.kct{constructor(t){super(t),this.Adt=!1,this.Fdt=null,this.Odt=null,this.Ddt=null,this.$rt=this.Rft.iut(),this.wct=this.Rft.Ect(),this.Ldt=this.Rft.Vct(),this.kdt=this.Ldt[0],this.Ndt=this.Ldt[1],this.Ldt[3]?this.Bdt=this.Ldt[3]:this.Bdt=Math.random().toString(36).slice(2),this.Udt=NaN,this.Vdt=NaN,this.Wdt=NaN,this.zdt=null,this.jdt()}Hn(){super.Hn(),this.Fdt=null,this.Odt=null,this.Ddt=null,this.$rt=null,this.wct=null,this.Ldt=null,this.kdt=null,this.zdt=null}jdt(){if(!self._s.lq.Audio)return;const t=this.Rft.yq().Hdt(self._s.lq.Audio);t&&(this.Fdt=t.Y$().m0()),this.Odt=self._s.lq.Audio.Jdt,this.Ddt=self._s.lq.Audio.qdt}$dt(){if(this.zdt)return;const t=this.Rft.Ect().s2("audioSource");t&&(this.zdt=t.sat())}Xdt(){const t=this.Rft.Ect().s2("volume");return t?t.sat().Vdt:this.Vdt}vlt(){super.vlt(),this.Adt=!1,this.Fdt&&(this.Ddt&&(this.Udt=this.Ddt.Ydt.call(this.Fdt,this.Bdt),this.Vdt=this.Ddt.Kdt.call(this.Fdt,this.Bdt)),this.Odt&&this.Odt.v1.call(this.Fdt,this.Bdt))}Zdt(){return this.Bdt}Qdt(){return this.Wdt}tpt(t){this.Wdt=t}brt(){super.brt(),this.Udt=NaN,this.Adt=!1}nlt(){super.nlt();const t=this.Rft.iut().nW();switch(this.Udt=t-this.Ndt,this.Rft.Clt()){case"audioSource":break;case"volume":this.Vdt=this.Rft.gft(t)}this.Adt=!1}wc(t,s,i,e,n,r,h){if(this.Fdt)switch(this.Rft.Clt()){case"audioSource":{if(!this.$rt.mat())return;if(e)return void(this.Odt&&this.Odt.v1.call(this.Fdt,this.Bdt));if(t<this.Ndt)return void(this.Adt=!1);const s=this.Ddt.spt.call(this.Fdt,this.Bdt),i=this.$rt.A1();if(i!==s&&this.Odt.E1.call(this.Fdt,this.Bdt,i),this.Adt)return;if(!this.Rft.iut().IsPlaying())return;if(this.Adt=!0,isNaN(this.Udt)){const s=self.performance.now(),i=t-this.Ndt;if("suspended"===this.Fdt.ipt())return void(this.Adt=!1);const e=i+(self.performance.now()-s)/1e3;if(this.Odt){let t=this.Qdt();isNaN(t)?(this.tpt(0),t=0):this.tpt(t),this.Odt.ept.call(this.Fdt,this.kdt,t,this.Bdt,e)}}else{const t=this.Udt;this.Udt=NaN;const s=this.Xdt();if(this.Vdt=NaN,"suspended"===this.Fdt.ipt())return void(this.Adt=!1);this.Odt&&(this.tpt(s),this.Odt.ept.call(this.Fdt,this.kdt,s,this.Bdt,t))}break}case"volume":this.$dt(),super.wc(t,s,i,e,n,r,h)}}gft(t,s,i){if(this.Fdt)switch(this.Rft.Clt()){case"audioSource":return;case"volume":return this.$dt(),super.gft(t,s,i)}}npt(t,s){return this.zdt?this.zdt.Qdt():0}rpt(t,s,i,e){this.zdt&&this.zdt.tpt(this.npt()+s),this.Odt&&this.zdt&&this.Odt.tpt.call(this.Fdt,this.zdt.Zdt(),this.zdt.Qdt())}hpt(t,s,i){this.zdt&&this.zdt.tpt(s),this.Odt&&this.zdt&&this.Odt.tpt.call(this.Fdt,this.zdt.Zdt(),this.zdt.Qdt())}opt(){return!0}Sst(){return{audioPlaybackStarted:this.Adt,audioTag:this.Bdt,pauseTime:this.Udt,pauseVolume:this.Vdt,volume:this.Wdt}}wst(t){t&&(this.Adt=t.audioPlaybackStarted,this.Bdt=t.audioTag,this.Udt=t.pauseTime,this.Vdt=t.pauseVolume,this.Wdt=t.volume,this.jdt())}}Eg.sut.Bct=Ag}self._s.sut.Hft=class{constructor(t){this.xct=t,this.Rft=t.s2(),this.Ult=this.Rft.Ect().LJ(),this.apt=this.Rft.Clt(),this.lpt=!1,this.upt=null,this.cpt=null}Hn(){this.xct=null,this.Rft=null,this.Ult=null,this.upt=null,this.cpt=null}mft(){return!1}vlt(){}Ert(){this.Ult=null,this.upt=null,this.cpt=null}sat(){return this.xct}s2(){return this.Rft}LJ(){return this.Ult||(this.Ult=this.Rft.Ect().LJ()),this.Ult}fpt(t){this.lpt=!!t}dpt(){return this.lpt}$at(){}brt(){}nlt(){}zft(){this.upt=this.dft()}_ft(){this.upt=null}dft(){}uct(){}cct(){}Xft(t){return typeof this.ppt()==typeof t}Dft(t,s){}Vft(t,s,i,e,n,r,h,o){}Wft(t,s){}mpt(){return this.ypt(()=>{const t=this.Rft.Act();return this.Rft.tut().Qct(t)},()=>{const t=this.Rft.Act();return this.Rft.tut().Gdt(t)}).gpt()}Spt(){const t=this.Rft.iut().nW()-this.Rft.Ect().ult();return this.ypt(()=>{const s=this.Rft.Act();return this.Rft.tut().oft(t,s)},()=>{const s=this.Rft.Act(),i=this.Rft.tut();return i.uft(t,s)||i.Gdt(s)}).gpt()}ypt(t,s){return this.Rft.iut().mat()?t():s()}wpt(t,s){return"relative"===this.Rft.lht()?t():s()}vpt(t,s){return this.dpt()?(this.fpt(!1),t()):s()}bpt(t){}xpt(){return this.xct.Gj()}Tpt(){return this.cpt||(this.cpt=this.xct.Oft()),this.cpt}Mpt(t,s,i,e,n,r){switch(this.Rft.cut()){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return n();case"audio":return r()}}Sst(){return{firstAbsoluteUpdate:this.lpt,saveState:this.upt}}wst(t){t&&(this.lpt=t.firstAbsoluteUpdate,this.upt=t.saveState)}Gpt(t,s=!1){const i=[];for(const e of t){const t=e.Ect().ult();for(const n of e.nft())s&&0===n.nW()?i.push({time:t+n.nW(),value:n.gpt()}):s||i.push({time:t+n.nW(),value:n.gpt()})}return i.sort((t,s)=>t.time-s.time)}_pt(t,s,i){return this.Ipt(s,i)}Ipt(t,s){for(let i=s.length-1;i>=0;i--)if(s[i].time<=t)return s[i];return null}};{const Fg=self._s,Og=new Map,Dg=[0,0,0];class Lg extends Fg.sut.Hft{constructor(t){super(t)}$at(){}brt(){}nlt(){}dft(){const t=this.Rft.cut(),s=this.Tpt(),i=this.xpt();switch(t){case"behavior":case"plugin":return this.Cpt(s.Ppt(i));case"effect":return this.Cpt(s[i]);case"world-instance":return this.Cpt(this.ppt())}}uct(){const t=this.mpt();return!this.Rpt(t,this.ppt())}cct(){return!Fg.ie(this.upt)&&!this.Rpt(this.upt,this.ppt())}Rpt(t,s){return t=this.Ept(t),s=this.Ept(s),t.Ho(s)}mpt(){const t=super.mpt();return this.Ept(t)}Spt(){const t=super.Spt();return this.Ept(t)}bpt(t){}Cpt(t){return Fg.Le(t,Fg.To)?t.toArray().slice(0,3):t.slice(0,3)}Ept(t){return Fg.Le(t,Fg.To)?t:new Fg.To(t[0],t[1],t[2],1)}Xft(t){return!0}mft(){return!0}Dft(){const t=this.Rft.iut(),s=this.Rft.J1(),i=this.Rft.sat(),e=t.tat(s,i,this.apt,this.Rft);if(e&&e.length>1){Og.has(s)||Og.set(s,new Map);const t=Og.get(s),i=this.Rft.cut();t.has(i)||t.set(i,new Map);const e=t.get(i);e.has(this.apt)||e.set(this.apt,{Apt:!1,color:new Fg.To(0,0,0,1)})}}Fpt(t,s,i){const e=Og.get(t).get(s).get(i);return e.Apt=!0,e.color}Vft(t,s,i,e,n,r,h,o){const a=this.Rft.iut(),l=this.Rft.Ect(),u=this.Rft.J1(),c=this.Rft.sat(),f=this.Rft.cut(),d=this.apt,p=a.tat(u,c,d,this.Rft);if(p&&p.length>1){const t=this.Gpt(p,!0),i=this._pt(a,a.nW(),t);if(i){const t=l.ult(),e=i.time-t;if(0===e)this.Fpt(u,f,this.apt).Ro(s[0],s[1],s[2]);else{if(e<0)return;const t=s[0],i=s[1],n=s[2],r=this.Rft.wc(e,!1,!0),h=Fg.To.xa(t,r[0]),o=Fg.To.xa(i,r[1]),a=Fg.To.xa(n,r[2]);this.Fpt(u,f,this.apt).Ro(h,o,a)}}}else this.Opt(s[0],s[1],s[2])}Wft(){const t=this.Rft.J1();if(!Og.has(t))return;const s=Og.get(t),i=this.Rft.cut();if(!s.has(i))return;const e=s.get(i);if(!e.has(this.apt))return;const n=e.get(this.apt),r=n.Apt,h=n.color;r&&this.Opt(h.ko(),h.No(),h.Bo()),0===e.size&&s.delete(i),0===s.size&&Og.delete(t)}ppt(){const t=this.Rft.cut(),s=this.Tpt(),i=this.xpt();switch(t){case"behavior":case"plugin":return this.Ept(s.Ppt(i));case"effect":return s[i].clone();case"world-instance":return this.LJ().rQ().clone()}}Opt(t,s,i){const e=this.Rft.cut(),n=this.Tpt(),r=this.xpt();switch(e){case"behavior":case"plugin":Dg[0]=t,Dg[1]=s,Dg[2]=i,n.Dpt(r,Dg);break;case"effect":n[r].Po(t,s,i);break;case"world-instance":this.LJ().Lpt(t,s,i)}}Sst(){}wst(t){}}Fg.sut.Hft.qft=Lg}{const kg=self._s,Ng=kg.sut;class Bg extends kg.sut.Hft{constructor(t){super(t)}$at(){}brt(){}nlt(){}dft(){return this.ppt()}uct(){return this.mpt()!==this.dft()}cct(){return!kg.ie(this.upt)&&this.upt!==this.dft()}mft(){return!1}Vft(t,s,i,e,n,r,h,o){const a=this.Rft,l=a.Ect(),u=a.cut(),c=a.iut(),f=l.J1(),d=a.sat(),p=this.apt,m=c.tat(f,d,p,a);if(m&&m.length>1){const i=this.Gpt(m),e=t+l.ult(),n=this._pt(c,e,i);n&&(s=n.value)}switch(a.Zct()){case"numeric":if(!Ng.Lft.kpt(this.xpt(),this.Tpt(),s,u))return;this.Opt(s,i,e);break;case"angle":if(!Ng.kft.kpt(this.xpt(),this.Tpt(),s,u))return;this.Opt(s,i,e);break;case"boolean":if(!Ng.Nft.kpt(this.xpt(),this.Tpt(),s,u))return;this.Opt(s,i,e);break;case"color":if(!Ng.Bft.kpt(this.xpt(),this.Tpt(),s,u))return;this.Opt(s,i,e);break;case"text":{const t=this.Npt();if(!Ng.Uft.kpt(this.xpt(),this.Tpt(),s,u)&&!t)return;this.Opt(s,i,e);break}}}Npt(){switch(this.Rft.cut()){case"behavior":case"effect":case"instance-variable":return!1;case"plugin":return this.sat().adt()}return!1}ppt(){const t=this.Rft.cut(),s=this.Tpt(),i=this.xpt();switch(t){case"behavior":case"plugin":return s.Ppt(i);case"effect":return s[i];case"instance-variable":return s.Bpt(i)}}Opt(t,s,i){const e=this.Rft.cut(),n=this.Tpt(),r=this.xpt();switch(e){case"behavior":n.Dpt(r,t);break;case"effect":n[r]=t;break;case"instance-variable":n.Upt(r,t);break;case"plugin":n.Dpt(r,t,this.sat().ldt(s,i))}}}kg.sut.Hft.jft=Bg}{const Ug=self._s,Vg=(Ug.sut.Hft,new Map),Wg=(t,s,i,e,n,r=!1,h=null,o=null)=>{Vg.set(t,{Vpt:s,Wpt:i,zpt:e,round:n,jpt:r,init:h,reset:o})},zg=(t,s,i,e=0)=>{const n=s.iut().Plt(t.J1());if(!n)return e;const r=n.s2(i);if(!r)return e;const h=r.Act().Gct();if(!h)return e;const o=h.Gdt();return o?o.Hct():e},jg=t=>{const s=[];let i=t.wQ();for(;i;)s.push(i),i=i.wQ();return s.reverse(),s};Wg("offsetX",(t,s,i,e)=>{"relative"===e.Rft.lht()?t.Hpt(s,i.iut().fat()):t.Hpt(s)},(t,s)=>t.lT(s),t=>t.aT(),!0),Wg("offsetY",(t,s,i,e)=>{"relative"===e.Rft.lht()?t.Jpt(s,i.iut().fat()):t.Jpt(s)},(t,s)=>t.fT(s),t=>t.cT(),!0),Wg("offsetWidth",(t,s,i,e,n=!1,r=!0)=>{if(0===s)return;const h="relative"===e.Rft.lht(),o=1===e.qpt.iI();if((h||o)&&t.AQ()&&t.BQ()){if(isNaN(e.$pt)){const s=jg(t);let i;i=o?s[s.length-1].xy():s[s.length-1].Sdt().ydt(),e.$pt=0===i?Number.EPSILON:i}if(n)return;e.Xpt+=s;const i=s/e.$pt;t.ky(i,r),e.Ypt+=i}else t.ky(s),e.Ypt+=s},(t,s)=>t.ny(s),t=>t.xy(),!0,!1,null,t=>{t.Ypt=0,t.Xpt=0}),Wg("offsetHeight",(t,s,i,e,n=!1,r=!0)=>{if(0===s)return;const h="relative"===e.Rft.lht(),o=1===e.qpt.iI();if((h||o)&&t.AQ()&&t.VQ()){if(isNaN(e.$pt)){const s=jg(t);let i;i=o?s[s.length-1].My():s[s.length-1].Sdt().xdt(),e.$pt=0===i?Number.EPSILON:i}if(n)return;e.Kpt+=s;const i=s/e.$pt;t.Zpt(i,r),e.Ypt+=i}else t.Zpt(s),e.Ypt+=s},(t,s)=>t.hy(s),t=>t.My(),!0,!1,null,t=>{t.Ypt=0,t.Kpt=0}),Wg("offsetAngle",(t,s,i,e,n)=>{t.Qpt(s)},(t,s)=>t.qX(s),t=>t.$X(),!1,!0),Wg("offsetOpacity",(t,s,i,e,n)=>{s/=e.tmt?e.tmt:1;const r=t.FF()+s;if(0===e.smt)r>1?e.smt+=r-1:r<0&&(e.smt+=r),t.imt(s);else{const i=t.FF()+s;s>0&&e.smt>0?i>1&&(e.smt+=i-1):s>0&&e.smt<0?(e.smt+=s,e.smt>0&&(t.imt(e.smt),e.smt=0)):s<0&&e.smt>0?(e.smt+=s,e.smt<0&&(t.imt(e.smt),e.smt=0)):s<0&&e.smt<0&&i<0&&(e.smt+=i)}},(t,s)=>{t.DF(s)},t=>t.FF(),!1,!0,(t,s,i)=>{switch(t.smt=0,t.Rft.lht()){case"relative":{t.Rft.tut();const s=t.Rft.Act().Gct().Mct();let i=t.LJ().FF(),e=i;for(const n of s){const s=n.nW();e=i+t.Rft.gft(s),e=Ug.Yn(e,0,1)}t.emt=i-e,t.emt=Math.round(100*(t.emt+Number.EPSILON))/100,e=i;for(let i=s.length-1;i>=0;i--){const n=s[i].nW();e-=t.Rft.gft(n),e=Ug.Yn(e,0,1)}t.nmt=e,t.nmt=Math.round(100*(t.nmt+Number.EPSILON))/100;break}}const e="relative"===t.Rft.lht(),n=1===t.qpt.iI();if((e||n)&&s.AQ()&&s.qQ()){const e=jg(s);let n=e[0].Sdt().rmt();n+=zg(e[0],i,"offsetOpacity");for(let t=1;t<e.length;t++)n+=zg(e[t],i,"offsetOpacity");t.tmt=0===n?1:n}},t=>{switch(t.Rft.lht()){case"relative":{t.smt=0;const s=t.LJ();let i=s.FF();i=Math.round(100*(i+Number.EPSILON))/100,t.Rft.iut().mat()?(s.DF(i+t.emt),t.JI=0):(s.DF(i-t.nmt),t.JI=t.sat().Pft());break}}}),Wg("offsetOriginX",(t,s)=>t.hmt(s),(t,s)=>t.zZ(s),t=>t.WZ(),!1),Wg("offsetOriginY",(t,s)=>t.omt(s),(t,s)=>t.JZ(s),t=>t.HZ(),!1),Wg("offsetZElevation",(t,s)=>t.amt(s),(t,s)=>t.pT(s),t=>t.dT(),!0),Wg("offsetScaleX",(t,s,i,e)=>{if(0===s)return;const n=t.xy()<0?-1:1;if(e.lmt+=s,"relative"===e.Rft.lht()&&t.AQ()&&t.BQ()){const r=zg(t,i,"offsetWidth"),h=isNaN(e.umt)?i.Rut():e.umt,o=(h+r/(t.Sdt().ydt()/h))*n*s;isNaN(e.$pt)&&Vg.get("offsetWidth").Vpt(t,1,i,e,!0);const a=o/e.$pt;t.ky(a,!0),e.Ypt+=a}else{const r=(isNaN(e.umt)?i.Rut():e.umt)*n*s;t.ky(r),e.Ypt+=r}},(t,s,i)=>{t.ny(i.Rut()*s)},(t,s)=>{const i=t.xy()<0?-1:1;if(t.BQ()){const e=t.wQ(),n=s.iut().Plt(e.J1());let r=NaN;if(n)r=e.xy()/n.Rut();else{const t=e.J1().m0();r=t.Eut()?e.xy()/t.Rut():1}return t.xy()*i/(s.Rut()*r)}return t.xy()*i/s.Rut()},!1,!1,null,t=>{t.Ypt=0,t.umt=NaN,t.lmt=0}),Wg("offsetScaleY",(t,s,i,e)=>{if(0===s)return;const n=t.My()<0?-1:1;if(e.cmt+=s,"relative"===e.Rft.lht()&&t.AQ()&&t.VQ()){const r=zg(t,i,"offsetHeight"),h=isNaN(e.umt)?i.Fut():e.umt,o=(h+r/(t.Sdt().xdt()/h))*n*s;isNaN(e.$pt)&&Vg.get("offsetHeight").Vpt(t,1,i,e,!0);const a=o/e.$pt;t.Zpt(a,!0),e.Ypt+=a}else{const r=(isNaN(e.umt)?i.Fut():e.umt)*n*s;t.Zpt(r),e.Ypt+=r}},(t,s,i)=>{t.hy(i.Fut()*s)},(t,s)=>{const i=t.My()<0?-1:1;if(t.VQ()){const e=t.wQ(),n=s.iut().Plt(e.J1());let r=NaN;if(n)r=e.My()/n.Fut();else{const t=e.J1().m0();r=t.Eut()?e.My()/t.Fut():1}return t.My()*i/(s.Fut()*r)}return t.My()*i/s.Fut()},!1,!1,null,t=>{t.Ypt=0,t.umt=NaN,t.cmt=0});class Hg extends Ug.sut.Hft{constructor(t){super(t),this.JI=0,this.smt=0,this.emt=0,this.nmt=0,this.tmt=NaN,this.$pt=NaN,this.Ypt=0,this.umt=NaN,this.Xpt=0,this.lmt=0,this.Kpt=0,this.cmt=0,this.fmt=void 0,this.dmt=void 0,this.pmt=null,this.mmt=null,this.gmt=null,this.ymt=null,this.Smt=null,this.wmt=null,this.vmt=null,this.bmt=null,this.xmt=!1,this.Tmt=!1,Ug.Le(this.Rft.iut(),Ug.Mmt)?this.qpt=new Ug.sut.Hft.Gmt(this):this.qpt=new Ug.sut.Hft._mt(this);const s=this.Rft.Clt();switch(this.Rft.cut()){case"world-instance":{const t=Vg.get(s);this.pmt=t.zpt,this.mmt=t.Vpt,this.gmt=t.Wpt,this.xmt=t.round,this.Tmt=t.jpt,this.Smt=t.init,this.ymt=t.reset;break}case"audio":this.wmt=t.npt,this.vmt=t.rpt,this.bmt=t.hpt,this.xmt=!!t.opt(),this.Tmt=!1}}Hn(){this.qpt=null,this.pmt=null,this.mmt=null,this.gmt=null,this.ymt=null,this.Smt=null,this.wmt=null,this.vmt=null,this.bmt=null,super.Hn()}mft(){return this.qpt.mft()}Imt(){return this.JI}Cmt(t){this.JI=t}$at(){this.ymt&&this.ymt(this)}brt(){const t=this.qpt.brt();if("number"==typeof t&&(this.JI=t),this.Smt){const t=this.LJ(),s=this.Rft.Ect();this.Smt(this,t,s)}}nlt(){const t=this.qpt.nlt();"number"==typeof t&&(this.JI=t)}dft(){return this.ppt()}uct(){return this.mpt()!==this.dft()}cct(){return!Ug.ie(this.upt)&&this.upt!==this.dft()}Dft(t,s){this.qpt.Dft(t,s)}Vft(t,s,i,e,n,r,h,o){return this.qpt.Vft(t,s,i,e,n,r,h,o)}Wft(t,s){this.qpt.Wft(t,s)}ppt(){const t=this.Tpt(),s=this.xpt(),i=this.LJ(),e=this.Rft.Ect();switch(this.Rft.cut()){case"behavior":case"plugin":return t.Ppt(s);case"effect":return t[s];case"instance-variable":return t.Bpt(s);case"world-instance":return this.pmt(i,e);case"audio":return this.wmt.call(this.sat(),i,e)}}Opt(t,s,i,e=!0){const n=this.Tpt(),r=this.xpt(),h=this.LJ(),o=this.Rft.Ect();switch(this.Rft.cut()){case"behavior":n.Pmt(r,t);break;case"effect":n[r]+=t;break;case"instance-variable":n.Rmt(r,t);break;case"plugin":n.Pmt(r,t,this.sat().ldt(s,i));break;case"world-instance":this.mmt(h,t,o,this,!1,e);break;case"audio":this.vmt.call(this.sat(),h,t,o,this)}}Emt(t,s,i,e,n){let r=this.Rft.oat();if(r="default"===r?"continuous":r,"discrete"===r&&!s)return;if("discrete"===r&&i){const t=this.Rft.iut().nW();if(!this.Rft.hft(t))return}const h=this.Tpt(),o=this.xpt(),a=this.LJ(),l=this.Rft.Ect();switch(this.Rft.cut()){case"behavior":h.Dpt(o,t);break;case"effect":h[o]=t;break;case"instance-variable":h.Upt(o,t);break;case"plugin":h.Dpt(o,t,this.sat().ldt(e,n));break;case"world-instance":this.gmt(a,t,l);break;case"audio":this.bmt.call(this.sat(),a,t,l)}}Amt(t,s,i,e,n,r,h,o){this.qpt.Amt(t,s,i,e,n,r,h,o)}Fmt(t,s,i,e,n){"angle"===this.Rft.Xct()&&(t=Ug.Qn(t));const r=(t.toString().split(".")[1]||"").length,h=this.ppt();let o;switch(o=0===r?this.xmt?Math.round(h):this.Tmt?"angle"===this.Rft.Xct()?Ug.Zn(Math.round(Ug.Qn(h))):Number(Ug.toFixed(h,2)):h:this.xmt?Number(Ug.toFixed(h,r)):(this.Tmt,h),this.Opt(o-h,s,i,!1),this.Rft.Clt()){case"offsetWidth":case"offsetScaleX":{const t=this.LJ(),s=t.xy(),i=Number(Ug.toFixed(s,2));t.ky(i-s);break}case"offsetHeight":case"offsetScaleY":{const t=this.LJ(),s=t.My(),i=Number(Ug.toFixed(s,2));t.Zpt(i-s);break}}}Sst(){return Object.assign(super.Sst(),{v:this.JI,a:this.smt,fod:this.emt,bod:this.nmt,of:this.tmt,sf:this.$pt,armorf:this.fmt,armandf:this.dmt,ca:this.Ypt,os:this.umt,awo:this.Xpt,aho:this.Kpt,asxo:this.lmt,asyo:this.cmt})}wst(t){t&&(super.wst(t),this.JI=t.v,this.smt=t.a,this.emt=Ug.Qi(t.fod)?t.fod:0,this.nmt=Ug.Qi(t.bod)?t.bod:0,this.tmt=Ug.Qi(t.of)?t.of:NaN,this.$pt=Ug.Qi(t.sf)?t.sf:NaN,this.fmt=Ug.Qi(t.armorf)?t.armorf:void 0,this.dmt=Ug.Qi(t.armandf)?t.armandf:void 0,this.Ypt=Ug.Qi(t.ca)?t.ca:0,this.umt=Ug.Qi(t.os)?t.os:NaN,this.Xpt=Ug.Qi(t.awo)?t.awo:0,this.Kpt=Ug.Qi(t.aho)?t.aho:0,this.lmt=Ug.Qi(t.asxo)?t.asxo:0,this.cmt=Ug.Qi(t.asyo)?t.asyo:0)}mdt(t){this.umt=t}vdt(){return this.Ypt}Idt(){return this.Xpt}Pdt(){return this.Kpt}_dt(){return this.lmt}Cdt(){return this.cmt}}Ug.sut.Hft.Jft=Hg}{const Jg=self._s;class qg{constructor(t){this.Omt=!1,this.Rdt=0,this.Dmt=!1,this.Lmt=!1,this.$lt=t;for(let t=0,s=this.$lt.length;t<s;t++)this.$lt[t].Pct(this)}Ilt(){return this.$lt}kmt(){this.Omt=!0}Nmt(){return this.Omt}Cft(t){this.Rdt=t}Hct(){return this.Rdt}Bmt(t){this.Dmt=t}Umt(){return this.Dmt}llt(t){this.Lmt=t}Vmt(){return this.Lmt}Bf(){this.Omt=!1,this.Rdt=0,this.Dmt=!1,this.Lmt=!1}}class $g{constructor(t){this.Wmt=t}Hn(){this.Wmt=null}iI(){return 0}brt(){const t=this.Wmt;return this.Wmt.s2(),t.wpt(()=>t.ypt(()=>0,()=>t.sat().Pft()),()=>{})}nlt(){}mft(){switch(this.Wmt,this.Wmt.s2().lht()){case"relative":return!1;case"absolute":return!0}}Dft(t,s){this.Wmt;const i=this.Wmt.s2(),e=i.Clt();switch(i.lht()){case"relative":break;case"absolute":if(i.Cct())i.Rct().Bf();else{const t=i.iut(),s=i.J1(),n=i.sat(),r=t.tat(s,n,e,i);r&&r.length>1&&new qg(r)}}}Vft(t,s,i,e,n,r,h,o){const a=this.Wmt,l=this.Wmt.s2();switch(l.lht()){case"relative":{const h=a.Imt();a.Opt(s-h,i,e),r&&this.Amt(t,i,e,n,h,s),a.Cmt(s);break}case"absolute":{const t=l.iut(),n=l.Ect();if(l.J1(),l.sat(),l.Cct()){const i=l.Rct(),e=i.Ilt(),r=a.Gpt(e,!0),u=a._pt(t,t.nW(),r);if(u){const t=n.ult(),e=u.time-t;if(0===e)i.llt(h),i.Bmt(o),i.kmt(),i.Cft(i.Hct()+s);else{if(e<0)return;const t=l.gft(e);i.llt(h),i.Bmt(o),i.kmt(),i.Cft(i.Hct()+(s-t))}}}else a.Emt(s,o,h,i,e);break}}}Wft(t,s){const i=this.Wmt,e=this.Wmt.s2();switch(e.lht()){case"relative":break;case"absolute":if(e.Cct()){const n=e.Rct();n.Nmt()&&i.Emt(n.Hct(),n.Umt(),n.Vmt(),t,s)}}}Amt(t,s,i,e,n,r){const h=this.Wmt;e||(s&&t===s.nW()?h.Fmt(s.yht(),s,i):i&&t===i.nW()?h.Fmt(i.yht(),s,i):r-n===0&&h.Fmt(s.yht(),s,i))}}Jg.sut.Hft._mt=$g}{const Xg=self._s;class Yg{constructor(t){this.Wmt=t}Hn(){this.Wmt=null}iI(){return 1}brt(){const t=this.Wmt;return t.fpt(!0),this.bpt(t.mpt())}nlt(){const t=this.Wmt;if(t.mpt()!==t.Spt())return t.fpt(!0),this.bpt(t.Spt())}mft(){return!1}Dft(){}Vft(t,s,i,e,n,r,h,o){const a=this.Wmt,l=a.Imt();switch(a.s2().lht()){case"relative":a.Opt(s-l,i,e),r&&this.Amt(t,i,e,n,l,s,!1,h);break;case"absolute":a.dpt()?(a.fpt(!1),a.Opt(l,i,e)):0===t&&0===a.s2().iut()._1()?a.Emt(s,!0,!1,i,e):(a.Opt(s-l,i,e),r&&this.Amt(t,i,e,n,l,s,this.zmt(),h))}a.Cmt(s)}Wft(){}bpt(t){return t-this.Wmt.dft()}zmt(){const t=this.Wmt,s=t.LJ().J1(),i=t.s2().yq().Qot();let e=0;for(const t of i.Ynt())0===t.iI()?t.srt(s)&&e++:1===t.iI()&&t.J1()===s&&e++;return e<=1}Amt(t,s,i,e,n,r,h,o){const a=this.Wmt;e?s&&t===s.nW()?a.Fmt(s.yht(),s,i,h,o):i&&t===i.nW()?a.Fmt(i.yht(),s,i,h,o):i||a.Fmt(s.yht(),s,i,h,o):s&&t===s.nW()?a.Fmt(s.yht(),s,i,h,o):i&&t===i.nW()?a.Fmt(i.yht(),s,i,h,o):r-n===0&&a.Fmt(s.yht(),s,i,h,o)}}Xg.sut.Hft.Gmt=Yg}{const Kg=self._s,Zg=self.Wu;Kg.sut.Lft=class{constructor(){}static kpt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Ppt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Bpt(t)}return n!==i}static wc(t,s,i,e){if(!i){const t=e.Act();return e.tut().Gdt(t).yht()}let n=e.oat();if("default"===n&&(n="continuous"),"combo"===e.Xct()&&(n="discrete"),"discrete"===n)return Kg.sut.vft(s,i,e);if("continuous"===n||"step"===n){const r=e.iut().rat();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.yht(),o=i.yht(),a=s.mht("cubic-bezier"),l=i.mht("cubic-bezier"),u=a&&a.jmt()&&l&&l.Hmt();if(!u&&h===o)return h;const c=s.nW(),f=i.nW();"step"===n&&0!==r&&(t=Kg.Yn(t,c,f));const d=Kg.normalize(t,c,f),p=s.Ift();let m;if(u){const t=f-c;m=Zg.rc(p)(t*d,0,1,t),m=Zg.rc("cubicbezier")(m,h,h+a.vht(),o+l.Tht(),o)}else m=Zg.rc(p)((f-c)*d,h,o-h,f-c);return"integer"===e.Xct()?Math.floor(m):m}}}}{const Qg=self._s;Qg.sut.kft=class{constructor(){}static kpt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Ppt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Bpt(t)}return n!==i}static wc(t,s,i,e){if(!i){const t=e.Act();return e.tut().Gdt(t).yht()}let n=e.oat();if("default"===n&&(n="continuous"),"combo"===e.Xct()&&(n="discrete"),"discrete"===n)return Qg.sut.vft(s,i,e);if("continuous"===n||"step"===n){const r=e.iut().rat();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.nW(),o=i.nW(),a=s.yht(),l=i.yht();"step"===n&&0!==r&&(t=Qg.Yn(t,h,o));const u=s.mht("angle");if(!u){if(a===l)return a;const i=Qg.normalize(t,h,o),e=self.Wu.rc(s.Ift());return Qg.lr(a,l,e(i,0,1,1))}{const i=u.Jmt();if(a===l&&0===i)return a;const e=Qg.normalize(t,h,o),n=self.Wu.rc(s.Ift())(e,0,1,1);switch(u.qmt()){case"closest":return Qg.lr(a,l,n,i);case"clockwise":return Qg.ur(a,l,n,i);case"anti-clockwise":return Qg.cr(a,l,n,i)}}}}}}{const ty=self._s;ty.sut.Nft=class{constructor(){}static kpt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Ppt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Bpt(t)}return!!n!=!!i}static wc(t,s,i,e){if(!i){const t=e.Act();return e.tut().Gdt(t).yht()?1:0}return ty.sut.vft(s,i,e)?1:0}}}{const sy=self._s,iy=[0,0,0],ey=[0,0,0],ny=[0,0,0];sy.sut.Bft=class{constructor(){}static kpt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Ppt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Bpt(t)}return Array.isArray(i)?(iy[0]=i[0],iy[1]=i[1],iy[2]=i[2]):(ny.ha(i),iy[0]=Math.floor(255*ny.ko()),iy[1]=Math.floor(255*ny.No()),iy[2]=Math.floor(255*ny.Bo())),Array.isArray(n)?(ey[0]=n[0],ey[1]=n[1],ey[2]=n[2]):(ny.ha(n),ey[0]=Math.floor(255*ny.ko()),ey[1]=Math.floor(255*ny.No()),ey[2]=Math.floor(255*ny.Bo())),iy[0]!==ey[0]||iy[1]!==ey[1]||iy[2]!==ey[2]}static wc(t,s,i,e){if(!i){const t=e.Act(),s=e.tut().Gdt(t).yht();return iy[0]=s[0],iy[1]=s[1],iy[2]=s[2],iy}let n=e.oat();if("default"===n&&(n="continuous"),"discrete"===n){const t=sy.sut.vft(s,i,e);return iy[0]=t[0],iy[1]=t[1],iy[2]=t[2],iy}if("continuous"===n||"step"===n){const r=e.iut().rat();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.nW(),o=i.nW(),a=s.yht(),l=i.yht();"step"===n&&0!==r&&(t=sy.Yn(t,h,o));const u=sy.normalize(t,h,o),c=s.Ift(),f=a[0],d=a[1],p=a[2],m=l[0],g=l[1],y=l[2],S=self.Wu.rc(c),w=o-h,v=w*u;return iy[0]=f===m?f:S(v,f,m-f,w),iy[1]=d===g?d:S(v,d,g-d,w),iy[2]=p===y?p:S(v,p,y-p,w),iy}}}}{const ry=self._s;ry.sut.Uft=class{constructor(){}static kpt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Ppt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Bpt(t)}return n!==i}static wc(t,s,i,e){if(!i){const t=e.Act();return e.tut().Gdt(t).yht()}return ry.sut.vft(s,i,e)}}}{const hy=self._s;hy.snt=class{constructor(){this.$mt=new Map}Hn(){for(const t of this.$mt.values())t.Hn();this.$mt.clear(),this.$mt=null}Bu(t){const s=new hy.Xmt(t),i=s.Pc();this.$mt.set(i,s)}Hs(t){return this.$mt.get(t)}Jot(){return 0}static Ymt(t,s,i,e){if(s)for(const n of s)hy.snt.Kmt("create",n,t,i,e)}static Zmt(t,s,i,e){if(s)for(const n of s)hy.snt.Kmt("create-including-disabled",n,t,i,e)}static Qmt(t,s,i,e){t.length?s.forEach((s,i)=>{t[i].wst(s)}):s.forEach(s=>{hy.snt.Kmt("load",s,t,i,e)})}static Kmt(t,s,i,e,n){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,n);break;case"create":case"create-including-disabled":r=new e(s,n)}else if("object"==typeof e){const i=s[e.tgt],h=e.map.get(i);switch(t){case"load":r=new h(null,n);break;case"create":case"create-including-disabled":r=new h(s,n)}}switch(t){case"load":r.wst(s),i.push(r);break;case"create":if("function"==typeof r._ut&&!r._ut())return r.Hn();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const oy=self._s;oy.Xmt=class{constructor(t){this.$n="",this.olt=NaN,this.sgt=0,this.igt="default",this.egt="default",this.ngt=!1,this.rgt=!1,this.hgt=1,this.Llt=null,this.ogt="",this.agt=!1,this.lgt=!0,t&&(this.$n=t[0],this.olt=t[1],this.sgt=t[2],this.igt=t[3],this.egt=t[4],this.ngt=!!t[6],this.rgt=!!t[7],this.hgt=t[8],this.ogt=t[9],this.agt=!!t[10],this.lgt=!!t[11],this.Llt=new oy.ugt(t[5],this))}Hn(){this.Llt.Hn(),this.Llt=null}Kot(){return this.Llt||(this.Llt=new oy.ugt(null,this)),this.Llt}Pc(){return this.$n}F3(t){this.$n=t}_1(){return this.olt}G1(t){this.olt=t}rat(){return this.sgt}hat(t){this.sgt=t}oat(){return this.igt}aat(t){this.igt=t}lht(){return this.egt}lat(t){this.egt=t}C1(){return this.ngt}I1(t){this.ngt=t}R1(){return this.rgt}P1(t){this.rgt=t}V0(){return this.hgt}cat(t){this.hgt=t}Art(){return this.ogt}fat(){return this.agt}dat(){return this.lgt}Sst(){return{trackDataJson:this.Llt.Sst(),name:this.$n,totalTime:this.olt,step:this.sgt,interpolationMode:this.igt,resultMode:this.egt,loop:this.ngt,pingPong:this.rgt,repeatCount:this.hgt,startOnLayout:this.ogt,transformWithSceneGraph:!!this.agt,useSystemTimescale:this.lgt}}wst(t){t&&(this.Kot().wst(t.trackDataJson),this.$n=t.name,this.olt=t.totalTime,this.sgt=t.step,this.igt=t.interpolationMode,this.egt=t.resultMode,this.ngt=t.loop,this.rgt=t.pingPong,this.hgt=t.repeatCount,this.ogt=t.startOnLayout,this.agt=!!t.transformWithSceneGraph,this.lgt=!!t.useSystemTimescale)}}}{const ay=self._s;class ly{constructor(t,s){this.Llt=s,this.cgt=null,this.fgt=null,this.klt=NaN,this.Nlt=NaN,this.igt="default",this.egt="default",this.fu=!1,this.dgt=null,this.bct=null,this.Uc="",this.pgt=null,this.mgt=0,this.ggt=this.Llt.nat()._1(),this.Jc=0,this.$n="",t&&(t[0]&&(this.cgt=t[0],this.klt=t[0][2],this.Nlt=t[0][1]),this.igt=t[1],this.egt=t[2],this.fu=!!t[3],t[6]&&(this.Uc=t[6]),t[7]&&(this.pgt=t[7],this.mgt=t[7][0],this.ggt=t[7][1]),t[8]&&(this.fgt=t[8]),t[8]&&(this.fgt=t[8]),t[9]&&(this.Jc=t[9]),t[10]&&(this.$n=t[10]),this.dgt=new ay.ygt(t[4],this),this.bct=new ay.Sgt(t[5],this))}Hn(){this.cgt=null,this.Llt=null,this.dgt&&(this.dgt.Hn(),this.dgt=null),this.bct&&(this.bct.Hn(),this.bct=null),this.pgt=null}Kot(){return this.Llt}dlt(){return this.dgt||(this.dgt=new ay.ygt(null,this)),this.dgt}tut(){return this.bct||(this.bct=new ay.Sgt(null,this)),this.bct}wgt(){return this.cgt}hut(){return this.Nlt}Cut(t){this.Nlt=t}rut(){return this.klt}Tut(t){this.klt=t}oat(){return this.igt}aat(t){this.igt=t}lht(){return this.egt}lat(t){this.egt=t}_ut(){return this.fu}Iut(t){this.fu=!!t}Q1(){return this.Uc}ult(){return this.mgt}Mut(){return this.ggt}Gut(t){this.ggt=t}Rut(){return this.fgt[0]}Put(t){this.fgt||(this.fgt=[]),this.fgt[0]=t}Fut(){return this.fgt||(this.fgt=[]),this.fgt[1]}Aut(t){this.fgt||(this.fgt=[]),this.fgt[1]=t}iI(){return this.Jc}Pc(){return this.$n}Sst(){return{keyframeDataJson:this.dgt.Sst(),propertyTrackDataJson:this.bct.Sst(),instanceData:this.cgt,additionalInstanceData:this.fgt,instanceUid:this.klt,objectClassIndex:this.Nlt,interpolationMode:this.igt,resultMode:this.egt,enabled:this.fu,id:this.Uc,nestedData:this.pgt,type:this.Jc,name:this.$n}}wst(t){t&&(this.cgt=t.instanceData,this.klt=t.instanceUid,this.Nlt=t.objectClassIndex,this.igt=t.interpolationMode,this.egt=t.resultMode,this.fu=t.enabled,this.Uc=t.id,this.Jc=t.type?t.type:0,this.$n=t.name?t.name:"",this.ggt=this.Llt.nat()._1(),t.nestedData&&(this.pgt=t.nestedData,this.mgt=this.pgt[0],this.ggt=this.pgt[1]),t.additionalInstanceData&&(this.fgt=t.additionalInstanceData),this.dlt().wst(t.keyframeDataJson),this.tut().wst(t.propertyTrackDataJson))}}ay.ugt=class{constructor(t,s){this.pot=s,this.vgt=[],ay.snt.Ymt(this.vgt,t,ly,this)}Hn(){this.pot=null;for(const t of this.vgt)t.Hn();ay.wh(this.vgt),this.vgt=null}nat(){return this.pot}wlt(){const t=new ly(null,this);return this.vgt.push(t),t}bgt(t){return t.dlt().qlt()[0]}xgt(t){return t.dlt().qlt().at(-1)}Kut(t,s){const i=s.dlt().qlt(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.nW()===t)return e}}Tgt(t,s){const i=s.dlt().qlt(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.nW()>t)return e}}Yut(t,s){const i=s.dlt().qlt(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.nW()>=t)return e}}$ut(t,s){const i=s.dlt().qlt();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.nW()<=t)return e}}*Yot(){for(const t of this.vgt)yield t}Sst(){return{trackDataItemsJson:this.vgt.map(t=>t.Sst())}}wst(t){t&&ay.snt.Qmt(this.vgt,t.trackDataItemsJson,ly,this)}}}{const uy=self._s;class cy{constructor(t,s){this.bct=s,this.Mgt="",this.Ggt=null,this.apt=null,this.Jc=null,this._gt=NaN,this.Igt=NaN,this.igt="default",this.egt="default",this.fu=!1,this.Cgt=null,this.Pgt=!0,t&&(this.Mgt=t[0][0],this.Ggt=t[0].slice(1),this.apt=t[1],this.Jc=t[2],this._gt=t[3],this.Igt=t[4],this.igt=t[5],this.egt=t[6],this.fu=!!t[7],this.Cgt=new uy.Rgt(t[8],this),this.Pgt=t[9])}Hn(){this.Cgt.Hn(),this.Cgt=null,this.bct=null,this.Ggt=null}tut(){return this.bct}Gct(){return this.Cgt||(this.Cgt=new uy.Rgt(null,this)),this.Cgt}cut(){return this.Mgt}Uct(t){this.Mgt=t}Wct(){return this.Ggt}jct(t){this.Ggt=t}Jct(){return this.apt}$ct(t){this.apt=t}iI(){return this.Jc}Kct(t){this.Jc=t}tft(){return this._gt}sft(t){this._gt=t}ift(){return this.Igt}eft(t){this.Igt=t}oat(){return this.igt}aat(t){this.igt=t}lht(){return this.egt}lat(t){this.egt=t}_ut(){return this.fu}Iut(t){this.fu=!!t}rft(){return!!this.Pgt}Sst(){return{propertyKeyframeDataJson:this.Cgt.Sst(),sourceAdapterId:this.Mgt,sourceAdapterArguments:this.Ggt,property:this.apt,type:this.Jc,min:this._gt,max:this.Igt,interpolationMode:this.igt,resultMode:this.egt,enabled:this.fu,canHavePropertyKeyframes:this.Pgt}}wst(t){t&&(this.Mgt=t.sourceAdapterId,this.Ggt=t.sourceAdapterArguments,this.apt=t.property,this.Jc=t.type,this._gt=t.min,this.Igt=t.max,this.igt=t.interpolationMode,this.egt=t.resultMode,this.fu=t.enabled,this.Pgt=t.canHavePropertyKeyframes,this.Gct().wst(t.propertyKeyframeDataJson))}}uy.Sgt=class{constructor(t,s){this.Dlt=s,this.Egt=[],uy.snt.Ymt(this.Egt,t,cy,this)}Hn(){this.Dlt=null;for(const t of this.Egt)t.Hn();uy.wh(this.Egt),this.Egt=null}flt(){return this.Dlt}rct(){const t=new cy(null,this);return this.Egt.push(t),t}Qct(t){return t.Gct().Mct()[0]}Gdt(t){return t.Gct().Mct().at(-1)}hft(t,s){const i=s.Gct().Mct(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.nW()===t)return e}}lft(t,s){const i=s.Gct().Mct(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.nW()>t)return e}}uft(t,s){const i=s.Gct().Mct(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.nW()>=t)return e}}oft(t,s){const i=s.Gct().Mct();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.nW()<=t)return e}}*Qlt(){for(const t of this.Egt)yield t}Sst(){return{propertyTrackDataItemsJson:this.Egt.map(t=>t.Sst())}}wst(t){t&&uy.snt.Qmt(this.Egt,t.propertyTrackDataItemsJson,cy,this)}}}{const fy=self._s;class dy{constructor(t,s){if(this.dgt=s,this.sz=-1,this.Agt="noease",this.Fgt=!1,this.Uot=null,this.Ogt=null,!t)return;this.sz=t[0],this.Agt=t[1],this.Fgt=!!t[2];const i=t[3];this.Uot=i?i.split(" "):[],this.Ogt=new Set(this.Uot.map(t=>t.toLowerCase())),this.Dgt=null,this.Lgt=null}Hn(){this.dgt=null,fy.wh(this.Uot),this.Uot=null,this.Ogt.clear(),this.Ogt=null,this.Dgt=null}dlt(){return this.dgt}sht(){return this.Dgt}kgt(t){this.Dgt=t}jut(){return this.Lgt}Ngt(t){this.Lgt=t}nW(){return this.sz}M1(t){this.sz=t,this.dgt.Bgt()}Ift(){return this.Agt}H1(t){this.Agt=t}_ut(){return this.Fgt}Iut(t){this.Fgt=!!t}F1(){return this.Uot}yat(t){this.Uot=t?t.split(" "):[],this.Ogt=new Set(this.Uot.map(t=>t.toLowerCase()))}Ugt(){return this.Ogt}zut(){return Array.from(this.Ogt).join(",").trim()}HK(t){return this.Ogt.has(t.toLowerCase())}Sst(){return{time:this.sz,ease:this.Agt,enable:this.Fgt,tags:this.Uot}}wst(t){t&&(this.sz=t.time,this.Agt=t.ease,this.Fgt=t.enable,this.Uot=t.tags,this.Ogt=new Set(this.Uot.map(t=>t.toLowerCase())))}}fy.ygt=class{constructor(t,s){this.Dlt=s,this.Jlt=[],fy.snt.Ymt(this.Jlt,t,dy,this),this.Bgt()}Hn(){this.Dlt=null;for(const t of this.Jlt)t.Hn();fy.wh(this.Jlt),this.Jlt=null}Bgt(){this.Jlt.sort((t,s)=>t.nW()-s.nW());for(let t=0;t<this.Jlt.length;t++){const s=this.Jlt[t];s.kgt(this.Jlt[t+1]),s.Ngt(this.Jlt[t-1])}}flt(){return this.Dlt}Vgt(){return this.Jlt.length}qlt(){return this.Jlt}ect(){const t=new dy(null,this);return this.Jlt.push(t),this.Bgt(),t}oct(t){for(const s of this.Jlt){if(!t(s))continue;const i=this.Jlt.indexOf(s);-1!==i&&(s.Hn(),this.Jlt.splice(i,1))}this.Wgt(),this.Bgt()}Wgt(){this.Jlt.sort((t,s)=>t.nW()-s.nW())}yct(t){return this.Jlt.indexOf(t)}Sct(t){return this.Jlt[t]}*zgt(){for(const t of this.Jlt)yield t}*jgt(){for(let t=this.Jlt.length-1;t>=0;t--)yield this.Jlt[t]}Sst(){return{keyframeDataItemsJson:this.Jlt.map(t=>t.Sst())}}wst(t){t&&(fy.snt.Qmt(this.Jlt,t.keyframeDataItemsJson,dy,this),this.Bgt())}}}{const py=self._s;class my{constructor(t,s){this.Cgt=s,this.Rdt=null,this.Hgt=null,this.Jc="",this.sz=NaN,this.Agt="noease",this.Fgt=!1,this.Jgt=null,this.qgt=void 0,this.$gt="line",t&&(this.Rdt=t[0][0],this.Hgt=t[0][1],this.Jc=t[0][2],this.sz=t[1],this.Agt=t[2],this.Fgt=!!t[3],this.$gt=t[5],this.Jgt=null,t[4]&&(this.Jgt=new py.Xgt(t[4],this)),this.Dgt=null,this.Ygt=null)}Hn(){this.Cgt=null,this.Jgt&&(this.Jgt.Hn(),this.Jgt=null),this.Dgt=null,this.Ygt=null}Kgt(){return this.Jgt}kgt(t){this.Dgt=t}sht(){return this.Dgt}Zgt(t){this.Ygt=t}iht(){return this.Ygt}Hct(){return this.Rdt}Cft(t){"color"===this.Jc&&py.Qi(t)?(this.Rdt[0]=py.Pr(t),this.Rdt[1]=py.Rr(t),this.Rdt[2]=py.Er(t)):this.Rdt=t}gpt(){return this.Hgt}Mft(t){"color"===this.Jc&&py.Qi(t)?(this.Hgt[0]=py.Pr(t),this.Hgt[1]=py.Rr(t),this.Hgt[2]=py.Er(t)):this.Hgt=t}yht(){const t=this.Cgt.Act().lht();return"relative"===t?this.Hct():"absolute"===t?this.gpt():void 0}iI(){return this.Jc}Kct(t){this.Jc=t}nW(){return this.sz}M1(t){this.sz=t,this.Cgt.Qgt()}Ift(){return this.Agt}H1(t){this.Agt=t}_ut(){return this.Fgt}Iut(t){this.Fgt=!!t}eht(){return this.$gt}mht(t){if(!this.Jgt)return;if(this.qgt||null===this.qgt)return this.qgt;const s=this.Jgt.tyt();if(!s)return this.qgt=null,this.qgt;const i=s.length;for(let e=0;e<i;e++){const i=s[e];if(i.Q1()===t)return this.qgt=i,this.qgt}return this.qgt=null,this.qgt}Sst(){const t=this.Jgt;return{addonDataJson:t?t.Sst():t,value:this.Rdt,aValue:this.Hgt,type:this.Jc,time:this.sz,ease:this.Agt,enable:this.Fgt}}wst(t){t&&(t.addonDataJson&&this.Jgt.syt(t.addonDataJson),this.Rdt=t.value,this.Hgt=t.aValue,this.Jc=t.type,this.sz=t.time,this.Agt=t.ease,this.Fgt=t.enable)}}py.Rgt=class{constructor(t,s){this.vct=s,this.Tct=[],this.iyt=[],py.snt.Ymt(this.Tct,t,my,this),py.snt.Zmt(this.iyt,t,my,this),this.Qgt()}Hn(){this.vct=null;for(const t of this.Tct)t.Hn();py.wh(this.Tct),this.Tct=null;for(const t of this.iyt)t.Hn();py.wh(this.iyt),this.iyt=null}Qgt(){let t=this.Tct;t.sort((t,s)=>t.nW()-s.nW());for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.kgt(t[s+1]),s-1>=0&&i.Zgt(t[s-1])}t=this.iyt,t.sort((t,s)=>t.nW()-s.nW());for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.kgt(t[s+1]),s-1>=0&&i.Zgt(t[s-1])}}xft(){const t=new my(null,this);return this.Tct.push(t),this.Qgt(),t}Tft(t){for(const s of this.Tct){if(!t(s))continue;const i=this.Tct.indexOf(s);-1!==i&&(s.Hn(),this.Tct.splice(i,1))}this.eyt(),this.Qgt()}eyt(){this.Tct.sort((t,s)=>t.nW()-s.nW())}Act(){return this.vct}nyt(){return this.Tct.length}Gdt(){return this.Tct[this.Tct.length-1]}Mct(){return this.Tct}tht(){return this.iyt}*ryt(){for(const t of this.Tct)yield t}*hyt(){for(let t=this.Tct.length-1;t>=0;t--)yield this.Tct[t]}Sst(){const t=this.Tct,s=this.iyt;return{propertyKeyframeDataItemsJson:t.map(t=>t.Sst()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.Sst())}}wst(t){t&&(py.snt.Qmt(this.Tct,t.propertyKeyframeDataItemsJson,my,this),py.snt.Qmt(this.iyt,t.propertyKeyframeDataItemsIncludingDisabledJson,my,this),this.Qgt())}}}{const gy=self._s;class yy{constructor(t,s){this.Jgt=s,this.Uc=t[0],this.oyt=t[1]}Hn(){this.Jgt=null,this.oyt=null}Kgt(){return this.Jgt}Q1(){return this.Uc}Sst(){return{id:this.Uc,data:this.oyt}}wst(t){t&&(this.Uc=t.id,this.oyt=t.data)}}class Sy extends yy{constructor(t,s){super(t,s),this.ayt=this.oyt[0],this.lyt=!!this.oyt[1],this.uyt=this.oyt[2],this.cyt=!!this.oyt[3]}Hn(){super.Hn()}vht(){return this.ayt}jmt(){return this.lyt}Tht(){return this.uyt}Hmt(){return this.cyt}Sst(){return Object.assign(super.Sst(),{startAnchor:this.ayt,startEnable:!!this.lyt,endAnchor:this.uyt,endEnable:!!this.cyt})}wst(t){t&&(super.wst(t),this.ayt=t.startAnchor,this.lyt=!!t.startEnable,this.uyt=t.endAnchor,this.cyt=!!t.endEnable)}}class wy extends yy{constructor(t,s){super(t,s),this.fyt=this.oyt[0],this.dyt=this.oyt[1]}Hn(){super.Hn()}qmt(){return this.fyt}Jmt(){return this.dyt}Sst(){return Object.assign(super.Sst(),{direction:this.fyt,revolutions:this.dyt})}wst(t){t&&(super.wst(t),this.fyt=t.direction,this.dyt=t.revolutions)}}class vy extends yy{constructor(t,s){super(t,s),this.pyt=this.oyt[0]}Hn(){super.Hn()}cdt(){return this.pyt}Sst(){return Object.assign(super.Sst(),{startFrom:this.pyt})}wst(t){t&&(super.wst(t),this.pyt=t.startFrom)}}gy.Xgt=class{constructor(t,s){this.myt=s,this.gyt=[],gy.snt.Ymt(this.gyt,t,{tgt:0,map:new Map([["cubic-bezier",Sy],["angle",wy],["initial-animation",vy]])},this)}Hn(){this.myt=null;for(const t of this.gyt)t.Hn();gy.wh(this.gyt),this.gyt=null}yyt(){return this.myt}tyt(){return this.gyt}*Syt(){for(const t of this.gyt)yield t}Sst(){return{addonDataItemsJson:this.gyt.map(t=>t.Sst())}}wst(t){t&&gy.snt.Qmt(this.gyt,t.addonDataItemsJson,{tgt:"id",map:new Map([["cubic-bezier",Sy],["angle",wy],["initial-animation",vy]])},this)}}}{const by=self._s;let xy=0;by.Mmt=class extends by.Ont{constructor(t,s){super("tween-"+xy++,t,s),this.Uc="",this.wyt=!1,this.vyt="start-value",this.Blt=null,this.byt=null,this.xyt=null,this.Tyt=null,this.Myt=null,this.Gyt=null,this.wct=null,this._yt=null}Hn(){this.S1()||(this.Iyt(by.Ryt.Pyt.oq.Cyt),this.Iyt(by.Ryt.Pyt.oq.Eyt),this.Ayt(),super.Hn(),this.Blt=null,this.byt=null,this.xyt=null,this.Gyt=null,this.wct=null,this.Tyt=null,this.Myt=null)}$ot(t){const s=by.jn(by.Event,"tweenstatereleased");s.Fyt=this,t.dispatchEvent(s)}iI(){return 1}wot(){for(const t of this.pot.Kot().Yot())this.mot.push(by.Oyt.KG(this,t));this.wct=this.mot[0]}Slt(){const t=this.pot.Kot().wlt(),s=by.Oyt.KG(this,t);return this.mot.push(s),this.Dyt(),s}Dyt(){this.wct=this.mot[0]}s2(t){return this.wct.Ilt()[0]}Yct(t){this.Lyt=t}J1(){const t=this.Krt();if(!t||!t.length)return;const s=t[0];if(this.wct=s,!s)return;const i=s.J1();return s.nut()?i:void 0}kyt(t){this.Gyt=t}Z1(){return this.Tyt||(this.Tyt=new Promise(t=>{this.Myt=t})),this.Tyt}Ayt(){this.Tyt&&(this.Myt&&this.Myt(),this.Tyt=null,this.Myt=null)}Nyt(t){this.xyt||(this.xyt=[]),this.xyt.push(t)}Byt(t){this.byt||(this.byt=[]),this.byt.push(t)}Uyt(t){if(!this.xyt)return;const s=this.xyt.indexOf(t);-1!==s&&this.xyt.splice(s,1)}Vyt(t){if(!this.byt)return;const s=this.byt.indexOf(t);-1!==s&&this.byt.splice(s,1)}Wyt(t,s){for(const i of this.mot)for(const e of i.$lt){if(e.Clt()!==s)continue;const i=e.tut(),n=e.Act(),r=i.Qct(n);r.Cft(t),r.Mft(t)}}zyt(t){for(const s of this.mot)for(const i of s.$lt)if(i.Clt()===t)return i}jyt(t){let s=!1;for(const i of t){const t=this.zyt(i);t&&(this.Wyt(t.dft(),i),s=!0)}if(s){if(this.mat()){const t=this._1()-this.nW();this.G1(t);for(const s of this.mot)s.Gut(t);this.Vat(0)}else{const t=this.nW();this.G1(t);for(const s of this.mot)s.Gut(t);this.Vat(t)}this.Wat()}}Hyt(t,s){const i=this.zyt(s);if(!i)return;const e=i.tut(),n=i.Act(),r=e.Gdt(n);r.M1(this._1()),r.Cft(t),r.Mft(t)}Jyt(t){this.Uc=t}Q1(){return this.Uc}qyt(t){this.vyt=t}$yt(){return this.vyt}Y1(t){this.wyt=t}X1(){return this.wyt}bat(){if(this.xyt)for(const t of this.xyt)t(this);if(!this.K1())for(const t of this.mot)t.cct()}Pat(){this.Oot=this.Nc.DH()}Rrt(){if(!this.kot&&(this.kot=!0,this.byt))for(const t of this.byt)t(this)}M1(t){this.Xyt(),super.M1(t)}qat(t){by.Qi(t)||(t=this._1()),t<0?this.xot=0:t>=this._1()?this.xot=this._1():this.xot=t,this.wct.$at()}brt(t){if(!this.Prt()&&"current-state"===this.$yt())for(const t of this.mot)t.uct();super.brt(t)}v1(t=!1){if(super.v1(t),!this.K1())for(const t of this.mot)t.lct()}Bf(t=!0,s=!1){this.Xyt(),super.Bf(t,s)}Xyt(){for(const t of this.mot){const s=t=>{const s=t.nW(),i=this._1();return 0!==s&&s!==i};t.hct(s),t.act(s)}}Snt(){if(this.S1())return!0;const t=this.J1();return!(t&&t.gX().m8()||(this.dot.yrt(this),this.ilt(),0))}Grt(t,s,i){if(this.Blt||(this.Blt=this.J1()),!this.Blt||this.Blt.kJ())return this.v1(!0),void this.Pat();const e=this.Blt.BH();if(-1!==e&&(t=i*e),0===t&&0===this.Bot)return;this.Bot=t;const n=this.xot+this.Tot+t*this.Mot,r=this.pot.olt;n<0?(this.xot=0,this.Tot=-n):n>=r?(this.xot=r,this.Tot=this.xot-n):(this.xot=n,this.Tot=0);let h=!1,o=!1;const a=this.C1(),l=this.R1();if(a||l?a&&!l?this.Mot>0?this.xot>=r&&(this.qat(0),this.Iyt(by.Ryt.Pyt.oq.Yyt),this.Iyt(by.Ryt.Pyt.oq.Kyt),o=!0):this.xot<=0&&(this.qat(r),this.Iyt(by.Ryt.Pyt.oq.Yyt),this.Iyt(by.Ryt.Pyt.oq.Kyt),o=!0):!a&&l?this.Mot>0?this.xot>=r&&(this.Vat(r),this.E1(-1*this.A1()),o=!0,1===this.Got?this.Iot<this.V0()?(this.Iot++,this.Iyt(by.Ryt.Pyt.oq.Yyt),this.Iyt(by.Ryt.Pyt.oq.Kyt),this.Iyt(by.Ryt.Pyt.oq.Zyt),this.Iyt(by.Ryt.Pyt.oq.Qyt),this.IsPlaying()?this.Got=0:this._ot=0):(this.Iyt(by.Ryt.Pyt.oq.Zyt),this.Iyt(by.Ryt.Pyt.oq.Qyt),h=!0):0===this.Got&&(this.Iyt(by.Ryt.Pyt.oq.Zyt),this.Iyt(by.Ryt.Pyt.oq.Qyt),this.IsPlaying()?this.Got=1:this._ot=1)):this.xot<=0&&(this.Vat(0),this.E1(-1*this.A1()),o=!0,1===this.Got?this.Iot<this.V0()?(this.Iot++,this.Iyt(by.Ryt.Pyt.oq.Yyt),this.Iyt(by.Ryt.Pyt.oq.Kyt),this.Iyt(by.Ryt.Pyt.oq.Zyt),this.Iyt(by.Ryt.Pyt.oq.Qyt),this.IsPlaying()?this.Got=0:this._ot=0):(h=!0,this.Iyt(by.Ryt.Pyt.oq.Zyt),this.Iyt(by.Ryt.Pyt.oq.Qyt)):0===this.Got&&(this.Iyt(by.Ryt.Pyt.oq.Zyt),this.Iyt(by.Ryt.Pyt.oq.Qyt),this.IsPlaying()?this.Got=1:this._ot=1)):a&&l&&(this.Mot>0?this.xot>=r&&(this.Vat(r),this.E1(-1*this.A1()),o=!0,0===this.Got&&(this.Iyt(by.Ryt.Pyt.oq.Zyt),this.Iyt(by.Ryt.Pyt.oq.Qyt)),1===this.Got&&(this.Iyt(by.Ryt.Pyt.oq.Yyt),this.Iyt(by.Ryt.Pyt.oq.Kyt),this.Iyt(by.Ryt.Pyt.oq.Zyt),this.Iyt(by.Ryt.Pyt.oq.Qyt)),this.IsPlaying()?(this.Got++,this.Got=by.wrap(this.Got,0,2)):(this._ot=this.Got+1,this._ot=by.wrap(this._ot,0,2))):this.xot<=0&&(this.Vat(0),this.E1(-1*this.A1()),o=!0,0===this.Got&&(this.Iyt(by.Ryt.Pyt.oq.Zyt),this.Iyt(by.Ryt.Pyt.oq.Qyt)),1===this.Got&&(this.Iyt(by.Ryt.Pyt.oq.Yyt),this.Iyt(by.Ryt.Pyt.oq.Kyt),this.Iyt(by.Ryt.Pyt.oq.Zyt),this.Iyt(by.Ryt.Pyt.oq.Qyt)),this.IsPlaying()?(this.Got++,this.Got=by.wrap(this.Got,0,2)):(this._ot=this.Got+1,this._ot=by.wrap(this._ot,0,2)))):this.Mot>0?this.xot>=r&&(this.Iot<this.V0()?(this.Iot++,this.qat(0),this.Iyt(by.Ryt.Pyt.oq.Yyt),this.Iyt(by.Ryt.Pyt.oq.Kyt),o=!0):(this.Vat(r),h=!0)):this.xot<=0&&(this.Iot<this.V0()?(this.Iot++,this.qat(r),this.Iyt(by.Ryt.Pyt.oq.Yyt),this.Iyt(by.Ryt.Pyt.oq.Kyt),o=!0):(this.Vat(0),h=!0)),!this.S1()&&this.IsPlaying()){if(h)return this.wct.llt(),this.v1(!0),void this.Pat();this.wct.wc(this.xot,!0,!1,o,this.Not,!1),this.Not&&(this.Not=!1)}}Iyt(t){const s=this.J1();this.Gyt.tSt(this),this.Nc.aZ(t,s,this.Gyt.G0()),this.Gyt.sSt()}Sst(){const t=super.Sst(),s=this.nat();return Object.assign(t,{tweenDataItemJson:s.Sst(),id:this.Uc,destroyInstanceOnComplete:this.wyt,initialValueMode:this.vyt})}wst(t){t&&(this.nat().wst(t.tweenDataItemJson),super.wst(t),this.Uc=t.id,this.wyt=t.destroyInstanceOnComplete,this.vyt=t.initialValueMode,this.Dyt())}static IsPlaying(t){return t.IsPlaying()}static N1(t){return t.N1()}static iSt(t){return!!t.R1()&&0===t.pat()}static eSt(t){return!!t.R1()&&1===t.pat()}static nSt(t){const s=t.runtime.Qot(),i=new by.Xmt;if(t.json){i.wst(t.json.tweenDataItemJson);const e=new by.Mmt(i,s);return e.wst(t.json),e}{const e=new by.Mmt(i,s);by.Te(t.rSt)||(t.rSt=[t.rSt]),e.Jyt(t.id),e.yat(t.tags),e.qyt(t.hSt),e.Y1(t.oSt),e.I1(t.loop),e.P1(t.aSt),e.G1(t.time),e.hat(0),e.aat("default"),e.lat(t.rSt[0].lSt),e.cat(t.U0);const n=e.Slt();n.Tut(t._0.LK()),n.aat("default"),n.lat(t.rSt[0].lSt),n.Iut(!0),n.Cut(t._0.gX().Gj());const r=t._0.m0(),h=r.Eut()?r.Rut():t._0.LJ().xy(),o=r.Eut()?r.Fut():t._0.LJ().My();n.Put(h),n.Aut(o);const a=n.ict();a.M1(0),a.H1("noease"),a.Iut(!0),a.yat("");const l=n.ict();l.M1(t.time),l.H1("noease"),l.Iut(!0),l.yat("");for(const s of t.rSt){const i=n.nct();i.Uct(s.uSt),i.zct(s.cSt),i.qct(s.vut),i.Yct(s.type),i.sft(NaN),i.eft(NaN),i.aat("default"),i.lat(s.lSt),i.Iut(!0);const e=i.bft();e.Kct(s.valueType),e.M1(0),e.H1(s.fSt),e.Iut(!0),e.Cft(s.dSt),e.Mft(s.dSt);const r=i.bft();r.Kct(s.valueType),r.M1(t.time),r.H1(s.fSt),r.Iut(!0),r.Cft(s.pSt),r.Mft(s.pSt),i.sat()}return e}}static Tut(t,s){if(!isNaN(s))for(const i of t.Krt())i.Tut(s)}static kyt(t,s){t.kyt(s)}mSt(t,s){return this._yt||(this._yt=by.jn(self.V1,this,t,s)),this._yt}}}{const Ty=self._s;Ty.Oyt=class extends Ty.Zot{constructor(t,s){super(t,s),this.gSt=null,this.ySt=null}static KG(t,s){return Ty.jn(Ty.Oyt,t,s)}SSt(){1===this.$lt.length?this.gSt=this.$lt[0]:(this.gSt=this.$lt[0],this.ySt=this.$lt[1])}Xlt(){for(const t of this.Dlt.tut().Qlt())this.$lt.push(Ty.wSt.KG(this,t));this.SSt()}nct(){const t=this.Dlt.tut().rct(),s=Ty.wSt.KG(this,t);return this.$lt.push(s),this.SSt(),s}brt(){if(this.eut(),!this.nut()&&this.eat())return;const t=this.iut().mat()?0:this.Mut();for(const s of this.$lt)s.brt(t),0===this.Ylt&&1===s.Lut()&&(this.Ylt=1),0===this.Rnt&&1===s.xrt()&&(this.Rnt=1);this.Klt=0,this.$lt.some(t=>t.hlt())&&(this.Klt=1),this.Hlt=this.kut(t),this.Wlt=!1,this.zlt=!1,this.wc(t)}clt(){}wc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){if(this.Blt||this.J1(),this.Blt)return!this.Blt.kJ()&&(!r||!this.gX().m8())&&(this.ySt?(this.gSt.wc(t,i,e,h),this.ySt.wc(t,i,e,h)):this.gSt.wc(t,i,e,h),void(0!==this.gSt.Lut()&&(this.Ult||(this.Ult=this.Blt.LJ()),this.Ult&&this.Ult.kZ())))}plt(){}wst(t){super.wst(t),this.SSt()}}}{const My=self._s;My.wSt=class extends My.sut{constructor(t,s){super(t,s),this.vSt=!1}static KG(t,s){return My.jn(My.wSt,t,s)}wc(t,s=!1,i=!1,e=!1){let n,r;if(this.vSt)n=this.Tct[0],r=this.Tct[1];else if(s)n=this.bct.oft(t,this.vct),r=n.sht();else{if(this._ct){const s=this.iut(),i=this._ct.sht(),e=this._ct.nW(),n=i?i.nW():s._1();(t<=e||t>=n)&&(this._ct=this.bct.oft(t,this.vct))}else this._ct=this.bct.oft(t,this.vct);n=this._ct,r=n.sht()}this.xct.wc(t,n,r,s,i,e)}bft(){const t=this.vct.Gct().xft();return this._ct=null,this.vSt=this.nft().length<=2,t}act(t){this._ct=null,this.vct.Gct().Tft(t),this.vSt=this.nft().length<=2}Sst(){return{sourceAdapterJson:this.sat().Sst(),basic:this.vSt}}wst(t){t&&(this.sat().wst(t.sourceAdapterJson),this.vSt=t.basic)}}}{const Gy=self._s,_y=self.Wu;Gy.vc=class extends Gy.Wn{constructor(t,s=!0){super(),this.$n=t[0],this.bSt=t[2],this.xSt=[];for(const s of t[1]){const t=Gy.TSt.KG(this,s);this.xSt.push(t)}for(let t=0;t<this.xSt.length;t++){const s=this.xSt[t],i=this.xSt[t+1],e=this.xSt[t-1];s.kgt(i),s.Zgt(e)}this.MSt=new Map,this.GSt=new Map,this._St(),s&&_y.xc(this.$n,(t,s,i,e)=>this.wc(t,s,i,e),null,{transition:this})}static KG(t){return Gy.jn(Gy.vc,t)}Hn(){for(const t of this.xSt)t.Hn();Gy.wh(this.xSt),this.xSt=null,this.MSt.clear(),this.MSt=null,this.GSt.clear(),this.GSt=null}bc(t){this.bSt=!!t}ISt(t){const s=this.GSt.get(t);if(s)return s;for(const s of this.xSt)if(s.CSt()===t)return this.GSt.set(t,s),s}PSt(t){for(let s=this.xSt.length-1;s>=0;s--){const i=this.xSt[s],e=i.CSt();if(e<=t){let s=i;if(e<t)return s;if(e===t){for(;s;){const t=s.iht();if(!t)break;if(t.CSt()!==s.CSt())break;s=t}return s}}}}wc(t,s,i,e){let n=t/e;if(this.bSt){const n=this.ISt(0),r=this.ISt(1),h=s+(s+i)*n.RSt(),o=(s+i)*r.RSt()-h;return 0===e?h+o:_y.Mc(t,h,o,e)}0===e&&(n=1);let r=this.PSt(n),h=r.sht();if(!h){const t=r.iht(),s=r;r=t,h=s}const o=h.CSt()-r.CSt(),a=Gy.Xn(n,r.CSt(),h.CSt(),0,o);if(r.ESt()||0===o){const t=s+(s+i)*r.RSt(),e=(s+i)*h.RSt()-t;return 0===o?1===a?t+e:t:_y.Mc(a,t,e,o)}const l=r.CSt(),u=r.RSt(),c=r.CSt()+r.ASt(),f=r.RSt()+r.FSt(),d=h.CSt()+h.OSt(),p=h.RSt()+h.DSt(),m=h.CSt(),g=h.RSt();let y=_y.rc("spline")(a,l,u,c,f,d,p,m,g,this.MSt.get(r));return y+=r.RSt(),(1-y)*s+y*(s+i)}_St(){this.MSt.clear();for(let t=0;t<this.xSt.length-1;t++){const s=this.xSt[t];if(!s.jmt())continue;const i=s,e=this.xSt[t+1];if(!e.Hmt())continue;const n=i.CSt(),r=i.CSt()+i.ASt(),h=e.CSt()+e.OSt(),o=e.CSt();this.MSt.set(i,_y.Gc(n,r,h,o))}}}}{const Iy=self._s;Iy.TSt=class extends Iy.Wn{constructor(t,s){super(),this.LSt=t,this.kSt=s[0],this.NSt=s[1],this.BSt=s[2],this.USt=s[3],this.VSt=s[4],this.WSt=s[5],this.lyt=s[6],this.cyt=s[7],this.zSt=s[8],this.Dgt=null,this.Ygt=null}Hn(){this.LSt=null}static KG(t,s){return Iy.jn(Iy.TSt,t,s)}kgt(t){this.Dgt=t}sht(){return this.Dgt}Zgt(t){this.Ygt=t}iht(){return this.Ygt}CSt(){return this.kSt}RSt(){return this.NSt}ASt(){return this.BSt}FSt(){return this.USt}OSt(){return this.VSt}DSt(){return this.WSt}jmt(){return this.lyt}Hmt(){return this.cyt}ESt(){return"linear"===this.zSt}jSt(){return"cubic"===this.zSt}}}{const Cy=self._s;Cy.HSt=class extends Cy.Wn{constructor(t){super(),this.Nc=t,this.JSt=[]}Hn(){for(const t of this.JSt)t.Hn();Cy.wh(this.JSt),this.JSt=null}KG(t){this.JSt.push(Cy.vc.KG(t))}}}{const Py=self._s;Py.qSt=class extends Py.Wn{constructor(t){super(),this.Nc=t,this.$St=null,this.XSt=null,this.bnt=t=>this.xnt(t._0)}Hn(){if(this.Ent(),this.$St){for(const t of this.$St.values())t.clear();this.$St.clear()}this.$St=null,this.Nc=null}KG(t){if(this.$St||(this.$St=new Map),!t)return;const s=t[0][16][0],i=t[1];this.$St.has(i)||this.$St.set(i,new Map),this.$St.get(i).set(s,t)}Ant(){const t=this.Nc.Sf();t&&t.addEventListener("instancedestroy",this.bnt)}Ent(){const t=this.Nc.Sf();t&&t.removeEventListener("instancedestroy",this.bnt)}YSt(){return!!this.$St&&0!==this.$St.size}KSt(t,s){let i=0;if(i=t instanceof Py.ZSt?t.Gj():t,!this.$St.has(i))return;const e=this.$St.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}QSt(t,s){this.XSt||(this.XSt=new WeakMap),this.XSt.has(t)||this.XSt.set(t,s)}twt(t){if(!this.XSt)return"";return this.XSt.get(t)||""}xnt(t){this.XSt&&this.XSt.has(t)&&this.XSt.delete(t)}}}{const Ry=self._s;Ry.swt=class{constructor(t){this.Nc=t,this.iwt=new Ry.ewt}Hn(){this.iwt.Hn(),this.iwt=null,this.Nc=null}yq(){return this.Nc}KG(t){this.iwt.Bu(t)}nwt(t){return this.iwt.Hs(t)}rwt(){return this.iwt.rwt()}}}{const Ey=self._s;Ey.hwt=class{constructor(t,s,i,e,n,r,h){this.Nc=n.yq(),this.owt=n,this.awt=t,this.lwt=i,this.uwt=e,this.VS=s,this.int=r,this.cwt=h??r.J1().LK(),this.fwt(),this.dwt=this.mwt?.pwt()??-1,this.gwt=[],this.ywt=null,this.Swt=NaN,this.wwt=null,this.vwt=null,this.bwt=null,this.xwt="",this.Twt=null,this.Mwt="",this.Gwt="",this._wt=0,this.Iwt=!1,this.Aot=!1}Hn(){this.Aot||(Ey.wh(this.gwt),this.gwt=null,this.Nc=null,this.owt=null,this.uwt=null,this.int=null,this.ywt=null,this.Swt=NaN,this.wwt&&this.wwt.clear(),this.wwt=null,this.vwt=null,this.bwt=null,this.xwt="",this.Twt=null,this.Mwt="",this.Gwt="",this.Aot=!0)}Jn(){return this.Aot}Cwt(){return this.owt}yq(){return this.Nc}Pc(){return this.awt}Pwt(){return this.uwt}g1(){return this.VS}$nt(){return this.int||(this.int=this.Nc.EJ(this.cwt).m0()),this.int}Rwt(){return this.Ewt(this.dwt)}Awt(){const t=this.Rwt();return t?t.g1():""}Fwt(){const t=this.Rwt();return t?t.F1():[]}Owt(t){const s=this.Fwt();if(!s)return!1;if(!s.length)return!1;const i=Ey.hwt.Sat(t);return!(!i||!i.length)&&i.every(Ey.hwt.vat,s)}Dwt(t,s){const i=this.Fwt();if(!i)return!1;if(!i.length)return!1;const e=Ey.hwt.Sat(t);return!(!e||!e.length)&&e.every(t=>Ey.hwt.Lwt.call(i,t,s))}static vat(t){const s=this;return""===t?1===s.length&&""===s[0]:s.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static Sat(t){return t.trim().split(" ")}static Lwt(t,s){const i=this;return""===t?1===i.length&&""===i[0]:i.some(i=>Ey.compare(i.trim(),s,t.trim()))}kwt(t){const s=this.Rwt();if(s){if(Ey.Qi(t)){const i=s.Nwt(),e=i?i[t]:void 0;if(Ey.Qi(e))return this.Ewt(e)}if("string"==typeof t)for(const i of s.Nwt()){const s=this.Ewt(i);if(s.T1(t))return this.Ewt(s.pwt())}}}Bwt(t){const s=this.kwt(t);return s?s.g1():""}Uwt(t){const s=this.kwt(t);return s?s.F1():""}Vwt(t){const s=this.Rwt();if(!s)return-1;const i=s.Nwt();if(!i)return-1;const e=this.kwt(t);return e?i.indexOf(e.pwt()):-1}Wwt(){const t=this.Rwt();if(!t)return 0;const s=t.Nwt();return s?s.length:0}Ewt(t){return this.uwt.Ewt(t)}Bf(){this.jwt().zwt(!0)}zwt(t){if(this.Hwt()){for(const[t,s]of this.Hwt().entries())s.zwt(!1);this.Hwt().clear()}if(this.wwt=null,this.ywt=null,this.Jwt=null,this.vwt=null,this.xwt="",this.Twt=null,this.Mwt="",this.Gwt="",this.gwt=[],t){this.owt.qwt(this);const t=this.mwt.pwt();t!==this.dwt&&this.$wt(t)}else this.dwt=this.mwt.pwt()}Xwt(){const t=this.uwt.Ewt(this.dwt);return t?t.Kwt().Ywt():0}Zwt(t){return!(t<0)&&t===this.Qwt()}Qwt(){const t=this.uwt.Ewt(this.dwt);if(!t)return-1;let s=t.Kwt().tvt();return s?t.Kwt().svt().indexOf(s):-1}ivt(t){const s=this.evt(t);return s?s.Pc():""}nvt(t){let s;return Ey.Qi(t)&&(s=this.evt(t)),"string"==typeof t&&(s=this.rvt(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Hct():""}hvt(t,s){if(t._ut())return t.pwt();{const i=t.Kwt().tvt();if(!i)return s.pwt();const e=i.ovt();if(!Ey.Qi(e))return s.pwt();const n=this.Ewt(e);return n?this.hvt(n,s):s.pwt()}}avt(t,s){if(t._ut()){if("reference"===t.iI()){const s=t.lvt(),i=t.uvt(),e=this.owt.nwt(s);if(!e)return[-1,null];const n=e.cvt(i);return n?this.avt(n,e):this.avt(e.fvt(),e)}return[t.pwt(),s]}{const i=t.Kwt().tvt();if(!i)return[-1,null];const e=i.ovt();if(!Ey.Qi(e))return[-1,null];const n=s.Ewt(e);return n?this.avt(n,s):[-1,null]}}dvt(t,s){let i=this.Ewt(t);if(i){if(!i._ut()){const s=this.Ewt(this.dwt);t=this.hvt(i,s)}if(Ey.Qi(t)&&t!==this.dwt)if(i=this.Ewt(t),"reference"===i.iI()){const e=i.lvt(),n=i.uvt(),r=this.owt.nwt(e);let h=r.cvt(n);if(h){const i=this.avt(h,r);if(-1===i[0])return;s(this.dwt,t,i[1],i[0])}else s(this.dwt,t)}else s(this.dwt,t)}}pvt(t){let s;if(Ey.Qi(t)&&(s=this.evt(t)),"string"==typeof t&&(s=this.rvt(t)),!s)return;let i=s.ovt();Ey.Qi(i)&&this.dvt(i,(t,s,i,e)=>{this.gwt.push(t),this.$wt(s,i,e)})}mvt(){const t=this.gvt();if(!t)return;const s=t.ovt();Ey.Qi(s)&&this.dvt(s,(t,s,i,e)=>{this.gwt.push(t),this.$wt(s,i,e)})}yvt(t){const s=this.uwt.cvt(t);if(!s)return;const i=s.pwt();Ey.Qi(i)&&this.dvt(i,(t,s,i,e)=>{this.gwt.push(t),this.$wt(s,i,e)})}Svt(){const t=this.gwt.pop();Ey.Qi(t)?this.$wt(t):this.wvt()&&(this.owt.qwt(this.wvt(),!0,!1,!1),this.wvt().$wt(this.vvt()),this.jwt().bvt(this.wvt()))}xvt(t){if(!this.Rwt())return;const s=this.kwt(t);if(s){if(!s._ut())return;const t=s.pwt();if(!Ey.Qi(t))return;this.gwt.push(this.dwt),this.$wt(s.pwt())}}Tvt(t){if(Ey.Qi(t))return!!this.uwt.Ewt(this.dwt).Kwt().svt()[t];if("string"==typeof t){const s=this.uwt.Ewt(this.dwt).Kwt().svt();for(let i=0;i<s.length;i++)if(s[i].Pc()===t)return!0;return!1}return!1}Mvt(){this.Iwt=!0}Gvt(){return this._wt>0}_vt(){this._wt++}Ivt(){this._wt--,0===this._wt&&this.Iwt&&this.owt.Cvt(this)}$wt(t,s,i){const e=this.dwt,n=this.$nt().J1();this._vt(),this.owt.Pvt(this),this.Nc.aZ(Ey.lq.Evt.oq.Rvt,n),this.Nc.aZ(Ey.lq.Evt.oq.Avt,n),this.Nc.aZ(Ey.lq.Evt.oq.Fvt,n),this.Nc.aZ(Ey.lq.Evt.oq.Ovt,n),this.dwt=t;let r=this.Ewt(this.dwt);if("dictionary"===r.iI()&&(this.Nc.aZ(Ey.lq.Evt.oq.Dvt,n),this.Nc.aZ(Ey.lq.Evt.oq.Lvt,n),this.Nc.aZ(Ey.lq.Evt.oq.kvt,n),this.Nc.aZ(Ey.lq.Evt.oq.Nvt,n)),this.owt.Bvt(),this.Ivt(),!this.Jn()&&(r=this.Ewt(this.dwt),"reference"===r.iI())){const t=s?s.Pc():r.lvt();if(this.Uvt(r)){this.gwt.pop();const t=this.Vvt(r);this.owt.qwt(t,!0,!0,!1),t.Wvt(this,e),this.jwt().bvt(t)}else{const s="number"==typeof i?i:r.uvt();if(t){this.gwt.pop();let i=r.zvt();if(i){let t=this.owt.jvt(i);for(;t;)i=Ey._m(i),t=this.owt.jvt(i)}else{i=`${t}-ref`;let s=this.owt.jvt(i);for(;s;)i=Ey._m(i),s=this.owt.jvt(i)}const n=this.owt.Hvt(t,s,i,this.int,!0);n.Wvt(this,e),this.Jvt(r,n);const h=this.jwt();n.qvt(h),h.bvt(n)}}}}gvt(){const t=this.uwt.Ewt(this.dwt);return t?t.Kwt().tvt():null}evt(t){const s=this.uwt.Ewt(this.dwt);if(!s)return null;const i=s.Kwt().svt();if(!i)return null;return i[t]||null}rvt(t){const s=this.uwt.Ewt(this.dwt);if(!s)return null;return s.Kwt().$vt(t)||null}fwt(t){if("number"==typeof t){let s=this.Ewt(t);s||(s=this.uwt.fvt()),this.mwt=s}else if("number"==typeof this.lwt){let t=this.Ewt(this.lwt);t||(t=this.uwt.fvt()),this.mwt=t}else{let t=this.uwt.cvt(this.lwt);t||(t=this.uwt.fvt()),this.mwt=t}}Sst(){return this.Iwt?null:{flowchartName:this.awt,flowchartTag:this.VS,startNodeTag:this.lwt,currentNodeId:this.dwt,previousNodeIds:this.gwt,pluginUID:this.int.J1().LK(),reference:{previousFlowchartTag:this.wvt()?this.wvt().g1():"",previousStartNodeId:Ey.Qi(this.vvt())?this.vvt():NaN,referencesJson:this.Xvt(),currentReferenceFlowchartTag:this.Yvt()?this.Yvt().g1():"",rootFlowchartTag:this.jwt()?this.jwt().g1():""}}}Xvt(){if(!this.Kvt())return null;const t=[];for(const[s,i]of this.Hwt().entries())t.push({flowchartElementId:s.pwt(),flowchartStateTag:i.g1()});return t.length?t:null}wst(t){if(t){if(this.awt=t.flowchartName,this.VS=t.flowchartTag,this.lwt=t.startNodeTag,this.dwt=t.currentNodeId,this.gwt=t.previousNodeIds,this.cwt=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.xwt=s.previousFlowchartTag,this.Swt=s.previousStartNodeId,this.Twt=s.referencesJson,this.Mwt=s.currentReferenceFlowchartTag,this.Gwt=s.rootFlowchartTag}this.fwt()}}wvt(){return"string"==typeof this.xwt&&this.xwt&&(this.ywt=this.owt.jvt(this.xwt),this.xwt=""),this.ywt}vvt(){return this.Swt}Wvt(t,s){this.ywt=t,this.Swt=s}Yvt(){return"string"==typeof this.Mwt&&this.Mwt&&(this.vwt=this.owt.jvt(this.Mwt),this.Mwt=""),this.vwt}bvt(t){this.vwt=t,this.vwt===this&&(this.vwt=null)}jwt(){return"string"==typeof this.Gwt&&this.Gwt&&(this.bwt=this.owt.jvt(this.Gwt),this.Gwt=""),this.bwt?this.bwt:this}qvt(t){this.bwt=t}Kvt(){return this.Zvt(),!!this.wwt}Uvt(t){return this.Zvt(),this.wwt&&this.wwt.has(t)}Zvt(){if(this.Twt){this.wwt&&this.wwt.clear(),this.wwt||(this.wwt=new Map);for(const t of this.Twt){const s=this.owt.jvt(t.flowchartStateTag),i=s.Ewt(t.flowchartElementId);this.wwt.set(i,s)}this.Twt=null}}Hwt(){return this.Zvt(),this.wwt}Vvt(t){return this.Zvt(),this.wwt.get(t)}Jvt(t,s){this.wwt||(this.wwt=new Map),this.wwt.set(t,s)}}}{const Ay=self._s;Ay.Qvt=class{constructor(t){this.Nc=t,this.tbt=new Map,this.sbt=null,this.ibt=[],this.ebt=()=>this._nt(),this.nbt=null}Hn(){Ay.wh(this.ibt),this.ibt=null,this.tbt.clear(),this.tbt=null,this.sbt=null,this.Nc=null,this.nbt=null}yq(){return this.Nc}nwt(t){return this.Nc.Cwt().nwt(t)}Hvt(t,s,i,e,n,r){const h=this.Nc.Cwt().nwt(t);if(!h)return void console.warn(`[Flowcharts] no flowchart found with name '${t}'`);if(this.tbt.has(i)){const t=this.tbt.get(i);t&&this.Cvt(t)}const o=new Ay.hwt(t,i,s,h,this,e,r);return this.tbt.set(i,o),n&&this.qwt(o,!0),o}Cvt(t){if(t.Mvt(),t.Gvt())return;const s=t.g1();this.tbt.delete(s),t.Hn(),this.sbt===t&&(this.sbt=null)}rbt(t){t.Bf()}jvt(t){return this.tbt.get(t)}Pvt(t){this.ibt.push(t)}Bvt(){this.ibt.pop()}qwt(t,s=!1,i=!1,e=!0){if(e){const s=t.Yvt();t=s||t}t!==this.sbt&&(this.hbt(),this.obt(t,s,i))}abt(t){return"string"==typeof t?this.jvt(t):this.ibt.length?this.ibt[this.ibt.length-1]:this.sbt}hbt(){if(!this.sbt)return;if(this.sbt.Jn())return;const t=this.sbt.$nt().J1();this.sbt._vt(),this.Pvt(this.sbt),this.Nc.aZ(Ay.lq.Evt.oq.lbt,t),this.Bvt(),this.sbt.Ivt()}obt(t,s=!1,i=!1){if(this.sbt=t,!this.sbt)return;if(this.sbt.Jn())return;const e=this.sbt.$nt().J1();this.sbt._vt(),this.Pvt(this.sbt),this.Nc.aZ(Ay.lq.Evt.oq.ubt,e),!0!==i&&"number"!=typeof i||this.sbt.fwt(i),s&&(this.Nc.aZ(Ay.lq.Evt.oq.Dvt,e),this.Nc.aZ(Ay.lq.Evt.oq.Lvt,e),this.Nc.aZ(Ay.lq.Evt.oq.kvt,e),this.Nc.aZ(Ay.lq.Evt.oq.Nvt,e)),this.Bvt(),this.sbt.Ivt()}Sst(){return{flowchartJsonObjects:[...this.tbt.values()].map(t=>t.Sst()),currentFlowchartTag:this.sbt?this.sbt.g1():null}}wst(t){if(!t)return;this.nbt=t;const s=new Map;for(const t of this.nbt.flowchartJsonObjects){const i=t.flowchartTag;if(this.tbt.has(i)){const e=this.tbt.get(i);e.wst(t),s.set(i,e)}else{const i=this.Hvt(t.flowchartName,t.startNodeTag,t.flowchartTag,null,!1,t.pluginUID);i.wst(t),s.set(t.flowchartTag,i)}}for(const[t,i]of this.tbt.entries())s.has(t)||i.Hn();this.tbt.clear(),this.tbt=s,this.Nc.Yit()?this.Nc.Sf().addEventListener("afterload",this.ebt):this._nt()}_nt(){this.Nc.Sf().removeEventListener("afterload",this.ebt);const t=this.tbt.get(this.nbt.currentFlowchartTag);t&&this.qwt(t,!0),this.nbt=null}}}{const Fy=self._s;Fy.ewt=class{constructor(){this.cbt=new Map}Hn(){for(const t of this.cbt.values())t.Hn();this.cbt.clear(),this.cbt=null}Bu(t){const s=new Fy.fbt(t),i=s.Pc();this.cbt.set(i,s)}Hs(t){return this.cbt.get(t)}rwt(){return!!this.cbt.size}static dbt(t,s,i,e){if(s)for(const n of s){const s=new i(n,e);t.push(s)}}}}{const Oy=self._s;Oy.fbt=class{constructor(t){this.$n=t[0],this.pbt=new Oy.mbt(t[1],this)}Hn(){this.pbt.Hn(),this.pbt=null}gbt(){return this.pbt}Ewt(t){return this.pbt.Ewt(t)}cvt(t){return this.pbt.cvt(t)}fvt(){return this.pbt.fvt()}Pc(){return this.$n}}}{const Dy=self._s;class Ly{constructor(t,s){this.pbt=s,this.Jc=t[7],this.ybt=t[0],this.VS=t[1],this.VS?this.Uot=this.VS.trim().split(" ").map(t=>t.trim()):this.Uot=[],this.Sbt=t[2],this.wbt=null,this.vbt=null,this.Fgt=!1,"dictionary"===this.Jc&&(this.wbt=t[3],this.vbt=t[4],this.Fgt=t[8]),this.bbt=t[6],this.xbt=null,this.Tbt=null,this.Mbt=null,"reference"===this.Jc&&(this.xbt=t[8],this.Tbt=t[9],this.Mbt=t[10],this.Fgt=t[11]),this.Gbt=new Dy._bt(t[5],this)}Hn(){this.pbt=null}gbt(){return this.pbt}Kwt(){return this.Gbt}pwt(){return this.ybt}g1(){return this.VS}F1(){return this.Uot}T1(t){if(!this.Uot)return!1;if(!this.Uot.length)return!1;const s=Dy.hwt.Sat(t);return!(!s||!s.length)&&s.every(Dy.hwt.vat,this.Uot)}Ibt(){return this.bbt}Cbt(t){this.bbt=!!t}Pbt(){if("dictionary"===this.Jc)return!0;if("reference"===this.Jc)return!1;throw new Error(`unexpected flowchart node type: ${this.Jc}`)}Nwt(){return this.Sbt}Rbt(){return this.wbt}Ebt(){return this.vbt}iI(){return this.Jc}_ut(){return this.Fgt}lvt(){return this.xbt}uvt(){return this.Tbt}zvt(){return this.Mbt}}Dy.mbt=class{constructor(t,s){this.uwt=s,this.Abt=[],this.Fbt=new Map,this.Obt=new Map,this.Dbt=null,Dy.ewt.dbt(this.Abt,t,Ly,this);for(const t of this.Abt){const s=t.pwt(),i=t.g1(),e=t.F1(),n=t.Ibt();if(this.Fbt.set(s,t),i)for(const s of e)this.Obt.has(s)||this.Obt.set(s,new Set),this.Obt.get(s).add(t);n&&(this.Dbt=t);const r=t.Kwt();for(const t of r.Lbt()){const s=t.pwt();this.Fbt.set(s,t)}}this.Dbt||this.kbt()}Hn(){this.uwt=null;for(const t of this.Abt)t.Hn();Dy.wh(this.Abt),this.Abt=null}Pwt(){return this.uwt}Ewt(t){return this.Fbt.get(t)}cvt(t){if(!t||!t.length)return null;const s=[];for(const i of t.trim().split(" ")){let t=this.Obt.get(i.trim())??new Set;if(0===t.size)return null;s.push(t)}return[...s.reduce((t,s)=>s.size<t.size?s:t)].filter(t=>s.every(s=>s.has(t)))[0]}fvt(){return this.Dbt}*Nbt(){for(const t of this.Abt)yield t}kbt(){let t=0;for(const s of this.Nbt())s.Ibt()&&t++;if(0===t){for(const t of this.Nbt())if(t.Pbt()&&!t.Ibt())return void t.Cbt(!0)}else{if(1===t)return;if(t>1){let t=!0;for(const s of this.Nbt())s.Pbt()&&(s.Ibt()&&t?t=!1:s.Ibt()&&!t&&s.Cbt(!1))}}for(const t of this.Nbt())if(t.Pbt()&&t.Ibt())return void(this.Dbt=t)}}}{const ky=self._s;class Ny{constructor(t,s){this.Gbt=s,this.ybt=t[0],this.$n=t[1],this.Rdt=t[2],this.Bbt=t[3],this.Fgt=t[4],this.Ubt=t[5]}Hn(){this.Gbt=null}Kwt(){return this.Gbt}pwt(){return this.ybt}Pc(){return this.$n}Hct(){return this.Rdt}ovt(){return this.Bbt}_ut(){return this.Fgt}Vbt(){return this.Ubt}}ky._bt=class{constructor(t,s){this.Wbt=s,this.zbt=[],this.jbt=new Map,ky.ewt.dbt(this.zbt,t,Ny,this),this.Hbt=this.zbt.filter(t=>t._ut());for(const t of this.Hbt)this.jbt.set(t.Pc(),t)}Hn(){this.Wbt=null;for(const t of this.zbt)t.Hn();ky.wh(this.zbt),this.zbt=null,ky.wh(this.Hbt),this.Hbt=null}Jbt(){return this.Wbt}Ywt(){return this.Hbt.length}svt(){return this.Hbt}$vt(t){return this.jbt.get(t)}tvt(){for(const t of this.Hbt)if(t.Vbt())return t}*Lbt(){for(const t of this.Hbt)yield t}}}{const By=self._s;By.qbt=class extends By.Wn{constructor(t){super(),this.$bt=t,this.Xbt=[],this.Xbt.push(By.jn(By.Ybt,this)),this.US=0,this.Kbt=this.Xbt[0]}Hn(){for(const t of this.Xbt)t.Hn();By.wh(this.Xbt),this.Kbt=null,this.$bt=null}gX(){return this.$bt}cX(){return this.Kbt}Zbt(){return this.Xbt[this.US-1]}Pu(){this.cX().Pu()}Qbt(){const t=this.Xbt,s=++this.US;if(s===t.length){const s=By.jn(By.Ybt,this);t.push(s),this.Kbt=s}else{const i=t[s];i.Bf(),this.Kbt=i}}txt(){const t=this.Xbt,s=++this.US;s===t.length&&t.push(By.jn(By.Ybt,this));const i=t[s];i.rd(t[s-1]),this.Kbt=i}z3(){this.Kbt=this.Xbt[--this.US]}sxt(t){const s=this.Xbt;for(let i=0,e=s.length;i<e;++i)s[i].sxt(t)}}}{const Uy=self._s;Uy.Ybt=class extends Uy.Wn{constructor(t){super(),this.Xbt=t,this.$bt=this.Xbt.gX(),this.ixt=this.$bt.yq().wH(),this.nxt=!0,this.U6=[],this.rxt=[]}Hn(){this.hxt(),this.Xbt=null,this.$bt=null,this.ixt=null}hxt(){Uy.wh(this.U6),Uy.wh(this.rxt)}gX(){return this.$bt}oxt(){return this.nxt}axt(){return this.nxt?!!this.$bt.MX():!!this.U6.length}uX(){return this.nxt?this.$bt.uX():this.U6}lxt(){return!!this.rxt.length}uxt(){return this.rxt}cxt(){const t=this.uX();return t.length?t:this.rxt}Bf(){this.nxt=!0,Uy.wh(this.rxt)}Pu(){this.nxt=!0}rd(t){t.oxt()?this.Bf():(this.nxt=!1,Uy.Mh(this.U6,t.U6),Uy.wh(this.rxt))}fxt(t){this.U6.push(t)}dxt(t){this.rxt.push(t)}pxt(t){this.nxt=!!t}mxt(){return this.U6}gxt(){return this.rxt}yxt(t){this.nxt=!1,Uy.wh(this.U6),this.U6.push(t)}Sxt(t){this.nxt=!1,Uy.Mh(this.U6,t)}wxt(t){this.nxt=!1,Uy.wh(this.U6);for(const s of t)this.U6.push(s)}vxt(t,s){for(const i of s)t.has(i)||this.rxt.push(i)}bxt(t){for(const s of t)this.U6.push(s);Uy.Ph(this.rxt,t)}xxt(){Uy.wh(this.rxt)}Txt(t){if(t)if(this.ixt.R3().fH().Mxt()){this.oxt()&&(Uy.wh(this.U6),Uy.Mh(this.rxt,t.gX().uX()),this.nxt=!1);const s=this.rxt.indexOf(t);-1!==s&&(this.U6.push(this.rxt[s]),this.rxt.splice(s,1))}else this.yxt(t)}sxt(t){Uy.Ph(this.U6,t),Uy.Ph(this.rxt,t)}}}{const Vy=self._s;Vy.Gxt=class extends Vy.Wn{constructor(t){super(),this._xt=t,this.Nc=this._xt.yq(),this.Xbt=[],this.Xbt.push(Vy.jn(Vy.Ixt,this,null)),this.US=0,this.Cxt=[]}Hn(){for(const t of this.Xbt)t.Hn();Vy.wh(this.Xbt),Vy.wh(this.Cxt),this._xt=null,this.Nc=null}hH(){return this._xt}yq(){return this.Nc}R3(){return this.Xbt[this.US]}Pxt(){return this.Xbt}Rxt(){return this.US}E3(t){const s=this.Xbt,i=++this.US;if(i===s.length){const i=Vy.jn(Vy.Ixt,this,t);return s.push(i),i}{const e=s[i];return e.Bf(t),e}}z3(){--this.US}Ext(t){this.Cxt.push(t)}Axt(){this.Cxt.pop()}SH(){const t=this.Cxt;return 0===t.length?null:t.at(-1)}}}{const Wy=self._s;Wy.Ixt=class extends Wy.Wn{constructor(t,s){super(),this.Xbt=t,this.Nc=this.Xbt.yq(),this.Fxt=s,this.Oxt=0,this.Dxt=0,this.Lxt=!1,this.kxt=!1,this.Nxt=null,this.Bxt=0,this.Uxt=0,this.Vxt=null}Hn(){this.Bf(null),this.Xbt=null,this.Nc=null}Bf(t){this.Fxt=t,this.Oxt=0,this.Dxt=0,this.Lxt=!1,this.kxt=!1,this.Vxt=null}Wxt(t,s){this.Fxt=t,this.Oxt=0,this.Dxt=s}zxt(){this.Oxt=0,this.Dxt=0}fH(){return this.Fxt}jxt(t){this.Fxt=t}Hxt(){return this.Oxt}Jxt(t){this.Oxt=t}qxt(){return this.Dxt}$xt(t){this.Dxt=t}Xxt(t){this.Lxt=!!t}Yxt(){return this.Lxt}Kxt(t){this.kxt=!!t}Zxt(){return this.kxt}Qxt(t){this.Nxt=t}tTt(){return this.Nxt}sTt(t,s){this.Bxt=t,this.Uxt=s}vH(){return this.Bxt}bH(t){this.Uxt=t}iTt(){return this.Uxt}eTt(){const t=this.Fxt;return!!t.nTt()||this.Oxt<t.rTt()-1&&!!t.bX().length}hTt(t){this.Vxt=t}oTt(){return this.Vxt}}}{const zy=self._s;zy.aTt=class extends zy.Wn{constructor(t){super(),this._xt=t,this.Nc=this._xt.yq(),this.Xbt=[],this.US=-1,this.Kbt=null,this.lTt=[]}Hn(){zy.wh(this.Xbt),this._xt=null,this.Nc=null}uTt(t){this.lTt=t;const s=this.lTt.slice(0);this.Xbt.push(s),this.US=0,this.Kbt=s}hH(){return this._xt}yq(){return this.Nc}cTt(){return this.Kbt}E3(){const t=++this.US,s=this.Xbt;t===s.length?s.push(this.lTt.slice(0)):zy.Mh(s[t],this.lTt),this.Kbt=s[t]}z3(){this.Kbt=this.Xbt[--this.US]}}}{const jy=self._s;jy.fTt=class extends jy.Wn{constructor(t){super(),this._xt=t,this.Nc=this._xt.yq(),this.Xbt=[],this.US=-1}Hn(){jy.wh(this.Xbt),this._xt=null,this.Nc=null}hH(){return this._xt}yq(){return this.Nc}dTt(){return this.US>=0}cTt(){return this.Xbt[this.US]}E3(){if(++this.US,this.US===this.Xbt.length){const t=jy.jn(jy.pTt,this);return this.Xbt.push(t),t}{const t=this.Xbt[this.US];return t.Bf(),t}}z3(){--this.US}mTt(t){const s=this.Xbt;for(let i=this.US;i>=0;--i){const e=s[i];if(e.Pc()===t)return e}return null}gTt(){return this.Xbt.slice(0,this.US+1)}}}{const Hy=self._s;Hy.pTt=class extends Hy.Wn{constructor(t){super(),this.yTt=t,this.$n="",this.US=0,this.STt=!1,this.wTt=NaN}Bf(){this.$n="",this.US=0,this.STt=!1,this.wTt=NaN}F3(t){this.$n=t}Pc(){return this.$n}U3(t){this.US=t}Gj(){return this.US}v1(){this.STt=!0}W3(){return this.STt}vTt(t){this.wTt=t}bTt(){return this.wTt}}}{const Jy=self._s;Jy.xTt=class extends Jy.Wn{constructor(){super(),this.Xbt=[],this.US=-1}Hn(){Jy.wh(this.Xbt)}cTt(){return this.Xbt[this.US]}E3(){if(++this.US,this.US===this.Xbt.length){const t=[];return this.Xbt.push(t),t}return this.Xbt[this.US]}z3(){--this.US}}}{let qy=function(t,s){return t.Gj()-s.Gj()},$y=function(t,s){for(let i=0,e=t.length;i<e;++i)if(t[i]!==s[i])return!1;return!0};0;const Xy=self._s;self.assert;Xy.TTt=class extends Xy.Wn{constructor(t){super(),this.Nc=t,this.MTt=[],this.GTt=new Map,this._Tt=[],this.ITt=new Map,this.CTt=new Map,this.PTt=new Map,this.RTt=new Map,this.ETt=new Map,this.ATt=new Map,this.FTt=0,this.OTt=[],this.DTt=[],this.LTt=[],this.kTt=new Map,this.NTt=new Map,this.ixt=Xy.jn(Xy.Gxt,this),this.BTt=Xy.jn(Xy.aTt,this),this.yTt=Xy.jn(Xy.fTt,this),this.UTt=[],this.VTt=[],this.WTt=[],this.zTt=0,this.jTt=0,this.HTt=0,this.JTt=[],this.qTt=[],this.$Tt=[],this.XTt=new Map,this.YTt=new Map,self.c3_callFunction=(t,s)=>this.KTt(t,s)}Hn(){this.met(),this.ixt.Hn(),this.ixt=null,this.BTt.Hn(),this.BTt=null,Xy.wh(this.VTt),Xy.wh(this.WTt),this.Nc=null,Xy.wh(this.MTt),this.GTt.clear()}KG(t){const s=Xy.jn(Xy.ZTt,this,t);this.MTt.push(s),this.GTt.set(s.Pc().toLowerCase(),s)}QTt(t){this.UTt.push(t)}tMt(){for(const t of this.NTt.values())t.sMt();for(const t of this.kTt.values())t.tMt();for(const t of this.NTt.values())t.tMt();for(const t of this.MTt)t.tMt();for(const t of this.MTt)t.Bit();for(const t of this.UTt)t.tMt(!1);Xy.wh(this.UTt),this.BTt.uTt(this.LTt)}yq(){return this.Nc}Nit(t){return this.GTt.get(t.toLowerCase())||null}iMt(t){this._Tt.push(t),this.ITt.set(t.eMt(),t)}nMt(t){this.CTt.set(t.t9(),t)}rMt(t){this.PTt.set(t.t9(),t)}hMt(t){this.RTt.set(t.t9(),t)}oMt(t){switch(t.aMt()){case 0:this.kTt.set(t.lMt().toLowerCase(),t);break;case 1:this.NTt.set(t.lMt().toLowerCase(),t)}}uMt(t){this.ATt.set(t.t9(),t),t.m8()?this.OTt.push(t):this.DTt.push(t)}cMt(t){t.length>=2&&t.sort(qy);let s=this.ETt.get(t.length);s||(s=[],this.ETt.set(t.length,s));for(let i=0,e=s.length;i<e;++i){const e=s[i];if($y(t,e))return e}return s.push(t),t}fMt(t){return this.LTt.push(t.dMt()),this.FTt++}wH(){return this.ixt}pMt(){return this.wH().R3()}fH(){return this.pMt().fH()}mMt(){const t=this.pMt();return t.fH().gMt(t.Hxt())}yMt(){const t=this.pMt();return t.fH().SMt(t.qxt())}wMt(){return this.BTt}A3(){return this.yTt}vMt(t){const s=[];for(t=t.bMt();t;)Xy.An(s,t.xMt()),t=t.bMt();return s}TMt(t){const s={};for(const i of this.vMt(t))s[i.MMt()]=i.GMt();return Object.create(Object.prototype,s)}_Mt(t){return this.ATt.get(t)||null}IMt(t){return this.CTt.get(t)||null}CMt(t){return this.PTt.get(t)||null}PMt(t){return this.RTt.get(t)||null}oH(t){return this.kTt.get(t.toLowerCase())||null}dX(t,s){let i=this.NTt.get((t.Pc()+"."+s).toLowerCase());if(i)return i;if(!t.pX())for(const e of t.EX())if(i=this.NTt.get((e.Pc()+"."+s).toLowerCase()),i)return i;return null}RMt(){return this.OTt}EMt(){return this.DTt}AMt(t){for(const t of this.OTt)t.FMt();if(t)for(const t of this.DTt)t.QM()&&t.FMt()}OMt(t){return this.ITt.get(t.toLowerCase())||null}DMt(t){const s=this.CTt.get(t);return s&&s.LMt()?s:null}kMt(){return this._Tt}NMt(){for(const t of this._Tt)t.BMt()}UMt(){for(const t of this.MTt)t.VMt()}WMt(t){this.UMt(),this.zTt++;for(const s of t.$et()){const t=s.fit();t&&(this.Nc.zMt(s),t.xP(),this.Nc.jMt())}this.zTt--}async HMt(t){this.UMt(),this.zTt++;for(const s of this.JMt(t))await this.Nc.qMt(s);this.zTt--}*JMt(t){for(const s of t.$et()){const t=s.fit();t&&(this.Nc.zMt(s),yield*t.$Mt(),this.Nc.jMt())}}XMt(t,s,i,e){let n=!1;if(!t.fJ())return this.YMt(s,i,e);this.jTt++;for(const r of t.$et()){const t=r.fit();if(!t)continue;this.Nc.zMt(r);for(const r of t.KMt()){const t=r.XMt(s,i,e);n=n||t}const h=t.XMt(s,i,e);n=n||h,this.Nc.jMt()}return this.jTt--,n}*ZMt(t,s,i,e){let n=!1;if(!t.fJ())return this.YMt(s,i,e);this.jTt++;for(const r of t.$et()){const t=r.fit();if(!t)continue;this.Nc.zMt(r);for(const r of t.KMt()){const t=yield*r.ZMt(s,i,e);n=n||t}const h=yield*t.ZMt(s,i,e);n=n||h,this.Nc.jMt()}return this.jTt--,n}YMt(t,s,i){return this.VTt.push([t,s,i]),!1}QMt(t,s,i){let e=null;const n=new Promise(t=>e=t);return this.WTt.push([t,s,i,e]),n}*tGt(){if(this.Nc.sGt())throw new Error("should not be in breakpoint");const t=this.Nc.mJ();for(;this.WTt.length;){const[s,i,e,n]=this.WTt.shift();n(yield*this.ZMt(t,s,i,e))}}async iGt(){for(const t of this.tGt())await this.Nc.qMt(t)}eGt(t,s,i,e){let n=!1;const r=t.fJ(),h=r.fit();if(!h)return;this.jTt++,this.Nc.zMt(r);const o=h.KMt();for(let t=0,r=o.length;t<r;++t){const r=o[t].eGt(s,i,e);n=n||r}const a=h.eGt(s,i,e);return n=n||a,this.Nc.jMt(),this.jTt--,n}*nGt(t,s,i,e){let n=!1;const r=t.fJ(),h=r.fit();if(!h)return;this.jTt++,this.Nc.zMt(r);const o=h.KMt();for(let t=0,r=o.length;t<r;++t){const r=yield*o[t].nGt(s,i,e);n=n||r}const a=yield*h.nGt(s,i,e);return n=n||a,this.Nc.jMt(),this.jTt--,n}rGt(){return this.jTt}hGt(){return this.rGt()>0}oGt(){return++this.jTt}aGt(){--this.jTt}lGt(){return this.zTt>0}qJ(){return this.lGt()||this.hGt()}het(t){for(const[s,i,e]of this.VTt)this.XMt(t,s,i,e);Xy.wh(this.VTt)}CX(t){t?this.HTt++:this.HTt--}XJ(){return this.HTt>0}uGt(t){for(let s=0,i=t.length;s<i;++s)t[s].cGt().Pu()}fGt(t){for(let s=0,i=t.length;s<i;++s)t[s].cGt().Qbt()}L3(t){for(let s=0,i=t.length;s<i;++s)t[s].cGt().txt()}B3(t){for(let s=0,i=t.length;s<i;++s)t[s].cGt().z3()}dH(t){const s=new Set,i=this.ixt.Pxt(),e=this.ixt.Rxt();for(let n=0;n<=e;++n){const e=i[n].oTt();if(e)for(const i of e)t&&t.has(i)||s.add(i)}return s}dGt(t){const s=new Set([...t]),i=this.dH(s);if(i.size>0){for(const t of i)t.cGt().Qbt();return[...i]}return null}pGt(){const t=Xy.jn(Xy.mGt,this);return this.JTt.push(t),t}gGt(){return this.JTt}yGt(){if(!this.JTt.length)return;const t=this.pMt();let s=!1;this.zTt++;for(let i=0,e=this.JTt.length;i<e;++i){const e=this.JTt[i];e.SGt()&&e.wGt(t),e.vGt()&&(s=!0)}s&&(this.bGt(),t.Bf(null)),this.zTt--}async xGt(){if(!this.JTt.length)return;const t=this.pMt();let s=!1;this.zTt++;for(let i=0,e=this.JTt.length;i<e;++i){const e=this.JTt[i];e.SGt()&&await e.TGt(t),e.vGt()&&(s=!0)}s&&(this.bGt(),t.Bf(null)),this.zTt--}bGt(){const t=Xy.Ch(this.JTt,t=>t.vGt());for(const s of t)s.Hn()}met(){for(const t of this.JTt)t.Hn();Xy.wh(this.JTt)}MGt(t){for(const s of this.JTt)s.sxt(t);for(const s of t){const t=this.YTt.get(s);if(this.YTt.delete(s),t)for(const{resolve:s}of t.GGt.values())s(!0)}}_Gt(t){this.qTt.push({promise:t,IGt:this.rGt()})}CGt(){Xy.wh(this.qTt)}PGt(){const t=this.rGt(),s=Promise.all(this.qTt.filter(s=>s.IGt===t).map(t=>t.promise));return this.qTt=this.qTt.filter(s=>s.IGt<t),s}xH(t){const s=t.toLowerCase();this.$Tt.push(s),this.Nc.aZ(Xy.lq.aq.oq.RGt,null),this.$Tt.pop();for(const t of this.Nc.hH().gGt())t.EGt()&&t.AGt()===s&&t.FGt();const i=this.XTt.get(s);i&&(i.resolve(),this.XTt.delete(s))}MH(t){const s=t.toLowerCase(),i=this.XTt.get(s);if(i)return i.promise;{let t=null;const i=new Promise(s=>t=s);return this.XTt.set(s,{promise:i,resolve:t}),i}}OGt(){if(0===this.$Tt.length)throw new Error("not in a signal");return this.$Tt.at(-1)}DGt(t){let s=this.YTt.get(t);return s||(s={LGt:[],GGt:new Map},this.YTt.set(t,s)),s}ZK(t,s){const i=this.DGt(t),e=s.toLowerCase();i.LGt.push(e),this.Nc.aZ(t.Q$().NGt().oq.kGt,t),i.LGt.pop();for(const s of this.Nc.hH().gGt())s.BGt()&&s.AGt()===e&&s.UGt(t);const n=i.GGt.get(e);n&&(n.resolve(!1),i.GGt.delete(e)),0===i.LGt.length&&0===i.GGt.size&&this.YTt.delete(t)}QK(t,s){const i=this.DGt(t),e=s.toLowerCase(),n=i.GGt.get(e);if(n)return n.promise;{let t=null;const s=new Promise(s=>t=s);return i.GGt.set(e,{promise:s,resolve:t}),s}}VGt(t){const s=this.DGt(t);if(!s||0===s.LGt.length)throw new Error("not in a signal");return s.LGt.at(-1)}Sst(){return{groups:this.WGt(),cnds:this.zGt(),acts:this.jGt(),vars:this.HGt(),waits:this.JGt()}}wst(t){this.qGt(t.groups),this.$Gt(t.cnds),this.XGt(t.acts),this.YGt(t.vars),this.KGt(t.waits)}WGt(){const t={};for(const s of this.kMt())t[s.t9().toString()]=s.ZGt();return t}qGt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.DMt(t);e&&e.QGt(i)}}zGt(){const t={};for(const[s,i]of this.PTt){const e=i.Sst();e&&(t[s.toString()]=e)}return t}$Gt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.PTt)i.wst(s.get(t)||null)}jGt(){const t={};for(const[s,i]of this.RTt){const e=i.Sst();e&&(t[s.toString()]=e)}return t}XGt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.RTt)i.wst(s.get(t)||null)}HGt(){const t={};for(const[s,i]of this.ATt)i.t_t()||!i.m8()&&!i.QM()||(t[s.toString()]=i.Hct());return t}YGt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this._Mt(t);e&&e.Cft(i)}}JGt(){return this.JTt.filter(t=>!t.s_t()).map(t=>t.Sst())}KGt(t){this.met();for(const s of t){const t=Xy.mGt.i_t(this,s);t&&this.JTt.push(t)}}e_t(){return[...this.Nc.mJ().$et()].map(t=>t.fit()).filter(t=>t).map(t=>t.n_t())}r_t(t){for(;t;){const s=t.bMt();if(s instanceof Xy.h_t)return s;t=s}return null}KTt(t,s){Array.isArray(s)||(s=[]);const i=this.oH(t.toLowerCase());if(!i)return null;if(!i._u())return i.aH();const e=i.o_t();if(s.length<e.length){s=s.slice(0);do{s.push(e[s.length].dMt())}while(s.length<e.length)}const n=i.uH();return n.pH(n.cH(),!1,i.gH(),i.aH(),null,...s)}}}{const Yy=self._s;Yy.ZTt=class extends Yy.Wn{constructor(t,s){super(),this._xt=t,this.Nc=t.yq(),this.$n=s[0],this.a_t=[],this.l_t=new Map,this.u_t=new Map,this.c_t=new Map,this.f_t=!1,this.d_t=[],this.p_t=[],this.m_t=new Set;for(const t of s[1])this.g_t(t,null,this.a_t);this.y_t=this.Nc.gZ()?{type:"sheet",name:this.$n,S_t:0,children:[]}:null}Hn(){this._xt=null,this.Nc=null}g_t(t,s,i){switch(t[0]){case 0:case 3:this.w_t(t,s,i);break;case 1:this.v_t(t,s,i);break;case 2:this.b_t(t,s,i);break;case 4:this.x_t(t,s);break;case 5:this.T_t(t,s,i);break;case 6:this.M_t(t,s);break;default:throw new Error("invalid event type")}}w_t(t,s,i){const e=Yy.G_t.KG(this,s,t);if(e.Mxt()){i.push(e);const t=e.__t();for(let s=0,i=t.length;s<i;++s)t[s].I_t()&&this.C_t(e,s)}else e.I_t()?this.C_t(e,0):i.push(e)}x_t(t,s){const i=Yy.h_t.P_t(this,s,t);this._xt.oMt(i)}M_t(t,s){const i=Yy.h_t.R_t(this,s,t);this._xt.oMt(i)}v_t(t,s,i){const e=Yy.E_t.KG(this,s,t);i.push(e)}b_t(t,s,i){const e=Yy.A_t.KG(this,s,t);i.push(e)}T_t(t,s,i){const e=Yy.F_t.KG(this,s,t);i.push(e)}C_t(t,s){t.Mxt()||this._xt.QTt(t);const i=t.gMt(s),e=i.O_t(),n=i.gX();if(i.D_t()){let r=this.u_t.get(n);r||(r=new Map,this.u_t.set(n,r));const h=i.L_t().toLowerCase();let o=r.get(e);o||(o=new Map,r.set(e,o));let a=o.get(h);a||(a=[],o.set(h,a)),a.push([t,s])}else{let r=this.l_t.get(n);r||(r={k_t:new Map,N_t:new Map},this.l_t.set(n,r));const h=i.G0();let o;h?(o=r.N_t.get(h),o||(o=new Map,r.N_t.set(h,o))):o=r.k_t;let a=o.get(e);a||(a=[],o.set(e,a)),a.push([t,s])}}tMt(){const t=this.a_t;for(let s=0,i=t.length;s<i;++s){const e=s<i-1&&t[s+1]instanceof Yy.G_t&&t[s+1].B_t();t[s].tMt(e)}}U_t(t){this.d_t.push(t)}Bit(){Yy.wh(this.p_t),this.V_t(this),this.m_t.clear()}V_t(t){const s=t.p_t,i=t.m_t;for(const e of this.d_t){const n=e.W_t();e.z_t()&&t!==n&&!i.has(n)&&(i.add(n),n.V_t(t),s.push(n))}}KMt(){return this.p_t}hH(){return this._xt}yq(){return this.Nc}Pc(){return this.$n}j_t(t,s){this.c_t.set(s,t)}H_t(t){return this.c_t.get(t)||null}VMt(){this.f_t=!1}xP(){if(this.f_t)return;const t=this.Nc,s=t.J_t(),i=s?performance.now():0;this.f_t=!0;const e=this.hH(),n=e.pMt();for(const s of this.a_t)s.xP(n),e.uGt(s.bX()),e.CGt(),t.YJ();n.Bf(null),s&&(this.y_t.S_t+=performance.now()-i)}*$Mt(){if(this.f_t)return;this.f_t=!0;const t=this.Nc,s=this.hH(),i=s.pMt();for(const e of this.a_t)yield*e.$Mt(i),s.uGt(e.bX()),s.CGt(),t.YJ();i.Bf(null)}XMt(t,s,i){if(!s)return this.q_t(t,s,null,null);{const e=s.gX();let n=!1,r=this.q_t(t,s,e,i);n=n||r;for(const h of e.EX())r=this.q_t(t,s,h,i),n=n||r}}q_t(t,s,i,e){const n=this.l_t.get(i);if(!n)return!1;const r=e?n.N_t.get(e):n.k_t;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){const e=this.$_t(s,t,i);o=o||e}return o}*ZMt(t,s,i){if(!s)return yield*this.X_t(t,s,null,null);{const e=s.gX();let n=!1,r=yield*this.X_t(t,s,e,i);n=n||r;for(const h of e.EX())r=yield*this.X_t(t,s,h,i),n=n||r}}*X_t(t,s,i,e){const n=this.l_t.get(i);if(!n)return!1;const r=e?n.N_t.get(e):n.k_t;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){let e;e=t.Y_t()?this.$_t(s,t,i):yield*this.K_t(s,t,i),o=o||e}return o}eGt(t,s,i){const e=s.gX(),n=this.u_t.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=this.$_t(null,s[0],s[1]);o=o||i}return o}*nGt(t,s,i){const e=s.gX(),n=this.u_t.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=s[0],e=s[1];let n;n=i.Y_t()?this.$_t(null,i,e):yield*this.K_t(null,i,e),o=o||n}return o}$_t(t,s,i){const e=this.Nc,n=this._xt,r=n.fH(),h=n.wH(),o=n.rGt();let a=!1;r&&n.fGt(r.cH()),n.fGt(s.cH());const l=o>1;l&&n.wMt().E3();const u=h.E3(s);t&&(s.__t()[i].gX().cX().yxt(t),t.FK()&&t.Z_t());let c=!0;if(s.wQ()){const t=s.Q_t();for(let s=0,i=t.length;s<i;++s)if(!t[s].tIt(u)){c=!1;break}}return c&&(s.Mxt()?s.sIt(u,i):s.xP(u),a=u.Yxt()),h.z3(),l&&n.wMt().z3(),n.B3(s.cH()),r&&n.B3(r.cH()),r||1!==o||(n.CGt(),n.XJ()||e.YJ()),a}*K_t(t,s,i){const e=this.Nc,n=this._xt,r=n.fH(),h=n.wH(),o=n.rGt();let a=!1;r&&n.fGt(r.cH()),n.fGt(s.cH());const l=o>1;l&&n.wMt().E3();const u=h.E3(s);t&&(s.__t()[i].gX().cX().yxt(t),t.FK()&&t.Z_t());let c=!0;if(s.wQ()){const t=s.Q_t();for(let s=0,i=t.length;s<i;++s)if(!(yield*t[s].iIt(u))){c=!1;break}}return c&&(s.Mxt()?yield*s.eIt(u,i):yield*s.$Mt(u),a=u.Yxt()),h.z3(),l&&n.wMt().z3(),n.B3(s.cH()),r&&n.B3(r.cH()),r||1!==o||(n.CGt(),n.XJ()||e.YJ()),a}n_t(){return this.y_t}}}{let Ky=function(t,s){return!0};0;const Zy=self._s,Qy=[];function*tS(t,s){return!0}Zy.G_t=class extends Zy.Wn{constructor(t,s,i){super(),this.Ast=t,this.Nc=t.yq(),this.nIt=s,this.rIt=null,this.ixt=this.Nc.hH().wH(),this.hIt=[],this.oIt=[],this.aIt=!1,this.lIt=!1,this.uIt=!1,this.cIt=!1,this.fIt=!!i[2],this.dIt=!1,this.pIt=null,this.mIt=[],this.Odt=[],this.gIt=[],this.yIt=Ky,this.SIt=tS,this.wIt=!1,this.vIt=!1,this.bIt="",this.xIt=!1,this.TIt=null,this.y_t=null,this.b8=i[4],this.MIt=i[5],this.Ast.j_t(this,this.MIt),this.GIt=this.Nc.gZ()?{_It:i[3][0],IIt:i[3][1],CIt:!1,PIt:!1,RIt:!1,EIt:!1}:null,this.hH().nMt(this),3===i[0]&&this.AIt(i[1]);let e=0;for(const t of i[6]){const s=Zy.FIt.KG(this,t,e++);this.mIt.push(s),this.OIt(s.gX())}e=0;for(const t of i[7]){const s=Zy.DIt.KG(this,t,e++);this.Odt.push(s)}if(9===i.length){const t=i[8];for(const s of t)this.Ast.g_t(s,this,this.gIt)}this.mIt.length&&(this.dIt=null===this.mIt[0].gX()&&this.mIt[0].O_t()===Zy.lq.aq.oq.LIt),0===this.mIt.length&&(this.mIt=Qy),0===this.Odt.length&&(this.Odt=Qy),0===this.gIt.length&&(this.gIt=Qy)}static KG(t,s,i){return Zy.jn(Zy.G_t,t,s,i)}AIt(t){this.wIt=!0,this.vIt=!!t[0],this.xIt=this.vIt,this.bIt=t[1].toLowerCase(),this.TIt=[],this.hH().iMt(this),this.Nc.gZ()&&(this.y_t={type:"group",name:t[1],S_t:0,children:[]})}kIt(t){this.TIt.push(t)}NIt(t,s){for(const i of t.Git().NX())s.includes(i)||s.push(i)}BIt(t,s){if(t)if(s.includes(t)||s.push(t),t.pX())for(const i of t.kX())i.FK()&&this.NIt(i,s);else t.FK()&&this.NIt(t,s)}OIt(t){this.BIt(t,this.hIt)}UIt(t){this.BIt(t,this.oIt)}VIt(){this.hIt=this.Nc.J7()}tMt(t){this.cIt=!!t,this.WIt(),this.zIt();for(const t of this.mIt)t.tMt();if(this.Odt.length>0){let t=!1;for(const s of this.Odt)s.tMt(),s.jIt()&&(t=!0);t?(this.yIt=this.HIt,this.SIt=this.JIt):(this.yIt=this.qIt,this.SIt=this.$It)}const s=this.gIt;for(let t=0,i=s.length;t<i;++t){const e=t<i-1&&s[t+1]instanceof Zy.G_t&&s[t+1].B_t();s[t].tMt(e)}this.GIt&&this.XIt(),this.y_t&&this.YIt().n_t().children.push(this.y_t)}n_t(){return this.y_t}YIt(){let t=this.wQ();for(;t;){if(t.LMt())return t;t=t.wQ()}return this.Ast}XIt(){const t=this.GIt;t.CIt=this.mIt.every(t=>t.Y_t()),t.PIt=this.Odt.every(t=>t.Y_t()),t.RIt=this.gIt.every(t=>t.Y_t()),t.EIt=t.CIt&&t.PIt&&t.RIt}KIt(){let t=this;do{t.XIt(),t=t.wQ()}while(t)}WIt(){if(!this.LMt())return;let t=this.wQ();for(this.uIt=!0;t;){if(!t.LMt()){this.uIt=!1;break}t=t.wQ()}}ZIt(){const t=this.Nc.J7();if(this.hIt===t)this.oIt=t;else{this.oIt=Zy.Ah(this.hIt);let t=this.wQ();for(;t;){for(const s of t.hIt)this.UIt(s);t=t.wQ()}const s=this.hH();this.hIt=s.cMt(this.hIt),this.oIt=s.cMt(this.oIt)}}zIt(){if(!this.QIt())return;this.pIt=[];let t=this.wQ();for(;t;)this.pIt.push(t),t=t.wQ();this.pIt.reverse()}tCt(){this.lIt=!0,this.nIt&&this.nIt.tCt()}nTt(){return this.lIt}bX(){return this.hIt}cH(){return this.aIt||(this.aIt=!0,this.ZIt()),this.oIt}sCt(t){return this.hIt.includes(t)}Q_t(){return this.pIt}fit(){return this.Ast}hH(){return this.Ast.hH()}yq(){return this.Nc}wQ(){return this.nIt}iCt(t){this.rIt=t}bMt(){return this.rIt||this.nIt}eCt(){return this.MIt}nCt(){return this.GIt&&this.GIt.IIt}rCt(){return this.nCt()&&this.GIt._It}hCt(t){this.GIt._It=!!t,this.KIt()}LMt(){return this.wIt}oCt(){return this.uIt}B_t(){return this.dIt}aCt(){return this.cIt}eMt(){return this.bIt}ZGt(){return this.xIt}BMt(){this.QGt(this.vIt)}QGt(t){if(t=!!t,!this.wIt)throw new Error("not a group");if(this.xIt!==t){this.xIt=t;for(const t of this.TIt)t.lCt();if(this.TIt.length){const t=this.Nc.OJ().fit();t&&t.Bit()}}}t9(){return this.b8}Mxt(){return this.fIt}I_t(){return this.mIt.length&&this.mIt[0].I_t()}uCt(){return this.rIt&&this.rIt instanceof Zy.h_t}QIt(){return this.uCt()||this.mIt.some(t=>t.I_t())}__t(){return this.mIt}rTt(){return this.mIt.length}gMt(t){if((t=Math.floor(t))<0||t>=this.mIt.length)throw new RangeError("invalid condition index");return this.mIt[t]}cCt(t){return this.gMt(t)}fCt(t){let s=t.Gj();if(0===s)return!0;--s;const i=t.dCt()?t.pCt():t.gX();for(;s>=0;--s){const t=this.mIt[s];if(i===t.gX()||t.dCt()&&t.pCt()===i)return!1}return!0}mCt(){return this.Odt}gCt(){return this.Odt.length}SMt(t){if((t=Math.floor(t))<0||t>=this.Odt.length)throw new RangeError("invalid action index");return this.Odt[t]}yCt(t){t=Math.floor(t);const s=this.Odt.find(s=>s.SCt()===t);if(!s)throw new RangeError("invalid action debug index");return s}wCt(t){return(t=Math.floor(t))>=0&&t<this.Odt.length}vCt(){return this.gIt}xMt(){return this.gIt.filter(t=>t instanceof Zy.E_t)}tIt(t){t.jxt(this);const s=this.mIt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.Jxt(e),n.B0())throw new Error("trigger cannot be used as sub-event to a loop");if(n.xP())i=!0;else if(!this.fIt)return!1}return!this.fIt||i}sIt(t,s){t.jxt(this),t.Jxt(s),this.mIt[s].xP()&&(this.yIt(t,0)&&this.bCt(t),t.Xxt(!0))}*iIt(t){t.jxt(this);const s=this.mIt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.Jxt(e),n.B0())throw new Error("trigger cannot be used as sub-event to a loop");let r;if(r=n.Y_t()?n.xP():yield*n.$Mt(),r)i=!0;else if(!this.fIt)return!1}return!this.fIt||i}*eIt(t,s){t.jxt(this),t.Jxt(s);const i=this.mIt[s];let e;if(e=i.Y_t()?i.xP():yield*i.$Mt(),e){let s;s=this.xCt()?this.yIt(t,0):yield*this.SIt(t,0),s&&(this.TCt()?this.bCt():yield*this.MCt()),t.Xxt(!0)}}xP(t){t.jxt(this),this.dIt||t.Kxt(!1),this.fIt?this.GCt(t):this._Ct(t)}*$Mt(t){(this.rCt()||this.Nc.ICt())&&(yield this),t.jxt(this),this.dIt||t.Kxt(!1),this.fIt?yield*this.CCt(t):yield*this.PCt(t)}GCt(t){const s=this.mIt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.I_t())continue;t.Jxt(e);const r=n.xP();i=i||r}t.Xxt(i),i&&(this.yIt(t,0)&&this.bCt(t),this.cIt&&t.Kxt(!0))}*CCt(t){const s=this.mIt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.I_t())continue;let r;t.Jxt(e),r=n.Y_t()?n.xP():yield*n.$Mt(),i=i||r}if(t.Xxt(i),i){let s;s=this.xCt()?this.yIt(t,0):yield*this.SIt(t,0),s&&(this.TCt()?this.bCt():yield*this.MCt()),this.cIt&&t.Kxt(!0)}}_Ct(t){const s=this.mIt;for(let i=0,e=s.length;i<e;++i){const e=s[i];if(t.Jxt(i),!e.xP())return void t.Xxt(!1)}t.Xxt(!0),this.yIt(t,0)&&this.bCt(t),t.Yxt()&&this.cIt&&t.Kxt(!0)}*PCt(t){const s=this.mIt;for(let i=0,e=s.length;i<e;++i){const e=s[i];let n;if(t.Jxt(i),n=e.Y_t()?e.xP():yield*e.$Mt(),!n)return void t.Xxt(!1)}let i;t.Xxt(!0),i=this.xCt()?this.yIt(t,0):yield*this.SIt(t,0),i&&(this.TCt()?this.bCt():yield*this.MCt()),t.Yxt()&&this.cIt&&t.Kxt(!0)}qIt(t,s){const i=this.Odt;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.$xt(e),s.xP()}return!0}*$It(t,s){const i=this.Odt;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.$xt(e),s.Y_t()?s.xP():yield*s.$Mt()}return!0}HIt(t,s){const i=this.hH(),e=this.Odt;for(let n=s,r=e.length;n<r;++n){const s=e[n];t.$xt(n);const r=s.xP();if(s.RCt()&&!0===r)return!1;s.ECt()&&r instanceof Promise&&i._Gt(r)}return!0}*JIt(t,s){const i=this.hH(),e=this.Odt;for(let n=s,r=e.length;n<r;++n){const s=e[n];let r;if(t.$xt(n),r=s.Y_t()?s.xP():yield*s.$Mt(),s.RCt()&&!0===r)return!1;s.ECt()&&r instanceof Promise&&i._Gt(r)}return!0}ACt(t){this.yIt(t,t.qxt())&&this.bCt()}*FCt(t){(yield*this.SIt(t,t.qxt()))&&(yield*this.MCt())}bCt(){if(!this.gIt.length)return;const t=this.LMt()&&this.Nc.J_t(),s=t?performance.now():0,i=this.ixt,e=i.E3(this);this.lIt?this.OCt(e):this.DCt(e),i.z3(),t&&(this.y_t.S_t+=performance.now()-s)}OCt(t){const s=this.wIt,i=this.uIt,e=this.hH(),n=this.gIt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.bX(),l=!i||!s&&r<o;l&&e.L3(a),h.xP(t),l?e.B3(a):e.uGt(a)}}DCt(t){const s=this.gIt;for(let i=0,e=s.length;i<e;++i)s[i].xP(t)}*MCt(){if(!this.gIt.length)return;const t=this.ixt,s=t.E3(this);this.lIt?yield*this.LCt(s):yield*this.kCt(s),t.z3()}*LCt(t){const s=this.wIt,i=this.uIt,e=this.hH(),n=this.gIt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.bX(),l=!i||!s&&r<o;l&&e.L3(a),yield*h.$Mt(t),l?e.B3(a):e.uGt(a)}}*kCt(t){const s=this.gIt;for(let i=0,e=s.length;i<e;++i)yield*s[i].$Mt(t)}N3(t,s){s.zxt();const i=this.mIt;if(!this.Mxt())for(let e=t.Hxt()+1,n=i.length;e<n;++e){const t=i[e];if(s.Jxt(e),!t.xP())return!1}return this.yIt(s,0)&&this.bCt(s),!0}*NCt(t,s){s.zxt();const i=this.mIt;if(!this.Mxt())for(let e=t.Hxt()+1,n=i.length;e<n;++e){const t=i[e];let n;if(s.Jxt(e),n=t.Y_t()?t.xP():yield*t.$Mt(),!n)return!1}let e;return e=this.xCt()?this.yIt(s,0):yield*this.SIt(s,0),e&&(this.TCt()?this.bCt():yield*this.MCt()),!0}Y_t(){return!this.rCt()&&!this.Nc.ICt()&&this.GIt.EIt}xCt(){return!this.Nc.ICt()&&this.GIt.PIt}TCt(){return!this.Nc.ICt()&&this.GIt.RIt}BCt(t){if(this.wQ()){const s=this.Q_t();for(let i=0,e=s.length;i<e;++i)if(!s[i].tIt(t))return!1}return!0}*UCt(t){if(this.wQ()){const s=this.Q_t();for(let i=0,e=s.length;i<e;++i)if(!(yield*s[i].iIt(t)))return!1}return!0}VCt(t,s,i){if(s.length>0)if(i){const i=s.map(t=>t.Hs(0));t.wMt().E3(),this.rIt.WCt(i)}else this.rIt.zCt(s);else i&&t.wMt().E3()}#s(t,s,i,e){let n=null;if(s.jCt){const t=i?s.jCt.cX():s.jCt.cGt().Zbt(),e=s.HCt.cX();e.Sxt(t.uX()),e.xxt(),i||s.HCt.JCt()}else if(s.SX){const t=s.SX.cX();t.Sxt(s.wX),t.xxt()}return s.qCt&&(n=t.dGt(e)),n}$Ct(t,s,i,e){let n,r;const h=t.length>0;let o=null;const a=this.Nc,l=this.ixt,u=a.hH(),c=this.rIt,f=c.ECt(),d=u.oGt()>1;this.VCt(u,s,d),h&&(i?u.L3(t):u.fGt(t)),null!==e&&(o=this.#s(u,e,i,t));const p=l.E3(this);return i&&p.hTt(t),this.BCt(p)&&(p.jxt(this),f&&([r,n]=c.XCt()),this._Ct(p),f&&c.YCt(r)),l.z3(),d&&u.wMt().z3(),null!==o&&u.B3(o),h&&u.B3(t),u.aGt(),n}*KCt(t,s,i,e){let n,r;(this.rCt()||this.Nc.ICt())&&(yield this);const h=t.length>0;let o=null;const a=this.Nc,l=this.ixt,u=a.hH(),c=this.rIt,f=c.ECt(),d=u.oGt()>1;if(this.VCt(u,s,d),h&&(i?u.L3(t):u.fGt(t)),null!==e){if(e.jCt){const t=i?e.jCt.cX():e.jCt.cGt().Zbt(),s=e.HCt.cX();s.Sxt(t.uX()),s.xxt(),i||e.HCt.JCt()}else if(e.SX){const t=e.SX.cX();t.Sxt(e.wX),t.xxt()}e.qCt&&(o=u.dGt(t))}const p=l.E3(this);return i&&p.hTt(t),(yield*this.UCt(p))&&(p.jxt(this),f&&([r,n]=c.XCt()),yield*this.PCt(p),f&&c.YCt(r)),l.z3(),d&&u.wMt().z3(),null!==o&&u.B3(o),h&&u.B3(t),u.aGt(),n}ZCt(t,s){const i=this.cH(),e=i.length>0,n=this.Nc,r=this.ixt,h=n.hH(),o=h.oGt()>1;o&&h.wMt().E3(),this.rIt.WCt(t),e&&(s?h.L3(i):h.fGt(i));const a=r.E3(this);this.BCt(a)&&(a.jxt(this),this._Ct(a)),r.z3(),o&&h.wMt().z3(),e&&h.B3(i),h.aGt()}*QCt(t,s){(this.rCt()||this.Nc.ICt())&&(yield this);const i=this.cH(),e=i.length>0,n=this.Nc,r=this.ixt,h=n.hH(),o=h.oGt()>1;o&&h.wMt().E3(),this.rIt.WCt(t),e&&(s?h.L3(i):h.fGt(i));const a=r.E3(this);(yield*this.UCt(a))&&(a.jxt(this),yield*this.PCt(a)),r.z3(),o&&h.wMt().z3(),e&&h.B3(i),h.aGt()}pH(t,s,i,e,n,...r){let h,o;const a=t.length>0;let l=null;const u=this.Nc,c=this.ixt,f=u.hH(),d=this.rIt,p=d.ECt(),m=f.oGt()>1;m&&f.wMt().E3(),r.length>0&&this.rIt.WCt(r),a&&(s?f.L3(t):f.fGt(t)),null!==n&&(l=this.#s(f,n,s,t));const g=c.E3(this);return g.sTt(i,e),s&&g.hTt(t),c.Ext(g),u.O3(!1),this.BCt(g)&&(g.jxt(this),p&&([o,h]=d.XCt()),this._Ct(g),p&&d.YCt(o)),u.O3(!0),c.z3(),c.Axt(),m&&f.wMt().z3(),null!==l&&f.B3(l),a&&f.B3(t),f.aGt(),h||g.iTt()}}}{const sS=self._s,iS=[];let eS=!1;sS.F_t=class extends sS.Wn{constructor(t,s,i){super();const e=t.yq(),n=t.hH();this.Ast=t,this._xt=n,this.Nc=t.yq(),this.nIt=s;const r=e.tPt(i[1]);this.sPt=r,this.MIt=i[2],this.Ast.j_t(this,this.MIt),this.GIt=e.gZ()?{_It:i[3][0],IIt:i[3][1]}:null}static KG(t,s,i){return sS.jn(sS.F_t,t,s,i)}tMt(){const t=this.sPt,s=this.Nc.hH().TMt(this);this.sPt=t.bind(null,this.Nc.M$(),s)}wQ(){return this.nIt}bMt(){return this.nIt}fit(){return this.Ast}eCt(){return this.MIt}nCt(){return this.GIt&&this.GIt.IIt}rCt(){return this.nCt()&&this.GIt._It}hCt(t){this.GIt._It=!!t}B_t(){return!1}bX(){return iS}cH(){return this.nIt?this.nIt.cH():iS}xP(t){t.jxt(this),this._xt._Gt(this.iPt())}async iPt(){try{await this.sPt()}catch(t){console.error(`Unhandled exception running script %c${this.fit().Pc()}, event ${this.eCt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.yZ&&self.yZ.ePt(this),eS||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),eS=!0)}}*$Mt(t){t.jxt(this),(this.rCt()||this.Nc.ICt())&&(yield this),this.xP(t)}Y_t(){return!this.rCt()&&!this.Nc.ICt()}static nPt(){return eS}static rPt(){eS=!0}}}{const nS=self._s;self.assert;nS.h_t=class extends nS.Wn{constructor(t,s,i){super(),this.Ast=t,this.Nc=t.yq(),this.nIt=s,this.hPt=0,this.oPt="",this.aPt=0,this.lPt=[],this.uPt=!0,this.cPt="",this.$bt=null,this.fPt=!1,this.dPt=[],this.pPt=!1,this.mPt=!1,this.gPt=0,this.yPt=-1,this.SPt=new Map,this.wPt=nS.G_t.KG(t,s,i),this.wPt.iCt(this)}vPt(t){this.hPt=0,this.oPt=t[0],this.aPt=t[1],this.lPt=t[2].map(t=>nS.E_t.KG(this.Ast,this,t)),this.uPt=t[3],this.mPt=t[4],this.pPt=t[5]}bPt(t){this.hPt=1,this.cPt=t[1],this.$bt=this.Nc.M7(t[2]),this.wPt.OIt(this.$bt),this.oPt=this.$bt.Pc()+"."+this.cPt,this.aPt=t[3],this.lPt=t[4].map(t=>nS.E_t.KG(this.Ast,this,t)),this.uPt=t[5],this.mPt=t[6],this.pPt=t[7],this.$bt.xPt(this)}static P_t(t,s,i){const e=nS.jn(nS.h_t,t,s,i),n=i[1];return e.vPt(n),e}static R_t(t,s,i){const e=nS.jn(nS.h_t,t,s,i),n=i[1];return e.bPt(n),e}sMt(){if(this.$bt&&this.$bt.pX())for(const t of this.$bt.kX())if(t.yX(this.cPt)){this.fPt=!0;break}}tMt(){for(const t of this.lPt)t.tMt();this.wPt.tMt(!1)}aMt(){return this.hPt}xMt(){return this.lPt}o_t(){return this.lPt}lH(){return this.lPt.length}TPt(t){this.dPt.push(t)}MPt(){return this.dPt}zCt(t){const s=this.lPt;for(let i=0,e=s.length;i<e;++i)s[i].Cft(t[i].Hs(0))}WCt(t){const s=this.lPt;for(let i=0,e=s.length;i<e;++i)s[i].Cft(t[i])}GPt(){return this.lPt.map(t=>t.Hct())}wQ(){return this.nIt}bMt(){return this.nIt}lMt(){return this.oPt}_Pt(){return this.cPt}mX(){return this.fPt}gH(){return this.aPt}gX(){return this.$bt}_u(){return this.uPt}aH(){switch(this.aPt){case 0:return null;case 2:return"";default:return 0}}uH(){return this.wPt}mH(){return this.pPt}ECt(){return this.mPt}XCt(){const t=this.gPt++;let s;this.yPt=t;const i=new Promise(t=>s=t);return this.SPt.set(t,{resolve:s,IPt:0}),[t,i]}YCt(t){const s=this.SPt.get(t);0===s.IPt&&(s.resolve(),this.SPt.delete(t)),this.yPt=-1}CPt(){return this.SPt.get(this.yPt).IPt++,this.yPt}PPt(t){this.yPt=t,this.SPt.get(t).IPt--}RPt(t,s){const i=new Map,e=[];for(const t of this.$bt.cX().uX()){const s=t.gX();if(s.yX(this.cPt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&this.wPt.$Ct(t,s,this.pPt,{SX:this.$bt,wX:e}),i.size>0)for(const[e,n]of i){const i=e.vX(this.cPt).uH(),r=[...new Set([...t,...i.bX()])];i.$Ct(r,s,this.pPt,{SX:e,wX:n})}}*EPt(t,s){const i=new Map,e=[];for(const t of this.$bt.cX().uX()){const s=t.gX();if(s.yX(this.cPt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&(yield*this.wPt.KCt(t,s,this.pPt,{SX:this.$bt,wX:e})),i.size>0)for(const[e,n]of i){const i=e.vX(this.cPt).uH(),r=[...new Set([...t,...i.bX()])];yield*i.KCt(r,s,this.pPt,{SX:e,wX:n})}}}}{const rS=self._s,hS=[];rS.E_t=class extends rS.Wn{constructor(t,s,i){super();const e=t.hH();this.Ast=t,this._xt=e,this.Nc=t.yq(),this.nIt=s,this.BTt=e.wMt(),this.$n=i[1],this.Jc=i[2],this.APt=i[3],this.GM=!!i[4],this.FPt=!!i[5],this.OPt=s instanceof rS.h_t,this.b8=i[6],this.DPt=this.Nc.MMt(i[8]),this.LPt=t=>this.kPt(t),this.NPt=()=>this.BPt(),this.UPt=!this.nIt||this.GM||this.FPt,this.Rdt=this.APt,this.VPt=-1,this.WPt()&&(this.Rdt=this.Rdt?1:0),!this.zPt()||this.QM()||this.t_t()||(this.VPt=e.fMt(this)),e.uMt(this)}static KG(t,s,i){return rS.jn(rS.E_t,t,s,i)}tMt(){if(this.zPt()&&!this.QM()&&!this.t_t()&&!this.jPt()){const t=this._xt.r_t(this);t&&t.TPt(this)}}Pc(){return this.$n}MMt(){return this.DPt}wQ(){return this.nIt}bMt(){return this.wQ()}m8(){return!this.wQ()}zPt(){return!this.m8()}jPt(){return this.OPt}QM(){return this.GM}t_t(){return this.FPt}Zi(){return 0===this.Jc}ae(){return 1===this.Jc}WPt(){return 2===this.Jc}B_t(){return!1}t9(){return this.b8}dMt(){return this.APt}bX(){return hS}xP(t){!this.zPt()||this.QM()||this.t_t()||this.Cft(this.dMt())}Y_t(){return!0}*$Mt(t){this.xP(t)}Cft(t){this.Zi()?"number"!=typeof t&&(t=parseFloat(t)):this.ae()?"string"!=typeof t&&(t=t.toString()):this.WPt()&&(t=t?1:0),this.UPt?this.Rdt=t:this.BTt.cTt()[this.VPt]=t}kPt(t){if(this.t_t())throw new Error(`assignment to constant event variable '${this.Pc()}'`);this.Cft(t)}Hct(){return this.UPt?this.Rdt:this.BTt.cTt()[this.VPt]}BPt(){let t=this.Hct();return this.WPt()&&(t=!!t),t}FMt(){this.Rdt=this.APt}GMt(){return{configurable:!1,enumerable:!0,get:this.NPt,set:this.LPt}}}}{const oS=self._s,aS=(self.assert,[]);oS.A_t=class extends oS.Wn{constructor(t,s,i){super();const e=t.hH();this.Ast=t,this._xt=e,this.Nc=t.yq(),this.nIt=s,this.HPt=null,this.JPt=i[1],this.Nf=!0}static KG(t,s,i){return oS.jn(oS.A_t,t,s,i)}tMt(){this.HPt=this._xt.Nit(this.JPt),this.Ast.U_t(this);let t=this.wQ();for(;t;)t instanceof oS.G_t&&t.LMt()&&t.kIt(this),t=t.wQ();this.lCt(),this.Nc.gZ()&&this.Ast.n_t().children.push(this.HPt.n_t())}wQ(){return this.nIt}bX(){return aS}W_t(){return this.HPt}xP(t){const s=!!this.wQ(),i=this.Nc.J7();s&&this._xt.fGt(i),this.HPt.xP(),s&&this._xt.B3(i)}*$Mt(t){const s=!!this.wQ(),i=this.Nc.J7();s&&this._xt.fGt(i),yield*this.HPt.$Mt(),s&&this._xt.B3(i)}Y_t(){return!1}z_t(){return this.Nf}lCt(){let t=this.wQ();for(;t;){if(t instanceof oS.G_t&&t.LMt()&&!t.ZGt())return void(this.Nf=!1);t=t.wQ()}this.Nf=!0}}}{let lS=function(t,s){return t>=s?t%s:t<0?(t<=-s&&(t%=s),t<0&&(t+=s),t):t};0;const uS=self._s;self.assert;uS.qPt=class extends uS.Wn{constructor(t){super(),this.PT=t,this.Nc=t.yq()}tMt(){}static $Pt(t,s){const i=s[0],e=[mS,dS,pS,gS,cS,fS];return uS.jn(e[i],t,s)}};class cS extends uS.qPt{constructor(t,s){super(t),this.XPt=this.Nc.e6(),this.sPt=this.Nc.tPt(s[1]),this.sPt!==uS.lq.aq.qdt.random&&this.sPt!==uS.lq.aq.qdt.YPt||this.PT.KPt()}ZPt(){return this.XPt.QPt(this.sPt,this.XPt)}}class fS extends uS.qPt{constructor(t,s){super(t),this.tRt=null,this.oPt=s[1],this.PT.KPt()}tMt(){const t=this.Nc.hH();this.tRt=t.oH(this.oPt),this.oPt=null;const s=this.PT.uH(),i=this.tRt.uH();this.sRt=[...new Set([...s.cH(),...i.cH()])],this.sRt=t.cMt(this.sRt)}ZPt(){const t=this.tRt;if(t._u()){const s=t.uH();return uS.G_t.prototype.pH.bind(s,this.sRt,t.mH(),t.gH(),t.aH(),null)}{const s=t.aH();return()=>s}}}class dS extends uS.qPt{constructor(t,s){super(t),this.$bt=this.Nc.M7(s[1]),this.sPt=this.Nc.tPt(s[2]),this.iRt=!!s[3],this.ixt=this.Nc.hH().wH(),this.PT.eRt(this.$bt)}ZPt(){return this.$bt.Q$().QPt(this.sPt,this.$bt.Y$().m0())}nRt(...t){const s=this.$bt,i=s.cX().cxt(),e=i.length;if(0===e)return this.iRt?"":0;const n=lS(this.PT.rRt(),e);return this.ixt.R3().Qxt(s),this.sPt.apply(i[n].m0(),t)}hRt(t,...s){const i=this.$bt,e=i.uX(),n=e.length;if(0===n||"number"!=typeof t)return this.iRt?"":0;const r=lS(t,n);return this.ixt.R3().Qxt(i),this.sPt.apply(e[r].m0(),s)}}class pS extends uS.qPt{constructor(t,s){super(t),this.$bt=this.Nc.M7(s[1]),this.oRt=s[3],this.iRt=!!s[2],this.PT.eRt(this.$bt)}aRt(){const t=this.$bt.cX().cxt(),s=t.length;return 0===s?this.iRt?"":0:t[lS(this.PT.rRt(),s)].lRt(this.oRt)}uRt(){const t=this.$bt,s=t.cX().cxt(),i=s.length;if(0===i)return this.iRt?"":0;const e=s[lS(this.PT.rRt(),i)],n=e.gX().cRt(t.fRt());return e.lRt(this.oRt+n)}dRt(t){const s=this.$bt,i=s.uX(),e=i.length;if(0===e||"number"!=typeof t)return this.iRt?"":0;const n=i[lS(t,e)];let r=0;return s.pX()&&(r=n.gX().cRt(s.fRt())),n.lRt(this.oRt+r)}}class mS extends uS.qPt{constructor(t,s){super(t),this.$bt=this.Nc.M7(s[1]),this.pRt=this.$bt.Zft(s[2]),this.mRt=this.$bt.Sut(s[2]),this.sPt=this.Nc.tPt(s[3]),this.iRt=!!s[4],this.ixt=this.Nc.hH().wH(),this.PT.eRt(this.$bt)}gRt(...t){const s=this.$bt,i=s.cX().cxt(),e=i.length;if(0===e)return this.iRt?"":0;const n=lS(this.PT.rRt(),e);this.ixt.R3().Qxt(s);const r=i[n];let h=0;return s.pX()&&(h=r.gX().yRt(s.fRt())),this.sPt.apply(r.Kft()[this.mRt+h].m0(),t)}SRt(t,...s){const i=this.$bt,e=i.uX(),n=e.length;if(0===n||"number"!=typeof t)return this.iRt?"":0;const r=lS(t,n);this.ixt.R3().Qxt(i);const h=e[r];let o=0;return i.pX()&&(o=h.gX().yRt(i.fRt())),this.sPt.apply(h.Kft()[this.mRt+o].m0(),s)}}class gS extends uS.qPt{constructor(t,s){super(t),this.wRt=null,this.vRt=s[1]}tMt(){this.wRt=this.Nc.hH()._Mt(this.vRt)}bRt(){return this.wRt}}}{let yS=function(t){const s=self.xRt[t];if(!s)throw new Error("invalid expression number");return s};0;const SS=self._s;self.assert;SS.TRt=class extends SS.Wn{constructor(t,s,i){super(),this.PT=t,this.US=i,this.Jc=s,this.Hs=null,this.MRt=!1,this.FPt=!1}static KG(t,s,i){const e=s[0],n=[wS,vS,IS,xS,MS,bS,GS,wS,xS,xS,CS,PS,IS,ES,vS,_S,TS,RS,AS,FS,OS,DS];return SS.jn(n[e],t,e,i,s)}tMt(){}KPt(){this.MRt=!0}eRt(t){this.MRt||t&&(t.Q$().I$()||(this.MRt=!0))}GRt(){return this.MRt}Gj(){return this.US}yq(){return this.PT.yq()}uH(){return this.PT.uH()}t_t(){return this.FPt}_Rt(){return 4===this.Jc}};class wS extends SS.TRt{constructor(t,s,i,e){super(t,s,i),this.IRt=0;const n=e[1];this.CRt=n[0],this.PRt=[],this.RRt=null;for(let t=1,s=n.length;t<s;++t)this.PRt.push(SS.qPt.$Pt(this,n[t]));this.PRt.length?this.Hs=this.ERt:(this.Hs=yS(this.CRt),this.FPt=!0)}ARt(t){if(t<0||t>=this.PRt.length)throw new RangeError("invalid numbered node");return this.PRt[t]}tMt(){for(const t of this.PRt)t.tMt();const t=yS(this.CRt);this.PRt.length?this.RRt=t(this):this.RRt=t}rRt(){return this.IRt}ERt(t){return this.IRt=t,this.RRt()}}class vS extends wS{constructor(t,s,i,e){super(t,s,i,e),this.Hs=this.FRt,14===s&&(this.uH().VIt(),this.PT instanceof SS.DIt&&this.uH().tCt())}FRt(t){this.IRt=t;const s=this.RRt();return"string"==typeof s?s:""}ORt(){return yS(this.CRt)()}}class bS extends wS{constructor(t,s,i,e){super(t,s,i,e),t.DRt()>=2?this.Hs=this.eY:this.Hs=this.NJ,this.FPt=!1}NJ(t){this.IRt=t;const s=this.RRt();return this.yq().OJ().NJ(s)}eY(t){const s=this.NJ(t);return s?s.eY():null}}class xS extends SS.TRt{constructor(t,s,i,e){super(t,s,i),this.LRt=e[1],this.Hs=this.kRt,this.FPt=!0}kRt(){return this.LRt}}class TS extends SS.TRt{constructor(t,s,i,e){super(t,s,i),this.NRt=e[1],this.Hs=this.BRt,this.FPt=!0}BRt(){return this.NRt}}class MS extends SS.TRt{constructor(t,s,i,e){super(t,s,i),this.$bt=this.yq().M7(e[1]),t.DRt()>=2?this.Hs=this.q$:this.Hs=this.gX;const n=this.uH();n.OIt(this.$bt),this.PT instanceof SS.DIt?n.tCt():n.wQ()&&n.wQ().tCt(),this.FPt=!0}gX(){return this.$bt}q$(){return this.$bt?this.$bt.q$():null}}class GS extends SS.TRt{constructor(t,s,i,e){super(t,s,i),this.y8=this.yq().mJ().zet(e[1]),t.DRt()>=2?this.Hs=this.dJ:this.Hs=this.gJ,this.FPt=!0}gJ(){return this.y8}dJ(){return this.y8?this.y8.dJ():null}}class _S extends SS.TRt{constructor(t,s,i,e){super(t,s,i),this.$rt=this.yq().Qot().irt(e[1]),t.DRt()>=2?this.Hs=this.Olt:this.Hs=this.iut,this.FPt=!0}iut(){return this.$rt}Olt(){return this.$rt?this.$rt.Olt():null}}class IS extends SS.TRt{constructor(t,s,i,e){super(t,s,i),this.URt=e[1],this.Hs=this.VRt,this.FPt=!0}VRt(){return this.URt}}class CS extends SS.TRt{constructor(t,s,i,e){super(t,s,i),this.WRt=e[1];const n=this.PT.gX();this.PT instanceof SS.FIt&&this.PT.QM()?(this.Hs=this.zRt,this.FPt=!0):n&&n.pX()?(this.Hs=this.jRt,this.KPt()):(this.Hs=this.zRt,this.FPt=!0)}zRt(){return this.WRt}jRt(t){t=t||0;const s=this.PT.gX(),i=s.cX(),e=i.uX();let n=null;if(e.length)n=e[t%e.length].gX();else if(i.lxt()){const s=i.uxt();n=s[t%s.length].gX()}else{if(!(s.MX()>0))return 0;{const i=s.uX();n=i[t%i.length].gX()}}return this.WRt+n.cRt(s.fRt())}}class PS extends SS.TRt{constructor(t,s,i,e){super(t,s,i),this.vRt=e[1],this.wRt=null,t.DRt()>=2?this.Hs=this.HRt:this.Hs=this.JRt,this.FPt=!0}tMt(){this.wRt=this.yq().hH()._Mt(this.vRt)}JRt(){return this.wRt}HRt(){return null}}class RS extends SS.TRt{constructor(t,s,i,e){super(t,s,i),this.qRt=e[1],this.tRt=null,t.DRt()>=2?this.Hs=this.$Rt:this.Hs=this.XRt,this.FPt=!0}tMt(){this.tRt=this.yq().hH().oH(this.qRt),this.qRt=null}XRt(){return this.tRt}$Rt(){return null}}class ES extends SS.TRt{constructor(t,s,i,e){super(t,s,i),this.YRt=[],this.KRt=[],this.FPt=!0;for(let t=1,s=e.length;t<s;++t){const s=SS.TRt.KG(this.PT,e[t],0);this.YRt.push(s),this.KRt.push(0),s.t_t()||(this.FPt=!1)}this.Hs=this.ZRt}tMt(){for(const t of this.YRt)t.tMt()}ZRt(){const t=this.YRt,s=this.KRt;for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Hs(0);return s}}class AS extends SS.TRt{constructor(t,s,i,e){super(t,s,i),this.QRt=e[1],this.Hs=this.Ift,this.FPt=!0}Ift(){return this.QRt}}class FS extends SS.TRt{constructor(t,s,i,e){super(t,s,i),this.tEt=e[1],this.Hs=this.sEt,this.FPt=!0}sEt(){return this.tEt}}class OS extends wS{constructor(t,s,i,e){super(t,s,i,e),this.Hs=this.UK,this.FPt=!1}UK(){return this.RRt()}}class DS extends SS.TRt{constructor(t,s,i,e){super(t,s,i),this.uwt=this.yq().Cwt().nwt(e[1]),this.Hs=this.iEt,this.FPt=!0}iEt(){return this.uwt.Pc()}}}{let LS=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Hs(0)};0;const kS=self._s,NS=(self.assert,[]),BS=function(){};kS.FIt=class extends kS.Wn{constructor(t,s,i){if(super(),this.wPt=t,this.Nc=t.yq(),this.US=i,this.sPt=this.Nc.tPt(s[1]),this.eEt=s[3]>0,this.nEt=2===s[3],this.rEt=!!s[4],this.hEt=!!s[5],this.GM=!!s[6],this.b8=s[7],this.oEt=this.wPt.Mxt(),this.$bt=null,this.pRt=null,this.mRt=-1,this.XPt=null,this.xP=BS,this.$Mt=BS,this.Us=[],this.aEt=[],this.lEt=!1,this.uEt=null,this.cEt=null,this.GIt=this.Nc.gZ()?{_It:s[8][0],fEt:s[8][1]}:null,-1===s[0]?this.XPt=this.Nc.e6():(this.$bt=this.Nc.M7(s[0]),s[2]&&(this.pRt=this.$bt.Zft(s[2]),this.mRt=this.$bt.Sut(s[2])),this.wPt.wQ()&&this.wPt.wQ().tCt()),10===s.length){let t=s[9];for(let s of t)this.Us.push(kS.TRt.KG(this,s,this.Us.length)),this.aEt.push(0)}0===this.Us.length&&(this.Us=NS,this.aEt=NS),this.wPt.hH().rMt(this)}static KG(t,s,i){return kS.jn(kS.FIt,t,s,i)}tMt(){for(const t of this.Us)t.tMt(),t.GRt()&&(this.lEt=!0);this.nEt?(this.xP=this.dEt,this.$Mt=this.pEt):this.XPt?(this.mEt(),this.$Mt=this.gEt):this.$bt.Q$().I$()?(this.yEt(),this.$Mt=this.SEt):this.GM?(this.xP=this.wEt,this.$Mt=this.vEt):(this.xP=this.bEt,this.$Mt=this.xEt)}mEt(){const t=this.XPt,s=this.XPt;this.TEt(t,s,this.MEt)}yEt(){const t=this.$bt.Q$(),s=this.$bt.Y$().m0();this.TEt(t,s,this.GEt)}TEt(t,s,i){const e=this.sPt,n=this.hEt,r=this.Us;if(0===r.length){const i=t.QPt(e,s);this.xP=n?function(){return kS.xor(i(),n)}:i}else if(1===r.length){const i=r[0];if(!n&&i.t_t())this.xP=t._Et(e,s,i.Hs(0));else{const r=t.QPt(e,s);this.xP=function(){return kS.xor(r(i.Hs(0)),n)}}}else if(2===r.length){const i=r[0],h=r[1];if(!n&&i.t_t()&&h.t_t())this.xP=t.IEt(e,s,i.Hs(0),h.Hs(0));else{const r=t.QPt(e,s);this.xP=function(){return kS.xor(r(i.Hs(0),h.Hs(0)),n)}}}else if(3===r.length){const i=r[0],h=r[1],o=r[2];if(!n&&i.t_t()&&h.t_t()&&o.t_t())this.xP=t.CEt(e,s,i.Hs(0),h.Hs(0),o.Hs(0));else{const r=t.QPt(e,s);this.xP=function(){return kS.xor(r(i.Hs(0),h.Hs(0),o.Hs(0)),n)}}}else this.xP=i}t9(){return this.b8}O_t(){return this.sPt}gX(){return this.$bt}G0(){return this.pRt}PEt(){return this.pRt?this.pRt.x0():this.$bt?this.$bt.Q$():null}DRt(){const t=this.PEt();return t?t.REt():1}uH(){return this.wPt}yq(){return this.Nc}Gj(){return this.US}SCt(){return this.Gj()}I_t(){return this.eEt}D_t(){return this.nEt}EEt(){return this.hEt}B0(){return this.rEt}QM(){return this.GM}AEt(){return this.GIt._It}FEt(){return!!this.XPt}dCt(){return this.FEt()||this.$bt.Q$().I$()}pCt(){for(const t of this.Us)if(t._Rt())return t.gX();return null}OEt(t){this.GIt._It=!!t,this.wPt.KIt()}DEt(){return this.GIt.fEt}Y_t(){return!this.AEt()&&!this.Nc.ICt()&&!this.DEt()}LEt(){return this.uEt||(this.uEt=new Map),this.uEt}kEt(){return this.cEt||(this.cEt=new Map),this.cEt}MEt(){const t=this.aEt;return LS(this.Us,t),kS.xor(this.sPt.apply(this.XPt,t),this.hEt)}*gEt(){if((this.AEt()||this.Nc.ICt())&&(yield this),this.DEt()){const t=this.aEt;LS(this.Us,t);let s=this.sPt.apply(this.XPt,t);return kS.bo(s)&&(s=yield*s),kS.xor(s,this.hEt)}return this.xP()}GEt(){const t=this.aEt;LS(this.Us,t);const s=this.$bt.Y$().m0();return kS.xor(this.sPt.apply(s,t),this.hEt)}*SEt(){if((this.AEt()||this.Nc.ICt())&&(yield this),this.DEt()){const t=this.aEt;LS(this.Us,t);const s=this.$bt.Y$().m0();let i=this.sPt.apply(s,t);return kS.bo(i)&&(i=yield*i),kS.xor(i,this.hEt)}return this.xP()}dEt(){return!0}*pEt(){return(this.AEt()||this.Nc.ICt())&&(yield this),!0}NEt(){return this.pRt?this.pRt.x0().REt()>=2?this.pRt.M0():this.pRt:this.$bt.Q$().REt()>=2?this.$bt.q$():this.$bt}wEt(){const t=this.aEt;LS(this.Us,t);const s=this.sPt.apply(this.NEt(),t);return this.$bt.JCt(),s}*vEt(){if((this.AEt()||this.Nc.ICt())&&(yield this),this.DEt()){const t=this.aEt;LS(this.Us,t);let s=this.sPt.apply(this.NEt(),t);return kS.bo(s)&&(s=yield*s),this.$bt.JCt(),s}return this.xP()}bEt(){const t=this.Us,s=this.aEt,i=this.$bt.cX();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.GRt()||(s[i]=e.Hs(0))}return i.oxt()?this.BEt(i):this.UEt(i)}*xEt(){return(this.AEt()||this.Nc.ICt())&&(yield this),this.bEt()}VEt(t){const s=this.Us,i=this.aEt;for(let e=0,n=s.length;e<n;++e){const n=s[e];n.GRt()&&(i[e]=n.Hs(t))}}BEt(t){const s=this.$bt,i=s.pX(),e=s.fRt(),n=this.mRt,r=n>=0,h=s.uX(),o=this.lEt,a=this.aEt,l=this.sPt,u=this.hEt,c=this.oEt&&!this.eEt;t.hxt();for(let s=0,f=h.length;s<f;++s){const f=h[s];let d;if(o&&this.VEt(s),r){const t=i?f.gX().yRt(e):0;d=l.apply(f.Kft()[n+t].m0(),a)}else d=l.apply(f.m0(),a);kS.xor(d,u)?t.fxt(f):c&&t.dxt(f)}return s.WEt(!0),t.pxt(!1),s.JCt(),t.axt()}UEt(t){const s=this.$bt,i=s.pX(),e=s.fRt(),n=s.FK(),r=this.mRt,h=r>=0,o=this.lEt,a=this.aEt,l=this.sPt,u=this.hEt,c=this.oEt&&!this.eEt,f=t.mxt(),d=t.gxt(),p=c&&!this.wPt.fCt(this),m=p?d:f;let g=0,y=!1;for(let t=0,s=m.length;t<s;++t){const s=m[t];let S;if(o&&this.VEt(t),h){const t=i?s.gX().yRt(e):0;S=l.apply(s.Kft()[r+t].m0(),a)}else S=l.apply(s.m0(),a);kS.xor(S,u)?(y=!0,p?(f.push(s),n&&s.zEt()):(m[g]=s,n&&s.jEt(g),++g)):p?(m[g]=s,n&&s.HEt(g),++g):c&&(d.push(s),n&&s.JEt())}kS.Sh(m,g),n&&s.qEt(p,g);const S=y;return p&&!y&&(y=this.$Et(f)),s.WEt(S||c),c?y:t.axt()}$Et(t){const s=this.$bt,i=s.pX(),e=s.fRt(),n=this.lEt,r=this.mRt,h=r>=0,o=this.aEt,a=this.sPt,l=this.hEt;for(let s=0,u=t.length;s<u;++s){const u=t[s];let c;if(n&&this.VEt(s),h){const t=i?u.gX().yRt(e):0;c=a.apply(u.Kft()[r+t].m0(),o)}else c=a.apply(u.m0(),o);if(kS.xor(c,l))return!0}return!1}XEt(t,s){return this.Us[t].Hs(s)}L_t(){const t=this.Us;if(!t.length)throw new Error("no parameters");return t[0].ORt()}Sst(){if(!this.uEt||!this.uEt.size)return null;const t={};for(const[s,i]of this.uEt.entries()){let e=i;"collmemory"===s&&(e=[...i.entries()].map(t=>[t[0].LK(),t[1].LK(),t[2]])),t[s]=e}return{ex:t}}wst(t){if(this.uEt&&(this.uEt.clear(),this.uEt=null),!t)return;const s=this.Nc,i=t.ex;if(i){const t=this.LEt();t.clear();for(const[e,n]of Object.entries(i)){let i=n;"collmemory"===e&&(i=kS.jn(kS.Iu,n.map(t=>[s.EJ(t[0]),s.EJ(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),t.set(e,i)}}}}}{let US=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Hs(0)};0;const VS=self._s,WS=(self.assert,[]),zS=function(){},jS=function*(){};VS.DIt=class extends VS.Wn{constructor(t,s,i){super(),this.wPt=t;const e=t.yq();this.Nc=e,this.US=i,this.b8=s.length>=4?s[3]:-1,this.YEt=s.length>=5?255&s[4]:0,this.HD=s.length>=5?s[4]>>8:0,this.sPt=null,this.$bt=null,this.pRt=null,this.mRt=-1,this.XPt=null,this.KEt="",this.ZEt=null,this.QEt=null,this.xP=zS,this.$Mt=zS,this.Us=[],this.aEt=[],this.lEt=!1;const n=-3===s[0],r=n?s[2]:s[5];if(this.GIt=e.gZ()||n?{_It:r[0],fEt:r[1],index:r[2]}:null,-1===s[0])this.XPt=e.e6(),this.sPt=e.tPt(s[1]);else if(-2===s[0])this.KEt=s[1];else if(n){const t=e.tPt(s[1]);this.sPt=t,this.xP=this.tAt,this.$Mt=this.sAt,this.HD|=8}else this.$bt=e.M7(s[0]),4&this.HD?(this.KEt=s[1],this.ZEt=e.M7(s[2])):(s[2]&&(this.pRt=this.$bt.Zft(s[2]),this.mRt=this.$bt.Sut(s[2])),this.sPt=e.tPt(s[1]));if(7===s.length){const t=s[6];for(const s of t)this.Us.push(VS.TRt.KG(this,s,this.Us.length)),this.aEt.push(0)}0===this.Us.length&&(this.Us=WS,this.aEt=WS),this.iAt()&&(this.wPt.VIt(),this.wPt.tCt()),this.wPt.hH().hMt(this)}static KG(t,s,i){return VS.jn(VS.DIt,t,s,i)}tMt(){for(const t of this.Us)t.tMt(),t.GRt()&&(this.lEt=!0);if(this.XPt)this.mEt(),this.$Mt=this.gEt;else if(this.KEt)4&this.HD?this.eAt():this.nAt(),this.KEt="",this.ZEt=null;else if(this.xP===this.tAt){const t=this.sPt,s=this.Nc.hH().TMt(this.wPt);this.sPt=t.bind(null,this.Nc.M$(),s)}else this.pRt?this.ECt()?(this.xP=this.rAt,this.$Mt=this.hAt):(this.xP=this.oAt,this.$Mt=this.aAt):this.$bt.Q$().I$()?(this.yEt(),this.$Mt=this.SEt):this.QM()?(this.xP=this.lAt,this.$Mt=this.uAt):this.ECt()?(this.xP=this.cAt,this.$Mt=this.fAt):this.dAt()?(this.xP=this.pAt,this.$Mt=this.mAt):this.Us.length?this.Us.every(t=>t.GRt())?(this.xP=this.gAt,this.$Mt=this.yAt):this.lEt?(this.xP=this.SAt,this.$Mt=this.wAt):this.Us.every(t=>t.t_t())?(US(this.Us,this.aEt),this.xP=this.vAt,this.$Mt=this.bAt):(this.xP=this.xAt,this.$Mt=this.TAt):(this.xP=this.vAt,this.$Mt=this.bAt)}mEt(){const t=this.XPt,s=this.XPt;this.TEt(t,s,this.MEt)}yEt(){const t=this.$bt.Q$(),s=this.$bt.Y$().m0();this.TEt(t,s,this.GEt)}nAt(){const t=this.wPt.hH(),s=t.oH(this.KEt);if(s._u()){const i=!!(2&this.HD);this.QEt=s.uH();let e=[...new Set([...this.wPt.cH(),...this.QEt.cH()])];e=t.cMt(e);const n=!s.mH()&&this.MAt()?{qCt:!0}:null;if(this.xP=VS.G_t.prototype.$Ct.bind(this.QEt,e,this.Us,i,n),this.Nc.gZ()){const t=this;this.$Mt=function*(){return(t.AEt()||t.Nc.ICt())&&(yield t),yield*t.QEt.KCt(e,t.Us,i,n)}}else this.$Mt=jS}else this.xP=zS,this.$Mt=jS}eAt(){const t=this.wPt.hH(),s=t.dX(this.ZEt,this.KEt);if(s._u()){const i=!!(2&this.HD);this.QEt=s.uH();let e=[...new Set([...this.wPt.cH(),...this.QEt.cH(),this.$bt,s.gX()])];e=t.cMt(e);const n=!this.$bt.pX()&&!s.gX().pX(),r=!this.$bt.pX()&&s.gX().pX(),h=this.$bt.pX();let o=null;if(!s.mH()&&this.MAt()&&(o=o||{},o.qCt=!0),!r&&i||(o=o||{},o.jCt=this.$bt,o.HCt=s.gX()),n||r||h&&!s.mX()?this.xP=VS.G_t.prototype.$Ct.bind(this.QEt,e,this.Us,i,o):h&&(this.xP=VS.h_t.prototype.RPt.bind(s,e,this.Us)),this.Nc.gZ()){const t=this;n||r||h&&!s.mX()?this.$Mt=function*(){return(t.AEt()||t.Nc.ICt())&&(yield t),yield*t.QEt.KCt(e,t.Us,i,o)}:h&&(this.$Mt=function*(){return(t.AEt()||t.Nc.ICt())&&(yield t),yield*s.EPt(e,t.Us)})}else this.$Mt=jS}else this.xP=zS,this.$Mt=jS}TEt(t,s,i){const e=this.sPt,n=this.Us;if(0===n.length)this.xP=t.QPt(e,s);else if(1===n.length){const i=n[0];if(i.t_t())this.xP=t._Et(e,s,i.Hs(0));else{const n=t.QPt(e,s);this.xP=function(){return n(i.Hs(0))}}}else if(2===n.length){const i=n[0],r=n[1];if(i.t_t()&&r.t_t())this.xP=t.IEt(e,s,i.Hs(0),r.Hs(0));else{const n=t.QPt(e,s);this.xP=function(){return n(i.Hs(0),r.Hs(0))}}}else if(3===n.length){const i=n[0],r=n[1],h=n[2];if(i.t_t()&&r.t_t()&&h.t_t())this.xP=t.CEt(e,s,i.Hs(0),r.Hs(0),h.Hs(0));else{const n=t.QPt(e,s);this.xP=function(){return n(i.Hs(0),r.Hs(0),h.Hs(0))}}}else this.xP=i}t9(){return this.b8}ECt(){return!!(8&this.HD)}RCt(){return!!(16&this.HD)}dAt(){return 1===this.YEt}QM(){return 2===this.YEt}iAt(){return!!(1&this.HD)}jIt(){return this.ECt()||this.RCt()}gX(){return this.$bt}PEt(){return this.pRt?this.pRt.x0():this.$bt?this.$bt.Q$():null}DRt(){const t=this.PEt();return t?t.REt():1}uH(){return this.wPt}MAt(){let t=this.wPt;do{if(t instanceof VS.h_t&&t.mH())return!0;t=t.bMt()}while(t);return!1}yq(){return this.Nc}Gj(){return this.US}SCt(){return this.GIt.index}AEt(){return this.GIt._It}OEt(t){this.GIt._It=!!t,this.wPt.KIt()}DEt(){return this.GIt.fEt}Y_t(){return!this.AEt()&&!this.Nc.ICt()&&!this.DEt()}MEt(){const t=this.aEt;return US(this.Us,t),this.sPt.apply(this.XPt,t)}*gEt(){if((this.AEt()||this.Nc.ICt())&&(yield this),this.DEt()){const t=this.aEt;return US(this.Us,t),yield*this.sPt.apply(this.XPt,t)}return this.xP()}GEt(){const t=this.aEt;return US(this.Us,t),this.sPt.apply(this.$bt.Y$().m0(),t)}*SEt(){if((this.AEt()||this.Nc.ICt())&&(yield this),this.DEt()){const t=this.aEt;return US(this.Us,t),yield*this.sPt.apply(this.$bt.Y$().m0(),t)}return this.xP()}vAt(){const t=this.aEt,s=this.$bt.cX().uX();for(let i=0,e=s.length;i<e;++i)this.sPt.apply(s[i].m0(),t)}*bAt(){if((this.AEt()||this.Nc.ICt())&&(yield this),this.DEt()){const t=this.aEt,s=this.$bt.cX().uX();for(let i=0,e=s.length;i<e;++i)yield*this.sPt.apply(s[i].m0(),t)}else this.vAt()}xAt(){const t=this.aEt;US(this.Us,t);const s=this.$bt.cX().uX();for(let i=0,e=s.length;i<e;++i)this.sPt.apply(s[i].m0(),t)}*TAt(){if((this.AEt()||this.Nc.ICt())&&(yield this),this.DEt()){const t=this.aEt;US(this.Us,t);const s=this.$bt.cX().uX();for(let i=0,e=s.length;i<e;++i)yield*this.sPt.apply(s[i].m0(),t)}else this.xAt()}gAt(){const t=this.Us,s=this.aEt,i=this.sPt,e=this.$bt.cX().uX();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Hs(n);i.apply(r.m0(),s)}}*yAt(){if((this.AEt()||this.Nc.ICt())&&(yield this),this.DEt()){const t=this.Us,s=this.aEt,i=this.sPt,e=this.$bt.cX().uX();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Hs(n);yield*i.apply(r.m0(),s)}}else this.gAt()}SAt(){const t=this.Us,s=this.aEt,i=this.sPt,e=this.$bt.cX().uX();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.GRt()||(s[i]=e.Hs(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.GRt()&&(s[i]=e.Hs(n))}i.apply(r.m0(),s)}}*wAt(){if((this.AEt()||this.Nc.ICt())&&(yield this),this.DEt()){const t=this.Us,s=this.aEt,i=this.sPt,e=this.$bt.cX().uX();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.GRt()||(s[i]=e.Hs(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.GRt()&&(s[i]=e.Hs(n))}yield*i.apply(r.m0(),s)}}else this.SAt()}pAt(){const t=this.Us,s=this.aEt,i=this.sPt,e=this.$bt,n=e.GAt(),r=e.cX().uX();n._At(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].Hs(e);i.apply(n.m0(),s)}n.IAt(i)}*mAt(){if((this.AEt()||this.Nc.ICt())&&(yield this),this.DEt()){const t=this.Us,s=this.aEt,i=this.sPt,e=this.$bt,n=e.GAt(),r=e.cX().uX();n._At(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].Hs(e);yield*i.apply(n.m0(),s)}n.IAt(i)}else this.pAt()}CAt(){return this.pRt?this.pRt.x0().REt()>=2?this.pRt.M0():this.pRt:this.$bt.Q$().REt()>=2?this.$bt.q$():this.$bt}lAt(){const t=this.aEt;return US(this.Us,t),this.sPt.apply(this.CAt(),t)}*uAt(){if((this.AEt()||this.Nc.ICt())&&(yield this),this.DEt()){const t=this.aEt;US(this.Us,t);let s=this.sPt.apply(this.CAt(),t);return VS.bo(s)&&(s=yield*s),s}return this.lAt()}oAt(){const t=this.$bt,s=t.pX(),i=t.fRt(),e=this.Us,n=this.lEt,r=this.aEt,h=this.sPt,o=this.mRt,a=t.cX().uX();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.GRt()||(r[t]=s.Hs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.GRt()&&(r[s]=i.Hs(t))}const u=s?l.gX().yRt(i):0;h.apply(l.Kft()[o+u].m0(),r)}}*aAt(){if((this.AEt()||this.Nc.ICt())&&(yield this),this.DEt()){const t=this.$bt,s=t.pX(),i=t.fRt(),e=this.Us,n=this.lEt,r=this.aEt,h=this.sPt,o=this.mRt,a=t.cX().uX();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.GRt()||(r[t]=s.Hs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.GRt()&&(r[s]=i.Hs(t))}const u=s?l.gX().yRt(i):0;yield*h.apply(l.Kft()[o+u].m0(),r)}}else this.oAt()}cAt(){const t=this.Us,s=this.aEt,i=this.sPt,e=this.$bt.cX().uX(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Hs(r);n.push(i.apply(h.m0(),s))}return Promise.all(n)}*fAt(){if((this.AEt()||this.Nc.ICt())&&(yield this),this.DEt()){const t=this.Us,s=this.aEt,i=this.sPt,e=this.$bt.cX().uX(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].Hs(r);n.push(yield*i.apply(h.m0(),s))}return Promise.all(n)}return this.cAt()}rAt(){const t=this.$bt,s=t.pX(),i=t.fRt(),e=this.Us,n=this.aEt,r=this.sPt,h=this.mRt,o=t.cX().uX(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].Hs(t);const u=s?l.gX().yRt(i):0;a.push(r.apply(l.Kft()[h+u].m0(),n))}return Promise.all(a)}*hAt(){if((this.AEt()||this.Nc.ICt())&&(yield this),this.DEt()){const t=this.$bt,s=t.pX(),i=t.fRt(),e=this.Us,n=this.aEt,r=this.sPt,h=this.mRt,o=t.cX().uX(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].Hs(t);const u=s?l.gX().yRt(i):0;a.push(yield*r.apply(l.Kft()[h+u].m0(),n))}return Promise.all(a)}return this.rAt()}async tAt(){try{await this.sPt()}catch(t){console.error(`Unhandled exception running script %c${this.wPt.fit().Pc()}, event ${this.wPt.eCt()}, action ${this.SCt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.yZ&&self.yZ.ePt(this),VS.F_t.nPt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),VS.F_t.rPt())}}*sAt(){return(this.AEt()||this.Nc.ICt())&&(yield this),this.tAt()}Sst(){return this.uEt&&this.uEt.size?{ex:VS.So(this.uEt)}:null}wst(t){if(this.uEt&&(this.uEt.clear(),this.uEt=null),!t)return;const s=t.ex;s&&(this.uEt=VS.wo(s))}}}{let HS=function(t){return t instanceof fw?cw.lY(t):t.J1()},JS=function(t){return HS(t).LJ()},qS=function(t){return cw.lY(t)},$S=function(t){return qS(t).LJ()},XS=function(t){return t instanceof dw?cw.lY(t):t},YS=function(t){return t instanceof pw?cw.lY(t):t},KS=function(t,s,i,e){s.LK()<i.LK()?t.Set(s,i,e):t.Set(i,s,e)},ZS=function(t,s,i){s.LK()<i.LK()?t.Eu(s,i):t.Eu(i,s)},QS=function(t,s){t.Au(s)},tw=function(t,s,i){return s.LK()<i.LK()?t.Hs(s,i):t.Hs(i,s)},sw=function(t,s,i,e){if(!s)return!1;const n=0!==i||0!==e,r=t.LJ(),h=cw.Aj(),o=cw.mMt(),a=o.uH().Mxt(),l=o.gX(),u=o.EEt(),c=s.cX(),f=l!==s;let d;ww=s,Sw=f&&!u,vw=!1;let p=0,m=0,g=!1;c.oxt()?(mw.m(r.QZ()),mw.offset(i,e),h.PAt(r.NJ(),s,mw,yw),d=yw):a?cw.RAt()&&!c.gxt().length&&c.mxt().length?d=c.mxt():(d=c.gxt(),vw=!0):d=c.mxt(),n&&(p=r.aT(),m=r.cT(),r.UZ(i,e),r.kZ());for(const s of d)if(h.Bq(t,s)){if(g=!0,u)break;f&&bw.add(s)}return n&&(r.NZ(p,m),r.kZ()),hw.wh(yw),g},iw=function(t){const s=cw.fH().Mxt(),i=ww.cX(),e=i.mxt(),n=i.gxt();i.oxt()?(i.wxt(bw),s&&(hw.wh(n),i.vxt(bw,ww.uX()))):s?vw?i.bxt(bw):(i.vxt(bw,e),i.wxt(bw)):i.wxt(bw),ww.JCt()},ew=function(t,s){Sw&&(s&&iw(t),bw.clear(),ww=null,Sw=!1)},nw=function(t,s){const i=cw.EJ(s);if(!i)return!1;const e=t.cX();if(!e.oxt()&&!e.mxt().includes(i))return!1;if(t.pX()){if(i.gX().EAt(t))return e.Txt(i),t.JCt(),!0}else if(i.gX()===t)return e.Txt(i),t.JCt(),!0;return!1},rw=function(t,s){const i=t.cX();if(i.oxt()){i.pxt(!1),i.hxt();const e=t.uX();for(let t=0,n=e.length;t<n;++t){const n=e[t];n.LK()===s?i.dxt(n):i.fxt(n)}return t.JCt(),!!i.mxt().length}{const e=i.mxt();let n=0;for(let t=0,r=e.length;t<r;++t){const r=e[t];e[n]=r,r.LK()===s?i.dxt(r):++n}return hw.Sh(e,n),t.JCt(),!!e.length}};0;const hw=self._s,ow=new hw.To,aw={},lw={},uw={};let cw=null;hw.AAt=function(t){cw=t};const fw=self.MK,dw=self.K$,pw=self.aY;lw.FAt=function(t,s){return hw.compare(this.LJ().aT(),t,s)},uw.FAt=function(t,s){return hw.compare(this.x,t,s)},lw.OAt=function(t,s){return hw.compare(this.LJ().cT(),t,s)},uw.OAt=function(t,s){return hw.compare(this.y,t,s)},lw.DAt=function(){return this.LJ().eQ()},uw.DAt=function(){return this.iQ()},aw.LAt=function(){const t=JS(this),s=t.gJ(),i=t.QZ();return i.tl()<0||i.sl()<0||i.Za()>s.xy()||i.Qa()>s.My()},aw.kAt=function(t,s,i){const e=XS(this).cX(),n=e.uX();if(!n.length)return!1;let r=n[0],h=r.LJ(),o=r,a=hw.er(h.aT(),h.cT(),s,i);for(let e=1,l=n.length;e<l;++e){r=n[e],h=r.LJ();const l=hw.er(h.aT(),h.cT(),s,i);(0===t&&l<a||1===t&&l>a)&&(a=l,o=r)}return e.Txt(o),!0},lw.lT=function(t){const s=this.LJ();s.aT()!==t&&(s.lT(t),s.kZ())},uw.lT=function(t){this.x=+t},lw.fT=function(t){const s=this.LJ();s.cT()!==t&&(s.fT(t),s.kZ())},uw.fT=function(t){this.y=+t},lw.NAt=function(t,s){const i=this.LJ();i.BAt(t,s)||(i.NZ(t,s),i.kZ())},uw.NAt=function(t,s){this.setPosition(t,s)},aw.UAt=function(t,s){if(!(t=XS(t)))return;const i=HS(this),e=t.aX(i);if(!e)return;const[n,r]=e.VAt(s),h=i.LJ();h.aT()===n&&h.cT()===r||(h.NZ(n,r),h.kZ())},aw.WAt=function(t){if(0===t)return;const s=JS(this);s.UZ(s.zAt()*t,s.jAt()*t),s.kZ()},lw.HAt=function(t,s){if(0===s)return;const i=this.LJ();t=hw.Zn(t),i.UZ(Math.cos(t)*s,Math.sin(t)*s),i.kZ()},uw.HAt=function(t,s){0!==s&&(t=hw.Zn(t),this.offsetPosition(Math.cos(t)*s,Math.sin(t)*s))},lw.aT=function(){return this.LJ().aT()},uw.aT=function(){return this.x},lw.cT=function(){return this.LJ().cT()},uw.cT=function(){return this.y},aw.PH=function(){return cw.PH(HS(this))},lw.JAt=function(t,s){return hw.compare(this.LJ().xy(),t,s)},uw.JAt=function(t,s){return hw.compare(this.width,t,s)},lw.qAt=function(t,s){return hw.compare(this.LJ().My(),t,s)},uw.qAt=function(t,s){return hw.compare(this.height,t,s)},lw.ny=function(t){const s=this.LJ();s.xy()!==t&&(s.ny(t),s.kZ())},uw.ny=function(t){this.width=t},lw.hy=function(t){const s=this.LJ();s.My()!==t&&(s.hy(t),s.kZ())},uw.hy=function(t){this.height=t},lw.QR=function(t,s){const i=JS(this);i.xy()===t&&i.My()===s||(i.QR(t,s),i.kZ())},uw.QR=function(t,s){this.jX(t,s)},lw.xy=function(){return this.LJ().xy()},uw.xy=function(){return this.width},lw.My=function(){return this.LJ().My()},uw.My=function(){return this.height},aw.$At=function(){return JS(this).QZ().Za()},aw.XAt=function(){return JS(this).QZ().Qa()},aw.YAt=function(){return JS(this).QZ().tl()},aw.KAt=function(){return JS(this).QZ().sl()},aw.ZAt=function(){const t=JS(this).QZ();return(t.Za()+t.tl())/2},aw.QAt=function(){const t=JS(this).QZ();return(t.Qa()+t.sl())/2},aw.tFt=function(t,s){return hw.rr(JS(this).$X(),hw.Zn(s))<=hw.Zn(t)},aw.sFt=function(t){return hw.ar(JS(this).$X(),hw.Zn(t))},aw.iFt=function(t,s){const i=hw.Zn(t),e=hw.Zn(s),n=JS(this).$X();return hw.ar(e,i)?hw.ar(n,i)&&!hw.ar(n,e):!(!hw.ar(n,i)&&hw.ar(n,e))},lw.qX=function(t){const s=this.LJ(),i=hw.Kn(hw.Zn(t));isNaN(i)||s.$X()===i||(s.qX(i),s.kZ())},uw.qX=function(t){this.KZ=t},aw.eFt=function(t){if(isNaN(t)||0===t)return;const s=JS(this);s.qX(s.$X()+hw.Zn(t)),s.kZ()},aw.nFt=function(t){if(isNaN(t)||0===t)return;const s=JS(this);s.qX(s.$X()-hw.Zn(t)),s.kZ()},aw.rFt=function(t,s){const i=JS(this),e=i.$X(),n=hw.hr(e,hw.Zn(s),hw.Zn(t));isNaN(n)||e===n||(i.qX(n),i.kZ())},aw.hFt=function(t,s,i){const e=JS(this),n=e.$X(),r=s-e.aT(),h=i-e.cT(),o=Math.atan2(h,r),a=hw.hr(n,o,hw.Zn(t));isNaN(a)||n===a||(e.qX(a),e.kZ())},aw.oFt=function(t,s){const i=JS(this),e=i.$X(),n=t-i.aT(),r=s-i.cT(),h=Math.atan2(r,n);isNaN(h)||e===h||(i.qX(h),i.kZ())},lw.$X=function(){return hw.Qn(this.LJ().$X())},uw.$X=function(){return this.KZ},aw.aFt=function(t,s){return hw.compare(hw.Mr(100*JS(this).FF(),6),t,s)},lw.OY=function(){return this.LJ().OY()},uw.OY=function(){return this.isVisible},aw.AY=function(t){const s=JS(this);t=2===t?!s.OY():0!==t,s.OY()!==t&&(s.AY(t),cw.jJ())},aw.DF=function(t){const s=hw.Yn(t/100,0,1),i=JS(this);if(i.qQ()){if(i.Sdt().lFt()===s)return}else if(i.FF()===s)return;i.DF(s),cw.jJ()},aw.uFt=function(t){ow.Qo(t);const s=JS(this);s.rQ().Ho(ow)||(s.hQ(ow),cw.jJ())},aw.kF=function(){const t=JS(this).rQ();return hw.Ir(t.ko(),t.No(),t.Bo(),t.Uo())},aw.FF=function(){return hw.Mr(100*JS(this).FF(),6)},aw.cFt=function(t){return!!(t=YS(t))&&JS(this).NJ()===t},aw.fFt=function(t){const s=XS(this).cX(),i=s.uX();if(!i.length)return!1;let e=i[0];for(let s=1,n=i.length;s<n;++s){const n=i[s],r=n.LJ(),h=e.LJ(),o=r.NJ().Gj(),a=h.NJ().Gj();0===t?(o>a||o===a&&r.BJ()>h.BJ())&&(e=n):(o<a||o===a&&r.BJ()<h.BJ())&&(e=n)}return s.Txt(e),!0},lw.dFt=function(t,s,i){const e=this.LJ(),n=0===t?e.dT():e.YZ();return hw.compare(n,s,i)},uw.dFt=function(t,s,i){const e=0===t?this.WN:this.XZ;return hw.compare(e,s,i)},lw.pFt=function(){this.LJ().aQ()},uw.pFt=function(){this.oQ()},lw.mFt=function(){this.LJ().uQ()},uw.mFt=function(){this.lQ()},aw.gFt=function(t){(t=YS(t))&&JS(this).fQ(t)},aw.yFt=function(t,s){const i=0===t;if(!(s=XS(s)))return;const e=HS(this),n=s.SFt(e);n&&e.LJ().pQ(n,i)},lw.pT=function(t){const s=this.LJ();s.dT()!==t&&(s.pT(t),cw.jJ())},uw.pT=function(t){this.WN=t},aw.wFt=function(){return JS(this).NJ().Gj()},aw.vFt=function(){return JS(this).NJ().Pc()},lw.bFt=function(){return this.LJ().BJ()},uw.bFt=function(){return this.zIndex},lw.xFt=function(){return this.LJ().dT()},uw.xFt=function(){return this.WN},lw.TFt=function(){return this.LJ().YZ()},uw.TFt=function(){return this.XZ},aw.MFt=function(t){const s=HS(this),i=s.gX().VX().tdt(t);if(!i)return;const e=i.Gj();return s.LJ().DZ().E0(e)},aw.GFt=function(t,s){const i=HS(this),e=i.gX().VX().tdt(s);if(!e)return;const n=e.Gj(),r=1===t,h=i.LJ().DZ();h.E0(n)!==r&&(h.A0(n,r),h.F0(),cw.jJ())},aw._Ft=function(t,s,i){const e=HS(this),n=e.gX().VX().tdt(t);if(!n)return;s=Math.floor(s);const r=n.Q_().sI(s);if(!r)return;"color"===r?(ow.Qo(i),i=ow):"percent"===r&&(i/=100);const h=n.Gj(),o=e.LJ().DZ();o.D0(h,s,i)&&o.E0(h)&&cw.jJ()};const mw=hw.jn(hw.Rect),gw=[],yw=[];let Sw=!1,ww=null,vw=!1;const bw=new Set;function*xw(t){if(!t)return!1;const s=this.yq(),i=s.Aj(),e=s.hH(),n=e.wH(),r=e.mMt(),h=r.gX(),o=r.LEt(),a=r.kEt(),l=n.R3(),u=s.DH(),c=u-1,f=l.fH(),d=n.E3(f);let p=o.get("collmemory");p||(p=hw.jn(hw.Iu),o.set("collmemory",p)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),s.Sf().addEventListener("instancedestroy",t=>QS(p,t._0)));const m=h.cX(),g=t.cX(),y=m.uX();let S=null;for(let s=0;s<y.length;++s){const n=y[s];g.oxt()?(i.PAt(n.LJ().NJ(),t,n.LJ().QZ(),gw),S=gw,i.IFt(n,t,S)):S=g.uX();for(let s=0;s<S.length;++s){const r=S[s];if(i.Bq(n,r)||i.CFt(n,r)){const s=tw(p,n,r);let i=!1,o=-2;"number"==typeof s&&(i=!0,o=s);const a=!i||o<c;if(KS(p,n,r,u),a){const s=f.bX();e.L3(s);const i=h.cX(),o=t.cX();if(i.pxt(!1),o.pxt(!1),h===t){const t=i.mxt();hw.wh(t),t.push(n),t.push(r),h.JCt()}else{const s=i.mxt(),e=o.mxt();hw.wh(s),hw.wh(e),s.push(n),e.push(r),h.JCt(),t.JCt()}yield*f.NCt(l,d),e.B3(s)}}else ZS(p,n,r)}hw.wh(gw)}return n.z3(),!1}aw.PFt=function(t){const s=XS(this);t=XS(t);const i=s.yq();if(i.RFt())return xw.call(s,t);if(!t)return!1;const e=i.Aj(),n=i.hH(),r=n.wH(),h=n.mMt(),o=h.gX(),a=h.LEt(),l=h.kEt(),u=r.R3(),c=i.DH(),f=c-1,d=u.fH(),p=r.E3(d);let m=a.get("collmemory");m||(m=hw.jn(hw.Iu),a.set("collmemory",m)),l.get("collisionCreatedDestroyCallback")||(l.set("collisionCreatedDestroyCallback",!0),i.Sf().addEventListener("instancedestroy",t=>QS(m,t._0)));const g=o.cX(),y=t.cX(),S=g.uX();let w=null;for(let s=0;s<S.length;++s){const i=S[s];y.oxt()?(e.PAt(i.LJ().NJ(),t,i.LJ().QZ(),gw),w=gw,e.IFt(i,t,w)):w=y.uX();for(let s=0;s<w.length;++s){const r=w[s];if(e.Bq(i,r)||e.CFt(i,r)){const s=tw(m,i,r);let e=!1,h=-2;"number"==typeof s&&(e=!0,h=s);const a=!e||h<f;if(KS(m,i,r,c),a){const s=d.bX();n.L3(s);const e=o.cX(),h=t.cX();if(e.pxt(!1),h.pxt(!1),o===t){const t=e.mxt();hw.wh(t),t.push(i),t.push(r),o.JCt()}else{const s=e.mxt(),n=h.mxt();hw.wh(s),hw.wh(n),s.push(i),n.push(r),o.JCt(),t.JCt()}d.N3(u,p),n.B3(s)}}else ZS(m,i,r)}hw.wh(gw)}return r.z3(),!1},aw.EFt=function(t){return t=XS(t),sw(HS(this),t,0,0)},aw.AFt=function(t,s,i){return t=XS(t),sw(HS(this),t,s,i)},aw.FFt=function(){return!0},aw.AQ=function(){return JS(this).AQ()},aw.xst=function(){return JS(this).xst()},aw.OFt=function(t,s){const i=XS(this);t=XS(t);const e=i.yq(),n=this.cX().uX();if(0===n.length)return!1;const r=t.cX();let h=r.uX();if(r.oxt()){const s=[...e.DFt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.oxt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];if(1===s)for(const s of e.xQ())s.LFt(t)&&(null===o||o.has(s))&&a.add(s);else{let i;if(0===s){if(i=e.wQ(),null===i)continue}else i=e.bQ();i.LFt(t)&&(null===o||o.has(i))&&a.add(i)}}return 0!==a.size&&(r.wxt(a),t.JCt(),!0)},aw.kFt=function(t,s){const i=XS(this);t=XS(t);const e=i.yq(),n=i.cX().uX();if(0===n.length)return!1;const r=t.cX();let h=r.uX();if(r.oxt()){const s=[...e.DFt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.oxt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];2!==s||e.xst()||!e.LFt(t)||null!==o&&!o.has(e)||a.add(e);for(const i of 0===s?e.children():e.IQ())2===s&&i.xst()||i.LFt(t)&&(null===o||o.has(i))&&a.add(i)}return 0!==a.size&&(r.wxt(a),t.JCt(),!0)},aw.NFt=function(t,s,i){const e=XS(this);t=XS(t);const n=e.yq(),r=e.cX().uX();if(0===r.length)return!1;const h=t.cX();let o=h.uX();if(h.oxt()){const s=[...n.DFt(t)];s.length>0&&(o=o.concat(s))}if(0===o.length)return!1;const a=h.oxt()?null:new Set(o),l=[];for(let e=0,n=r.length;e<n;++e){const n=r[e];if(0===s){const s=n._Q(i);null!==s&&s.LFt(t)&&(null===a||a.has(s))&&l.push(s)}else if(1===s)for(const s of n.children())if(s.LFt(t)){if(0===i){(null===a||a.has(s))&&l.push(s);break}--i}}return 0!==l.length&&(h.Sxt(l),t.JCt(),!0)},aw.BFt=function(t,s,i){const e=HS(this);switch(t){case 0:default:return hw.compare(e.MQ(),s,i);case 1:return hw.compare(e.UFt(),s,i)}},aw.PQ=function(t,s,i,e,n,r,h,o,a,l){t=XS(t);const u=HS(this),c=cw.yMt().gX();for(const f of t.VFt(u,c)){if(!f.Q$().B$())return;u.PQ(f,{OQ:s,LQ:i,NQ:e,UQ:n,WQ:r,JQ:h,jQ:o,$Q:a,YQ:l})}},aw.RQ=function(t){t=XS(t);const s=HS(this),i=cw.yMt().gX();for(const e of t.VFt(s,i))s.RQ(e)},aw.WFt=function(){const t=HS(this);t.AQ()&&t.wQ().RQ(t)},aw.zFt=function(){const t=HS(this).wQ();return t?t.LK():-1},aw.jFt=function(){return HS(this).MQ()},aw.HFt=function(){return HS(this).UFt()},aw.JFt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=JS(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.s0(),i.kZ()):i.QQ(t,s)},aw.e0=function(t,s,i,e,n,r,h,o){const a=JS(this);a.e0(t,s,{mode:0===i?"absolute":"relative",x:e,y:n,WN:r,o0:h,a0:o})&&a.kZ()},aw.qFt=function(){const t=JS(this);return t.r0()?t.h0().UT():0},aw.$Ft=function(){const t=JS(this);return t.r0()?t.h0().VT():0},aw.XFt=function(t){const s=JS(this);t=2===t?!s.OY():0!==t,s.OY()!==t&&s.AY(t)},aw.w0=function(t,s){this instanceof self.MK?this.X2(t,s):this.w0(t,s)},aw.YFt=function(t,s){this instanceof self.MK?this.K2(t,""+s):this.YFt(t,""+s)},aw.KFt=function(t){this instanceof self.MK?this.Z2(t):this.KFt(t)},aw.ZFt=function(){this instanceof self.MK?this.H2():this.g0()},aw.QFt=function(){this instanceof self.MK?this.J2():this.y0()},aw.tOt=function(){return this instanceof self.MK?this.q2():this.tOt()},aw.sOt=function(t){this instanceof self.MK?this.iOt(0!==t):this.eOt(0!==t)},aw.nOt=function(){return this instanceof self.MK?this.uPt():this.rOt()},lw.hOt=function(t,s,i){return hw.compare(this.J1().Bpt(t),s,i)},uw.hOt=function(t,s,i){return hw.compare(qS(this).Bpt(t),s,i)},lw.oOt=function(t){return!!this.J1().Bpt(t)},uw.oOt=function(t){return!!qS(this).Bpt(t)},aw.aOt=function(t,s){const i=XS(this),e=i.cX(),n=e.uX();if(!n.length)return!1;const r=i.pX();let h=null,o=0;for(let e=0,a=n.length;e<a;++e){const a=n[e],l=r?a.gX().cRt(i.fRt()):0,u=a.Bpt(l+s);(null===h||0===t&&u<o||1===t&&u>o)&&(o=u,h=a)}return e.Txt(h),!0},aw.lOt=function(t){const s=XS(this);return s.yq().mMt().EEt()?rw(s,t):nw(s,t)},aw.T1=function(t){const s=HS(this);return t.includes(" ")?new Set(hw.Dh(t.toLowerCase())).isSubsetOf(s.qK()):!t||s.HK(t)},aw.uOt=function(){return HS(this).zut()},aw.cOt=function(){return HS(this).KK().size},aw.fOt=function(t){return HS(this).dOt(t)},aw.pOt=function(t,s){const i=hw.Dh(s),e=HS(this);if(2===t)return void e.XK(new Set(i));if(0===i.length)return;const n=new Set(e.KK());if(0===t)for(const t of i)n.add(t);else if(1===t)for(const t of i)if(!n.delete(t)){const s=t.toLowerCase();for(const t of n)if(t.toLowerCase()===s){n.delete(t);break}}e.XK(n)},aw.mOt=function(){cw.JJ(HS(this))},aw.gOt=function(){return!0},aw.yOt=function(){return!0},lw.SOt=function(t,s){this.J1().Upt(t,s)},uw.SOt=function(t,s){qS(this).Upt(t,s)},lw.wOt=function(t,s){const i=this.J1(),e=i.Bpt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Upt(t,e+s)},uw.wOt=function(t,s){const i=qS(this),e=i.Bpt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Upt(t,e+s)},lw.vOt=function(t,s){const i=this.J1(),e=i.Bpt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Upt(t,e-s))},uw.vOt=function(t,s){const i=qS(this),e=i.Bpt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Upt(t,e-s))},lw.bOt=function(t,s){this.J1().Upt(t,s?1:0)},uw.bOt=function(t,s){qS(this).Upt(t,s?1:0)},lw.xOt=function(t){const s=this.J1();s.Upt(t,0===s.Bpt(t)?1:0)},uw.xOt=function(t){const s=qS(this);s.Upt(t,0===s.Bpt(t)?1:0)},aw.TOt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=HS(this),e="state";cw.MOt(),i.Mnt(e),i.xT(s,e),cw.GOt(e,{_Ot:!0})},aw.IOt=function(){return JSON.stringify(HS(this).bT("state"))},aw.COt=function(){return HS(this).gX().Pc()},aw.POt=function(){const t=cw.pMt().tTt();let s=t.MX();for(const i of cw.DFt(t))++s;return s},aw.ROt=function(){return cw.pMt().tTt().cX().uX().length},lw.NK=function(){return this.J1().NK()},uw.NK=function(){return qS(this).NK()},lw.LK=function(){return this.J1().LK()},uw.LK=function(){return qS(this).LK()},aw.kGt=function(t){const s=HS(this);return t.toLowerCase()===cw.hH().VGt(s)},aw.ZK=function(t){const s=HS(this);cw.hH().ZK(s,t)},aw.EOt=function(t){const s=XS(this);return cw.hH().pGt().AOt(s.cX().uX(),t),!0},aw.FOt=function(){return HS(this).UK()},hw.OOt=function(t,s,i){const e=t[1],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.oq,S=s.Jdt,w=s.qdt,v=Object.assign({},aw,i>=2?uw:lw);n&&(y.FAt=v.FAt,y.OAt=v.OAt,y.DAt=v.DAt,y.LAt=v.LAt,y.kAt=v.kAt,S.lT=v.lT,S.fT=v.fT,S.NAt=v.NAt,S.UAt=v.UAt,S.WAt=v.WAt,S.HAt=v.HAt,w.DOt=v.aT,w.LOt=v.cT,w.CH=v.PH),r&&(y.JAt=v.JAt,y.qAt=v.qAt,S.ny=v.ny,S.hy=v.hy,S.QR=v.QR,w.kOt=v.xy,w.NOt=v.My,w.BOt=v.$At,w.UOt=v.XAt,w.VOt=v.YAt,w.WOt=v.KAt,w.zOt=v.ZAt,w.jOt=v.QAt),h&&(y.HOt=v.tFt,y.JOt=v.sFt,y.iFt=v.iFt,S.qX=v.qX,S.eFt=v.eFt,S.nFt=v.nFt,S.rFt=v.rFt,S.hFt=v.hFt,S.oFt=v.oFt,w.qOt=v.$X),o&&(y.OY=v.OY,y.aFt=v.aFt,S.AY=v.AY,S.DF=v.DF,S.uFt=v.uFt,w.Opacity=v.FF,w.ColorValue=v.kF),a&&(y.cFt=v.cFt,y.fFt=v.fFt,y.dFt=v.dFt,S.pFt=v.pFt,S.mFt=v.mFt,S.gFt=v.gFt,S.yFt=v.yFt,S.pT=v.pT,w.wFt=v.wFt,w.vFt=v.vFt,w.bFt=v.bFt,w.xFt=v.xFt,w.TFt=v.TFt),l&&(y.MFt=v.MFt,S.GFt=v.GFt,S._Ft=v._Ft),d&&(y.FFt=v.FFt,y.AQ=v.AQ,y.xst=v.xst,y.OFt=v.OFt,y.kFt=v.kFt,y.NFt=v.NFt,y.BFt=v.BFt,S.PQ=v.PQ,S.RQ=v.RQ,S.WFt=v.WFt,w.zFt=v.zFt,w.jFt=v.jFt,w.HFt=v.HFt),p&&(S.JFt=v.JFt,S.e0=v.e0,w.qFt=v.qFt,w.$Ft=v.$Ft),u&&(y.OY=v.OY,S.AY=v.XFt,S.$Ot=v.w0,S.XOt=v.YFt,S.YOt=v.KFt),c&&(y.KOt=v.tOt,S.ZOt=v.ZFt,S.QOt=v.QFt),f&&(y._u=v.nOt,S.tDt=v.sOt),m&&(y.PFt=v.PFt,y.EFt=v.EFt,y.AFt=v.AFt,s.sDt=ew),e||(y.hOt=v.hOt,y.oOt=v.oOt,y.aOt=v.aOt,y.lOt=v.lOt,y.T1=v.T1,S.SOt=v.SOt,S.wOt=v.wOt,S.vOt=v.vOt,S.bOt=v.bOt,S.xOt=v.xOt,S.pOt=v.pOt,y.gOt=v.gOt,y.yOt=v.yOt,S.mOt=v.mOt,S.TOt||(S.TOt=v.TOt),w.IOt||(w.IOt=v.IOt),w.POt=v.POt,w.ROt=v.ROt,w.iDt=v.NK,w.eDt=v.LK,w.COt=v.COt,w.uOt=v.uOt,w.cOt=v.cOt,w.fOt=v.fOt,y.kGt=v.kGt,S.ZK=v.ZK,S.EOt=v.EOt),g&&(w.FOt=v.FOt)}}{const Tw=self._s;Tw.mGt=class extends Tw.Wn{constructor(t){super(),this._xt=t,this.Jc="",this.sz=-1,this.nDt="",this.rDt=!1,this.hDt=null,this.Dxt=0,this.hIt=[],this.Vxt=null,this.oDt=new Map,this.aDt=null,this.lDt=null,this.uDt=-1,this.lPt=null,this.cDt=null,this.fDt=!1}Hn(){this.Jc="",this.sz=-1,this.nDt="",this.hDt=null,this.lDt=null,this.lPt=null,this.cDt=null,this.uDt=-1,Tw.wh(this.hIt),this.Vxt&&(this.Vxt.clear(),this.Vxt=null);for(const t of this.oDt.values())t.Hn();this.oDt.clear(),this.aDt=null}oT(){const t=this._xt,s=t.yq().J7(),i=t.pMt();this.hDt=i.fH(),this.Dxt=i.qxt()+1;const e=t.r_t(this.hDt);e&&(this.lDt=e,this.lPt=e.GPt(),this.cDt=e.MPt().map(t=>t.Hct()),e.ECt()&&(this.uDt=e.CPt()));for(const t of s){const s=t.cX();s.oxt()&&!this.hDt.sCt(t)||(this.hIt.push(t),this.oDt.set(t,Tw.jn(Tw.dDt,s)))}const n=t.dH();this.Vxt=n.size>0?n:null}pDt(t){this.Jc="timer",this.oT(),this.sz=this._xt.yq().FH()+t}mDt(t){this.Jc="walltimer",this.oT(),this.sz=this._xt.yq().kH()+t}gDt(t){this.Jc="signal",this.oT(),this.nDt=t.toLowerCase()}AOt(t,s){this.Jc="instance-signals",this.oT(),this.nDt=s.toLowerCase(),this.aDt=new Set(t)}yDt(t){this.Jc="promise",this.oT(),t.then(()=>this.FGt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.FGt()})}SDt(){return"timer"===this.Jc}wDt(){return"walltimer"===this.Jc}EGt(){return"signal"===this.Jc}BGt(){return"instance-signals"===this.Jc}s_t(){return"promise"===this.Jc}AGt(){return this.nDt}vDt(){return this.rDt}FGt(){this.rDt=!0}UGt(t){this.aDt.delete(t),0===this.aDt.size&&this.FGt()}SGt(){return this.SDt()?this.sz<=this._xt.yq().FH():this.wDt()?this.sz<=this._xt.yq().kH():this.vDt()}bDt(t){t.Wxt(this.hDt,this.Dxt);for(const[t,s]of this.oDt.entries()){const i=t.cX();s.Wxt(i)}this.Vxt&&t.hTt([...this.Vxt]);const s=this.lDt;s&&(s.WCt(this.lPt),s.MPt().map((t,s)=>t.Cft(this.cDt[s])),s.ECt()&&s.PPt(this.uDt))}wGt(t){this.bDt(t),this.hDt.ACt(t),this.lDt&&this.lDt.ECt()&&this.lDt.YCt(this.uDt),this._xt.uGt(this.hIt),this.fDt=!0}async TGt(t){this.bDt(t);for(const s of this.hDt.FCt(t))await this._xt.yq().qMt(s);this.lDt&&this.lDt.ECt()&&this.lDt.YCt(this.uDt),this._xt.uGt(this.hIt),this.fDt=!0}vGt(){return this.fDt}sxt(t){for(const s of this.oDt.values())s.sxt(t);if("instance-signals"===this.Jc){for(const s of t)this.aDt.delete(s);0===this.aDt.size&&this.FGt()}}Sst(){const t={},s={wt:this.Jc,t:this.sz,st:this.nDt,s:this.rDt,ev:this.hDt.t9(),sm:this.hIt.map(t=>t.t9()),dsm:this.Vxt?[...this.Vxt].map(t=>t.t9()):null,sols:t};this.hDt.wCt(this.Dxt)&&(s.act=this.hDt.SMt(this.Dxt).t9());for(const[s,i]of this.oDt)t[s.t9().toString()]=i.Sst();return"instance-signals"===this.Jc&&(s.pi=[...this.aDt].map(t=>t.LK())),s}static i_t(t,s){const i=t.yq(),e=t.IMt(s.ev);if(!e)return null;let n=0;if(s.hasOwnProperty("act")){const i=t.PMt(s.act);if(!i)return null;n=i.Gj()}const r=Tw.jn(Tw.mGt,t);r.sz=s.t,s.hasOwnProperty("wt")?r.Jc=s.wt:r.Jc=-1===r.sz?"signal":"timer",r.nDt=s.st,r.rDt=s.s,r.hDt=e,r.Dxt=n;for(const t of s.sm){const s=i.P3(t);s&&r.hIt.push(s)}if(Array.isArray(s.dsm))for(const t of s.dsm){const s=i.P3(t);s&&(r.Vxt||(r.Vxt=new Set),r.Vxt.add(s))}for(const[e,n]of Object.entries(s.sols)){const s=parseInt(e,10),h=i.P3(s);if(!h)continue;const o=Tw.jn(Tw.dDt,null);o.wst(t,n),r.oDt.set(h,o)}if("instance-signals"===r.Jc){r.aDt=new Set;for(const t of s.pi){const s=i.EJ(t);s&&r.aDt.add(s)}}return r}}}{const Mw=self._s;Mw.dDt=class extends Mw.Wn{constructor(t){super(),this.$bt=null,this.xDt=!0,this.U6=[],t&&(this.$bt=t.gX(),this.xDt=t.oxt(),Mw.Mh(this.U6,t.mxt()))}Hn(){this.$bt=null,Mw.wh(this.U6)}Wxt(t){t.pxt(this.xDt),Mw.Mh(t.mxt(),this.U6)}sxt(t){Mw.Ph(this.U6,t)}Sst(){return{sa:this.xDt,insts:this.U6.map(t=>t.LK())}}wst(t,s){const i=t.yq();this.xDt=!!s.sa,Mw.wh(this.U6);for(const t of s.insts){const s=i.EJ(t);s&&this.U6.push(s)}}}}{let Gw=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};0;const _w=self._s;_w.TDt=class extends _w.Wn{constructor(t){super(),this.Nc=t.runtime,this.Uc=t.id,this.$n=t.name??"",this.MDt=!!t._$,this.GDt=!!t._Dt,this.IDt=!!t.A$,this.CDt=!!t.PDt,this.RDt=!!t.O$,this.EDt=!!t.ADt,this.FDt=!!t.U$,this.ODt=!!t.R$,this.DDt=!!t.L$,this.LDt=t.kDt,this.NDt=t.BDt,this.UDt=null,this.VDt=new Map,this.WDt=new Map,this.zDt=new Map,this.jDt=new Map,this.HDt=t.JDt,this.qDt=null}Hn(){this.Nc=null}yq(){return this.Nc}G$(){return this.Uc}Pc(){return this.$n}$Dt(){}NGt(){return this.REt()>=2?this.qDt.constructor:this.constructor}REt(){return this.LDt}XDt(t=!1){let s=this.HDt;return t&&"function"!=typeof s&&this.REt()>=2&&(s=globalThis.i2),s}YDt(){return this.NDt}I$(){return this.MDt}P$(){return this.GDt}E$(){return this.ODt}k$(){return this.DDt}F$(){return this.IDt}Ox(){return this.CDt}D$(){return this.RDt}B$(){return this.EDt}V$(){return this.FDt}QPt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.VDt.get(t);return i||(i=t.bind(s),this.VDt.set(t,i),i)}_Et(t,s,i){if(!s)throw new Error("missing 'this' binding");const e=Gw(this.WDt,t);let n=e.get(i);return n||(n=t.bind(s,i),e.set(i,n),n)}IEt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");const n=Gw(this.zDt,t),r=Gw(n,i);let h=r.get(e);return h||(h=t.bind(s,i,e),r.set(e,h),h)}CEt(t,s,i,e,n){if(!s)throw new Error("missing 'this' binding");const r=Gw(this.jDt,t),h=Gw(r,i),o=Gw(h,e);let a=o.get(n);return a||(a=t.bind(s,i,e,n),o.set(n,a),a)}KDt(t){if(!this.I$())throw new Error("must be single-global plugin");this.UDt=t}$$(){if(!this.I$())throw new Error("must be single-global plugin");return this.UDt}Y$(){if(!this.I$())throw new Error("must be single-global plugin");return this.UDt.Y$()}ZDt(){const t=this.REt();_w.T$.QDt(this,t);const s=this.XDt(!0);if(s){if(this.qDt=new s,!(this.qDt instanceof self.b$))throw new TypeError("plugin class must derive from IPlugin")}else this.qDt=new self.b$;_w.T$.tLt(t)}H$(){return this.qDt}}}{const Iw=self._s;Iw.sLt=class extends Iw.TDt{constructor(t,s){super(t),this.iLt=s,this.eLt=0,this.nLt=new Map,this.rLt("elem-focused",t=>t.hLt()),this.rLt("elem-blurred",t=>{t&&t.oLt()})}Hn(){super.Hn()}aLt(t){const s=this.eLt++;return this.nLt.set(s,t),s}lLt(t){this.nLt.delete(t)}rLt(t,s){this.Nc.cZ(this.iLt,t,t=>{const i=this.nLt.get(t.elementId);s(i,t)})}}}{const Cw=self._s;Cw.uLt=class extends Cw.Wn{constructor(t){super(),this.$bt=t,this.Nc=t.yq(),this.cLt=t.Q$()}Hn(){this.$bt=null,this.Nc=null,this.cLt=null}gX(){return this.$bt}yq(){return this.Nc}Q$(){return this.cLt}t1(){return this.$bt.t1()}$Dt(){}WEt(t){}_At(t){}IAt(t){}Cit(t){}Oit(){}Eit(){}iet(t){}fLt(){}XDt(){return null}dLt(t,s,i){const e=Cw.jn(Cw.Event,t,s);e.pLt=this,i&&Object.assign(e,i),this.gX().s6(e)}}}{const Pw=self._s;Pw.mLt=class extends Pw.Wn{constructor(t,s){super(),this.fi=t,this.iLt=s,this.gLt=null,this.Nc=t.yq(),this.$bt=this.fi.gX(),this.yLt=this.$bt.GAt(),this.dnt=null,this.mnt=null,this.vZ=!1,this.xZ=!1,this.Yf=null,this.TR=!1}Hn(){this.TR=!0,this.SLt(),this.wLt(),this.dnt=null,this.mnt=null,this.Yf&&(this.Yf.Hn(),this.Yf=null),this.fi=null,this.Nc=null,this.$bt=null,this.yLt=null}Jn(){return this.TR}J1(){return this.fi}yq(){return this.Nc}gX(){return this.$bt}Q$(){return this.yLt.Q$()}GAt(){return this.yLt}vLt(){return this.fi.AJ()}aZ(t){return this.Nc.aZ(t,this.fi,null)}bLt(t){return this.Nc.bLt(t,this.fi,null)}rq(t){return this.Nc.rq(t,this.fi,null)}xLt(t,s){return this.Nc.xLt(t,this.fi,s)}TLt(t,s){return this.Nc.TLt(t,this.fi,s)}MLt(t){return this.Nc.MLt(t)}GLt(t,s){this.Nc.cZ(this.iLt,t,s)}_Lt(t){for(const[s,i]of t)this.GLt(s,i)}ILt(t,s){this.Nc.Vc(this.iLt,t,s)}CLt(t,s){return this.Nc.ZJ(this.iLt,t,s)}PLt(t,s){if(!this.Nc.qj())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.iLt,handler:t,data:s,responseId:null});this.ILt(t,s)}RLt(t){if(!t)throw new Error("cannot set empty component id");this.gLt=t}ELt(){if(!this.gLt)throw new Error("wrapper extension component id not set");return this.Nc.IZ(this.gLt)}PZ(t,s){if(!this.gLt)throw new Error("wrapper extension component id not set");this.Nc.PZ(this.gLt,t,s)}ALt(t){for(const[s,i]of t)this.PZ(s,i)}w3(t,s){if(!this.gLt)throw new Error("wrapper extension component id not set");this.Nc.w3(this.gLt,t,s)}v3(t,s){if(!this.gLt)throw new Error("wrapper extension component id not set");return this.Nc.v3(this.gLt,t,s)}Grt(){}FLt(){}OLt(){if(!this.vZ){if(!this.dnt)if(this.Nc.gZ()){const t=globalThis.yZ,s=this.Q$();this.dnt=()=>{const i=performance.now();this.Grt(),t.wZ(s,performance.now()-i)}}else this.dnt=()=>this.Grt();this.Nc.Sf().addEventListener("tick",this.dnt),this.vZ=!0}}SLt(){this.vZ&&(this.Nc.Sf().removeEventListener("tick",this.dnt),this.vZ=!1)}DLt(){return this.vZ}LLt(){if(!this.xZ){if(!this.mnt)if(this.Nc.gZ()){const t=globalThis.yZ,s=this.Q$();this.mnt=()=>{const i=performance.now();this.FLt(),t.wZ(s,performance.now()-i)}}else this.mnt=()=>this.FLt();this.Nc.Sf().addEventListener("tick2",this.mnt),this.xZ=!0}}wLt(){this.xZ&&(this.Nc.Sf().removeEventListener("tick2",this.mnt),this.xZ=!1)}kLt(){return this.xZ}NLt(){return[]}bT(){return null}xT(t){}Ppt(t){}Dpt(t,s){}Pmt(t,s,i){if(0===s)return;const e=this.Ppt(t);if("number"!=typeof e)throw new Error("expected number");this.Dpt(t,e+s,i)}BLt(t,s,i,e){}ULt(t,...s){t.call(this,...s)}VLt(t,...s){return t.call(this,...s)}XDt(){return null}dLt(t,s,i){if(!this.fi.WLt())return;const e=this.vLt(),n=Pw.jn(Pw.Event,t,s);n._0=e,i&&Object.assign(n,i),e.dispatchEvent(n)}Ox(){return!1}}}{const Rw=self._s;Rw.zLt=class extends Rw.mLt{constructor(t,s){super(t,s),this.Ult=t.LJ(),this.jLt=null,this.HLt=null}Hn(){if(this.jLt){const t=this.Nc.Sf();t.removeEventListener("renderercontextlost",this.jLt),t.removeEventListener("renderercontextrestored",this.HLt),this.jLt=null,this.HLt=null}this.Ult=null,super.Hn()}JLt(){this.qLt()}$Lt(){}XLt(){}qLt(){if(this.jLt)return;this.jLt=()=>this.R6(),this.HLt=()=>this.YLt();const t=this.Nc.Sf();t.addEventListener("renderercontextlost",this.jLt),t.addEventListener("renderercontextrestored",this.HLt)}R6(){this.$Lt()}YLt(){this.XLt()}LJ(){return this.Ult}Eut(){return!1}Rut(){if(!this.Eut())throw new Error("original size not known");const t=this.KLt();if(t)return t.xy()}Fut(){if(!this.Eut())throw new Error("original size not known");const t=this.KLt();if(t)return t.My()}KLt(){return null}ZLt(){const t=this.KLt();if(t){const s=t.EG();if(s)return[s.xy(),s.My()]}return[100,100]}QLt(){const t=this.KLt();return t?t.EE():null}tkt(){const t=this.KLt();return t?t.skt():null}ikt(){const t=this.KLt();return!!t&&t.ekt()}VAt(t){const s=this.fi.LJ();return[s.aT(),s.cT(),s.YZ()]}fLt(t,s,i){}nkt(t,s){}Xtt(){return!0}}}{const Ew=self._s,Aw=Ew.jn(Ew.Rect);Ew.rkt=class extends Ew.zLt{constructor(t,s){super(t,s),this.hkt=this.Q$().aLt(this),this.okt=!0,this.akt=!1,this.lkt=!1,this.ukt=-.2,this.ckt=Ew.jn(Ew.Rect,0,0,-1,-1);const i=this.Nc.IJ();this.fkt=i.P2(),this.dkt=i.R2(),this.pkt=-1,this.mkt=-1,this.gkt=!1,this.OLt()}Hn(){this.Q$().lLt(this.hkt),this.ykt("destroy"),this.hkt=-1,super.Hn()}p0(){if(this.Nc.qj())throw new Error("not valid in worker mode");return this.Skt("get-element")}ykt(t,s){s||(s={}),s.elementId=this.hkt,this.ILt(t,s)}Skt(t,s){return s||(s={}),s.elementId=this.hkt,this.PLt(t,s)}wkt(t,s){return s||(s={}),s.elementId=this.hkt,this.CLt(t,s)}vkt(t){t||(t={});const s=this.LJ();t.elementId=this.hkt,t.isVisible=s.OY(),t.htmlIndex=s.NJ().L2(),t.htmlZIndex=s.N2(),Object.assign(t,this.bkt()),this.okt=!!t.isVisible,this.PLt("create",t),this.xkt(!0)}XFt(t){t=!!t,this.okt!==t&&(this.okt=t,this.ykt("set-visible",{isVisible:t}))}Grt(){this.xkt(!1)}Tkt(){const t=this.Nc.IJ().z2();return"Android"===Ew.Ks.Zs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}xkt(t){if(this.J1().kJ())return;const s=this.LJ(),i=s.NJ(),e=s.QZ();let[n,r]=i.yK(e.Za(),e.Qa()),[h,o]=i.yK(e.tl(),e.sl());const a=this.Nc.IJ(),l=a.c$(),u=a.d$();if(!s.OY()||!i.OY())return void this.XFt(!1);if(!this.Tkt()&&(h<=0||o<=0||n>=l||r>=u))return void this.XFt(!1);Aw.set(n,r,h,o);const c=a.P2(),f=a.R2(),d=i.L2(),p=s.N2();if(!t&&Aw.equals(this.ckt)&&this.fkt===c&&this.dkt===f&&this.pkt===d&&this.mkt===p)return void this.XFt(!0);this.ckt.m(Aw),this.fkt=c,this.dkt=f,this.pkt=d,this.mkt=p,this.XFt(!0);let m=null;this.lkt&&(m=i.j2()+this.ukt),this.Skt("update-position",{left:Math.round(this.ckt.Za()),top:Math.round(this.ckt.Qa()),width:Math.round(this.ckt.width()),height:Math.round(this.ckt.height()),htmlIndex:d,htmlZIndex:p,fontSize:m})}g0(){this.Skt("focus",{focus:!0})}y0(){this.Skt("focus",{focus:!1})}hLt(){this.akt=!0}oLt(){this.akt=!1}tOt(){return this.akt}w0(t,s){this.ykt("set-css-style",{prop:Ew.vo(t),val:s})}YFt(t,s){this.ykt("set-attribute",{name:t,val:s})}KFt(t){this.ykt("remove-attribute",{name:t})}Mkt(){this.gkt||(this.gkt=!0,Promise.resolve().then(()=>{this.gkt=!1,this.ykt("update-state",this.bkt())}))}bkt(){}Gkt(){return this.hkt}}}{const Fw=self._s,Ow=self.P0;Fw._kt=class extends Fw.Wn{constructor(t){super(),this.Nc=t.runtime,this.Uc=t.id,this.$n=t.name??"",this.Ikt=Fw.jn(Fw.Du),this.Ckt=Fw.jn(Fw.Du),this.LDt=t.kDt,this.HDt=t.JDt,this.Pkt=null}Hn(){this.Ckt.Hn(),this.Ikt.Hn(),this.Nc=null}yq(){return this.Nc}G$(){return this.Uc}Pc(){return this.$n}$Dt(){}REt(){return this.LDt}XDt(t=!1){let s=this.HDt;return t&&"function"!=typeof s&&this.REt()>=2&&(s=globalThis.s3),s}Rkt(t){this.Ikt.Bu(t)}Znt(){return this.Ikt.Uu()}O7(t){this.Ckt.Bu(t)}k7(t){this.Ckt.Eu(t)}uX(){return this.Ckt.Uu()}ZDt(){const t=this.REt();Fw.T$.QDt(this,t);const s=this.XDt(!0);if(s){if(this.Pkt=new s,!(this.Pkt instanceof Ow))throw new TypeError("behavior class must derive from IBehavior")}else this.Pkt=new Ow;Fw.T$.tLt(t)}b0(){return this.Pkt}}}{const Dw=self._s;Dw.Ekt=class extends Dw.Wn{constructor(t){super(),this.Nc=t.yq(),this.pRt=t,this.$bt=t.gX(),this.Akt=t.x0(),this.Akt.Rkt(this.$bt)}Hn(){this.Nc=null,this.pRt=null,this.$bt=null,this.Akt=null}$Dt(){}G0(){return this.pRt}gX(){return this.$bt}yq(){return this.Nc}x0(){return this.Akt}}}{const Lw=self._s;Lw.Fkt=class extends Lw.Wn{constructor(t,s){super(),this.Gyt=t,this.iLt=s,this.fi=t.I0(),this.Nc=t.yq(),this.pRt=t.G0(),this.yLt=this.pRt.GAt(),this.vZ=!1,this.xZ=!1,this.f3=!1,this.Yf=null}Hn(){this.SLt(),this.wLt(),this.Okt(),this.Yf&&(this.Yf.Hn(),this.Yf=null),this.Gyt=null,this.fi=null,this.Nc=null,this.pRt=null,this.yLt=null}x0(){return this.pRt.x0()}Dkt(){return this.Gyt}I0(){return this.fi}gX(){return this.fi.gX()}LJ(){return this.fi.LJ()}yq(){return this.Nc}G0(){return this.pRt}GAt(){return this.yLt}vLt(){return this.Gyt.vLt()}aZ(t){return this.Nc.aZ(t,this.fi,this.pRt)}bLt(t){return this.Nc.bLt(t,this.fi,this.pRt)}rq(t){return this.Nc.rq(t,this.fi,this.pRt)}Lkt(){}Grt(){}FLt(){}kkt(){}OLt(){this.vZ||(this.Nc.h3(this),this.vZ=!0)}SLt(){this.vZ&&(this.Nc.o3(this),this.vZ=!1)}DLt(){return this.vZ}LLt(){this.xZ||(this.Nc.a3(this),this.xZ=!0)}wLt(){this.xZ&&(this.Nc.l3(this),this.xZ=!1)}kLt(){return this.xZ}Nkt(){this.f3||(this.Nc.u3(this),this.f3=!0)}Okt(){this.f3&&(this.Nc.c3(this),this.f3=!1)}Bkt(){return this.f3}NLt(){return[]}GLt(t,s){this.Nc.cZ(this.iLt,t,s)}Ukt(t,s){}bT(){return null}xT(t){}Ppt(t){}Dpt(t,s){}Pmt(t,s){if(0===s)return;const i=this.Ppt(t);if("number"!=typeof i)throw new Error("expected number");this.Dpt(t,i+s)}BLt(t,s,i,e){}ULt(t,...s){t.call(this,...s)}VLt(t,...s){return t.call(this,...s)}XDt(){return null}dLt(t,s,i){if(!this.Gyt.WLt())return;const e=this.vLt(),n=Lw.jn(Lw.Event,t,s);n.Vkt=e,n._0=e._0,i&&Object.assign(n,i),e.dispatchEvent(n)}}}{let kw=function(t){if(t!==Bw)throw new Error("invalid internal API token")};0;const Nw=self._s;Nw.lq={},Nw.Ryt={};const Bw=Nw.Is();let Uw=[],Vw=[],Ww=[],zw=null,jw=null,Hw=null,Jw=null;const qw=new Map,$w=new Map;Nw.T$=class extends Nw.Wn{#s=null;#t=[];#e=null;#i=[];#n=new Map;#h=null;#a=null;#r;constructor(t,s){super(),this.#s=t,this.#r=new Set(s)}Wkt(t){const s=t[19],i=this.#s.tPt(t[0]);if(!i)throw new Error("missing plugin");Nw.OOt(t,i,s);const e=s>=2?Nw.TDt:i,n=Nw.jn(e,{runtime:this.#s,_$:t[1],_Dt:t[2],A$:t[5],O$:t[8],PDt:t[9],ADt:t[13],U$:t[14],R$:t[17],L$:t[18],kDt:s,id:t[20],name:t[21],JDt:s>=2?i:null,BDt:t[22]});n.$Dt(),this.#t.push(n),qw.set(i,n)}zkt(){this.#e=Nw.jn(Nw.lq.aq,{runtime:this.#s,_$:!0}),this.#e.$Dt()}jkt(t){const s=t[1],i=t[2],e=t[3],n=this.#s.tPt(t[0]);if(!n)throw new Error("missing behavior");this.#n.set(n,()=>{const t=s>=2?Nw._kt:n,r=Nw.jn(t,{runtime:this.#s,id:i,name:e,kDt:s,JDt:s>=2?n:null});r.$Dt(),this.#i.push(r),$w.set(n,r),!this.#h&&Nw.Ryt.Hkt&&r instanceof Nw.Ryt.Hkt?this.#h=r:!this.#a&&Nw.Ryt.Jkt&&r instanceof Nw.Ryt.Jkt&&(this.#a=r),r.ZDt()})}qkt(t){const s=this.#n.get(t);s&&(s(),this.#n.delete(t))}static QDt(t,s=1){if(Nw.T$.QDt!==zw)throw new Error("invalid method");1===s&&Uw.push(t),Vw.push(t)}static tLt(t=1){if(Nw.T$.tLt!==jw)throw new Error("invalid method");1===t&&Uw.pop(),Vw.pop()}static CK(){if(Nw.T$.CK!==Hw)throw new Error("invalid method");if(0===Uw.length)throw new Error("no init object set");return Uw.at(-1)}static x$(t){if(Nw.T$.x$!==Jw)throw new Error("invalid method");if(kw(t),0===Vw.length)throw new Error("no init object set");return Vw.at(-1)}static $kt(t){Ww.push(t)}static Xkt(){Ww.pop()}static hZ(){if(0===Ww.length)throw new Error("no init properties set");return Ww.at(-1)}Ykt(){for(const t of this.#t)t.ZDt()}static j$(t){return qw.get(t)||null}static R0(t){return $w.get(t)||null}e6(){return this.#e}Kkt(){return this.#h}Zkt(){return this.#a}IZ(t){return this.#r.has(t)}},zw=Nw.T$.QDt,jw=Nw.T$.tLt,Hw=Nw.T$.CK,Jw=Nw.T$.x$}{const Xw=self._s,Yw=new Set;Xw.Qkt=class extends Xw.Wn{constructor(){super(),this.tNt=0,this.w6="",this.cU=0,this.sNt=0,this.iNt=0,this.Vy=0,this.Wy=0,this.eNt=!1,this.nNt=!1,this.rNt=null,this.hNt="",this.gR=Xw.jn(Xw.Rect),this.oNt=Xw.jn(Xw.Cl),this.aNt="",this.lNt=new self.mq(this),Yw.add(this)}Hn(){this.wR(),this.rNt&&0===this.rNt.O6()&&this.rNt.Hn(),this.rNt=null,Yw.delete(this),this.uNt()}static R6(){for(const t of Yw)t.hNt="",t.gR.set(0,0,0,0),t.oNt.Xl(t.gR)}cNt(t){this.w6=t[0],this.cU=t[1],this.sNt=t[2],this.iNt=t[3],this.Vy=t[4],this.Wy=t[5],this.eNt=t[6],this.nNt=!0}fNt(t,s,i){if(i=!!i,this.rNt)throw new Error("already loaded asset");this.w6=s;const e={z5:i};return Xw.Yh(s)&&(e.j5="remote"),this.gq(t,e),this.rNt.J5()}dNt(t,s){if(this.rNt)throw new Error("already loaded asset");this.w6="",this.cU=s.size,this.rNt=Xw.jn(Xw.H5,t.Pj(),{blob:s,size:this.cU,j5:"local"})}pNt(t){if(t===this)throw new Error("cannot replace with self");this.tNt++,this.wR(),this.w6=t.w6,this.cU=t.cU,this.sNt=t.sNt,this.iNt=t.iNt,this.Vy=t.Vy,this.Wy=t.Wy,this.eNt=t.eNt,this.nNt=t.nNt,this.rNt=t.rNt,this.hNt=t.hNt,this.gR=t.gR,this.oNt=t.oNt,this.uNt()}Y5(){return this.w6}Fu(){return this.cU}mNt(){return this.sNt}gNt(){return this.iNt}ekt(){return this.eNt}xy(){return this.Vy}My(){return this.Wy}yNt(){return this.rNt.xy()}SNt(){return this.rNt.My()}gq(t,s){if(this.rNt)throw new Error("already got asset");s=Object.assign({},s,{url:this.Y5(),size:this.Fu()}),this.rNt=t.W5(s)}T6(){return this.rNt&&this.rNt.T6()}async P4(t,s){if(!this.rNt)throw new Error("no asset");if(this.hNt)throw new Error("already loaded texture");const i=this.tNt;this.hNt="loading";const e=await this.rNt.P4(t,s);if(this.tNt!==i)return null;if(!e)return this.hNt="",null;this.hNt="loaded",this.nNt||(this.Vy=e.xy(),this.Wy=e.My(),this.nNt=!0);const n=this.eNt?this.Wy:this.Vy,r=this.eNt?this.Vy:this.Wy;return this.gR.set(this.sNt,this.iNt,this.sNt+n,this.iNt+r),this.gR.St(e.xy(),e.My()),this.oNt.Xl(this.gR),this.eNt&&this.oNt.su(),e}wR(){this.hNt&&(this.rNt&&this.rNt.wR(),this.hNt="",this.gR.set(0,0,0,0),this.oNt.Xl(this.gR))}EG(){return this.rNt&&"loaded"===this.hNt?this.rNt.EG():null}EE(){return this.gR}skt(){return this.oNt}m2(){return this.lNt}wNt(){return this.rNt}async vNt(t){t||(t=await this.rNt.L6()),this.nNt||(this.Vy=t.width,this.Wy=t.height,this.nNt=!0);const s=Xw.uo(this.Vy,this.Wy),i=s.getContext("2d");return this.eNt?(i.rotate(Math.PI/-2),i.translate(-this.Wy,0),i.drawImage(t,this.sNt,this.iNt,this.Wy,this.Vy,0,0,this.Wy,this.Vy)):i.drawImage(t,this.sNt,this.iNt,this.Vy,this.Wy,0,0,this.Vy,this.Wy),s}async bNt(t){if(this.aNt)return this.aNt;const s=await this.vNt(t),i=await Xw.co(s);return this.aNt=URL.createObjectURL(i),this.aNt}uNt(){this.aNt&&(URL.revokeObjectURL(this.aNt),this.aNt="")}}}{const Kw=self._s;Kw.xNt=class extends Kw.Wn{constructor(t){super(),this.$n=t[0],this.TNt=t[1],this.rEt=!!t[2],this.hgt=t[3],this.MNt=t[4],this.GNt=!!t[5],this.b8=t[6],this._Nt=t[7].map(t=>Kw.jn(Kw.INt,t)),this.CNt=new self.L0(this)}static PNt(t,s){const i=Kw.jn(Kw.xNt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i._Nt.push(Kw.INt.PNt(t)),i}Hn(){for(const t of this._Nt)t.Hn();Kw.wh(this._Nt)}RNt(t){for(const s of this._Nt)s.t1().gq(t)}ENt(t,s){return Promise.all(this._Nt.map(i=>i.t1().P4(t,s)))}ANt(){for(const t of this._Nt)t.t1().wR()}Pc(){return this.$n}t9(){return this.b8}J0(){return this._Nt.length}$0(){return this._Nt}FNt(t){if((t=Math.floor(t))<0||t>=this._Nt.length)throw new RangeError("invalid frame");return this._Nt[t]}ONt(t,s){(s=Math.floor(s))<0?this._Nt.unshift(t):s>=this._Nt.length?this._Nt.push(t):this._Nt.splice(s,0,t)}DNt(t){if((t=Math.floor(t))<0||t>=this._Nt.length)throw new RangeError("invalid frame");this._Nt[t].Hn(),this._Nt.splice(t,1)}LNt(t){for(let s=0,i=this._Nt.length;s<i;++s)if(Kw.Ke(this._Nt[s].g1(),t))return s;return-1}kNt(t){if("string"==typeof t){const s=this.LNt(t);if(-1===s)throw new Error(`cannot find animation frame with tag ${t}`);return s}return t}k0(){return this.TNt}B0(){return this.rEt}V0(){return this.hgt}z0(){return this.MNt}H0(){return this.GNt}NNt(){return this.CNt}}}{const Zw=self._s,Qw=(()=>{const t=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(t.length);for(let i=0,e=t.length;i<e;++i)s[i]=t.charCodeAt(i);return new Blob([s],{type:"image/png"})})();Zw.INt=class extends Zw.Wn{constructor(t){super(),this.BNt=Zw.jn(Zw.Qkt),this.BNt.cNt(t),this.UNt=t[7],this.VNt=Zw.jn(Zw.Ca,t[8],t[9]),this.WNt=t[10].map(t=>Zw.jn(Zw.zNt,this,t)),this.jNt=new Map;for(const t of this.WNt)this.jNt.set(t.Pc().toLowerCase(),t);this.HNt=null;const s=t[11];s.length>=6&&(this.HNt=Zw.jn(Zw.au,s)),this.VS=t[12]?t[12]:"",this.JNt=new self.Q0(this)}static PNt(t){const s=Zw.jn(Zw.INt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.BNt.dNt(t,Qw),s}Hn(){this.HNt&&(this.HNt.Hn(),this.HNt=null),this.BNt.Hn(),this.BNt=null}t1(){return this.BNt}s1(){return this.UNt}WZ(){return this.VNt.Fa()}HZ(){return this.VNt.Da()}c1(){return this.HNt}l1(t){return this.jNt.get(t.toLowerCase())||null}a1(t){return(t=Math.floor(t))<0||t>=this.WNt.length?null:this.WNt[t]}e1(){return this.WNt.length}g1(){return this.VS}X0(){return this.JNt}}}{const tv=self._s;tv.zNt=class extends tv.Wn{constructor(t,s){super(),this.qNt=t,this.$n=s[0],this.$Nt=tv.jn(tv.Ca,s[1],s[2])}Hn(){}Pc(){return this.$n}aT(){return this.$Nt.Fa()}cT(){return this.$Nt.Da()}XNt(){return this.$Nt}}}{const sv=globalThis._s,iv=globalThis.yZ,ev=(globalThis.K$,globalThis.xX),nv=globalThis.OX;globalThis.assert;sv.ZSt=class extends sv.Wn{constructor(t,s,i){super();const e=t.tPt(i[1]);this.Nc=t,this.cLt=sv.T$.j$(e),this.yLt=null,this.YNt=e.Instance,this.US=s,this.b8=i[11],this.$n=i[0],this.DPt=this.Nc.MMt(i[14]),this.KNt=!!i[9],this.ZNt=!!i[2],this.QNt=!!i[10],this.tBt=i[3].map(s=>({h8:s[0],type:s[1],name:s[2],sBt:t.MMt(s[3])})),this.iBt=i[4],this.eBt=i[5],this.GDt=this.cLt.P$(),this.nBt=sv.jn(sv.Event.Sf),this.n7=null;const[n,r]=t.Aj().Jq();if(this.rBt=sv.jn(sv.hBt,n,r),this.oBt=!0,this.aBt=null,this.lBt=null,this.uBt=-1,this.cBt=null,this.fBt=null,this.dBt=null,this.pBt=null,this.mBt=null,this.gBt=!1,this.yBt=null,this.SBt=i[8].map(t=>sv.wBt.KG(this,t)),this.vBt=[],this.bBt=new Map,this.xBt=new Map,this.TBt=new Set,this.MBt=new Map,this.GBt=sv.jn(sv.qbt,this),this._Bt=null,this.IBt=0,this.CBt=!1,this.yBt=null,this.BNt=null,this.PBt=null,this.RBt=null,this.EBt=null,this.ABt=0,this.uEt=new Map,this.U6=[],this.FBt=new Map,this.OBt=!0,this.cLt.D$()&&(this.n7=sv.jn(sv.r7,this,i[12])),i[6]&&(this.BNt=sv.jn(sv.Qkt),this.BNt.cNt(i[6])),i[7]){this.PBt=i[7].map(t=>sv.jn(sv.xNt,t)),this.RBt=new Map,this.EBt=new Map;for(const t of this.PBt)this.RBt.set(t.Pc().toLowerCase(),t),this.EBt.set(t.t9(),t)}this.ZNt?(this.aBt=[],this.lBt=new Set,this.uBt=this.Nc.DBt()):(this.cBt=[],this.fBt=new Set,this.dBt=[],this.pBt=[],this.mBt=[]);const h=this.cLt.REt();if(h<2&&(this.yLt=sv.jn(e.LBt,this,i[15]),!(this.yLt instanceof sv.uLt)))throw new Error("v1 sdk type must derive from SDKTypeBase");let o;if(this.kBt=null,this.NBt=null,this.S7=sv.jn(sv.Event.Sf),sv.T$.QDt(this,h),h>=2?(o=e.LBt,o||(o=globalThis.c2)):o=this.yLt.XDt(),o&&!this.ZNt){if(this.kBt=new o(h<2?this:null),h<2&&!(this.kBt instanceof ev))throw new TypeError("script interface class must derive from IObjectType");if(h>=2&&!(this.kBt instanceof globalThis.c2))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else{const t=this.ZNt?nv:ev;this.kBt=new t}if(sv.T$.tLt(h),i[13]){const t=i[13];if(t){const s=t[0],i=t[1],e=t[2];this.yLt.fLt(s,i,e)}}this.Nc.BBt()&&!this.ZNt&&!this.QNt&&this.GDt||this.$Dt(),this.cLt.I$()&&(this.cLt.KDt(this),this.UBt(i)),this.VBt=null}static KG(t,s,i){return sv.jn(sv.ZSt,t,s,i)}Hn(){if(this.nBt.Hn(),this.nBt=null,this.BNt&&(this.BNt.Hn(),this.BNt=null),this.PBt){for(const t of this.PBt)t.Hn();sv.wh(this.PBt),this.RBt.clear(),this.EBt.clear()}this.VBt=null,this.GBt.Hn(),this.GBt=null,this.uEt.clear(),this.yBt=null,this.Nc=null}WBt(t){for(let s=1,i=t.length;s<i;++s){const i=this.Nc.M7(t[s]);this.aBt.push(i),this.lBt.add(i),i.cBt.push(this),i.fBt.add(this)}}zBt(t){this.gBt=!0,this.yBt=t}FK(){return this.gBt}Git(){return this.yBt}jBt(){let t=0;if(!this.ZNt)for(const s of this.cBt)for(const i of s.HBt()){const s=i.Pc().toLowerCase();this.bBt.set(s,i),this.xBt.set(s,t),this.vBt.push(i),++t}for(const s of this.HBt()){const i=s.Pc().toLowerCase();this.bBt.set(i,s),this.xBt.set(i,t),this.vBt.push(s),++t}for(const t of this.vBt)this.TBt.add(t.x0().constructor);if(!this.ZNt&&this.cBt.length){const t=this.Nc.JBt();sv.xh(this.dBt,t,0),sv.xh(this.pBt,t,0),sv.xh(this.mBt,t,0);const s=[];let i=0,e=0,n=0;for(const t of this.cBt){const r=t.fRt();this.dBt[r]=i,i+=t.qBt(),this.pBt[r]=e,e+=t.$Bt(),this.mBt[r]=n,n+=t.XBt();const h=t.VX();if(h&&this.n7)for(const t of h.WX())s.push(t.YBt(this.n7))}this.n7&&this.n7.KBt(s)}}UBt(t){const s=sv.Qi(t[17])?t[17]:this.Nc.ZBt(),i=sv.jn(sv.Instance,{runtime:this.Nc,objectType:this,uid:s});i.QBt(t[16],[]),this.Nc.tUt(s,i),this.U6.push(i)}GAt(){return this.yLt}sUt(){return this.QNt}Sf(){return this.nBt}$Dt(){this.ZNt||(this.yLt?this.yLt.$Dt():this.kBt.f2())}iUt(){return this.ABt>0}async Cit(t){this.ZNt||(this.ABt++,1===this.ABt&&(this.yLt?await this.yLt.Cit(t):await this.kBt.g2(this.Nc.IJ()._J())))}Oit(){if(!this.ZNt){if(this.ABt--,this.ABt<0)throw new Error("released textures too many times");0===this.ABt&&(this.yLt?this.yLt.Oit():this.kBt.S2(this.Nc.IJ()._J()))}}Eit(){if(this.ZNt)throw new Error("not applicable to family");this.yLt?this.yLt.Eit():this.kBt.w2()}async iet(t){this.ZNt||(this.yLt?await this.yLt.iet(t):await this.kBt.v2(this.Nc.IJ()._J()))}yq(){return this.Nc}Q$(){return this.cLt}eUt(){return this.YNt}Pc(){return this.$n}MMt(){return this.DPt}Gj(){return this.US}t9(){return this.b8}pX(){return this.ZNt}m8(){return this.KNt}P$(){return this.GDt}fRt(){return this.uBt}HBt(){return this.SBt}$Bt(){return this.iBt}nUt(t){return t&&this.TBt.has(t)}qBt(){return this.tBt.length}rUt(){return this.tBt.map(t=>t.h8)}hUt(t){return this.tBt.findIndex(s=>s.h8===t)}dut(t){return this.tBt.findIndex(s=>s.name===t)}oUt(){return this.tBt.map(t=>t.name)}aUt(){return this.tBt.map(t=>t.sBt)}gut(t){if((t=Math.floor(t))<0||t>=this.tBt.length)throw new RangeError("invalid instance variable index");return this.tBt[t].type}mut(t){if((t=Math.floor(t))<0||t>=this.tBt.length)throw new RangeError("invalid instance variable index");return this.tBt[t].name}XBt(){return this.eBt}lUt(){return this.vBt}Zft(t){return this.bBt.get(t.toLowerCase())||null}Sut(t){const s=this.xBt.get(t.toLowerCase());return void 0===s?-1:s}VX(){return this.n7}D$(){return this.cLt.D$()}uUt(){return this.n7&&this.n7.cUt()}cGt(){return this.GBt}cX(){return this.GBt.cX()}t1(){return this.BNt}I7(t){this._Bt=t}_7(){return this._Bt}C7(t){this.IBt=t}fUt(){return this.IBt}dUt(){return this.PBt}pUt(){return this.PBt.length}EX(){return this.cBt}EAt(t){return this.fBt.has(t)}kX(){return this.aBt}BX(t){return this.lBt.has(t)}yRt(t){return this.pBt[t]}cRt(t){return this.dBt[t]}xPt(t){this.MBt.set(t._Pt().toLowerCase(),t)}yX(t){return!!this.vX(t)}vX(t){const s=this.MBt.get(t.toLowerCase());return s&&s._u()?s:null}mUt(){return this.PBt}gUt(t){if(!this.PBt)throw new Error("no animations");return this.RBt.get(t.toLowerCase())||null}yUt(t){if(!this.PBt)throw new Error("no animations");return this.EBt.get(t)||null}SUt(t){if(this.gUt(t))throw new Error(`animation name '${t}' already exists`);const s=sv.xNt.PNt(this.yq(),t);return this.PBt.push(s),this.RBt.set(s.Pc().toLowerCase(),s),this.EBt.set(s.t9(),s),s}wUt(t){const s=this.gUt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.PBt.length)throw new Error("cannot remove last animation");const i=this.PBt.indexOf(s);this.PBt.splice(i,1),this.RBt.delete(s.Pc().toLowerCase()),this.EBt.delete(s.t9()),s.Hn()}vUt(){if(!this.PBt)throw new Error("no animations");return this.PBt[0]}bUt(){return this.vUt().FNt(0)}xUt(){if(this.PBt){const t=this.bUt().t1();return[t.xy(),t.My()]}return this.BNt?[this.BNt.xy(),this.BNt.My()]:[100,100]}Y$(){if(!this.cLt.I$())throw new Error("not a single-global plugin");return this.U6[0]}uX(){return this.U6}*sX(){yield*this.U6}*lX(){yield*this.U6,yield*this.Nc.DFt(this)}MX(){return this.U6.length}O7(t){this.U6.push(t)}TUt(){this.OBt=!0}let(){if(!this.OBt||this.ZNt)return;const t=this.U6;let s=0;for(let i=t.length;s<i;++s)t[s].MUt(s);const i=this.Nc.GUt();for(const t of i)t.gX()===this&&t.MUt(s++);this.OBt=!1}_Ut(t){const s=this.U6;if(t<s.length)return s[t];t-=s.length;const i=this.Nc.GUt();for(const s of i)if(s.gX()===this){if(0===t)return s;--t}return null}SFt(t){if(t&&t.FK()&&t.gX()!==this)for(const s of t.DK())if(s.gX()===this)return s;const s=this.cX().uX();return s.length?s[0]:null}aX(t){const s=this.cX().uX();return s.length>0?s[t.NK()%s.length]:null}*VFt(t,s){const i=this.cX().uX(),e=i.length,n=s.cX(),r=s.cX().uX(),h=r.length;let o=t.NK();!s.pX()&&n.oxt()||(o=r.indexOf(t));const a=Math.ceil(e/h),l=e%h;let u=0,c=0;0===l||o<l?(u=o*a,c=a):(u=l*a+(o-l)*(a-1),c=a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}WEt(t){this.yLt?.WEt(t)}JCt(){if(!this.gBt||this.ZNt)return;this.let();const t=this.cX(),s=t.mxt(),i=t.oxt(),e=this.Nc.pMt(),n=e&&e.fH()&&e.fH().Mxt();for(const e of this.yBt.NX()){if(e===this)continue;e.let();const r=e.cX();if(r.pxt(i),!i){const i=r.mxt();sv.wh(i);for(const t of s)i.push(e._Ut(t.NK()));if(n){const s=t.gxt(),i=r.gxt();sv.wh(i);for(const t of s)i.push(e._Ut(t.NK()))}}}}qEt(t,s){for(const i of this.Git().NX()){const e=i.cX();t?sv.Sh(e.gxt(),s):sv.Sh(e.mxt(),s)}}IUt(){return this.rBt}CUt(t){this.oBt=!!t}PUt(){if(this.oBt&&this.GDt){for(const t of this.U6)t.LJ().RUt();for(const t of this.Nc.GUt())t.gX()===this&&t.LJ().RUt();this.oBt=!1}}EUt(t,s,i){if(s){const i=this.FBt.get(s);i&&(i.delete(t),0===i.size&&this.FBt.delete(s))}if(i){let s=this.FBt.get(i);s||(s=new Set,this.FBt.set(i,s)),s.add(t)}}*AUt(){if(this.pX()){const t=new Set;for(const s of this.aBt)for(const i of s.AUt())t.add(i);yield*t.values()}else for(const t of this.FBt.keys())t.Jn()||(yield t)}LEt(){return this.uEt||(this.uEt=new Map),this.uEt}FUt(){return this.nUt(sv.Ryt.Hkt)}OUt(){return this.nUt(sv.Ryt.Jkt)}DUt(){return this.nUt(sv.Ryt.LUt)}A7(){return this.nUt(sv.Ryt.kUt)}Sst(){const t={instances:this.U6.map(t=>t.bT())};return this.uEt&&this.uEt.size&&(t.ex=sv.So(this.uEt)),t}wst(t,s){this.uEt&&(this.uEt.clear(),this.uEt=null);const i=t.ex;i&&(this.uEt=sv.wo(i));const e=this.U6,n=t.instances;for(let t=0,s=Math.min(e.length,n.length);t<s;++t)e[t].xT(n[t]);for(let t=n.length,s=e.length;t<s;++t)this.Nc.JJ(e[t]);for(let t=e.length,i=n.length;t<i;++t){const i=n[t];let e=null;if(this.P$()&&(e=this.Nc.fJ().mit(i.w.l),!e))continue;const r=this.Nc.F7(this._Bt||this,e,!1,0,0,!0);r.xT(i),s&&s.add(r)}this.VBt=n,this.TUt()}NUt(){return this.VBt}BUt(){this.VBt=null}UUt(){for(let t=0,s=this.U6;t<s;++t)this.U6[t].UUt()}q$(){return this.kBt}iH(){return this.S7}VUt(){return this.NBt}GX(t){this.NBt=t}s6(t){const s=this.Nc,i=s.gZ()&&!s.hH().qJ();i&&iv.Let(),this.S7.dispatchEvent(t),i&&iv.ket()}}}{const rv=self._s;rv.WUt=class extends rv.Wn{constructor(t,s){super(),this.Nc=t,this.zUt=s;for(const t of this.zUt)t.zBt(this)}Hn(){this.Nc=null}yq(){return this.Nc}Mit(){return this.zUt}NX(){return this.zUt}cet(){return this.zUt.some(t=>t.P$())}}}{const hv=self._s,ov=self.yZ,av=(self.MK,hv.T$),lv=[],uv=new Set;let cv=0;const fv=new WeakMap;hv.Instance=class extends hv.Wn{#s=null;constructor(t){if(hv.T$!==av)throw new Error("invalid addon manager");super(),this.Nc=t.runtime,this.jUt=t.objectType,this.Ult=null,this.HUt=null,this.JUt=null,this.qUt=0,this.$Ut=t.uid,this.XUt=cv++,this.HD=0;const s=hv.Dh(t.tags);s.length>0&&this.XK(new Set(s)),this.YUt=lv,this.KUt=lv;const i=this.jUt.lUt();i.length>0&&(this.KUt=i.map((t,s)=>hv.jn(hv.ZUt,{runtime:this.Nc,T0:t,_0:this,index:s}))),this.QUt=this.jUt.FK()?[]:null,this.tVt=-1,this.nBt=null;const e=this.Q$();if(e.Ox()&&(this.HD|=4),e.P$())if(this.Ult=hv.jn(hv.sVt,this,t.LZ),t.iVt)this.Ult.eVt(t.iVt);else{this.Ult.nVt();const[t,s]=this.jUt.xUt();this.Ult.QR(t,s),this.gX().uUt()&&this.Ult.DZ().rVt()}t.hVt?this.oVt(t.hVt):this.aVt()}Hn(){if(this.JUt&&(this.JUt.PK(),this.JUt=null),this.KUt.length>0){for(const t of this.KUt)t.Hn();hv.wh(this.KUt)}this.HUt&&(this.HUt.Hn(),this.HUt=null);const t=fv.get(this);t&&(t.clear(),fv.delete(this)),this.QUt&&hv.wh(this.QUt),this.nBt&&(this.nBt.Hn(),this.nBt=null),this.#s&&(this.#s.lVt.clear(),this.#s.uVt.clear()),this.#s=null,this.Nc=null,this.jUt=null,this.YUt.length>0&&hv.wh(this.YUt),this.Ult&&(this.Ult.Hn(),this.Ult=null)}oVt(t){t.length>0&&(this.YUt=[],hv.Mh(this.YUt,t))}aVt(){const t=this.jUt.qBt();if(0===t)return;this.YUt=[];const s=[0,0,""];for(let i=0;i<t;++i)this.YUt.push(s[this.jUt.gut(i)])}QBt(t,s){if(this.HUt)throw new Error("already got sdk instance");for(let t=0,i=this.KUt.length;t<i;++t)this.KUt[t].QBt(s?s[t]:null);if(this.Q$().REt()<2){if(this.HUt=hv.jn(this.jUt.eUt(),this,t),!(this.HUt instanceof hv.mLt))throw new Error("sdk type must derive from SDKInstanceBase");!this.Q$().P$()&&this.jUt.VUt()&&this.AJ()}else{const s=this.Q$().XDt();this.cVt(s.Instance,t)}}m0(){return this.HUt??this.JUt}LJ(){return this.Ult}yq(){return this.Nc}BH(){return this.tVt}VK(){const t=this.tVt;return-1===t?this.yq().BH():t}UH(t){((t=+t)<0||!isFinite(t))&&(t=0),this.tVt=t,this.gX().uUt()&&this.Nc.fVt(this,!0)}zK(){this.tVt=-1,this.gX().uUt()&&this.Nc.fVt(this,!1)}hst(){return this.Nc.dVt(this)}Sf(){return this.nBt||(this.nBt=hv.jn(hv.Event.Sf)),this.nBt}nM(t){this.HUt?this.HUt.nM(t):this.JUt._2(this.Nc.IJ()._J())}$Dt(t){this.HUt.$Dt(t)}pVt(){this.HD|=2}mVt(){return!!(2&this.HD)}gVt(){this.HD|=1}kJ(){return!!(1&this.HD)}Ox(){return!!(4&this.HD)||(this.HUt?this.HUt.Ox():this.JUt.gx())}yVt(){this.HD|=32}Ktt(){return!!(32&this.HD)}SVt(){return!!(8&this.HD)}wVt(t){t?this.HD|=8:this.HD&=-9}vVt(){return!!(16&this.HD)}bVt(t){t?this.HD|=16:this.HD&=-17}xVt(){return!!(32&this.HD)}TVt(t){t?this.HD|=32:this.HD&=-33}MVt(){return!!(64&this.HD)}GVt(t){t?this.HD|=64:this.HD&=-65}_Vt(t,s){t<<=16,s?this.HD|=t:this.HD&=~t}IVt(t){return!!(this.HD&t<<16)}KLt(){return this.HUt?this.HUt.KLt():null}ZLt(){return this.HUt?this.HUt.ZLt():null}QLt(){return this.HUt?this.HUt.QLt():null}tkt(){return this.HUt?this.HUt.tkt():null}ikt(){return!!this.HUt&&this.HUt.ikt()}VAt(t){return this.HUt?this.HUt.VAt(t):[this.JUt.x,this.JUt.y,this.JUt.XZ]}gX(){return this.jUt}Xtt(){return this.HUt?this.HUt.Xtt():this.JUt.I2()}LFt(t){return t.pX()?t.BX(this.gX()):this.gX()===t}CVt(t,s,i){const e=(s,i)=>{const e=i||s.gX(),n=t.get(e);n?n.add(s):t.set(e,new Set([s]))};if(e(this,s),this.FK())for(const t of this.DK())e(t);if(i)for(const t of this.IQ())e(t)}PVt(){if(!this.Q$().B$())throw new Error("object does not support scene graph")}AQ(){return null!==this.wQ()}wQ(){const t=this.LJ();if(!t)return null;const s=t.wQ();return s?s.J1():null}bQ(){const t=this.LJ();if(!t)return null;const s=t.bQ();return s?s.J1():null}*xQ(){const t=this.LJ();if(t)for(const s of t.xQ())yield s.J1()}RVt(t){if(!t)return!1;for(const s of this.children())if(s===t)return!0;return!1}xst(){const t=this.LJ();return!!t&&t.xst()}EVt(t){const s=this.LJ();if(!s)return[];const i=t.Pc();return s.bet().map(t=>t.J1()).filter(t=>t.gX().Pc()===i)}bet(){const t=this.LJ();return t?t.bet().map(t=>t.J1()):[]}*children(){const t=this.LJ();if(t)for(const s of t.children())yield s.J1()}*IQ(){const t=this.LJ();if(t)for(const s of t.IQ())yield s.J1()}MQ(){const t=this.LJ();return t?t.MQ():0}AVt(){return[...this.xQ()].length}UFt(){const t=this.LJ();return t?t.UFt():0}_Q(t){const s=this.LJ();if(!s)return null;const i=s._Q(t);return i?i.J1():null}FVt(){const t=this.LJ();if(!t)return NaN;const s=t.wQ();return s?s.OVt(t):NaN}DVt(t){for(const s of this.LJ().bet())if(s.J1().LK()===t)return!0;return!1}PQ(t,s){this.PVt(),t.PVt(),this.LJ().PQ(t.LJ(),s||{})}RQ(t){const s=this.LJ();s&&s.RQ(t.LJ())}KQ(){const t=this.LJ();return!!t&&t.KQ()}Kit(){const t=this.LJ();if(!t)return;const s=t.LVt();if(s)for(const t of s){const s=this.Nc.EJ(t[2]);if(s){const i=t[3];this.PQ(s,{OQ:!!(1&i),LQ:!!(i>>1&1),NQ:!!(i>>2&1),UQ:!!(i>>3&1),WQ:!!(i>>4&1),YQ:!!(i>>5&1),jQ:!!(i>>6&1),JQ:!!(i>>7&1),$Q:!!(i>>8&1)})}}}Zit(t,s){const i=t.get(this);if(i)for(const t of i.sceneGraphJson.children){const i=s.get(t.index);if(!i)continue;const e=t.flags;this.PQ(i,{OQ:!!(1&e),LQ:!!(e>>1&1),NQ:!!(e>>2&1),UQ:!!(e>>3&1),WQ:!!(e>>4&1),YQ:!!(e>>5&1),jQ:!!(e>>6&1),JQ:!!(e>>7&1),$Q:!!(e>>8&1)})}}UK(){const t=this.Nc.kVt();return t?t.twt(this):""}FK(){return null!==this.QUt}NVt(){hv.wh(this.QUt)}aet(t){this.QUt.push(t)}EK(){return this.QUt}BVt(t){return!!this.UVt(t)}UVt(t){const s=this.DK();if(null===s||0===s.length)return!1;for(const i of s)if(i.gX()===t)return i;return null}DK(){return this.QUt}Z_t(){for(const t of this.DK())t.gX().cX().yxt(t)}zEt(){for(const t of this.DK())t.gX().cX().fxt(t)}jEt(t){for(const s of this.DK())s.gX().cX().mxt()[t]=s}JEt(){for(const t of this.DK())t.gX().cX().dxt(t)}HEt(t){for(const s of this.DK())s.gX().cX().gxt()[t]=s}Q$(){return this.jUt.Q$()}MUt(t){this.qUt=t}NK(){return this.jUt.let(),this.qUt}LK(){return this.$Ut}VVt(t){this.$Ut=t}WVt(){return this.XUt}XK(t){if(this.#s&&(this.#s.lVt.clear(),this.#s.uVt.clear()),0===t.size)this.#s=null;else{this.#s||(this.#s={lVt:new Set,uVt:new Set});for(const s of t){const t=s.toLowerCase();this.#s.uVt.has(t)||(this.#s.lVt.add(s),this.#s.uVt.add(t))}}}KK(){return this.#s?this.#s.lVt:uv}qK(){return this.#s?this.#s.uVt:uv}zVt(){return this.#s?this.#s.uVt:null}HK(t){return!!this.#s&&this.#s.uVt.has(t.toLowerCase())}zut(){return Array.from(this.KK()).join(" ")}dOt(t){t=Math.floor(t);for(const s of this.KK()){if(0===t)return s;--t}return""}Kft(){return this.KUt}jVt(t){if(!t)return null;for(const s of this.KUt)if(s.x0()instanceof t)return s;return null}HVt(t){if(!t)return null;const s=this.jVt(t);return s?s.m0():null}Yft(t){const s=this.KUt;for(let i=0,e=s.length;i<e;++i)if(s[i].G0().t9()===t)return i;return-1}JVt(){return this.YUt}oUt(){return this.jUt.oUt()}qVt(){return this.YUt.length}Bpt(t){t|=0;const s=this.YUt;if(t<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}lRt(t){return this.YUt[t]}$Vt(t){const s=this.YUt[t];return 0===this.jUt.gut(t)?!!s:s}Upt(t,s){t|=0;const i=this.YUt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");switch(this.jUt.gut(t)){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}Rmt(t,s){if(0===s)return;t|=0;const i=this.YUt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}LEt(){let t=fv.get(this);return t||(t=new Map,fv.set(this,t),t)}XVt(t){const s=this.gX();if(s.iH().Tf(t))return!0;for(const i of s.EX())if(i.iH().Tf(t))return!0;return!!this.Nc.iH().Tf(t)}PX(t=void 0){const s=t??new Set;if(s.has(this))return;s.add(this);const i=this.LJ();if(i&&i.xst())for(const t of this.IQ())if(s.add(t),t.FK())for(const i of t.DK())s.add(i);if(this.FK())for(const t of this.DK())t.PX(s);if(!t){for(const t of s.values())t.Qit();this.tet()}}YVt(){this.jUt.VUt()&&this.AJ();for(const t of this.KUt)t.Lkt()}KVt(){this.YVt()}Qit(){if(this.YVt(),this.XVt("instancecreate")){const t=this.gX(),s=new hv.Event("instancecreate");s._0=this.AJ(),t.s6(s);for(const i of t.EX())i.s6(s);this.Nc.s6(s)}this.Nc.aZ(this.Q$().NGt().oq.gOt,this,null)}tet(){if(this.Q$().B$()){if(this.s6(new hv.Event("hierarchyready")),this.XVt("hierarchyready")){const t=this.gX(),s=new hv.Event("hierarchyready");s._0=this.AJ(),t.s6(s);for(const i of t.EX())i.s6(s);this.Nc.s6(s)}this.Nc.aZ(this.Q$().NGt().oq.FFt,this,null)}}ZVt(){this.Nc.aZ(this.Q$().NGt().oq.yOt,this,null)}QVt(t){if(this.JUt){const s=new hv.Event("destroy");s.tWt=t,this.s6(s)}if(!this.XVt("instancedestroy"))return;const s=this.gX(),i=new hv.Event("instancedestroy");i._0=this.AJ(),i.tWt=t,s.s6(i);for(const t of s.EX())t.s6(i);this.Nc.s6(i)}sWt(){return this.HUt?this.HUt.NLt():this.JUt.TZ()}bT(t="full",s=null){const i={};"full"===t?i.uid=this.LK():i.c3=!0;const e=this.KK();if(e.size>0&&(i.tags=Array.from(e)),"visual-state"!==t){const s=fv.get(this);if(s&&s.size&&(i.ex=hv.So(s)),-1!==this.BH()&&(i.mts=this.BH()),this.jUt.qBt()>0){const t={},s=this.jUt.rUt();for(let i=0,e=this.YUt.length;i<e;++i)t[s[i].toString()]=this.YUt[i];i.ivs=t}if(this.KUt.length){const s={};for(const i of this.KUt){const e=i.bT(t);e&&(s[i.G0().t9().toString()]=e)}i.behs=s}}this.Ult&&(i.w=this.Ult.Sst(t,s));const n=this.HUt?this.HUt.bT():this.JUt.MZ();return n&&(i.data=n),i}Mnt(t="full",s=null){this.Ult&&this.Ult.Mnt(t)}_nt(t,s="full",i=null){this.Ult&&this.Ult._nt(t,s,i)}iWt(t,s="full",i=null){this.Ult&&this.Ult.iWt(t,s,i)}UUt(){this.Q$().P$()&&this.Ult.UUt()}xT(t,s="full",i=null){if("full"===s)this.$Ut=t.uid;else if(!t.c3)return;if(this.XK(new Set(t.tags??[])),"visual-state"!==s){let s=fv.get(this);s&&(s.clear(),fv.delete(this));const i=t.ex;i&&(s=hv.wo(i),fv.set(this,s)),this.tVt=t.hasOwnProperty("mts")?t.mts:-1;const e=t.ivs;if(e)for(const[t,s]of Object.entries(e)){const i=parseInt(t,10),e=this.jUt.hUt(i);if(e<0||e>=this.YUt.length)continue;let n=s;null===n&&(n=NaN),this.YUt[e]=n}}if(this.Q$().P$()){const e=t.w;if(e){const t=e.l;if(this.Ult.NJ().t9()!==t){const i=this.Ult.NJ(),e=i.gJ().mit(t);e?(this.Ult.WJ(e),i.k7(this,!0),e.O7(this,!0),e.zJ(this),this.Ult.kZ()):"full"===s&&this.Nc.JJ(this)}this.Ult.wst(e,s,i)}}if("visual-state"!==s){const i=t.behs;if(i)for(const[t,e]of Object.entries(i)){const i=parseInt(t,10),n=this.Yft(i);n<0||n>=this.KUt.length||this.KUt[n].xT(e,s)}}const e=t.data;e&&(this.HUt?this.HUt.xT(e,s):this.JUt.GZ(e))}eWt(t){if(this.Ult.NJ().t9()===t)return;const s=this.Ult.NJ(),i=s.gJ().mit(t);i&&(this.Ult.WJ(i),s.k7(this,!0),i.O7(this,!0),i.zJ(this),this.Ult.kZ())}AJ(){return this.JUt||this.cVt()}WLt(){return!!this.JUt}cVt(t,s){const i=this.Ult?t?self.b2:self.u0:t?self.tZ:self.MK,e=t||this.HUt.XDt(),n=this.jUt.VUt(),r=n||e||i,h=this.Q$().REt();if(hv.T$.QDt(this,h),hv.T$.$kt(s),this.JUt=new r,hv.T$.Xkt(),hv.T$.tLt(h),e&&!(this.JUt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(n){const t=e||i;if(!(this.JUt instanceof t))throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.JUt}GK(t){if(0===this.YUt.length)return;const s={},i=this.jUt.aUt();for(let t=0,e=i.length;t<e;++t)s[i[t]]={configurable:!1,enumerable:!0,get:hv.Instance.prototype.$Vt.bind(this,t),set:hv.Instance.prototype.Upt.bind(this,t)};const e=Object.create(Object.prototype,s);t.nWt={value:e,writable:!1}}_K(t){const s=this.KUt;if(0===s.length)return;const i={};for(const t of s)i[t.G0().MMt()]={value:t.vLt(),writable:!1};const e=Object.create(Object.prototype,i);t.N_t={value:e,writable:!1}}s6(t){if(!this.WLt())return;const s=this.AJ();t._0=s;const i=this.Nc,e=i.gZ()&&!i.hH().qJ();e&&ov.Let(),s.dispatchEvent(t),e&&ov.ket()}}}{const dv=self._s,pv=new Map;dv.Tet=class extends dv.Wn{constructor(t){super(),this.PT=t,this.nIt=null,this.rWt=[],this.hWt=t.xy(),this.oWt=t.My(),this.aWt=1,this.lWt=1,this.uWt=0,this.cWt=1,this.fWt=t.FF(),this.dWt=null,this.pWt=null,this.mWt=NaN,this.gWt=!1,this.Gst=NaN,this._st=NaN,this.yWt=s=>{if(s._0!==this.nIt.J1())return;t.yq().Sf().removeEventListener("instancecreate",this.yWt);const i=this.nIt.J1().m0();this.gWt=!!i.Eut(),this.Gst=this.gWt?i.Rut():NaN,this._st=this.gWt?i.Fut():NaN}}Hn(){this.nIt=null,this.dWt=null,this.pWt=null,this.mWt=NaN,this.gWt=!1,this.Gst=NaN,this._st=NaN,dv.wh(this.rWt)}SWt(t){if(this.cWt=this.PT.FF(),this.fWt=this.cWt,this.nIt=t,this.uWt=t?t.$X():0,this.nIt){const t=this.PT.yq();if(this.nIt.J1().Q$().REt()<2){const s=this.nIt.J1().m0();s?(this.gWt=!!s.Eut(),this.Gst=this.gWt?s.Rut():NaN,this._st=this.gWt?s.Fut():NaN):this.nIt.J1().kJ()||t.Sf().addEventListener("instancecreate",this.yWt)}else this.gWt=!1,this.Gst=NaN,this._st=NaN}else this.gWt=!1,this.Gst=NaN,this._st=NaN}wQ(){return this.nIt}xst(){return this.rWt.length>0}bet(){return this.rWt}wWt(){this.xst()&&1!==this.rWt.length&&(this.pWt?this.rWt.sort((t,s)=>{const i=this.pWt.get(t.J1()),e=this.pWt.get(s.J1());return dv.Qi(i)&&dv.Qi(e)?i-e:0}):this.rWt.sort((t,s)=>{const i=t.Sdt().vWt(),e=s.Sdt().vWt();return dv.Qi(i)&&dv.Qi(e)?i-e:0}))}vWt(){return this.mWt}bWt(){return this.aWt}xWt(t){this.aWt=t}TWt(){return this.lWt}MWt(t){this.lWt=t}rmt(){return this.fWt}lFt(){return this.cWt}GWt(t){this.cWt=t}ydt(){return 0===this.hWt?Number.EPSILON:this.hWt}xdt(){return 0===this.oWt?Number.EPSILON:this.oWt}_Wt(){if(this.PT.BQ()){const t=this.nIt;let s=t.xy(),i=t.Sdt().ydt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.gWt?1+s/this.Gst:s/i}return 1}IWt(){if(this.PT.VQ()){const t=this.nIt;let s=t.My(),i=t.Sdt().xdt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.gWt?1+s/this._st:s/i}return 1}CWt(){return 0}PWt(){return{sw:this.hWt,sh:this.oWt,sx:this.aWt,sy:this.lWt,psa:this.uWt,oo:this.cWt,so:this.fWt,pi:this.PT.J1().FVt()}}Sst(t,s=null){const i=this.PWt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.RWt(t),c:this.EWt(t)})}AWt(t){let s="";return t.DQ()&&(s+="x"),t.kQ()&&(s+="y"),t.BQ()&&(s+="w"),t.VQ()&&(s+="h"),t.zQ()&&(s+="a"),t.HQ()&&(s+="z"),t.KQ()&&(s+="d"),t.qQ()&&(s+="o"),t.XQ()&&(s+="v"),s}RWt(t){return this.nIt?!this.nIt.J1()||this.nIt.J1().kJ()?null:this.FWt(this.nIt,this.PT,t):null}EWt(t){return this.rWt.map(s=>this.FWt(s,s,t)).filter(t=>t)}FWt(t,s,i){const e=t.J1();if(e&&e.kJ())return null;const n={};return n.uid=e.LK(),n.f=this.AWt(s),n.offsets=s.OWt(),n.data=dv.Tet.DWt(e),n.oci=e.gX().Gj(),"state"===i?(n.inst=e.bT("full",{selfOnly:!0}),n.instIndex=NaN):(n.instIndex=e.gX().uX().indexOf(e),n.inst=null),n}wst(t){this.hWt=t.sw,this.oWt=t.sh,this.aWt=t.sx,this.lWt=t.sy,this.uWt=t.psa,this.cWt=t.oo,this.fWt=t.so,this.mWt=dv.Qi(t.pi)?t.pi:NaN}LWt(t,s,i,e){if(!t&&!s)if(e?._Ot){if(this.dWt)for(const t of this.dWt)t.kJ()||t.AQ()||t.yq().JJ(t)}else if(this.dWt)for(const t of this.dWt)if(i.c&&i.c.length){if(!i.c.some(s=>s.uid===t.LK()))continue;t.kJ()||t.AQ()||t.yq().JJ(t)}this.dWt=t,this.pWt=s}kWt(t){const s=this.PT.yq();return pv.has(t)?pv.get(t):s.EJ(t)}_nt(t,s){const i=this.PT,e=i.yq(),n=s?.NWt??new Set;if(t.p&&!this.nIt){const r=t.p.uid,h=this.kWt(r);if(h){const r=h.LJ();h.RVt(i.J1())?this.nIt=r:(h.DVt(i.J1().LK())?(e.JJ(i.J1()),e.BWt(i.J1().LK()),pv.delete(i.J1().LK())):h.PQ(i.J1(),this.UWt(t.p.f)),n.has(i)||(i.VWt(t.p.offsets),this.WWt(h,t.p,s),this.zWt(h,h.LK(),i.yq(),s)),n.add(i),h.LJ().Sdt().wWt())}else if(dv.Qi(t.p.oci)){const n=e._X(e.M7(t.p.oci),i.NJ(),0,0,!0);if(n){const r=this.jWt(t.p,e);r&&n.xT(r);const h=n.LJ(),o=!!s?._Ot;h.NJ().IX(n,!1,o),n.PQ(i.J1(),this.UWt(t.p.f)),pv.set(n.LK(),n),this.zWt(n,n.LK(),e,s),n.LJ().Sdt().wWt()}}}const r=[];for(const s of t.c){const t=s.uid,i=this.kWt(t);i&&r.push(i)}let h=0;for(const o of t.c){const a=o.uid,l=this.kWt(a);if(l){if(this.dWt){if(this.dWt.includes(l)){const e=l;if(e.gX()!==l.gX()){h++;continue}if(e.kJ()){h++;continue}const o=t.c[h];if(!s?._Ot&&this.HWt(e,r,i)){if(i.J1()._Q(h)){const r=e.gX().Gj(),a=o.oci,l=i.J1()._Q(h).gX().Gj();if(r!==a||a!==l){this.JWt(t.c,i,n,s);break}this.qWt(h,o,i,n,s)}else this.qWt(h,o,i,n,s);h++;continue}if(e.AQ()&&e.wQ()!==i.J1()){const t=this.$Wt(o,s);this.XWt(t,o,n,s),h++;continue}this.XWt(e.LJ(),o,n,s,!0),h++;continue}if(this.dWt[h]){const e=this.dWt[h];if(e.gX()!==l.gX()){h++;continue}if(e.kJ()){h++;continue}const o=t.c[h];if(!s?._Ot&&this.HWt(e,r,i)){if(i.J1()._Q(h)){const r=e.gX().Gj(),a=o.oci,l=i.J1()._Q(h).gX().Gj();if(r!==a||a!==l){this.JWt(t.c,i,n,s);break}this.qWt(h,o,i,n,s)}else this.qWt(h,o,i,n,s);h++;continue}if(e.AQ()&&e.wQ()!==i.J1()){const t=this.$Wt(o,s);this.XWt(t,o,n,s),h++;continue}this.XWt(e.LJ(),o,n,s,!0),h++;continue}}const e=l.gX();if(this.YWt(r,e)===i.J1().EVt(e).length){for(const t of i.J1().bet()){if(t.gX()!==e)continue;const i=t.LJ();if(i&&!n.has(i)){n.add(i),i.VWt(o.offsets),this.WWt(t,o,s);break}}h++;continue}if(l.AQ()&&l.wQ()!==i.J1()){const t=this.$Wt(o,s);this.XWt(t,o,n,s),h++;continue}this.XWt(l.LJ(),o,n,s)}else if(this.dWt&&this.dWt[h]){const a=this.dWt[h],l=e.M7(this.KWt(o));if(a.gX()!==l){h++;continue}if(a.kJ()){h++;continue}const u=t.c[h];if(!s?._Ot&&this.HWt(a,r,i)){if(i.J1()._Q(h)){const e=a.gX().Gj(),r=u.oci,o=i.J1()._Q(h).gX().Gj();if(e!==r||r!==o){this.JWt(t.c,i,n,s);break}this.qWt(h,u,i,n,s)}else this.qWt(h,u,i,n,s);h++;continue}if(a.AQ()&&a.wQ()!==i.J1()){const t=this.$Wt(u,s);this.XWt(t,u,n,s),h++;continue}this.XWt(a.LJ(),u,n,s)}else{const t=this.$Wt(o,s);this.XWt(t,o,n,s)}h++}}JWt(t,s,i,e){const n=s.yq();for(const t of s.J1().children())t&&!t.kJ()&&(n.JJ(t),n.BWt(t.LK()),pv.delete(t.LK()));this.dWt&&(this.dWt=[]),this.pWt&&(this.pWt=new WeakMap),Object.assign({},e,{assignZIndex:!1});for(const s of t){const t=this.$Wt(s,e);this.XWt(t,s,i,e),this.dWt.push(t.J1()),this.pWt.set(t.J1(),this.dWt.length-1)}s.Sdt().wWt()}HWt(t,s,i){const e=t.gX();return this.YWt(s,e)===i.J1().EVt(e).length}qWt(t,s,i,e,n){const r=i.J1()._Q(t);if(!r)return;const h=r.LJ();h&&(e.has(h)||(h.VWt(s.offsets),this.WWt(r,s,n)),e.add(h))}UWt(t){const s={};return s.OQ=t.includes("x"),s.LQ=t.includes("y"),s.NQ=t.includes("w"),s.UQ=t.includes("h"),s.WQ=t.includes("a"),s.jQ=t.includes("z"),s.YQ=t.includes("d"),s.JQ=t.includes("o"),s.$Q=t.includes("v"),s}KWt(t){return dv.Qi(t.oci)?t.oci:t[1]}$Wt(t,s){if(!dv.Qi(t.oci))return;const i=this.PT,e=i.yq();let n;const r=!s.hasOwnProperty("createHierarchy")||s.createHierarchy;if(n=t.data?e.F7(t.data,i.NJ(),!1,0,0,!1,r):e._X(e.M7(t.oci),i.NJ(),0,0,r),!n)return;const h=this.jWt(t,e);h&&n.xT(h);const o=n.LJ(),a=!!s?._Ot;return o.NJ().IX(n,!0,a),o}zWt(t,s,i,e){if(this.kWt(s)&&!e?._Ot){const e=this.kWt(s);e!==t&&i.JJ(e)}i.BWt(s),i.tUt(s,t)}XWt(t,s,i,e,n=!0){const r=this.PT,h=r.PQ(t,this.UWt(s.f));h&&n?(i.has(t)||(t.VWt(s.offsets),this.WWt(t.J1(),s,e)),i.add(t)):h&&(pv.set(t.J1().LK(),t.J1()),this.zWt(t.J1(),s.uid,r.yq(),e)),this.wWt()}WWt(t,s,i){let e=this.jWt(s,this.PT.yq());if(!e)return;const n=!i.hasOwnProperty("clearChildren")||i.clearChildren,r=!i.hasOwnProperty("assignZIndex")||i.assignZIndex,h=t.yq();if(pv.set(t.LK(),t),e=JSON.parse(JSON.stringify(e)),n&&t.LK()!==e.uid){for(const s of t.children())s&&!s.kJ()&&(h.JJ(s),h.BWt(s.LK()),pv.delete(s.LK()));if(e.w?.sgi&&e.w.sgi.c?.length)for(const s of e.w.sgi.c){const e=Object.assign({},i,{clearChildren:!1,createHierarchy:!1}),n=this.$Wt(s,e);pv.set(n.J1().LK(),n.J1()),t.PQ(n.J1(),this.UWt(s.f)),n.VWt(s.offsets),this.WWt(n.J1(),s,e)}}const o=e.w?.zi,a=e.w?.l;e.w=null,t.xT(e),i?._Ot||(dv.Qi(o)&&r&&t.LJ().W7(o),dv.Qi(a)&&t.eWt(a)),this.zWt(t,e.uid,h,i)}YWt(t,s){return t.filter(t=>t.gX().Pc()===s.Pc()).length}jWt(t,s){if(dv.Qi(t.instIndex)){const i=s.M7(t.oci).NUt();return i?i[t.instIndex]:null}return dv.ae(t.inst)?JSON.parse(t.inst):t.inst?t.inst:void 0}static DWt(t){let s=t.LJ().NJ().P7(t.LK());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const s of[...t.bet()]){const t=s.LJ();i.push([t.gJ().t9(),t.NJ().Gj(),s.LK(),dv.Tet.xet(t),s.gX().FK()?1:0,t.BJ(),dv.Tet.DWt(s)])}return dv.Te(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=dv.Tet.ZWt(),s[0][14][1]=i,s[0][14][2]=t.LJ().BJ()),s}static xet(t){let s=0;return s|=Number(t.XQ())<<8,s|=Number(t.qQ())<<7,s|=Number(t.HQ())<<6,s|=Number(t.KQ())<<5,s|=Number(t.zQ())<<4,s|=Number(t.VQ())<<3,s|=Number(t.BQ())<<2,s|=Number(t.kQ())<<1,s|=0|Number(t.DQ()),s}static ZWt(t){let s=0;return s|=256,s|=128,s|=64,s|=32,s|=16,s|=8,s|=4,s|=2,s|=1,511}static QWt(){pv.clear()}}}{const mv=self._s,gv=self.hs,yv=(gv.ys,gv.Ss,mv.jn(mv.Rect)),Sv=mv.jn(mv.Cl),wv=mv.jn(mv.Event,"bboxchange",!1),vv=mv.jn(mv.To,0,0,0,0),bv=mv.jn(mv.au),xv=mv.jn(mv.To,1,1,1,1),Tv=mv.jn(mv.Rect,0,0,-1,-1),Mv=mv.jn(mv.Rect,0,0,-1,-1),Gv=new Set(["absolute","relative"]),_v=[];let Iv=!0;const Cv=new WeakMap,Pv=new WeakMap;mv.sVt=class extends mv.Wn{constructor(t,s){super(),this.fi=t,this.$bt=t.gX(),this.Nc=t.yq(),this.tzt=s,this.$bt.EUt(this,null,s),this.szt=-1,this.izt=-1,this.HD=196635,this.$bt.Q$().F$()&&(this.HD|=128),this.Pa=NaN,this.Ra=NaN,this.qx=NaN,this.ezt=NaN,this.nzt=NaN,this.cG=NaN,this.Io=NaN,this.rzt=NaN,this.hzt=NaN,this.ozt=NaN,this.azt=NaN,this.lzt=mv.jn(mv.Rect),this.uzt=mv.jn(mv.Cl),this.czt=Mv,this.fzt=Tv,this.dzt=null,this.pzt=null,this.mzt=null,this.Jx=xv,this.gzt=xv,this.yzt=null,this.Szt=null,this.fi.gX().uUt()&&(this.Szt=mv.jn(mv.wzt,this.fi,this)),this.vzt=null,this.dWt=null,this.pWt=null,this.bzt=-1,this.xzt=null}gVt(){this.HD|=256}kJ(){return!!(256&this.HD)}Hn(){if(this.$bt.EUt(this,this.tzt,null),this.yzt&&(this.Nc.Px().Vv(this.yzt),this.yzt=null),this.dzt=null,this.pzt&&(this.pzt.Tzt.Hn(),this.pzt=null),this.mzt&&(this.mzt.clear(),this.mzt=null),this.s0(),this.Szt&&this.Szt.Hn(),this.AQ()&&this.wQ().RQ(this),this.xst()){const t=[...this.bet()];for(const s of t)this.RQ(s)}this.Mzt(),this.Gzt(),Cv.delete(this),Pv.delete(this),this.fi=null,this.$bt=null,this.Nc=null,this.tzt=null}eVt(t){if(Iv=!1,this.NZ(t[0],t[1]),this.pT(t[2]),this.QR(t[3],t[4]),this.cG=0,this.F$()?this.qX(t[6]):this.Io=0,vv.Sa(t[7]),this._zt(vv),this.zZ(t[8]),this.JZ(t[9]),this.Kx(t[10]),this.Szt&&this.Szt.Izt(t[12]),t[14]&&Cv.set(this,{Czt:t[14][1],Pzt:t[14][2]}),t[15]){const s=t[15];this.QQ(s[0],s[1]);const i=this.h0(),e=s[2];for(let t=0,s=e.length;t<s;++t){const s=e[t];for(let e=0,n=s.length;e<n;++e){const n=s[e],r=i.KT(e,t);r.lT(n[0]),r.fT(n[1]),r.pT(n[2]),r.gT(n[3]),r.ST(n[4])}}}if(t[16]){const s=t[16][0],i=t[16][1],e=!!i,n=!e,r=this.Nc.kVt();e&&r&&r.QSt(this.J1(),i),n&&r&&r.QSt(this.J1(),s)}Iv=!0,this.Rzt()}nVt(){this.Pa=0,this.Ra=0,this.qx=0,this.ezt=0,this.nzt=0,this.cG=0,this.Io=0,this.rzt=0,this.hzt=1,this.ozt=0,this.azt=0,this.Rzt()}yq(){return this.Nc}gX(){return this.$bt}J1(){return this.fi}Ezt(){return this.zQ()?this.Azt(this.wQ().Fzt()-this.vzt.CWt()):0}lT(t){if(t=+t,this.DQ()){const s=this.vzt,i=t-this.aT(),e=-this.Ezt();0===e?this.Pa+=i/s._Wt():(this.Pa+=Math.cos(e)*i/s._Wt(),this.kQ()&&(this.Ra+=Math.sin(e)*i/s.IWt()))}else this.Pa=t}Hpt(t,s=!1){t=+t,s?this.Pa+=t:this.DQ()?this.lT(this.aT()+t):this.Pa+=t}aT(){if(this.DQ()){let t=this.Pa;const s=this.vzt,i=this.wQ(),e=this.Ezt();return 0===e?t*=s._Wt():(t=t*s._Wt()*Math.cos(e),this.kQ()&&(t-=this.Ra*s.IWt()*Math.sin(e))),i.aT()+t}return this.Pa}fT(t){if(t=+t,this.kQ()){const s=this.vzt,i=t-this.cT(),e=-this.Ezt();0===e?this.Ra+=i/s.IWt():(this.DQ()&&(this.Pa-=Math.sin(e)*i/s._Wt()),this.Ra+=Math.cos(e)*i/s.IWt())}else this.Ra=t}Jpt(t,s=!1){t=+t,s?this.Ra+=t:this.kQ()?this.fT(this.cT()+t):this.Ra+=t}cT(){if(this.kQ()){let t=this.Ra;const s=this.vzt,i=this.wQ(),e=this.Ezt();return 0===e?t*=s.IWt():(t=t*s.IWt()*Math.cos(e),this.DQ()&&(t+=this.Pa*s._Wt()*Math.sin(e))),i.cT()+t}return this.Ra}NZ(t,s){if(t=+t,s=+s,this.Ozt()){const i=this.DQ(),e=this.kQ(),n=this.vzt,r=t-this.aT(),h=s-this.cT(),o=-this.Ezt();if(0===o)i?this.Pa+=r/n._Wt():this.Pa=t,e?this.Ra+=h/n.IWt():this.Ra=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.Pa+=e?(l*r-a*h)/n._Wt():l*r/n._Wt():this.Pa=t,e?this.Ra+=i?(a*r+l*h)/n.IWt():l*h/n.IWt():this.Ra=s}}else this.Pa=t,this.Ra=s}Dzt(){return[this.aT(),this.cT()]}UZ(t,s){t=+t,s=+s,this.Ozt()?this.NZ(this.aT()+t,this.cT()+s):(this.Pa+=t,this.Ra+=s)}BAt(t,s){return this.aT()===t&&this.cT()===s}pT(t){if(t=+t,this.HQ()&&(t-=this.wQ().dT()),this.qx===t)return;this.qx=t,this.Lzt();const s=this.NJ();0!==this.qx&&s.U7(),s.zJ(this)}Lzt(){if(this.Rzt(),this.xst()){const t=this.bet();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.HQ()&&i.Lzt()}}}amt(t){this.pT(this.dT()+t)}dT(){return this.HQ()?this.wQ().dT()+this.qx:this.qx}YZ(){return this.NJ().dT()+this.dT()}Eut(){return this.J1().Q$().REt()<2&&this.J1().m0().Eut()}ny(t){if(t=+t,this.BQ()){const s=this.xy();0===s?this.ezt=Number.EPSILON:this.ezt*=t/s}else this.ezt=t;this.kzt()}ky(t,s){t=+t,s?this.ezt+=t:this.BQ()?this.ny(this.xy()+t):this.ezt+=t,this.kzt()}xy(){if(this.BQ()){const t=this.wQ(),s=t.xy();return t.Sdt().ydt()===Number.EPSILON?(this.Sdt().ydt()+s)*this.ezt:s*this.ezt}return this.ezt}hy(t){if(t=+t,this.VQ()){const s=this.My();0===s?this.nzt=Number.EPSILON:this.nzt*=t/s}else this.nzt=t;this.kzt()}Zpt(t,s){t=+t,s?this.nzt+=t:this.VQ()?this.hy(this.My()+t):this.nzt+=t,this.kzt()}My(){if(this.VQ()){const t=this.wQ(),s=t.My();return t.Sdt().xdt()===Number.EPSILON?(this.Sdt().xdt()+s)*this.nzt:s*this.nzt}return this.nzt}QR(t,s){if(t=+t,s=+s,this.BQ()){const s=this.xy();0===s?this.ezt=Number.EPSILON:this.ezt*=t/s}else this.ezt=t;if(this.VQ()){const t=this.My();0===t?this.nzt=Number.EPSILON:this.nzt*=s/t}else this.nzt=s;this.kzt()}Fu(){return[this.xy(),this.My()]}Ytt(){return this.cG}Nzt(t){if(t<0)throw new RangeError("invalid depth");this.cG=t}Bzt(){if(this.AQ()){const t=this.vzt;return Math.min(t._Wt(),t.IWt())}return 1}F$(){return!!(128&this.HD)}qX(t){t=+t,this.F$()&&(this.zQ()&&(t-=this.wQ().$X()),t=mv.Kn(t),this.Io!==t&&(this.Io=t,this.kzt()))}Qpt(t){0!==(t=+t)&&this.F$()&&(this.Io=mv.Kn(this.Io+t),this.kzt())}kzt(){if(this.HD|=262144,this.xst()){const t=this.bet();for(let s=0,i=t.length;s<i;s++)t[s].kzt()}}$X(){return this.zQ()&&this.F$()?this.Azt(mv.Kn(this.wQ().Fzt()+this.Io)):this.Io}Fzt(){return this.zQ()&&this.F$()?mv.Kn(this.wQ().Fzt()+this.Io):this.Io}Azt(t){return this.BQ()&&this.bQ().xy()<0&&(t=mv.Kn(mv.dr(t,this.bQ().$X()+Math.PI))),this.VQ()&&this.bQ().My()<0&&(t=mv.dr(t,this.bQ().$X())),t}Uzt(){const t=this.wQ();return!!(this.BQ()&&t.xy()<0)||!!(this.VQ()&&t.My()<0)}Vzt(){const t=this.wQ();return!!(this.BQ()&&t.xy()<0&&this.VQ()&&t.My()<0)}Wzt(){const t=this.HD;if(!(262144&t))return;const s=this.$X();this.rzt=Math.sin(s),this.hzt=Math.cos(s),this.HD=-262145&t}jAt(){return this.Wzt(),this.rzt}zAt(){return this.Wzt(),this.hzt}zZ(t){this.ozt=+t}hmt(t){this.ozt+=+t}WZ(){return this.ozt}JZ(t){this.azt=+t}omt(t){this.azt+=+t}HZ(){return this.azt}_zt(t){this.Jx.equals(t)||(this.Jx===xv?(this.Jx=mv.jn(mv.To,t),this.gzt=mv.jn(mv.To,t),this.gzt.Ko()):t.qo(1,1,1,1)?(this.Jx=xv,this.gzt=xv):(this.Jx.set(t),this.gzt.set(t),this.gzt.Ko()),this.Rzt())}DF(t){if(t=mv.Yn(+t,0,1),this.qQ()){if(this.Sdt().lFt()===t)return;this.Sdt().GWt(t),t=this.FF()}else if(this.Jx.a===t)return;this.zzt(t)}jzt(){if(!this.xst())return;const t=this.bet();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.zzt(i.FF())}}zzt(t){vv.Lo(this.Jx),vv.a=t,this._zt(vv),this.jzt()}imt(t){this.qQ()?this.DF(this.Sdt().lFt()+t):this.DF(this.FF()+t)}FF(){return this.qQ()?this.wQ().FF()*this.Sdt().lFt():this.Jx.a}hQ(t){this.Jx.Ho(t)||(vv.Lo(t),vv.a=this.FF(),this._zt(vv))}Lpt(t,s,i){vv.Po(t,s,i),this.hQ(vv)}Hzt(t,s,i){0===t&&0===s&&0===i||(vv.Lo(this.Jx),vv.r+=t,vv.g+=s,vv.b+=i,this.hQ(vv))}rQ(){return this.Jx}o7(){return this.gzt}KQ(){return!!(512&this.HD)}Jzt(t){this.qL(512,t)}DQ(){return!!(1024&this.HD)}qzt(t){this.qL(1024,t)}kQ(){return!!(2048&this.HD)}Ozt(){return!!(3072&this.HD)}$zt(t){this.qL(2048,t)}BQ(){return!!(4096&this.HD)}Xzt(t){this.qL(4096,t)}VQ(){return!!(8192&this.HD)}Yzt(t){this.qL(8192,t)}zQ(){return!!(16384&this.HD)}Kzt(t){this.qL(16384,t)}HQ(){return!!(32768&this.HD)}Zzt(t){this.qL(32768,t)}qQ(){return!!(4194304&this.HD)}Qzt(t){this.qL(4194304,t)}XQ(){return!!(8388608&this.HD)}tjt(t){this.qL(8388608,t)}sjt(){this.HD&=-12647937}PQ(t,s){if(t===this)return!1;if(t.AQ())return!1;if(this.ijt(t))return!1;if(this.ejt(t))return!1;const i=t.aT(),e=t.cT(),n=t.xy(),r=t.My(),h=t.$X(),o=t.dT(),a=t.FF();t.njt(this),t.qzt(s.OQ),t.$zt(s.LQ),t.Xzt(s.NQ),t.Yzt(s.UQ),t.Kzt(s.WQ),t.Zzt(s.jQ),t.Qzt(s.JQ),t.tjt(s.$Q),t.Jzt(s.YQ);const l=i-this.aT(),u=e-this.cT(),c=-this.$X(),f=Math.cos(c),d=Math.sin(c);if(s.OQ&&(s.WQ?t.Pa=l*f-u*d:t.Pa=l,s.NQ)){const s=this.xy()/this.vzt.ydt();0!==s&&(t.Pa/=s)}if(s.LQ&&(s.WQ?t.Ra=l*d+u*f:t.Ra=u,s.UQ)){const s=this.My()/this.vzt.xdt();0!==s&&(t.Ra/=s)}if(s.NQ){const s=this.xy();0===s||s===Number.EPSILON?(t.ezt=1,t.vzt.xWt(1)):(t.ezt=n/this.xy(),t.vzt.xWt(t.ezt))}if(s.UQ){const s=this.My();0===s||s===Number.EPSILON?(t.nzt=1,t.vzt.MWt(1)):(t.nzt=r/this.My(),t.vzt.MWt(t.nzt))}return s.WQ&&(t.Io=h-this.$X()),s.jQ&&(t.qx=o-this.dT()),s.JQ&&t.vzt.GWt(a),s.$Q&&t.AY(this.OY()),this.rjt(t),this.kZ(),this.jzt(),!0}RQ(t){if(t.wQ()!==this)return;const s=t.aT(),i=t.cT(),e=t.xy(),n=t.My(),r=t.$X(),h=t.dT(),o=t.FF();t.njt(null),t.sjt(),t.NZ(s,i),t.QR(e,n),t.qX(r),t.pT(h),t.DF(o),this.hjt(t),this.kZ()}ojt(){return this.bzt}ajt(){this.ljt();const t=[...this.children()];for(const s of t)this.RQ(s);const s=this.wQ();s&&s.RQ(this),this.sjt()}ljt(){if(this.ujt(),!this.dWt){const t=[...this.children()];t.length&&(this.dWt=[],this.pWt=new WeakMap);let s=0;for(const i of t){const t=i.J1();this.dWt.push(t),this.pWt.set(t,s),s++}}const t=this.wQ();t&&t.ljt()}ujt(){if(-1!==this.bzt)return;const t=[...this.xQ()];this.bzt=t.length;for(const s of t)s.ujt();const s=[...this.children()];for(const t of s)t.ujt()}Gzt(){this.dWt&&(this.dWt.length=0),this.dWt=null,this.pWt=null;const t=this.wQ();t&&t.Gzt(),this.bzt=-1}AQ(){return null!==this.wQ()}wQ(){const t=this.vzt;return null!==t?t.wQ():null}bQ(){let t=this;for(;t.AQ();)t=t.wQ();return t}*xQ(){let t=this.wQ();for(;t;)yield t,t=t.wQ()}RVt(t){return this.bet().includes(t)}xst(){const t=this.vzt;return null!==t&&t.xst()}bet(){const t=this.vzt;return null!==t?t.bet():_v}children(){return this.bet()}*IQ(){for(const t of this.children())yield t,yield*t.IQ()}MQ(){return this.bet().length}UFt(){return[...this.IQ()].length}_Q(t){const s=this.bet();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}OVt(t){if(!t)return NaN;const s=this.bet();if(!s)return NaN;for(let i=0;i<s.length;i++)if(t===s[i])return i;return NaN}cjt(t){this.vzt||(this.vzt=mv.jn(mv.Tet,this)),t&&this.vzt.SWt(t)}Sdt(){return this.vzt}Mzt(){this.vzt&&(this.vzt.Hn(),this.vzt=null)}njt(t){t?(t.cjt(null),this.cjt(t)):(this.vzt&&this.vzt.SWt(null),this.xst()||this.Mzt())}ejt(t){if(!this.AQ())return!1;const s=this.wQ();return s===t||s.ejt(t)}ijt(t){if(this.RVt(t))return!0;for(const s of this.bet())if(s.ijt(t))return!0;return!1}rjt(t){this.vzt.bet().push(t)}hjt(t){const s=this.vzt.bet(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.AQ()||this.Mzt(),t.xst()||t.Mzt()}LVt(){const t=Cv.get(this);return t?t.Czt:null}fjt(){const t=Cv.get(this);return t?t.Pzt:NaN}bst(){const t=Pv.get(this);return mv.Qi(t)?t:NaN}djt(t){Pv.set(this,t)}pjt(){this.qL(524288,!0),this.Rzt()}Rzt(){if(!Iv)return;const t=this.Nc.Px();let s;this.yzt&&t.Vv(this.yzt),s=524288&this.HD?t.Tv()||"<point>":t.vv()||"<default>",this.yzt=t.kv(s,this.lK(),this.gzt,this.dT(),this.mjt()?1:0,0)}est(){return this.yzt}n9(){return this.Jx===xv}Kx(t){if((t|=0)<0||t>31)throw new RangeError("invalid blend mode");this.lK()!==t&&(this.HD=-2080374785&this.HD|t<<26,this.Rzt())}lK(){return(2080374784&this.HD)>>26}WJ(t,s){const i=s&&this.tzt!==t;i&&this.N7(),this.$bt.EUt(this,this.tzt,t),this.tzt=t,i&&this.gjt(),0!==this.dT()&&this.tzt.U7()}NJ(){return this.tzt}gJ(){return this.NJ().gJ()}W7(t){this.szt=0|t}BJ(){return this.tzt.Y9(),this.szt}ttt(t){this.izt=0|t}N2(){return this.tzt.Z9(),this.izt}k6(){return this.szt}qL(t,s){s?this.HD|=t:this.HD&=~t}OY(){return!!(1&this.HD)}AY(t){if(this.qL(1,t),this.xst())for(const s of this.bet())s.XQ()&&s.AY(t)}gQ(){return!!(8&this.HD)}yQ(t){t=!!t,this.gQ()!==t&&(this.qL(8,t),t?this.kZ():this.yjt())}Sjt(t,s){this.qL(32,t),this.mzt&&this.mzt.clear();for(const t of s)this.mzt||(this.mzt=new Set),this.mzt.add(t.toLowerCase());this.mzt&&0===this.mzt.size&&(this.mzt=null)}wjt(t){const s=t.vVt()?t.zVt():t.LEt().get("solidTags"),i=!!(32&this.HD),e=this.mzt;if(!s||!e)return!i;for(const t of e)if(s.has(t))return i;return!i}kZ(){if(this.HD|=65554,this.$bt.CUt(!0),this.Nc.jJ(),this.tzt.v7()&&(this.ZZ(this.lzt,this.uzt,!0),this.HD&=-3,this.gjt()),4&this.HD&&this.fi.Sf().dispatchEvent(wv),null!==this.vzt){const t=this.vzt.bet();for(let s=0,i=t.length;s<i;++s)t[s].kZ()}}ZZ(t,s,i){const e=this.aT(),n=this.cT(),r=this.xy(),h=this.My(),o=this.$X();t.ja(e-this.ozt*r,n-this.azt*h,r,h),i&&this.r0()&&this.vjt(t),0===o?s.Xl(t):(t.offset(-e,-n),s.Kl(t,this.jAt(),this.zAt()),s.offset(e,n),s.Zl(t)),t.normalize()}bjt(){const t=this.HD;2&t&&(this.ZZ(this.lzt,this.uzt,!0),this.HD=-3&t)}QZ(){return this.bjt(),this.lzt}sQ(){return this.bjt(),this.uzt}xjt(t){const s=this.aT(),i=this.cT(),e=Math.round(s)-s,n=Math.round(i)-i;return 0===e&&0===n?t:(Sv.m(t),Sv.offset(e,n),Sv)}Tjt(t){this.lzt.m(t),this.uzt.Xl(this.lzt),this.HD&=-3,this.RUt(),this.gjt()}Mjt(t){this.qL(4,t)}Gjt(){return!!(4&this.HD)}Htt(t,s,i){return s&&0!==this.Ytt()?this.$tt(this.NJ().qtt()):0===this.dT()||i?t.xl(this.QZ()):this._jt()}_jt(){const t=this.NJ(),s=this.YZ();return!(s>=t.b9())&&(t.w9(s,yv),yv.xl(this.QZ()))}$tt(t){const s=this.QZ(),i=s.Za(),e=s.tl(),n=s.Qa(),r=s.sl(),h=this.YZ(),o=h+this.Ytt();return t.hw(i,n,h,e,r,o)}eQ(){const t=this.NJ();if(t.F9())return this.$tt(t.qtt());{const s=t.gJ();return this.Htt(t.dK(),s.jtt(),s.TY())}}tst(t){this.qL(1048576,t)}Qtt(t){this.qL(2097152,t)}Ijt(){return!!(1048576&this.HD)}Cjt(){return!!(2097152&this.HD)}Pjt(t){(t=!!t)!==this.mjt()&&(this.qL(16777216,t),this.Rzt())}mjt(){return!!(16777216&this.HD)}Rjt(t){this.dzt=t,this.Ejt(),this.r0()&&(this.xzt.Ajt=null)}Fjt(){return this.dzt}Ojt(){return null!==this.dzt||this.r0()}Djt(){return this.Ljt(this.xy(),this.My(),this.$X(),this.jAt(),this.zAt())}kjt(t,s,i){let e=0,n=1;return 0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.Ljt(t,s,i,e,n)}Ljt(t,s,i,e,n){let r=this.pzt;null===r&&(r={Tzt:mv.jn(mv.au),width:NaN,height:NaN,angle:NaN},this.pzt=r);const h=r.Tzt;if(r.width===t&&r.height===s&&r.angle===i)return h;const o=this.dzt;if(this.r0()){const i=this.WZ(),r=this.HZ(),a=this.h0();let l=this.xzt.Ajt;l||(o?(bv.m(o),bv.offset(i,r)):bv.gu(),l=a.oM(bv),this.xzt.Ajt=l),a.aM(l,h),h.offset(-i,-r),h.vu(t,s,e,n)}else o?(h.m(o),h.vu(t,s,e,n)):h.wu(this.sQ(),-this.aT(),-this.cT());return r.width=t,r.height=s,r.angle=i,h}Ejt(){this.Njt(!0);const t=this.pzt;null!==t&&(t.width=NaN)}QQ(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.J1().Q$().V$())throw new Error("object does not support mesh");this.s0(),this.xzt={Bjt:mv.jn(mv.qS._T,t,s),Ujt:mv.jn(mv.qS._T,t,s),Ajt:null}}r0(){return null!==this.xzt}h0(){if(!this.r0())throw new Error("no mesh");return this.xzt.Bjt}Vjt(){if(!this.r0())throw new Error("no mesh");return this.xzt.Ujt}Wjt(t){this.qL(65536,t)}zjt(){return!!(65536&this.HD)}Njt(t){this.qL(131072,t)}jjt(){return!!(131072&this.HD)}vjt(t){const s=this.xzt.Bjt,i=Math.min(s.HT(),0),e=Math.min(s.JT(),0),n=Math.max(s.qT(),1),r=Math.max(s.$T(),1),h=t.width(),o=t.height();t.offsetLeft(i*h),t.offsetTop(e*o),t.al((n-1)*h),t.ll((r-1)*o),this.cG=s.XT()}s0(){this.xzt&&(this.xzt.Bjt.Hn(),this.xzt.Ujt.Hn(),this.xzt=null,this.Ejt())}e0(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!Gv.has(e))throw new Error("invalid mode");const n="relative"===e;let r=i.x,h=i.y;const o=i.WN;let a="number"==typeof i.o0?i.o0:n?0:-1,l="number"==typeof i.a0?i.a0:n?0:-1;if(!this.r0())return!1;const u=this.h0(),c=u.KT(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.dT()!==o&&(c.pT(o),f=!0),n&&(r+=t/(u.UT()-1),h+=s/(u.VT()-1)),-1!==a||n?(n&&(a+=t/(u.UT()-1)),a=mv.Yn(a,0,1)):a=c.mT(),-1!==l||n?(n&&(l+=s/(u.VT()-1)),l=mv.Yn(l,0,1)):l=c.yT(),c.aT()===r&&c.cT()===h&&c.mT()===a&&c.yT()===l?f:(c.lT(r),c.fT(h),c.gT(a),c.ST(l),this.Ejt(),!0)}mVt(){return this.fi.mVt()}SQ(t,s){return!!this.QZ().Ml(t,s)&&!!this.sQ().Ml(t,s)&&(this.mVt()?this.fi.m0().nkt(t,s):!this.Ojt()||this.Djt().Ml(t-this.aT(),s-this.cT()))}Hjt(){return!!(16&this.HD)}RUt(){if(!this.Hjt()||!this.gQ()||this.kJ())return;const t=this.QZ(),s=this.$bt.IUt(),i=this.czt;if(yv.set(s.s8(t.Za()),s.i8(t.Qa()),s.s8(t.tl()),s.i8(t.sl())),i.equals(yv))return;const e=this.fi;i===Mv?(s.e8(e,null,yv),this.czt=mv.jn(mv.Rect,yv)):(s.e8(e,i,yv),i.m(yv)),this.HD&=-17}Jjt(){this.HD|=16}yjt(){const t=this.czt;t!==Mv&&(this.$bt.IUt().e8(this.fi,t,null),this.czt=Mv)}gjt(){const t=this.NJ();if(!t.v7()||this.kJ())return;const s=t.h9(),i=this.QZ(),e=this.fzt;if(yv.set(s.s8(i.Za()),s.i8(i.Qa()),s.s8(i.tl()),s.i8(i.sl())),e.equals(yv))return;const n=this.fi;e===Tv?(s.e8(n,null,yv),this.fzt=mv.jn(mv.Rect,yv)):(s.e8(n,e,yv),e.m(yv)),t.o9()}N7(){const t=this.fzt;t!==Tv&&(this.NJ().h9().e8(this.fi,t,null),this.fzt=Tv)}K9(){return this.fzt}aQ(){if(this.kJ())return;const t=this.fi,s=this.tzt,i=s.VJ();i.length&&i.at(-1)===t||(s.k7(t,!1),s.O7(t,!1),this.Nc.jJ())}uQ(){if(this.kJ())return;const t=this.fi,s=this.tzt,i=s.VJ();i.length&&i[0]===t||(s.k7(t,!1),s.L7(t,!1),this.Nc.jJ())}fQ(t){if(this.kJ())return;const s=this.fi,i=this.tzt;if(i.gJ()!==t.gJ())throw new Error("layer from different layout");t!==i&&(i.k7(s,!0),this.WJ(t),t.O7(s,!0),this.Nc.jJ())}pQ(t,s){if(this.kJ())return;const i=this.fi;let e=!1;const n=this.tzt;if(t.LK()===i.LK())return;const r=t.LJ();if(!r)throw new Error("expected world instance");const h=r.NJ();n.Gj()!==h.Gj()&&(n.k7(i,!0),this.WJ(h),h.O7(i,!0),e=!0);const o=h.ett(i,t,!!s);(e||o)&&this.Nc.jJ()}DZ(){return this.Szt}qjt(t){this.qL(64,t)}ctt(){return!!(64&this.HD)}Sst(t,s=null){const i={x:this.aT(),y:this.cT(),w:this.xy(),h:this.My(),l:this.NJ().t9(),zi:this.BJ()};0!==this.dT()&&(i.ze=this.dT()),0!==this.$X()&&(i.a=this.Fzt()),this.n9()||(i.c=this.Jx.toJSON()),.5!==this.WZ()&&(i.oX=this.WZ()),.5!==this.HZ()&&(i.oY=this.HZ()),0!==this.lK()&&(i.bm=this.lK()),this.OY()||(i.v=this.OY()),this.gQ()||(i.ce=this.gQ()),this.Gjt()&&(i.be=this.Gjt()),this.Szt&&(i.fx=this.Szt.Sst());const e=!!(32&this.HD);return e&&(i.sfi=e),this.mzt&&(i.sft=[...this.mzt].join(" ")),this.vzt&&"visual-state"!==t&&(i.sgi=this.vzt.Sst(t,s),Cv.has(this)&&(i.sgcd=Cv.get(this).Czt,i.sgzid=Cv.get(this).Pzt)),this.r0()&&(i.mesh=this.h0().bT()),i}OWt(){return{x:this.Pa,y:this.Ra,z:this.qx,w:this.ezt,h:this.nzt,a:this.Io,sgi:this.Sdt()?this.Sdt().PWt():null}}VWt(t){t&&(this.Pa=t.x,this.Ra=t.y,this.qx=t.z,this.ezt=t.w,this.nzt=t.h,this.Io=t.a,t.sgi&&this.Sdt()&&this.Sdt().wst(t.sgi),this.kzt(),this.kZ())}UUt(){this.Gzt(),this.ajt(),this.cjt(null),this.vzt&&this.vzt.LWt(this.dWt,this.pWt)}Mnt(t){"visual-state"!==t&&this.ajt()}_nt(t,s="full",i=null){if(t.hasOwnProperty("sgi")&&"visual-state"!==s){if(this.kJ())return;this.vzt._nt(t.sgi,i)}}iWt(t,s="full",i=null){if("visual-state"!==s)if(this.kJ())this.Gzt();else{if(t.hasOwnProperty("sgi"))this.vzt.LWt(null,null,t.sgi,i);else if(i?._Ot&&this.dWt)for(const t of this.dWt)t.kJ()||this.Nc.JJ(t);this.Gzt(),this.kZ()}}wst(t,s,i=null){if(Iv=!1,this.lT(t.x),this.fT(t.y),this.ny(t.w),this.hy(t.h),this.W7(t.zi),this.pT(t.hasOwnProperty("ze")?t.ze:0),this.qX(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?vv.Sa(t.c):t.hasOwnProperty("o")?(vv.Lo(this.Jx),vv.a=t.o):vv.Co(1,1,1,1),this._zt(vv),this.zZ(t.hasOwnProperty("oX")?t.oX:.5),this.JZ(t.hasOwnProperty("oY")?t.oY:.5),this.Kx(t.hasOwnProperty("bm")?t.bm:0),this.AY(!t.hasOwnProperty("v")||t.v),this.yQ(!t.hasOwnProperty("ce")||t.ce),this.Mjt(!!t.hasOwnProperty("be")&&t.be),this.Sjt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.Szt&&t.hasOwnProperty("fx")&&this.Szt.wst(t.fx),t.hasOwnProperty("sgi")&&"visual-state"!==s){this.cjt(null);const s=this.vzt,i=t.sgi;s.wst(i),s.LWt(this.dWt,this.pWt),this.$jt(t.sgcd,t.sgzid)}if(t.hasOwnProperty("mesh")){const s=t.mesh;this.QQ(s.cols,s.rows),this.h0().xT(s)}else this.s0();this.kZ(),Iv=!0,this.Rzt(),"visual-state"!==s&&this.Nc.Xjt(this.J1(),t)}$jt(t,s){t&&mv.Qi(s)&&Cv.set(this,{Czt:t,Pzt:s})}}}{const Rv=self._s;Rv.wBt=class extends Rv.Wn{constructor(t,s){super();const i=t.yq(),e=i.tPt(s[1]);i.Yjt().qkt(e),this.Nc=i,this.$bt=t,this.Akt=Rv.T$.R0(e),this.yLt=null,this.Kjt=null,this.YNt=e.Instance,this.b8=s[2],this.$n=s[0],this.DPt=this.Nc.MMt(s[3]);const n=this.Akt.REt();if(n<2&&(this.yLt=Rv.jn(e.LBt,this),!(this.yLt instanceof Rv.Ekt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(Rv.T$.QDt(this,n),n>=2){const t=e.LBt??globalThis.i3;if(this.Kjt=new t,!(this.Kjt instanceof globalThis.i3))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.Kjt=new globalThis.C0;Rv.T$.tLt(n),this.$Dt()}static KG(t,s){return Rv.jn(Rv.wBt,t,s)}Hn(){this.Nc=null,this.Akt=null,this.yLt&&(this.yLt.Hn(),this.yLt=null),this.YNt=null}GAt(){return this.yLt}$Dt(){this.yLt?this.yLt.$Dt():this.Kjt&&this.Kjt.f2()}yq(){return this.Nc}gX(){return this.$bt}x0(){return this.Akt}eUt(){return this.YNt}Pc(){return this.$n}t9(){return this.b8}M0(){return this.Kjt}MMt(){return this.DPt}}}{const Ev=self._s,Av=self.v0;Ev.ZUt=class extends Ev.Wn{constructor(t){super(),this.Nc=t.runtime,this.pRt=t.T0,this.Akt=this.pRt.x0(),this.fi=t._0,this.US=t.index,this.HUt=null,this.JUt=null,this.Akt.O7(this.fi)}Hn(){this.JUt&&(this.JUt.PK(),this.JUt=null),this.Akt.k7(this.fi),this.HUt&&(this.HUt.Hn(),this.HUt=null),this.Nc=null,this.pRt=null,this.Akt=null,this.fi=null}QBt(t){if(this.HUt)throw new Error("already got sdk instance");if(this.x0().REt()<2){if(this.HUt=Ev.jn(this.pRt.eUt(),this,t),!(this.HUt instanceof Ev.Fkt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.x0().XDt();this.ZDt(s.Instance,t)}}m0(){return this.HUt??this.JUt}I0(){return this.fi}yq(){return this.Nc}G0(){return this.pRt}x0(){return this.Akt}xpt(){return this.US}Lkt(){this.HUt?this.HUt.Lkt():this.JUt.r3()}Ukt(t,s){this.HUt&&this.HUt.Ukt(t,s)}sWt(){return this.HUt?this.HUt.NLt():this.JUt.TZ()}bT(t="full"){return this.HUt?this.HUt.bT(t):this.JUt.MZ(t)}xT(t,s="full"){if(this.HUt)return this.HUt.xT(t,s);this.JUt.GZ(t,s)}static Zjt(t,s,i){const e=globalThis.e3;let n,r;n=s instanceof e?t.lY(s):s.Dkt(),r=i instanceof e?t.lY(i):i.Dkt();const h=n.I0(),o=r.I0(),a=h.gX().Gj(),l=o.gX().Gj();if(a!==l)return a-l;const u=h.WVt(),c=o.WVt();return u!==c?u-c:n.xpt()-r.xpt()}ZDt(t,s){const i=Av,e=t??this.HUt.XDt(),n=e||i,r=this.x0().REt();if(Ev.T$.QDt(this,r),Ev.T$.$kt(s),this.JUt=new n,Ev.T$.Xkt(),Ev.T$.tLt(r),e&&!(this.JUt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);return this.JUt}vLt(){return this.JUt||this.ZDt()}WLt(){return!!this.JUt}}}{const Fv=self._s;Fv.r7=class extends Fv.Wn{constructor(t,s){super(),this.PT=t,this.Qjt=[],this.tHt=[],this.sHt=new Map,this.iHt=[],this.eHt=[],this.nHt=new Set,this.Sx=!0;for(const t of s){const s=Fv.jn(Fv.rHt,this,t,this.Qjt.length);this.Qjt.push(s),this.sHt.set(s.Pc().toLowerCase(),s),t.length>=3&&this.iHt.push(this.hHt(s,t[2]))}this.yq().oHt(this)}Hn(){this.yq().aHt(this);for(const t of this.eHt)t.Hn();Fv.wh(this.eHt),Fv.wh(this.Qjt),Fv.wh(this.tHt),this.sHt.clear(),Fv.wh(this.iHt),this.PT=null}lHt(t){this.nHt.add(t)}uHt(t){this.nHt.delete(t)}cHt(t){t.dv()&&(this.eHt=this.Qjt.map(t=>{const s=t.Q_();return s.yU()>0?Fv.jn(Fv.qS.mU,s):null}),this.fHt());for(const s of this.nHt)s.cHt(t)}KBt(t){if(t.length){this.Qjt=t.concat(this.Qjt);for(const s of t)this.sHt.set(s.Pc().toLowerCase(),s);for(let t=0,s=this.Qjt.length;t<s;++t)this.Qjt[t].X7(t)}}hHt(t,s){t.dHt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=Fv.jn(Fv.To);e.Sa(s),i[t]=e}}return i}WT(){return this.PT}yq(){return this.PT.yq()}F0(){Fv.wh(this.tHt);let t=!0;for(const s of this.Qjt)s.z_t()&&(this.tHt.push(s),s.Q_().Dx()||(t=!1));this.Sx=t}WX(){return this.Qjt}cUt(){return this.Qjt.length>0}tdt(t){return this.sHt.get(t.toLowerCase())||null}pHt(t){if((t=Math.floor(+t))<0||t>=this.Qjt.length)throw new RangeError("invalid effect type index");return this.Qjt[t]}E0(t){return this.pHt(t).z_t()}A0(t,s){this.pHt(t).dHt(s)}r9(){return this.tHt}ctt(){return this.tHt.length>0}Dx(){return this.Sx}Qft(t){return this.iHt[t]}l7(t){return t<this.eHt.length?this.eHt[t]:this.iHt[t]}O0(t,s){if(t<0||t>=this.iHt.length)return null;const i=this.iHt[t];return s<0||s>=i.length?null:i[s]}D0(t,s,i){if(t<0||t>=this.iHt.length)return!1;const e=this.iHt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof Fv.To){if(n.Ho(i))return!1;n.Lo(i)}else{if(n===i)return!1;e[s]=i}return t<this.eHt.length&&this.eHt[t].xU(s,i),!0}fHt(){const t=this.iHt,s=this.eHt;for(let i=0,e=Math.min(t.length,s.length);i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.xU(t,n[t])}}static mHt(t){return t&&t instanceof Fv.To?{t:"color",v:t.toJSON()}:t}static gHt(t){if(null===t)return NaN;if("object"==typeof t){if("color"===t.t){const s=Fv.jn(Fv.To);return s.Sa(t.v),s}throw new Error("invalid effect parameter type")}return t}static yHt(t){return t.map(Fv.r7.mHt)}static SHt(t){return t.map(Fv.r7.gHt)}bT(){return this.Qjt.map(t=>({name:t.Pc(),active:t.z_t(),params:Fv.r7.yHt(this.iHt[t.Gj()])}))}xT(t){for(const s of t){const t=this.tdt(s.name);t&&(t.dHt(s.active),this.iHt[t.Gj()]=Fv.r7.SHt(s.params))}this.F0(),this.fHt()}}}{const Ov=self._s;Ov.rHt=class extends Ov.Wn{constructor(t,s,i){super(),this.n7=t,this.Uc=s[0],this.$n=s[1],this.US=i,this.zx=null,this.Nf=!0}Hn(){this.n7=null,this.zx=null}YBt(t){const s=Ov.jn(Ov.rHt,t,[this.Uc,this.$n],-1);return s.zx=this.zx,s.Nf=this.Nf,s}cHt(t){const s=t.wv(this.Uc);if(!s)throw new Error("failed to find shader program '"+this.Uc+"'");this.zx=s}VX(){return this.n7}Pc(){return this.$n}X7(t){this.US=t}Gj(){return this.US}WT(){return this.n7.WT()}yq(){return this.n7.yq()}dHt(t){this.Nf=!!t}z_t(){return this.Nf}Q_(){return this.zx}wHt(){const t=[];for(let s=0,i=this.zx.tI();s<i;++s){const i=this.zx.sI(s);if("float"===i||"percent"===i)t.push(0);else{if("color"!==i)throw new TypeError("unknown effect parameter type");t.push(Ov.jn(Ov.To,1,1,1,1))}}return t}}}{const Dv=self._s;Dv.wzt=class extends Dv.Wn{constructor(t,s){super(),this.fi=t,this.vHt=s,this.n7=t.gX().VX(),this.bHt=!0,this.c7=!0,this.xHt=!1,this.THt=!1,this.MHt=!1,this.GHt=!1,this.bj=Dv.jn(Dv.qS.yW,t.yq().IJ().h7(),{hW:(t,s)=>{const i=s.dj(),e=i.LJ();t.Zx(e.o7()),t.Yv(e.YZ()),i.nM(t),t.Yv(0)},oW:t=>{const s=t.QLt(),[i,e]=t.ZLt();return{hj:s,oj:i,aj:e}},aW:t=>this.l7(t)}),this._Ht=[],this.tHt=[],this.Sx=!0,this.iHt=[],this.eHt=[],this.cHt(t.yq().Px());for(let t=0,s=this.n7.WX().length;t<s;++t)this._Ht.push(!0);this.F0(),this.n7.lHt(this)}Hn(){this.n7.uHt(this);for(const t of this.eHt)t&&t.Hn();Dv.wh(this.eHt),this.bj.Hn(),this.bj=null,Dv.wh(this._Ht),Dv.wh(this.tHt),Dv.wh(this.iHt),this.fi=null,this.n7=null}cHt(t){t.dv()&&(this.eHt=this.n7.WX().map(t=>{const s=t.Q_();return s.yU()>0?Dv.jn(Dv.qS.mU,s):null}))}Izt(t){let s=0;for(const i of t)this.iHt.push(this.hHt(s,i)),++s;this.fHt(),this.F0()}hHt(t,s){this._Ht[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=Dv.jn(Dv.To);e.Sa(s),i[t]=e}}return i}rVt(){for(const t of this.n7.WX())this.iHt.push(t.wHt());this.fHt()}WT(){return this.PT}VX(){return this.n7}Mj(){return this.e9(),this.bj}yq(){return this.fi.yq()}F0(){Dv.wh(this.tHt);const t=this.vHt,s=this.n7.WX(),i=this.tHt,e=this._Ht;let n=!0;for(let t=0,r=s.length;t<r;++t)if(e[t]){const e=s[t];i.push(e),e.Q_().Dx()||(n=!1)}this.Sx=n,t.qjt(!!i.length),this.bHt=!0}e9(){const t=this.fi,s=this.vHt,i=s.n9(),e=t.Q$().k$(),n=0!==s.$X()||0!==s.NJ().$X()||s.xy()<0||s.My()<0,r=t.ikt(),h=t.Ox();(this.bHt||i!==this.c7||e!==this.xHt||n!==this.THt||r!==this.MHt||h!==this.GHt||this.bj.uz())&&(this.bj.cz(this.tHt.map(t=>t.Q_()),{uW:this.tHt.map(t=>t.Gj()),cW:!i||h,dW:e,pW:r,mW:n}),this.bHt=!1,this.c7=i,this.xHt=e,this.THt=n,this.MHt=r,this.GHt=h)}r9(){return this.tHt}Qft(t){return this.iHt[t]}l7(t){return t<this.eHt.length?this.eHt[t]:this.iHt[t]}O0(t,s){if(t<0||t>=this.iHt.length)return null;const i=this.iHt[t];return s<0||s>=i.length?null:i[s]}D0(t,s,i){if(t<0||t>=this.iHt.length)return!1;const e=this.iHt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof Dv.To){if(n.Ho(i))return!1;n.Lo(i)}else{if(n===i)return!1;e[s]=i}return t<this.eHt.length&&this.eHt[t].xU(s,i),!0}fHt(){const t=this.iHt,s=this.eHt;for(let i=0,e=s.length;i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.xU(t,n[t])}}Dx(){return this.Sx}IHt(){return this.tHt.some(t=>t.Q_().Nx())}E0(t){return this._Ht[t]}A0(t,s){this._Ht[t]=!!s}WX(){return this.n7.WX()}Sst(){return this.n7.WX().map(t=>({name:t.Pc(),active:this._Ht[t.Gj()],params:Dv.r7.yHt(this.iHt[t.Gj()])}))}wst(t){for(const s of t){const t=this.n7.tdt(s.name);t&&(this._Ht[t.Gj()]=s.active,this.iHt[t.Gj()]=Dv.r7.SHt(s.params))}this.F0(),this.fHt()}}}{const Lv=self._s,kv=[],Nv=[],Bv=[],Uv=Lv.jn(Lv.au),Vv=Lv.jn(Lv.au),Wv=Lv.jn(Lv.Cl),zv=Lv.jn(Lv.Rect),jv=Lv.jn(Lv.Rect);let Hv=null,Jv=null,qv=null;Lv.CHt=class extends Lv.Wn{constructor(t){super(),this.Nc=t,this.PHt=0,this.RHt=0,this.EHt=[],this.AHt=0,this.FHt=0,this.OHt=0,this.DHt=0,this.LHt=new self.kq(this)}Hn(){this.Nc=null}yq(){return this.Nc}Ej(){return this.LHt}kHt(){this.FHt=this.AHt,this.AHt=0,this.DHt=this.OHt,this.OHt=0}NHt(){return this.FHt}BHt(){return this.DHt}UHt(t,s){const i=t.LJ(),e=s.LJ();i&&e&&i.gQ()&&e.gQ()&&this.EHt.push([t,s])}IFt(t,s,i){for(const[e,n]of this.EHt){let r=null;if(t===e)r=n;else{if(t!==n)continue;r=e}r.LFt(s)&&(i.includes(r)||i.push(r))}}CFt(t,s){if(!this.EHt.length)return!1;for(const[i,e]of this.EHt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}VHt(){Lv.wh(this.EHt)}Bq(t,s){if(!t||!s||t===s)return!1;const i=t.LJ(),e=s.LJ();if(!i.gQ()||!e.gQ())return!1;this.AHt++;const n=i.NJ(),r=e.NJ();return n.H9(r)?this.WHt(i,e):this.zHt(i,e)}WHt(t,s){if(!t.QZ().xl(s.QZ()))return!1;if(this.OHt++,!t.sQ().tu(s.sQ()))return!1;if(t.mVt()&&s.mVt())return!1;if(t.mVt())return this.jHt(t,s);if(s.mVt())return this.jHt(s,t);if(!t.Ojt()&&!s.Ojt())return!0;const i=t.Djt(),e=s.Djt();return i.bu(e,s.aT()-t.aT(),s.cT()-t.cT())}zHt(t,s){const i=t.mVt(),e=s.mVt();if(i&&!e)return this.HHt(t,s);if(e&&!i)return this.HHt(s,t);if(e||i)return!1;{const i=t.NJ(),e=s.NJ();Uv.m(t.Djt()),Vv.m(s.Djt());const n=Uv.du();for(let s=0,e=n.length;s<e;s+=2){const e=s+1,r=n[s],h=n[e],[o,a]=i.yK(r+t.aT(),h+t.cT());n[s]=o,n[e]=a}const r=Vv.du();for(let t=0,i=r.length;t<i;t+=2){const i=t+1,n=r[t],h=r[i],[o,a]=e.yK(n+s.aT(),h+s.cT());r[t]=o,r[i]=a}return Uv.yu(),Vv.yu(),this.OHt++,Uv.bu(Vv,0,0)}}HHt(t,s){const i=t.NJ(),e=s.NJ();Hv||(Hv=Lv.jn(Lv.au)),Jv||(Jv=Lv.jn(Lv.Rect)),qv||(qv=Lv.jn(Lv.Cl));const n=s.aT(),r=s.cT(),[h,o]=e.yK(n,r),[a,l]=i.mK(h,o),u=a-n,c=l-r;if(Jv.m(s.QZ()),Jv.offset(u,c),!t.QZ().xl(Jv))return!1;if(qv.m(s.sQ()),qv.offset(u,c),this.OHt++,!t.sQ().tu(qv))return!1;Hv.m(s.Djt());const f=Hv.du();for(let t=0,s=f.length;t<s;t+=2){const s=t+1;f[t]+=u,f[s]+=c}return Hv.yu(),this.jHt(t,s,a,l,Hv,Jv,qv)}jHt(t,s,i,e,n,r,h){const o=void 0!==r?r:s.QZ(),a=t.aT(),l=t.cT(),u=t.J1().m0(),c=void 0!==i?i:s.aT(),f=void 0!==e?e:s.cT(),d=s.Ojt(),p=void 0!==h?h:s.sQ(),m=Nv;u.JHt(o,m);for(let t=0,i=m.length;t<i;++t){const i=m[t],e=i.qHt();if(this.AHt++,o.Tl(e,a,l)&&(Wv.Xl(e),Wv.offset(a,l),Wv.tu(p)))if(d){const t=void 0!==n?n:s.Djt();let r=c,h=f;void 0!==n&&(r=s.aT(),h=s.cT());const o=i.$Ht();if(o){if(this.OHt++,o.bu(t,r-(a+e.Za()),h-(l+e.Qa())))return Lv.wh(m),!0}else if(Uv.wu(Wv,0,0),Uv.bu(t,r,h))return Lv.wh(m),!0}else{const t=i.$Ht();if(!t)return Lv.wh(m),!0;if(Uv.wu(p,0,0),t.bu(Uv,-(a+e.Za()),-(l+e.Qa())))return Lv.wh(m),!0}}return Lv.wh(m),!1}XHt(t,s,i){const e=t.cX(),n=this.Nc.fH();if(!n)throw new Error("cannot call outside event");const r=n.Mxt(),h=new Lv.YHt;if(e.oxt()){i||(e.pxt(!1),Lv.wh(e.mxt())),r&&Lv.wh(e.gxt());for(const n of t.uX()){const t=n.LJ(),o=t.NJ();let a=!1;if(h.LY(o)&&t.eQ()&&(a=s.some(([s,i])=>{const[e,n]=h.mK(o,s,i,t.YZ());return t.SQ(e,n)})),a){if(i)return!1;e.fxt(n)}else r&&e.dxt(n)}}else{let t,o=!1;r&&!n.fCt(this.Nc.mMt())?this.Nc.RAt()&&!e.gxt().length&&e.mxt().length?t=e.mxt():(t=e.gxt(),o=!0):t=e.mxt();let a=0;for(let n=0,l=t.length;n<l;++n){const l=t[n],u=l.LJ(),c=u.NJ();let f=!1;if(h.LY(c)&&u.eQ()&&(f=s.some(([t,s])=>{const[i,e]=h.mK(c,t,s,u.YZ());return u.SQ(i,e)})),f){if(i)return!1;o?e.fxt(l):t[a++]=l}else o?t[a++]=l:r&&e.dxt(l)}i||(t.length=a)}return t.JCt(),h.Hn(),!!i||e.axt()}KHt(t,s){if(!t)return!0;for(const i of s.AUt())if(!t.H9(i))return!1;return!0}PAt(t,s,i,e){if(s.pX())for(const n of s.kX())this.KHt(t,n)?(n.PUt(),n.IUt().n8(i,e)):Lv.An(e,n.uX());else this.KHt(t,s)?(s.PUt(),s.IUt().n8(i,e)):Lv.An(e,s.uX())}Xq(t,s,i,e){for(const n of s)this.PAt(t,n,i,e)}ZHt(t,s,i){const e=this.Nc.Kkt();e&&this.Xq(t,e.Znt(),s,i)}QHt(t,s,i){const e=this.Nc.Zkt();e&&this.Xq(t,e.Znt(),s,i)}wjt(t,s){return t.SVt()&&(!s||s.LJ().wjt(t))}Wq(t){const s=t.LJ();this.ZHt(s.NJ(),s.QZ(),kv);for(const s of kv)if(this.wjt(s,t)&&this.Bq(t,s))return Lv.wh(kv),s;return Lv.wh(kv),null}tJt(t,s){this.ZHt(null,t,kv);for(const i of kv)if(this.wjt(i,s)&&this.sJt(t,i))return Lv.wh(kv),i;return Lv.wh(kv),null}iJt(t,s){let i=null;s&&(i=Bv,Lv.wh(i));const e=t.LJ();this.QHt(e.NJ(),e.QZ(),kv);for(const e of kv)if(e.xVt()&&this.Bq(t,e)){if(!s)return Lv.wh(kv),e;i.push(e)}return Lv.wh(kv),i}eJt(t,s,i,e,n){e=e||50;const r=t.LJ(),h=r.aT(),o=r.cT();for(let a=0;a<e;++a)if(r.NZ(h+s*a,o+i*a),r.kZ(),!this.Bq(t,n))return!0;return r.NZ(h,o),r.kZ(),!1}nJt(t,s,i,e,n,r){e=e||50;const h=t.LJ(),o=h.aT(),a=h.cT();let l=null,u=null;for(let c=0;c<e;++c)if(h.NZ(o+s*c,a+i*c),h.kZ(),!this.Bq(t,l))if(l=this.Wq(t),l)u=l;else if(n&&(l=r?this.Bq(t,r)?r:null:this.iJt(t),l&&(u=l)),!l)return u&&this.rJt(t,s,i,u,16,!0),!0;return h.NZ(o,a),h.kZ(),!1}hJt(t,s,i,e){e=e||50;const n=t.LJ(),r=n.aT(),h=n.cT();let o=null,a=null;for(let l=0;l<e;++l)for(let e=0;e<2;++e){const u=2*e-1;if(n.NZ(r+s*l*u,h+i*l*u),n.kZ(),!this.Bq(t,o)){if(o=this.Wq(t),!o)return a&&this.rJt(t,s*u,i*u,a,16,!0),!0;a=o}}return n.NZ(r,h),n.kZ(),!1}rJt(t,s,i,e,n,r){let h=2,o=!1,a=!1;const l=t.LJ();let u=l.aT(),c=l.cT();for(;h<=n;){const n=1/h;h*=2,l.UZ(s*n*(o?1:-1),i*n*(o?1:-1)),l.kZ(),this.Bq(t,e)||r&&this.Wq(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.aT(),c=l.cT())}a&&(l.NZ(u,c),l.kZ())}oJt(t,s=100){let i=0;const e=t.LJ(),n=e.aT(),r=e.cT();let h=0,o=this.Wq(t);if(!o)return!0;for(;i<=s;){let s=0,a=0;switch(h){case 0:s=0,a=-1,i++;break;case 1:s=1,a=-1;break;case 2:s=1,a=0;break;case 3:s=1,a=1;break;case 4:s=0,a=1;break;case 5:s=-1,a=1;break;case 6:s=-1,a=0;break;case 7:s=-1,a=-1}if(h=(h+1)%8,e.NZ(Math.floor(n+s*i),Math.floor(r+a*i)),e.kZ(),!this.Bq(t,o)&&(o=this.Wq(t),!o))return!0}return e.NZ(n,r),e.kZ(),!1}aJt(t,s,i,e){const n=t.LJ(),r=n.aT(),h=n.cT(),o=Math.max(10,Lv.ir(s,i,r,h)),a=Lv.nr(s,i,r,h),l=e||this.Wq(t);if(!l)return Lv.Kn(a+Math.PI);let u=l,c=0,f=0;const d=Lv.Zn(5);let p;for(p=1;p<36;++p){const r=a-p*d;if(n.NZ(s+Math.cos(r)*o,i+Math.sin(r)*o),n.kZ(),!this.Bq(t,u)&&(u=e?null:this.Wq(t),!u)){c=r;break}}for(36===p&&(c=Lv.Kn(a+Math.PI)),u=l,p=1;p<36;++p){const r=a+p*d;if(n.NZ(s+Math.cos(r)*o,i+Math.sin(r)*o),n.kZ(),!this.Bq(t,u)&&(u=e?null:this.Wq(t),!u)){f=r;break}}if(36===p&&(f=Lv.Kn(a+Math.PI)),n.NZ(r,h),n.kZ(),f===c)return f;const m=Lv.rr(f,c)/2;let g;g=Lv.ar(f,c)?Lv.Kn(c+m+Math.PI):Lv.Kn(f+m);const y=Math.cos(a),S=Math.sin(a),w=Math.cos(g),v=Math.sin(g),b=y*w+S*v,x=y-2*b*w,T=S-2*b*v;return Lv.nr(0,0,x,T)}lJt(t,s,i,e,n){if(!n)return!1;const r=n.LJ();return!!r.gQ()&&(this.AHt++,zv.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!!r.QZ().xl(zv)&&(n.mVt()?this.uJt(t,s,i,e,n,r):(this.OHt++,!!r.sQ().Ql(t,s,i,e)&&(!r.Ojt()||r.Djt().Ql(r.aT(),r.cT(),t,s,i,e)))))}uJt(t,s,i,e,n,r){const h=r.aT(),o=r.cT(),a=n.m0(),l=Nv;jv.set(t,s,i,e),jv.normalize(),a.JHt(jv,l);for(let n=0,r=l.length;n<r;++n){const r=l[n],a=r.qHt();if(this.AHt++,zv.Tl(a,h,o)&&(Wv.Xl(a),Wv.offset(h,o),Wv.Ql(t,s,i,e))){const n=r.$Ht();if(!n)return Lv.wh(l),!0;if(this.OHt++,n.Ql(h+a.Za(),o+a.Qa(),t,s,i,e))return Lv.wh(l),!0}}return Lv.wh(l),!1}sJt(t,s){if(!s)return!1;const i=s.LJ();if(!i.gQ())return!1;if(this.AHt++,!i.QZ().xl(t))return!1;if(s.mVt())return this.cJt(t,s,i);if(this.OHt++,Wv.Xl(t),!i.sQ().tu(Wv))return!1;if(!i.Ojt())return!0;const e=Uv;e.Xl(t,i.aT(),i.cT());const n=i.Djt();return e.bu(n,0,0)}cJt(t,s,i){const e=i.aT(),n=i.cT(),r=s.m0(),h=Nv;r.JHt(t,h);for(let s=0,i=h.length;s<i;++s){const i=h[s],r=i.qHt();if(this.AHt++,t.Tl(r,e,n)){const s=i.$Ht();if(!s)return Lv.wh(h),!0;if(this.OHt++,Uv.Xl(t,0,0),s.bu(Uv,-(e+r.Za()),-(n+r.Qa())))return Lv.wh(h),!0}}return Lv.wh(h),!1}fJt(t,s){if(!t)return;const i=t.LJ();i.gQ()&&(this.AHt++,i.QZ().xl(s.rect)&&(t.mVt()?this.dJt(t,i,s):(this.OHt++,i.Ojt()?s.pJt(t,i.aT(),i.cT(),i.Djt()):s.mJt(t,i.sQ()))))}dJt(t,s,i){const e=s.aT(),n=s.cT(),r=Nv;t.m0().JHt(i.rect,r);for(let h=0,o=r.length;h<o;h++){const o=r[h],a=o.qHt();if(this.AHt++,i.rect.Tl(a,e,n)){const r=o.$Ht();this.OHt++,r?i.pJt(t,e+a.Za(),n+a.Qa(),r):i.gJt(t,s.aT(),s.cT(),a)}}Lv.wh(r)}jq(t,s){if(t===this.PHt&&s===this.RHt)return;this.PHt=t,this.RHt=s;const i=this.Nc.J7();for(const e of i)if(e.P$()){for(const t of e.lX())t.LJ().yjt();e.IUt().yJt(t,s),e.CUt();for(const t of e.lX()){const s=t.LJ();s.Jjt(),s.RUt()}}}Jq(){return[this.PHt,this.RHt]}SJt(t,s){this.PHt=t,this.RHt=s}}}{const $v=self._s;$v.hBt=class extends $v.Wn{constructor(t,s){super(),this.K6=t,this.Z6=s,this.Q6=$v.jn($v.Iu)}Hn(){this.Q6.Hn(),this.Q6=null}yJt(t,s){if(!this.Q6.Ru())throw new Error("grid not empty");this.K6=t,this.Z6=s}t8(t,s,i){let e=this.Q6.Hs(t,s);return e||(i?(e=$v.jn($v.wJt,this,t,s),this.Q6.Set(t,s,e),e):null)}s8(t){const s=Math.floor(t/this.K6);return isFinite(s)?s:0}i8(t){const s=Math.floor(t/this.Z6);return isFinite(s)?s:0}e8(t,s,i){if(s)for(let e=s.Za(),n=s.tl();e<=n;++e)for(let n=s.Qa(),r=s.sl();n<=r;++n){if(i&&i.Ml(e,n))continue;const s=this.t8(e,n,!1);s&&(s.Kf(t),s.Ru()&&this.Q6.Eu(e,n))}if(i)for(let e=i.Za(),n=i.tl();e<=n;++e)for(let n=i.Qa(),r=i.sl();n<=r;++n)s&&s.Ml(e,n)||this.t8(e,n,!0).J6(t)}n8(t,s){let i=this.s8(t.Za());const e=this.i8(t.Qa()),n=this.s8(t.tl()),r=this.i8(t.sl());if(isFinite(n)&&isFinite(r))for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this.t8(i,t,!1);e&&e.X6(s)}}}}{const Xv=self._s;Xv.wJt=class extends Xv.Wn{constructor(t,s,i){super(),this.B6=t,this.Pa=s,this.Ra=i,this.U6=Xv.jn(Xv.Du)}Hn(){this.U6.Hn(),this.U6=null,this.B6=null}Ru(){return this.U6.Ru()}J6(t){this.U6.Bu(t)}Kf(t){this.U6.Eu(t)}X6(t){Xv.An(t,this.U6.Uu())}}}{const Yv=self._s,Kv=1e-6;Yv.vJt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Yv.Rect,this.bJt=2,this.xJt=null,this.TJt=0,this.MJt=0,this.GJt=0,this._Jt=0,this.IJt=0,this.vt=0,this.CJt=1,this.PJt=0,this.RJt=1,this.EJt=0}AJt(){return this.bJt<1.000001}Bf(){this.bJt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.bJt=2,this.xJt=null,this.TJt=0,this.MJt=0,this.GJt=0,this._Jt=0,this.IJt=0,this.vt=0,this.CJt=1,this.PJt=0,this.RJt=1,this.EJt=0,this}FJt(){if(!1===this.AJt())return;const t=this.dx*this.bJt,s=this.dy*this.bJt,i=Yv.tr(t,s),e=t/i,n=s/i;this.vt=i-Kv,this._Jt=this.x1+e*this.vt,this.IJt=this.y1+n*this.vt,this.TJt=Math.atan2(this.GJt,this.MJt)+Math.PI/2,this.CJt=Math.cos(this.TJt),this.PJt=Math.sin(this.TJt);const r=e*this.CJt+n*this.PJt;if(this.RJt=e-2*this.CJt*r,this.EJt=n-2*this.PJt*r,r>0){const t=Math.PI;this.TJt=Yv.Kn(this.TJt+t),this.CJt=-this.CJt,this.PJt=-this.PJt}}OJt(t,s,i,e,n){const r=Yv.qr(this.x1,this.y1,this.x2,this.y2,s,i,e,n);r>=0&&r<this.bJt&&(this.bJt=r,this.xJt=t.LK(),this.MJt=s-e,this.GJt=i-n)}gJt(t,s,i,e){const n=s+e.Za(),r=s+e.tl(),h=i+e.Qa(),o=i+e.sl();this.OJt(t,n,h,r,h),this.OJt(t,r,h,r,o),this.OJt(t,r,o,n,o),this.OJt(t,n,o,n,h)}mJt(t,s){const i=s.Nr(),e=s.Br(),n=s.Ur(),r=s.Vr(),h=s.Wr(),o=s.zr(),a=s.jr(),l=s.Hr();this.OJt(t,i,e,n,r),this.OJt(t,n,r,h,o),this.OJt(t,h,o,a,l),this.OJt(t,a,l,i,e)}pJt(t,s,i,e){const n=e.du();for(let e=0,r=n.length;e<r;e+=2){const h=(e+2)%r,o=n[e]+s,a=n[e+1]+i,l=n[h]+s,u=n[h+1]+i;this.OJt(t,o,a,l,u)}}}}{const Zv=self._s;Zv.YHt=class{constructor(){this.DJt=new Map}Hn(){for(const t of this.DJt.values())t.LJt.Pu();this.DJt.clear()}kJt(t){let s=this.DJt.get(t);return void 0===s&&(s={DY:null,LJt:new Zv.Iu},this.DJt.set(t,s)),s}LY(t){const s=this.kJt(t);return null===s.DY&&(s.DY=t.WY()),s.DY}mK(t,s,i,e){if(0!==e)return t.mK(s,i,e);const n=this.kJt(t);let r=n.LJt.Hs(s,i);return void 0===r&&(r=t.mK(s,i,e),n.LJt.Set(s,i,r)),r}}}{const Qv=self._s,tb=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),sb=new Set(["high","low"]),ib=self.hs,eb=ib.fs,nb=(ib.ys,eb.create()),rb=Qv.jn(Qv.Cl),hb=Qv.jn(Qv.Rect);Qv.NJt=class extends Qv.Wn{constructor(t){super(),this.Nc=t,this.BJt=[],this.UJt=!1,this.VJt=null,this.WJt=null,this.zJt=null,this.jJt="high-performance",this.HJt=!1,this.JJt="auto",this.qJt=0,this.$Jt=0,this.XJt="",this.YJt=0,this.KJt=0,this.ZJt=0,this.QJt=0,this.tqt=0,this.sqt=0,this.mw="normalized",this.iqt=0,this.eqt=1,this.nqt=1e4,this.Jw=!0,this.rqt=0,this.zW=0,this.jW=0,this.hqt="letterbox-scale",this.oqt="letterbox-scale",this.aqt=0,this.lqt=0,this.uqt=eb.create(),this.cqt="high",this.fqt=this.cqt,this.dqt=!1,this.pqt=[],this.mqt=new Set,this.gqt=self.C3_Shaders,this.yqt=Qv.jn(Qv.qS.JV,{WV:()=>[this.Itt(),this.Ctt()],zV:()=>this.Sqt(),jV:t=>this.wqt(t),getTime:()=>this.yq().FH(),HV:()=>this.yq().jJ()}),this.vqt=0,this.bqt=0,this.xqt=NaN,this.Tqt=null,this.Mqt=new Map,this.Gqt=NaN,this._qt=new Map,this.Iqt="",this.Cqt=1,this.Pqt=Qv.jn(Qv.Rect),this.Rqt="",this.Eqt=null,this.Aqt=null,this.Fqt=0,this.Oqt=0,this.Dqt=-1,this.Lqt=0,this.kqt=t=>this.Lqt=t.progress,this.Nqt=null,this.Bqt={Uqt:null,Vqt:null,Wqt:null},this.zqt=0,this.jqt=0,this.Hqt=0,this.Jqt="fade-in",this.qqt=null,this.$qt=new Promise(t=>this.qqt=t)}Xqt(t){this.jJt=t}Yqt(t){this.UJt=!!t}Kqt(t){this.mw=t}Zqt(){return this.mw}Qqt(t){this.iqt=t}t$t(t,s){this.eqt=t,this.nqt=s}s$t(t){this.HJt=!!t}i$t(t){this.JJt=t}async uo(t){let s=t.canvas;this.BJt.push({canvas:s,e$t:null}),this.Nc.cZ("runtime","window-resize",t=>this.n$t(t)),this.Nc.cZ("runtime","fullscreenchange",t=>this.r$t(t)),this.Nc.cZ("runtime","fullscreenerror",t=>this.h$t(t)),s.addEventListener("webglcontextlost",t=>this.o$t(t)),s.addEventListener("webglcontextrestored",t=>this.a$t(t)),this.dqt=!!t.isFullscreen,this.XJt=t.cssDisplayMode;const i=navigator.gpu&&this.UJt;let e=!1;if(i)try{await this.l$t(!0)}catch(t){this.u$t("WebGPU",t),this.WJt=null}if(!this.Px())try{await this.c$t(!0)}catch(t){this.u$t("WebGL",t),this.VJt=null}if(this.Px()||(e=!0),!this.Px()&&i)try{await this.l$t(!1)}catch(t){this.u$t("WebGPU",t),this.WJt=null}if(!this.Px())try{await this.c$t(!1)}catch(t){this.u$t("WebGL",t),this.VJt=null}const n=this.Px();if(!n)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");n.Jb(e),this.WJt&&(this.WJt.HL=()=>this.f$t(),this.WJt.JL=()=>this.d$t()),"normalized"===this.mw?n.lv():(n.uv(),n.ov(this.iqt)),this.QR(t.windowInnerWidth,t.windowInnerHeight,!0),await this.cHt()}u$t(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async l$t(t){const s={aw:this.eqt,lw:this.nqt};let i=!0;"no"===this.JJt?i=!1:"auto"===this.JJt&&(i=Qv.Ks.ri);let e="nearest";this.Nc.p$t()&&"nearest"!==this.Nc.CV()&&(e="bilinear");const n={powerPreference:this.jJt,depth:this.Nc.A9(),failIfMajorPerformanceCaveat:t,$O:this.Nc.Ltt(),JO:this.Nc.p$t(),qO:e,lA:this.Nc.m$t(),XO:i};this.WJt=Qv.jn(Qv.qS.YO,s),await this.WJt.KG(this.BJt[0].canvas,n)}async c$t(t){const s={alpha:!0,powerPreference:this.jJt,aA:"xbox-uwp-webview2"!==this.Nc.s$(),depth:this.Nc.A9(),lA:this.Nc.m$t(),failIfMajorPerformanceCaveat:t,aw:this.eqt,lw:this.nqt};this.HJt&&(s.uA=1),this.VJt=Qv.jn(Qv.qS.dA,this.BJt[0].canvas,s),await this.VJt.Yw()}async g$t(){if(this.gqt){const t=[];for(const[s,i]of Object.entries(this.gqt)){i.src=i.y$t;const e=Qv.qS.xD.vI(this.WJt.n_());t.push(this.WJt.wF(Object.assign({$G:e,name:s},i)))}await Promise.all(t)}}async S$t(){if(this.gqt){const t=[];for(const[s,i]of Object.entries(this.gqt)){let e;if(i.w$t&&this.VJt.LM()>=2)i.src=i.w$t,e=Qv.qS.JG.bI();else{if(!i.v$t)throw new Error(`shader '${s}' does not support WebGL 1`);i.src=i.v$t,e=Qv.qS.JG.vI()}t.push(this.VJt.wF(Object.assign({$G:e,name:s},i)))}await Promise.all(t),this.VJt.vF(),this.VJt.bv()}this.VJt.DO()&&(this.Tqt=Qv.jn(Qv.qS.ZE,this.VJt))}async cHt(){this.WJt?await this.g$t():this.VJt&&await this.S$t();const t=this.Px();t.jb(this.Jw),t.DO()&&(this.xqt=0);for(const s of this.Nc.b$t()){for(const i of s.WX())i.cHt(t);s.cHt(t),s.F0()}this.zJt=new self.j3(this.Nc,t)}Hn(){this.Nc=null,this.VJt=null,this.BJt.length=0}qj(){return this.Nc.qj()}n$t(t){const s=this.Nc;if(s.x$t())return;const i=t.devicePixelRatio;this.qj()&&(self.devicePixelRatio=i),s.T$t(i),this.dqt=!!t.isFullscreen,this.XJt=t.cssDisplayMode,this.QR(t.innerWidth,t.innerHeight),s.jJ();const e=new Qv.Event("window-resize");e.data=t,s.Sf().Cf(e);const n=new Qv.Event("resize");n.M$t=this.c$(),n.G$t=this.d$(),n._$t=this.m$(),n.I$t=this.y$(),s.s6(n),this.Nc.OJ()?.lst(),s.gZ()&&(s.sGt()||self.yZ.C$t())&&s.bz()}r$t(t){this.dqt=!!t.isFullscreen,this.QR(t.innerWidth,t.innerHeight,!0),this.Nc.jJ()}h$t(t){this.dqt=!!t.isFullscreen,this.QR(t.innerWidth,t.innerHeight,!0),this.Nc.jJ()}QR(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.qJt===t&&this.$Jt===s&&!i)return;this.qJt=t,this.$Jt=s;const e=this.P$t();"letterbox-scale"===e?this.R$t(t,s):"letterbox-integer-scale"===e?this.E$t(t,s):"off"===e?this.A$t(t,s):this.F$t(t,s),this.O$t(e);for(const{canvas:t}of this.BJt)t.width=this.ZJt,t.height=this.QJt;this.Nc.Vc("canvas","update-size",{marginLeft:this.tqt,marginTop:this.sqt,styleWidth:this.YJt,styleHeight:this.KJt,displayScale:this.j2()});const n=this.Px();n.QR(this.ZJt,this.QJt,!0);for(const t of this.pqt)n.PO(t);Qv.wh(this.pqt),this.D$t();const r=this.Nc.mJ();r.Ket(),r.Zet()}D$t(){this.Px().fv(this.uqt,this.Itt()/this.Ctt())}Ptt(){return this.uqt}R$t(t,s){const i=this.Nc.S$(),e=this.Nc.Xj(),n=this.Nc.Kj(),r=e/n;if(t/s>r){const i=s*r;this.YJt=Math.round(i),this.KJt=s,this.tqt=Math.floor((t-this.YJt)/2),this.sqt=0}else{const i=t/r;this.YJt=t,this.KJt=Math.round(i),this.tqt=0,this.sqt=Math.floor((s-this.KJt)/2)}this.ZJt=Math.round(this.YJt*i),this.QJt=Math.round(this.KJt*i),this.Nc.L$t(e,n)}E$t(t,s){const i=this.Nc.S$();1!==i&&(t+=1,s+=1);const e=this.Nc.Xj(),n=this.Nc.Kj(),r=e/n;let h;h=t/s>r?s*r*i/e:t/r*i/n,h>1?h=Math.floor(h):h<1&&(h=1/Math.ceil(1/h)),this.ZJt=Math.round(e*h),this.QJt=Math.round(n*h),this.YJt=this.ZJt/i,this.KJt=this.QJt/i,this.tqt=Math.max(Math.floor((t-this.YJt)/2),0),this.sqt=Math.max(Math.floor((s-this.KJt)/2),0),this.Nc.L$t(e,n)}F$t(t,s){const i=this.Nc.S$();this.YJt=t,this.KJt=s,this.ZJt=Math.round(this.YJt*i),this.QJt=Math.round(this.KJt*i),this.tqt=0,this.sqt=0;const e=this.j2();this.Nc.L$t(this.YJt/e,this.KJt/e)}A$t(t,s){const i=this.Nc.S$();this.YJt=this.Nc.x9(),this.KJt=this.Nc.T9(),this.ZJt=Math.round(this.YJt*i),this.QJt=Math.round(this.KJt*i),this.k$t()?(this.tqt=Math.floor((t-this.YJt)/2),this.sqt=Math.floor((s-this.KJt)/2)):(this.tqt=0,this.sqt=0),this.Nc.L$t(this.Nc.x9(),this.Nc.T9())}O$t(t){if("high"===this.cqt)this.zW=this.ZJt,this.jW=this.QJt,this.fqt="high";else{let s,i;if("off"===this.P$t()?(s=this.Nc.x9(),i=this.Nc.T9()):(s=this.Nc.Xj(),i=this.Nc.Kj()),this.ZJt<s||this.QJt<i)this.zW=this.ZJt,this.jW=this.QJt,this.fqt="high";else if(this.zW=s,this.jW=i,this.fqt="low","scale-inner"===t){const t=s/i,e=this.qJt/this.$Jt;e<t?this.zW=this.jW*e:e>t&&(this.jW=this.zW/e)}else if("scale-outer"===t){const t=s/i,e=this.qJt/this.$Jt;e>t?this.zW=this.jW*e:e<t&&(this.jW=this.zW/e)}}}yq(){return this.Nc}N$t(){return this.BJt[0].canvas}h7(){return this.yqt}k$t(){return this.dqt}B$t(){return this.XJt}U$t(t){if(!tb.has(t))throw new Error("invalid fullscreen mode");this.hqt=t;const s=this.Nc.mJ();s.Ket(),s.Zet()}z2(){return this.hqt}V$t(t){if(!tb.has(t))throw new Error("invalid fullscreen mode");this.oqt=t;const s=this.Nc.mJ();s.Ket(),s.Zet()}W$t(){return this.oqt}P$t(){return this.k$t()?this.W$t():this.z2()}z$t(t){if(!sb.has(t))throw new Error("invalid fullscreen scaling quality");this.cqt=t,this.Nc.mJ().Ket()}j$t(){return this.cqt}ktt(){return this.fqt}static H$t(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}P2(){return this.qJt}R2(){return this.$Jt}Itt(){return this.zW}Ctt(){return this.jW}jb(t){this.Jw=!!t}J$t(){return this.Jw}q$t(t){this.rqt=t}E6(){return this.rqt}$$t(){return this.Px().PE()}o$t(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.pqt=[],this.mqt.clear(),this.yqt.Qx(),this.VJt.Qx(),this.Nc.Lit()}f$t(){console.log("[Construct] WebGPU device lost"),this.pqt=[],this.mqt.clear(),this.yqt.Qx(),this.Nc.Lit()}async a$t(t){await this.VJt.tT(),await this.cHt(),await this.Nc.X$t(),console.log("[Construct] WebGL context restored")}async d$t(){await this.cHt(),await this.Nc.X$t(),console.log("[Construct] WebGPU device restored")}Y$t(){return this.VJt}K$t(){return this.WJt}Px(){return this.WJt||this.VJt}_J(){return this.zJt}e$(){let t="";return t=this.Nc.K$t()?"webgpu":"webgl"+this.Nc.Y$t().LM(),this.Nc.Px().qb()&&(t+="-software"),t}r$(){return this.Nc.K$t()?this.Nc.K$t().WB():this.Nc.Y$t().WO()}TK(){return"low"===this.fqt?1/this.Nc.S$():this.j2()}j2(){const t=this.P$t();if("off"===t||"crop"===t)return 1;const s=this.Nc.Xj(),i=this.Nc.Kj(),e=s/i,n=this.ZJt/this.QJt;return"scale-inner"!==t&&n>e||"scale-inner"===t&&n<e?this.KJt/i:this.YJt/s}ost(){return"low"===this.ktt()?1:this.j2()}rst(){return"low"===this.ktt()?1:this.Nc.S$()}Z$t(t,s){this.aqt=t,this.lqt=s}B4(t,s,i,e=!0){s=s||this.zW,i=i||this.jW;const n=s/2+this.aqt,r=i/2+this.lqt;if(e){let e=this.Ptt();s===this.zW&&i===this.jW||(t.fv(nb,s/i),e=nb),t.xF(e)}const h=t.gv(n,r,t.Zw(i),n,r,0,i);t.CF(h)}Q$t(t,s=!0){const i=this.c$(),e=this.d$(),n=i/2,r=e/2;s&&t.xF(this.Ptt());const h=t.gv(n,r,t.Zw(e),n,r,0,e);t.CF(h)}m$(){return this.ZJt}y$(){return this.QJt}c$(){return this.YJt}d$(){return this.KJt}o$(){return this.tqt}l$(){return this.sqt}wit(){return this.BJt.length}tXt(){return"undefined"!=typeof OffscreenCanvas&&this.N$t()instanceof OffscreenCanvas&&("Chromium"!==Qv.Ks.ei||Qv.Ks.ii>=124)}async Vit(t,s=!1){if(t<1)throw new Error("invalid HTML layer count");if(this.BJt.length===t)return;const i={count:t,layersDomState:this.Nc.mJ().fJ().Q7().filter(t=>t.BY()).map(t=>t.itt()),immediate:s,marginLeft:this.tqt,marginTop:this.sqt,styleWidth:this.YJt,styleHeight:this.KJt};let e;if(e=this.qj()?await this.Nc.ZJ("canvas","set-html-layer-count",i):self.c3_runtimeInterface._OnSetHTMLLayerCount(i),t<this.BJt.length)this.BJt.length=t;else for(const t of e.addedCanvases){t.width=this.ZJt,t.height=this.QJt;const s=this.tXt()?"bitmaprenderer":"2d",i=t.getContext(s);if(!i)throw new Error(`failed to acquire '${s}' canvas context`);this.BJt.push({canvas:t,e$t:i})}this.Nc.jJ()}Aet(t){if(t>=this.BJt.length)return;const s=this.N$t(),i=this.BJt[t].e$t;this.tXt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}Ntt(t){t.depth=this.Nc.A9();const s=this.pqt,i=s.findIndex(s=>s.UG(t));let e;return-1!==i?(e=s[i],s.splice(i,1)):e=this.Px().MO(t),this.mqt.add(e),e}a7(t){if(!this.mqt.has(t))throw new Error("render target not in use");this.mqt.delete(t),this.pqt.push(t)}Sqt(){const t={gM:this.Nc.CV()};return"low"===this.ktt()&&(t.width=this.Itt(),t.height=this.Ctt()),this.Ntt(t)}wqt(t){this.a7(t)}*sXt(){for(const t of this.Nc.mJ().$et())for(const s of t.rY()){const t=this.Mqt.get(s);t&&(yield t)}}Ftt(t){if(!this.Px().DO())return null;let s=this.Mqt.get(t);return s||(s={LZ:t,name:t.Pc(),iXt:Qv.jn(Qv.qS.ZE,this.VJt),eXt:0,nXt:0,rXt:0},this.Mqt.set(t,s)),s.iXt}hXt(){const t=this.Px();if(t.DO()&&0===this.bqt){this.bqt=t.Wb(),this.Gqt=NaN;for(const t of this.sXt())t.eXt=NaN}}oXt(){this.VJt&&this.VJt.DO()&&this.aXt(),this.WJt&&this.WJt.DO()&&this.lXt()}aXt(){if(isNaN(this.Gqt)&&(this.Gqt=this.Tqt.rA(this.vqt,this.bqt),!isNaN(this.Gqt))){if(this.Nc.gZ())for(const t of this.sXt())if(t.eXt=t.iXt.rA(this.vqt,this.bqt),isNaN(t.eXt))return;if(this.Tqt.hA(this.bqt),this.xqt=Math.min(this.Gqt,1),this.Nc.gZ()){const t=new Map;for(const s of this.sXt())s.iXt.hA(this.bqt),s.nXt=Math.min(s.eXt,1),t.set(s.LZ,s.nXt);for(const s of this.sXt()){const i=s.LZ,e=(t.get(i)||0)-i.CY().reduce((s,i)=>s+(t.get(i)||0),0);s.rXt=Qv.Yn(e,0,1)}const s=this.Nc.fJ(),i=this.xqt-s.Q7().reduce((s,i)=>s+(t.get(i)||0),0);self.yZ.uXt(Qv.Yn(i,0,1),this.xqt,[...this.sXt()])}this.vqt=this.bqt,this.bqt=0}}cXt(){return this.Tqt}lXt(){if(0===this.bqt)return;for(let t=this.vqt;t<this.bqt;++t){const s=this._qt.get(t);if(s&&!s.VE())return}const t=this.Nc.fJ(),s=Qv.xo(t.dit()+1,0);let i=0;for(let t=this.vqt;t<this.bqt;++t){const e=this._qt.get(t);if(!e)continue;const n=e.WE();let r=BigInt(0),h=BigInt(0);const o=BigInt(0);for(let t=0,i=Math.min(s.length,n.length/2);t<i;++t){const i=n[2*t],e=n[2*t+1];i!==o&&(r===o||i<r)&&(r=i),e>h&&(h=e);const a=Number(e-i)/1e9;s[t]+=a}i+=Number(h-r)/1e9}if(this.xqt=Qv.Yn(i,0,1),this.Nc.gZ()){const i=t.rY(),e=new Map;for(let t=0,n=Math.min(i.length,s.length-1);t<n;++t){const n=s[t+1];e.set(i[t],n)}const n=[],r=new Map;for(const[t,s]of e){const i=[...t.RY()].reduce((t,s)=>t+(e.get(s)||0),0);r.set(t,i),n.push({name:t.Pc(),rXt:Qv.Yn(s,0,1),nXt:Qv.Yn(i,0,1)})}const h=this.xqt-t.Q7().reduce((t,s)=>t+(r.get(s)||0),0);self.yZ.uXt(Qv.Yn(h,0,1),this.xqt,n)}for(let t=this.vqt;t<this.bqt;++t)this._qt.delete(t);this.vqt=this.bqt,this.bqt=0}fXt(t){this._qt.set(this.WJt.Wb(),t)}$H(){return this.xqt}nq(t,s,i,e,n,r){return this.Iqt=t,this.Cqt=s,this.Pqt.ja(i,e,n,r),this.Eqt||(this.Eqt=new Promise(t=>{this.Aqt=t})),this.Eqt}dXt(){if(!this.Iqt)return;let t=this.N$t();const s=this.Pqt,i=Qv.Yn(Math.floor(s.Za()),0,t.width),e=Qv.Yn(Math.floor(s.Qa()),0,t.height);let n=s.width();n=0===n?t.width-i:Qv.Yn(Math.floor(n),0,t.width-i);let r=s.height();if(r=0===r?t.height-e:Qv.Yn(Math.floor(r),0,t.height-e),(0!==i||0!==e||n!==t.width||r!==t.height)&&n>0&&r>0){const s=Qv.uo(n,r);s.getContext("2d").drawImage(t,i,e,n,r,0,0,n,r),t=s}Qv.co(t,this.Iqt,this.Cqt).then(t=>{this.Rqt&&URL.revokeObjectURL(this.Rqt),this.Rqt=URL.createObjectURL(t),this.Eqt=null,this.Aqt(t)}),this.Iqt="",this.Cqt=1}pXt(){return this.Rqt}mXt(t){t?this.Fqt++:this.Fqt--}gXt(){return this.Fqt>0}yXt(t){const s=this.Px();if(2===t)this.Nqt=Qv.jn(Qv.qS.tx,this.Px()),this.Nqt.IR("Arial"),this.Nqt.CR(16),this.Nqt.WR("center"),this.Nqt.jR("center"),this.Nqt.QR(300,200);else if(0===t){const t=this.Nc.SXt();t&&t.P4(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.wXt("splash-images/splash-logo.svg").then(t=>{"done"===this.Jqt?s.MG(t):this.Bqt.Uqt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.vXt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.Jqt?s.MG(t):this.Bqt.Vqt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.vXt("splash-images/splash-website-512.png").then(t=>{"done"===this.Jqt?s.MG(t):this.Bqt.Wqt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async wXt(t){t=new URL(t,this.Nc.bXt()).toString();const s=await Qv.eo(t),i=await this.Nc.xXt(s,2048,2048);return await this.Px().TO(i,{vM:"high"})}async vXt(t){t=new URL(t,this.Nc.bXt()).toString();const s=await Qv.eo(t);return await this.Px().TO(s,{vM:"high"})}TXt(){this.Nc.Vc("runtime","hide-cordova-splash")}MXt(){this.Oqt=Date.now(),this.Nc.Sf().addEventListener("loadingprogress",this.kqt),this.Dqt=requestAnimationFrame(()=>this.GXt()),3!==this.Nc._Xt()&&this.TXt()}async IXt(){const t=this.Px();this.Lqt=1;const s=this.Nc._Xt();4===s&&await this.$qt,this.qqt=null,this.$qt=null,-1!==this.Dqt&&(cancelAnimationFrame(this.Dqt),this.Dqt=-1),this.Nc.Sf().removeEventListener("loadingprogress",this.kqt),this.kqt=null,this.Nqt&&(this.Nqt.Hn(),this.Nqt=null),this.Nc.CXt(),t.dO(),this.Bqt.Uqt&&(t.MG(this.Bqt.Uqt),this.Bqt.Uqt=null),this.Bqt.Vqt&&(t.MG(this.Bqt.Vqt),this.Bqt.Vqt=null),this.Bqt.Wqt&&(t.MG(this.Bqt.Wqt),this.Bqt.Wqt=null),t.fO(0,0,0,0),t.Ub(),this.Jqt="done",this.vqt=t.Wb(),3===s&&this.TXt()}GXt(){if(-1===this.Dqt)return;const t=this.Px();t.dO(),this.Dqt=-1;const s=this.Nc.Pj().t6(),i=this.Nc._Xt();if(3!==i&&(this.Q$t(t),t.fO(0,0,0,0),t.LF(),t.bv(),t.NF(null)),0===i)this.PXt(s);else if(1===i)this.RXt(s,120,0);else if(2===i)this.EXt(s);else if(3===i)Qv.mh();else{if(4!==i)throw new Error("invalid loader style");this.AXt(s)}t.Ub(),this.Dqt=requestAnimationFrame(()=>this.GXt())}EXt(t){t?this.Nqt.VR(1,0,0):this.Nqt.VR(.6,.6,.6),this.Nqt.Wc(Math.round(100*this.Lqt)+"%");const s=this.YJt/2,i=this.KJt/2;rb.kl(s-150,i-100,s+150,i+100);const e=this.Px();e.NF(this.Nqt.EG()),e.ob(rb,this.Nqt.EE())}RXt(t,s,i){const e=this.Px();e.Iv(),t?e.OF(1,0,0,1):e.OF(.118,.565,1,1);const n=this.YJt/2,r=this.KJt/2,h=s/2;hb.ja(n-h,r-4+i,Math.floor(s*this.Lqt),8),e.Rect(hb),hb.ja(n-h,r-4+i,s,8),hb.offset(-.5,-.5),hb.cl(.5,.5),e.OF(0,0,0,1),e.fb(hb),hb.cl(1,1),e.OF(1,1,1,1),e.fb(hb)}PXt(t){const s=this.Px(),i=this.Nc.SXt();if(!i)return void this.RXt(t,120,0);const e=i.EG();if(!e)return void this.RXt(t,120,0);const n=e.xy(),r=e.My(),h=this.YJt/2,o=this.KJt/2,a=n/2,l=r/2;rb.kl(h-a,o-l,h+a,o+l),s.NF(e),s.Cl(rb),this.RXt(t,n,l+16)}AXt(t){const s=this.Px(),i=this.Bqt.Uqt,e=this.Bqt.Vqt,n=this.Bqt.Wqt,r=Date.now();0===this.zqt&&(this.Oqt=r);const h=this.Nc.FXt()||this.Nc.OXt()&&!this.Nc.DXt(),o=h?0:200,a=h?0:3e3;let l=1;"fade-in"===this.Jqt?l=Math.min((r-this.Oqt)/300,1):"fade-out"===this.Jqt&&(l=Math.max(1-(r-this.Hqt)/300,0)),s.Iv(),s.OF(.231*l,.251*l,.271*l,l),hb.set(0,0,this.YJt,this.KJt),s.Rect(hb);const u=Math.ceil(this.YJt),c=Math.ceil(this.KJt);let f,d;this.KJt>256?(s.OF(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),hb.ja(0,.8*c-d/2,f,d),s.Rect(hb),t?s.OF(l,0,0,l):s.OF(.161*l,.953*l,.816*l,l),f=u*this.Lqt,hb.ja(.5*u-f/2,.8*c-d/2,f,d),s.Rect(hb),s.OF(l,l,l,l),s.bv(),e&&(f=1.5*Qv.Yn(.22*c,105,.6*u),d=f/8,hb.ja(.5*u-f/2,.2*c-d/2,f,d),s.NF(e),s.Rect(hb)),i&&(f=Math.min(.395*c,.95*u),d=f,hb.ja(.5*u-f/2,.485*c-d/2,f,d),s.NF(i),s.Rect(hb)),n&&(f=1.5*Qv.Yn(.22*c,105,.6*u),d=f/8,hb.ja(.5*u-f/2,.868*c-d/2,f,d),s.NF(n),s.Rect(hb))):(s.OF(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),hb.ja(0,.85*c-d/2,f,d),s.Rect(hb),t?s.OF(l,0,0,l):s.OF(.161*l,.953*l,.816*l,l),f=u*this.Lqt,hb.ja(.5*u-f/2,.85*c-d/2,f,d),s.Rect(hb),s.OF(l,l,l,l),s.bv(),i&&(f=.55*c,d=f,hb.ja(.5*u-f/2,.45*c-d/2,f,d),s.NF(i),s.Rect(hb))),this.zqt++,"fade-in"===this.Jqt&&r-this.Oqt>=300&&this.zqt>=2&&(this.Jqt="wait",this.jqt=r),"wait"===this.Jqt&&r-this.jqt>=a&&this.Lqt>=1&&(this.Jqt="fade-out",this.Hqt=r),("fade-out"===this.Jqt&&r-this.Hqt>=300+o||h&&this.Lqt>=1&&r-this.Oqt<500)&&this.qqt()}}}{const ob=self._s,ab=self.yZ,lb=(self.assert,self.e3),ub={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""};let cb=!0;ob.LXt=class extends ob.Wn{constructor(t){t=Object.assign({},ub,t),super(),this.kXt=t.messagePort,this.NXt=t.runtimeBaseUrl,this.BXt=t.previewUrl,this.UXt=!!t.headless,this.VXt=!!t.hasDom,this.WXt=!!t.isInWorker,cb=t.ife,this.zXt=!!t.useAudio,this.jXt=t.exportType,this.h5=!!t.isiOSCordova,this.HXt=!!t.isiOSWebView,this.JXt=!!t.isWindowsWebView2,this.qXt=!!t.isAnyWebView2Wrapper,this.$Xt=!!t.isFBInstantAvailable,this.XXt=!("preview"!==this.jXt||!t.isDebug),this.YXt=this.XXt,this.KXt=this.XXt,this.ZXt=0,this.QXt=[],this.tYt=[],this.sYt=!1,this.iYt="",this.eYt="",this.nYt="",this.rYt="",this.hYt=0,this.oYt=0,this.aYt=0,this.ZW=self.devicePixelRatio,this.lYt=0,this.uYt=0,this.hD=0,this.oD=0,this.cYt=0,this.fYt=!1,this.PS=!0,this.dYt=!1,this.pYt=!1,this.mYt=!1,this.gYt=null,this.S6=ob.jn(ob.e5,this,t),this.Mst=ob.jn(ob.Uet,this),this._xt=ob.jn(ob.TTt,this),this.yYt=ob.jn(ob.T$,this,t.wrapperComponentIds),this.SYt=ob.jn(ob.CHt,this),this.dot=ob.jn(ob.Qet,this),this.wYt=ob.jn(ob.HSt,this),this.vYt=ob.jn(ob.qSt,this),this.owt=ob.jn(ob.swt,this),this.MS=ob.jn(ob.fS,{mS:t=>this.bYt(t),yS:t=>this.xYt(t)}),this.TYt=new Map,this.MYt=[],this.GYt=new Map,this._Yt=new Map,this.IYt=0,this.CYt=[],this.PYt=new Set,this.RYt=[],this.EYt=[],this.AYt=new Map,this.FYt=!1,this.OYt=!1,this.DYt=0,this.LYt=0,this.kYt=new Map,this.NYt=new Set,this.BYt=new Set,this.UYt=[],this.VYt=[],this.WYt=null,this.zYt=!1,this.jYt="vsync",this.CM="trilinear",this.HYt=!1,this.JYt=!0,this.qYt=!1,this.$Yt=!1,this.XYt=null,this.YYt={KYt:t=>{this.Dqt=-1,this.ZYt=-1,this.Grt(t)},QYt:t=>{this.ZYt=-1,this.Grt(t,!1,"skip-render")},tKt:()=>{this.Dqt=-1,this.bz()}},this.Dqt=-1,this.ZYt=-1,this.sKt=0,this.iKt=0,this.eKt=!1,this.nKt=!1,this.rKt=!1,this.hKt=!0,this.oKt=!0,this.aKt=!1,this.lKt=0,this.uKt=new ob.jd(1),this.cKt=()=>Math.random(),this.fKt=0,this.dKt=0,this.pKt=0,this.mKt=0,this.gKt=0,this.tVt=1,this.yKt=1/30,this.SKt=0,this.wKt=ob.jn(ob.Qf),this.vKt=ob.jn(ob.Qf),this.bKt=ob.jn(ob.Qf),this.xKt=new Map,this.TKt=-1,this.MKt=0,this.GKt=0,this._Kt=-1,this.IKt=0,this.CKt=0,this.PKt=0,this.RKt=!1,this.EKt="",this.AKt=!1,this.FKt="",this.GZ=null,this.OKt="",this.DKt=null,this.LKt=null,this.nBt=ob.jn(ob.Event.Sf),this.kKt=new Map,this.NKt=new Map,this.BKt=0,this.UKt=!1,this.VKt=!1,this.WKt=!1,this.zKt=[],this.jKt={pretick:ob.jn(ob.Event,"pretick",!1),tick:ob.jn(ob.Event,"tick",!1),tick2:ob.jn(ob.Event,"tick2",!1),instancecreate:ob.jn(ob.Event,"instancecreate",!1),instancedestroy:ob.jn(ob.Event,"instancedestroy",!1),beforelayoutchange:ob.jn(ob.Event,"beforelayoutchange",!1),layoutchange:ob.jn(ob.Event,"layoutchange",!1),beforerender:ob.jn(ob.Event,"beforerender",!1),afterrender:ob.jn(ob.Event,"afterrender",!1)},this.jKt.instancecreate._0=null,this.jKt.instancedestroy._0=null,this.S7=ob.jn(ob.Event.Sf),this.HKt=null;const s=(t,s)=>ob.ZUt.Zjt(this,t,s);this.JKt=ob.jn(ob.ld,s),this.qKt=ob.jn(ob.ld,s),this.$Kt=ob.jn(ob.ld,s),this.XKt=ob.jn(ob.YKt,this,t.jobScheduler),t.canvas&&(this.WYt=ob.jn(ob.NJt,this)),this.kXt.onmessage=t=>this._OnMessageFromDOM(t.data),this.cZ("runtime","visibilitychange",t=>this.KKt(t)),this.cZ("runtime","wrapper-extension-message",t=>this.ZKt(t)),this.cZ("runtime","get-remote-preview-status-info",()=>this.QKt()),this.cZ("runtime","js-invoke-function",t=>this.KTt(t)),this.cZ("runtime","go-to-last-error-script",self.goToLastErrorScript),this.cZ("runtime","offline-audio-render-completed",t=>this.tZt(t)),this.nBt.addEventListener("window-blur",t=>this.sZt(t)),this.nBt.addEventListener("window-focus",()=>this.iZt()),this.dot.Ant(),this.vYt.Ant(),this.eZt=null,this.nZt=0,this.rZt=new WeakMap,this.hZt={keyboard:null,TJ:null,MJ:null,GJ:null},this.oZt=new WeakMap,this.aZt=[]}static KG(t){return ob.jn(ob.LXt,t)}Hn(){ob.wh(this.MYt),this.GYt.clear(),this._Yt.clear(),this.Mst.Hn(),this.Mst=null,this._xt.Hn(),this._xt=null,this.yYt.Hn(),this.yYt=null,this.S6.Hn(),this.S6=null,this.SYt.Hn(),this.SYt=null,this.dot.Hn(),this.dot=null,this.wYt.Hn(),this.wYt=null,this.vYt.Hn(),this.vYt=null,this.owt.Hn(),this.owt=null,this.MS.Hn(),this.MS=null,this.WYt&&(this.WYt.Hn(),this.WYt=null),this.nBt.Hn(),this.nBt=null,this.lZt=null}_OnMessageFromDOM(t){const s=t.type;if("event"===s)this.uZt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.cZt(t)}}uZt(t){if(!this.WKt)return void this.zKt.push(t);const s=t.component,i=t.handler,e=t.data,n=t.dispatchOpts,r=!(!n||!n.dispatchRuntimeEvent),h=!(!n||!n.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const t=new ob.Event(i);t.data=e,this.nBt.Cf(t)}if(h){const t=new ob.Event(i,!0);if(e)for(const[s,i]of Object.entries(e))t[s]=i;this.s6(t)}}const a=this.kKt.get(s);if(!a)return void(r||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`));const l=a.get(i);if(!l)return void(r||h||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`));let u=null;try{u=l(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.fZt(o,!1,""+t))}null!==o&&(u&&u.then?u.then(t=>this.fZt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.fZt(o,!1,""+t)}):this.fZt(o,!0,u))}fZt(t,s,i){this.kXt.postMessage({type:"result",responseId:t,isOk:s,result:i})}cZt(t){const s=t.responseId,i=t.isOk,e=t.result,n=this.NKt.get(s);i?n.resolve(e):n.reject(e),this.NKt.delete(s)}cZ(t,s,i){let e=this.kKt.get(t);if(e||(e=new Map,this.kKt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}Vc(t,s,i,e){this.kXt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}ZJ(t,s,i,e){const n=this.BKt++,r=new Promise((t,s)=>{this.NKt.set(n,{resolve:t,reject:s})});return this.kXt.postMessage({type:"event",component:t,handler:s,data:i,responseId:n},e),r}w3(t,s,i,e=-1){this.Vc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}dZt(t){this.Vc("runtime","send-raw-wrapper-extension-message",t)}v3(t,s,i){const e=this.BKt++,n=new Promise((t,s)=>{this.NKt.set(e,{resolve:t,reject:s})});return this.w3(t,s,i,e),n}ZKt(t){if(-1!==t.asyncId){const s=t.asyncId;this.NKt.get(s).resolve(t.params),this.NKt.delete(s)}else this.uZt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}PZ(t,s,i){this.cZ("wrapper-extension:"+t,s,i)}IZ(t){return this.yYt.IZ(t)}pZt(t){if(!this.gZ())throw new Error("not in debug mode");this.Vc("runtime","post-to-debugger",t)}async eVt(t){ob.AAt(this),this.gZ()?await ab.eVt(this):self.yZ&&self.yZ.mZt(this);const s=await this.S6.io("data.json");if(await this.gZt(s),await this.yZt(t),this.FXt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.Y$t()){const t=this.Y$t();console.info(`[C3 runtime] Hosted in ${this.qj()?"worker":"DOM"}, rendering with WebGL ${t.LM()} [${t.WO()}]`)}else this.K$t()&&console.info(`[C3 runtime] Hosted in ${this.qj()?"worker":"DOM"}, rendering with WebGPU [${this.K$t().WB()}]`);this.Px().qb()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.WKt=!0;for(const t of this.zKt)this.uZt(t);ob.wh(this.zKt),this.WYt&&this.WYt.MXt();for(const s of t.runOnStartupFunctions)this.QXt.push(this.SZt(s));if(await Promise.all([this.S6.Z5(!1),...this.QXt]),ob.wh(this.QXt),!this.S6.t6())return this.WYt&&await this.WYt.IXt(),await this.nBt._f(new ob.Event("beforeruntimestart")),await this.dO(),this.kXt.postMessage({type:"runtime-ready"}),this;this.WYt&&this.WYt.TXt()}async SZt(t){try{await t(this.eZt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async gZt(t){const s=t.project;this.iYt=s[0],this.eYt=s[16],this.nYt=s[31],this.rYt=s[38],this.hYt=s[36];const i=s[39]||"loading-logo.png";this.HYt=!!s[9],this.oYt=this.hD=s[10],this.aYt=this.oD=s[11],this.SYt.SJt(this.oYt,this.aYt),this.lYt=this.oYt/2,this.uYt=this.aYt/2,this.jYt=s[37],this.zYt=!!s[40],this.CM=s[14],this.dYt=s[15],this.pYt=s[42],this.mYt=s[17],this.fYt=!!s[18],this.cYt=s[19],this.LYt=s[21],this.qYt=s[22],this.nZt=s[51];const e=this.S6;e.a6(s[7],s[25]),e.F5(s[8]),e.O5(s[32]),e.L5(s[28]),e.n6(s[29]),e.N5(s[45]),0===this.cYt&&i&&(this.gYt=e.W5({url:i})),this.WYt&&(this.WYt.U$t(ob.NJt.H$t(s[12])),this.WYt.z$t(s[23]?"high":"low"),this.WYt.jb(0!==s[24]),this.WYt.Xqt(s[34]),this.WYt.q$t(s[41]),this.WYt.Yqt(s[13]),this.WYt.Kqt(s[30]),this.WYt.t$t(s[46],s[47]),this.WYt.Qqt(s[26]),this.WYt.s$t(s[48]),this.WYt.i$t(s[50]));const n=s[43];n&&await this.wZt(n),this.vZt(),this.yYt.zkt(),this.UYt=self.bZt();const r=s[2];for(const t of r[1])this.yYt.jkt(t);for(const t of r[0])this.yYt.Wkt(t);this.UYt=self.bZt(),this.xZt(),this.yYt.Ykt();for(const t of s[3]){const s=ob.ZSt.KG(this,this.MYt.length,t);this.MYt.push(s),this.GYt.set(s.Pc().toLowerCase(),s),this._Yt.set(s.t9(),s)}for(const t of s[4])this.MYt[t[0]].WBt(t);for(const t of s[27]){const s=t.map(t=>this.MYt[t]);this.CYt.push(ob.jn(ob.WUt,this,s))}this.TZt();for(const t of this.MYt)t.jBt();for(const t of s[5])this.Mst.KG(t);const h=s[1];if(h){const t=this.Mst.zet(h);t&&this.Mst.Vet(t)}for(const t of s[35])this.wYt.KG(t);for(const t of s[33])this.dot.KG(t);for(const t of s[44])this.vYt.KG(t);this.vYt.YSt()||(this.vYt.Hn(),this.vYt=null);for(const t of s[49])this.owt.KG(t);this.owt.rwt()||(this.owt.Hn(),this.owt=null);for(const t of s[6])this._xt.KG(t);this._xt.tMt(),this.MZt(),ob.wh(this.UYt),this.YJ();let o="any";const a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Vc("runtime","set-target-orientation",{targetOrientation:o})}async wZt(t){const s=t.format;"image-sequence"===s?this.XYt=new self.GZt(this,t):"image-sequence-gif"===s?this.XYt=new self._Zt(this,t):"webm"===s?this.XYt=new self.IZt(this,t):"mp4"===s&&(this.XYt=new self.CZt(this,t)),this.jYt="unlimited-frame",this.WYt.U$t("off"),this.ZW=1,self.devicePixelRatio=1,await this.ZJ("runtime","set-exporting-to-video",{message:this.XYt.PZt(0),duration:this.XYt.s1()})}_Xt(){return this.cYt}x$t(){return null!==this.XYt}RZt(){return this.XYt.s1()}EZt(){return this.XYt.AZt()}FZt(){return this.XYt.eVt({width:this.WYt.m$(),height:this.WYt.y$()})}OZt(){const t=this.sKt/this.EZt();return this.XYt.DZt(this.WYt.N$t(),t)}LZt(){this.XYt&&this.XYt.ict()}tZt(t){this.XYt.kZt(t)}NZt(){return this.XYt.Ub()}OXt(){return this.$Xt}OS(){return this.PS}iq(t){this.QXt.push(t)}zit(t){this.sYt=!!t}BZt(t){this.sYt&&this.tYt.push(t)}Xit(){return this.tYt}DBt(){return this.IYt++}JBt(){return this.IYt}oHt(t){this.PYt.add(t)}aHt(t){this.PYt.delete(t)}b$t(){return this.PYt}async yZt(t){this.WYt&&(await this.WYt.uo(t),this.WYt.yXt(this.cYt))}async dO(){this.eKt=!0,this.fKt=Date.now();let t=null;const s=new Promise(s=>t=s);if(this.fYt){for(const t of this.MYt)t.pX()||t.sUt()||!t.P$()||t.$Dt();(async()=>{await this.S6.Z5(!0),await s,this.PS=!1,this.UZt()})()}else this.PS=!1;this.S6.Q5(),this.gZ()&&ab.VZt(cb);for(const t of this.Mst.SJ())t.uet();this.x$t()&&await this.FZt();const i=this.Mst.Wet();await i.Iit(null,this.Px()),await i.kit(!0),this.MKt=performance.now(),t(),this.fYt||this.UZt(),(await this.ZJ("runtime","before-start-ticking")).isSuspended&&!this.x$t()?(this.lKt++,this.aKt=!0):this.Grt()}UZt(){this.aZ(ob.lq.aq.oq.WZt,null,null),this.Vc("runtime","register-sw")}tPt(t){t=Math.floor(t);const s=this.UYt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}xZt(){for(const t of self.zZt){const s=ob.Bh(Object.keys(t));this.VYt.push(s)}}MMt(t){t=Math.floor(t);const s=this.VYt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}jZt(){return this.VXt}HZt(){return this.UXt}qj(){return this.WXt}bXt(){return this.NXt}JZt(){return this.BXt}hH(){return this._xt}wH(){return this._xt.wH()}pMt(){return this._xt.pMt()}fH(){return this._xt.fH()}mMt(){return this._xt.mMt()}RAt(){return 0===this.pMt().Hxt()}yMt(){return this._xt.yMt()}Yjt(){return this.yYt}e6(){return this.yYt.e6()}M7(t){if((t=Math.floor(t))<0||t>=this.MYt.length)throw new RangeError("invalid index");return this.MYt[t]}qZt(t){return this.GYt.get(t.toLowerCase())||null}P3(t){return this._Yt.get(t)||null}Hdt(t){const s=ob.T$.j$(t);return s?s.$$():null}J7(){return this.MYt}*$Zt(){for(const t of this.MYt)t.pX()||(yield*t.sX())}Sf(){return this.nBt}iH(){return this.S7}s6(t){t.runtime=this.M$();const s=this.gZ()&&!this._xt.qJ();s&&ab.Let(),this.S7.dispatchEvent(t),s&&ab.ket()}eet(t){return t.runtime=this.M$(),this.S7._f(t)}Xj(){return this.oYt}Kj(){return this.aYt}XZt(t,s){if(this.oYt===t&&this.aYt===s)return;this.oYt=t,this.aYt=s;const i=this.mJ();i.Ket(),i.Zet()}x9(){return this.hD}T9(){return this.oD}L$t(t,s){if(this.hD===t&&this.oD===s)return;this.hD=t,this.oD=s;const i=this.mJ();i.Ket(),i.Zet()}T$t(t){this.x$t()||(this.ZW=t)}S$(){return this.ZW}vtt(){return this.lYt}btt(){return this.uYt}IJ(){return this.WYt}Itt(){return this.WYt?this.WYt.Itt():this.hD}Ctt(){return this.WYt?this.WYt.Ctt():this.oD}TK(){return this.WYt?this.WYt.TK():1}j2(){return this.WYt?this.WYt.j2():1}ost(){return this.WYt?this.WYt.ost():1}rst(){return this.WYt?this.WYt.rst():1}o$(){return this.WYt?this.WYt.o$():0}l$(){return this.WYt?this.WYt.l$():0}YZt(){return this.WYt?this.WYt.c$():0}KZt(){return this.WYt?this.WYt.d$():0}z2(){return this.WYt?this.WYt.z2():"off"}Ntt(t){return this.WYt?this.WYt.Ntt(t):null}a7(t){this.WYt&&this.WYt.a7(t)}Ltt(){return this.dYt}p$t(){return this.pYt}m$t(){return this.mYt}$H(){return this.WYt?this.WYt.$H():NaN}FG(){return"nearest"!==this.CV()}YH(){return this.jYt}KH(t){this.jYt!==t&&(this.jYt=t,-1===this.Dqt&&-1===this.ZYt||(this.ZZt(),this.QZt()))}CV(){return this.CM}BBt(){return this.fYt}SXt(){return this.gYt}CXt(){this.gYt&&(this.gYt.wR(),this.gYt.Hn(),this.gYt=null)}mJ(){return this.Mst}fJ(){return this.Mst.fJ()}Qot(){return this.dot}tQt(){return this.wYt}kVt(){return this.vYt}Cwt(){return this.owt}Pj(){return this.S6}W5(t){return this.S6.W5(t)}_X(t,s,i,e,n,r){if(r&&this.vYt){if(t instanceof ob.ZSt&&t.pX()){const h=t.kX(),o=Math.floor(this.cJ()*h.length);return this._X(h[o],s,i,e,n,r)}const h=this.vYt.KSt(t,r);if(h){const t=this.F7(h,s,!1,i,e,!1,n,void 0,n);return this.vYt.QSt(t,r),t}}return this.F7(t,s,!1,i,e,!1,n,void 0,n)}F7(t,s,i,e,n,r,h,o,a){let l=null,u=null;if(t instanceof ob.ZSt){if(u=t,u.pX()){const t=u.kX();u=t[Math.floor(this.cJ()*t.length)]}l=u._7()}else l=t,u=this.M7(l[1]);const c=u.Q$().P$();if(this.PS&&c&&!u.sUt())return null;const f=s;let d;c||(s=null),d=i&&!r&&l&&!this.kYt.has(l[2])?l[2]:this.LYt++;const p=l?l[0]:null,m=ob.jn(ob.Instance,{runtime:this,objectType:u,LZ:s,iVt:p,hVt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.kYt.set(d,m);let g=null;if(c&&(g=m.LJ(),void 0!==e&&void 0!==n&&(g.lT(e),g.fT(n)),u.CUt(!0)),s&&(a||s.O7(m,!0),s.gJ().Pit(u)),this.DYt++,u.FK()&&!i&&!r){const t=new Set;for(const s of u.Git().NX()){if(s===u)continue;const i=this.sQt(s,g,t);if(i){const t=this.F7(i,f,!1,g?g.aT():e,g?g.cT():n,!0,!1,void 0,a);m.aet(t)}else{const t=this.F7(s,f,!1,g?g.aT():e,g?g.cT():n,!0,!1,void 0,a);m.aet(t)}}for(const t of m.DK()){t.aet(m);for(const s of m.DK())t!==s&&t.aet(s)}}if(c&&!i&&h&&this.iQt(m,p,g,s,e,n,a),u.FK()&&!i&&!r&&h)for(const t of m.DK()){const i=t.LJ();if(!i)continue;const e=t.Q$(),n=t.gX()._7()[0];e.P$()?this.iQt(t,n,i,s,i.aT(),i.cT(),a):this.iQt(t,n,i,s,void 0,void 0,a)}if(!r&&h){void 0===e&&(e=p[0]),void 0===n&&(n=p[1]);const t=g.bQ(),s=e-g.aT()+t.aT(),i=n-g.cT()+t.cT();t.NZ(s,i)}u.TUt();const y=l?ob.Ah(l[5]):null,S=l?l[4].map(t=>ob.Ah(t)):null,w=c&&p&&p[13];if(w&&m.pVt(),m.QBt(y,S),w){const t=p[13];m.m0().fLt(t[2],t[0],t[1])}this.EYt.push(m),this.FYt=!0,this.gZ()&&ab.eQt(m);const v=this.jKt.instancecreate;return v._0=m,this.nBt.dispatchEvent(v),m}jWt(t){const s=t[0],i=t[1],e=t[2],n=t[6];return n||this.Mst.jet(s).NJ(i).P7(e)}sQt(t,s,i){const e=s?.LVt()??[];for(const s of e){const e=this.jWt(s),n=!!s[4],r=this.M7(e[1]);if(!i.has(e)&&t===r&&n)return i.add(e),e}}iQt(t,s,i,e,n,r,h){const o=i.fjt(),a=i.LVt();if(t.LJ().djt(o),!a)return;void 0===n&&(n=s[0]),void 0===r&&(r=s[1]);const l=new Set,u=s[0],c=s[1];for(const s of a){const i=s[0],o=s[1],a=s[2],f=s[3],d=!!s[4],p=s[5],m=s[6];let g;g=m||this.Mst.jet(i).NJ(o).P7(a);const y=this.M7(g[1]),S=t.BVt(y),w=l.has(y);if(S&&!w&&d){const s=t.UVt(y);s.LJ().eVt(g[0]);const i=n+g[0][0]-u,e=r+g[0][1]-c;s.LJ().NZ(i,e),s.LJ().djt(p),t.PQ(s,{OQ:!!(1&f),LQ:!!(f>>1&1),NQ:!!(f>>2&1),UQ:!!(f>>3&1),WQ:!!(f>>4&1),YQ:!!(f>>5&1),jQ:!!(f>>6&1),JQ:!!(f>>7&1),$Q:!!(f>>8&1)}),l.add(y)}else{const s=n+g[0][0]-u,i=r+g[0][1]-c,o=this.F7(g,e,!1,s,i,!1,!0,t,h);o.LJ().djt(p),t.PQ(o,{OQ:!!(1&f),LQ:!!(f>>1&1),NQ:!!(f>>2&1),UQ:!!(f>>3&1),WQ:!!(f>>4&1),YQ:!!(f>>5&1),jQ:!!(f>>6&1),JQ:!!(f>>7&1),$Q:!!(f>>8&1)})}}}JJ(t){if(this.NYt.has(t))return;const s=t.gX();let i=this.AYt.get(s);if(i){if(i.has(t))return;i.add(t)}else i=new Set,i.add(t),this.AYt.set(s,i);if(this.gZ()&&ab.nQt(t),t.gVt(),this.FYt=!0,t.FK())for(const s of t.DK())this.JJ(s);for(const s of t.children())s.KQ()&&this.JJ(s);if(!this.Mst.$J()&&!this.RKt){const s=this.hH();s.CX(!0),t.ZVt(),s.CX(!1)}t.QVt(this.Mst.$J())}YJ(){this.FYt&&(this.OYt=!0,this.rQt(),this.hQt(),this.OYt=!1,this.FYt=!1,this.jJ())}rQt(){for(const t of this.EYt){const s=t.gX();s.O7(t);for(const i of s.EX())i.O7(t),i.TUt()}ob.wh(this.EYt)}hQt(){this.nBt.cf(!0);for(const[t,s]of this.AYt.entries())this.oQt(t,s),s.clear();this.AYt.clear(),this.nBt.cf(!1)}oQt(t,s){for(const t of s){const s=this.jKt.instancedestroy;s._0=t,this.nBt.dispatchEvent(s),this.kYt.delete(t.LK()),this.xKt.delete(t);const i=t.LJ();i&&(i.yjt(),i.N7(),i.gVt()),this.NYt.add(t),this.DYt--}ob.Ph(t.uX(),s),t.TUt(),this.BYt.add(t);for(const i of t.EX())ob.Ph(i.uX(),s),i.TUt(),this.BYt.add(i);if(t.Q$().P$()){const t=new Set([...s].map(t=>t.LJ().NJ()));for(const i of t)i.X9(s)}}GUt(){return this.EYt}*DFt(t){for(const s of this.GUt())t.pX()?s.gX().EAt(t)&&(yield s):s.gX()===t&&(yield s)}ZBt(){return this.LYt++}tUt(t,s){this.kYt.set(t,s)}M3(t){t=!!t,this.oKt!==t&&(this.oKt=!!t,this.oKt&&this.aKt&&(this.I3(!1),this.aKt=!1))}G3(){return this.oKt}Lit(){this.nBt.dispatchEvent(ob.jn(ob.Event,"renderercontextlost")),this.I3(!0);for(const t of this.MYt)!t.pX()&&t.iUt()&&t.Oit();const t=this.fJ();t&&t.Lit(),ob.Qkt.R6(),ob.H5.R6()}async X$t(){await this.fJ().Iit(null,this.Px()),this.nBt.dispatchEvent(ob.jn(ob.Event,"renderercontextrestored")),this.I3(!1),this.jJ()}KKt(t){if(!this.oKt)return;const s=t.hidden;this.I3(s),this.aKt=s,s||this.jJ()}sZt(t){this.FXt()&&this.qYt&&!ob.Ks.hi&&(t.data.parentHasFocus||(this.I3(!0),this.$Yt=!0))}iZt(){this.$Yt&&(this.I3(!1),this.$Yt=!1)}QZt(){const t=this.YYt;"vsync"===this.jYt?-1===this.Dqt&&(this.Dqt=self.requestAnimationFrame(t.KYt)):"unlimited-tick"===this.jYt?(-1===this.ZYt&&(this.ZYt=ob.jh(t.QYt)),-1===this.Dqt&&(this.Dqt=self.requestAnimationFrame(t.tKt))):-1===this.ZYt&&(this.ZYt=ob.jh(t.KYt))}ZZt(){-1!==this.Dqt&&(self.cancelAnimationFrame(this.Dqt),this.Dqt=-1),-1!==this.ZYt&&(ob.Hh(this.ZYt),this.ZYt=-1)}IH(){return this.lKt>0}I3(t){if(this.x$t())return;const s=this.IH();this.lKt+=t?1:-1,this.lKt<0&&(this.lKt=0);const i=this.IH();if(!s&&i)console.log("[Construct] Suspending"),this.ZZt(),this.nBt.dispatchEvent(ob.jn(ob.Event,"suspend")),this.s6(ob.jn(ob.Event,"suspend")),this.aZ(ob.lq.aq.oq.aQt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const t=performance.now();this.dKt=t,this.MKt=t,this.TKt=0,this.GKt=0,this._Kt=0,this.IKt=0,this.PKt=0,this.CKt=0,this.nBt.dispatchEvent(ob.jn(ob.Event,"resume")),this.s6(ob.jn(ob.Event,"resume")),this.aZ(ob.lq.aq.oq.lQt,null,null),this.sGt()||this.Grt(t)}}h3(t){this.JKt.Bu(t)}u3(t){this.qKt.Bu(t)}a3(t){this.$Kt.Bu(t)}o3(t){this.JKt.Kf(t)}c3(t){this.qKt.Kf(t)}l3(t){this.$Kt.Kf(t)}uQt(t,s){const i=s?performance.now():0;let e;return t instanceof lb?(e=t.SZ(),s&&ab.cQt(t.behavior,performance.now()-i)):(e=t.Grt(),s&&ab.cQt(t.x0(),performance.now()-i)),e}fQt(){const t=this.gZ();this.JKt.Wd(!0);for(const s of this.JKt)this.uQt(s,t);this.JKt.Wd(!1)}dQt(t,s){const i=s?performance.now():0;let e;return t instanceof lb?(e=t.d3(),s&&ab.cQt(t.behavior,performance.now()-i)):(e=t.kkt(),s&&ab.cQt(t.x0(),performance.now()-i)),e}pQt(){const t=this.gZ();this.qKt.Wd(!0);for(const s of this.qKt)this.dQt(s,t);this.qKt.Wd(!1)}mQt(t,s){const i=s?performance.now():0;let e;return t instanceof lb?(e=t.bZ(),s&&ab.cQt(t.behavior,performance.now()-i)):(e=t.FLt(),s&&ab.cQt(t.x0(),performance.now()-i)),e}gQt(){const t=this.gZ();this.$Kt.Wd(!0);for(const s of this.$Kt)this.mQt(s,t);this.$Kt.Wd(!1)}*yQt(){const t=this.gZ();this.JKt.Wd(!0);for(const s of this.JKt){const i=this.uQt(s,t);ob.bo(i)&&(yield*i)}this.JKt.Wd(!1)}*SQt(){const t=this.gZ();this.qKt.Wd(!0);for(const s of this.qKt){const i=this.dQt(s,t);ob.bo(i)&&(yield*i)}this.qKt.Wd(!1)}*wQt(){const t=this.gZ();this.$Kt.Wd(!0);for(const s of this.$Kt){const i=this.mQt(s,t);ob.bo(i)&&(yield*i)}this.$Kt.Wd(!1)}async Grt(t,s,i){this.rKt=!0;const e="background-wake"===i,n="background-wake"!==i&&"skip-render"!==i,r=this.mJ(),h=this.IJ();if(!this.eKt||this.IH()&&!s&&!e)return;const o=performance.now();this.nKt=!0,this.vQt(t||0),this._Kt++,this.bQt();const a=this.xQt();this.RFt()&&await a;const l=this.nBt.If(this.jKt.pretick);l instanceof Promise&&await l,this.s6(this.HKt.pretick);const u=this.TQt();this.RFt()&&await u,this.MQt()&&await this.GQt(),r.vJ()&&await this._Qt();const c=this.IQt();this.RFt()&&await c;const f=r.fJ(),d=f.vit();let p=!1;if(-1!==d&&(f.bit(),h.wit()!==d)){const t=this.IJ().Vit(d);this.qj()&&(p=!0,await t)}this.Vc("canvas","update-html-layer-dom-state",{layersDomState:f.Q7().filter(t=>t.BY()).map(t=>t.itt())}),n&&this.bz(),p&&this.Vc("canvas","cleanup-html-layers"),this.x$t()&&(await this.OZt(),this.FH()>=this.RZt())?this.NZt():(this.IH()||e||this.QZt(),this.sKt++,this.iKt++,this.nKt=!1,this.CKt+=performance.now()-o)}async xQt(){const t=this._xt,s=this.gZ();this.YJ(),t.CX(!0),this.zMt(this.fJ()),s&&ab.CQt(),this.RFt()?await t.xGt():t.yGt(),s&&ab.PQt(),this.jMt(),t.CX(!1),this.YJ(),t.CX(!0)}async TQt(){const t=this._xt,s=this.gZ(),i=this.RFt(),e=this.nBt,n=this.jKt,r=this.HKt;s&&ab.CQt(),i?await this.RQt(this.yQt()):this.fQt(),i?await this.RQt(this.SQt()):this.pQt(),s&&ab.EQt(),s&&ab.CQt(),i?await this.AQt(n.tick):e.dispatchEvent(n.tick),s&&ab.FQt(),t.CX(!1),this.s6(r.tick)}async IQt(){const t=this._xt,s=this.nBt,i=this.jKt,e=this.HKt,n=this.gZ(),r=this.RFt();n&&ab.CQt(),r?await t.HMt(this.Mst):t.WMt(this.Mst),n&&ab.PQt(),this.SYt.VHt(),this.bQt(),this.hKt=!1,t.CX(!0),n&&ab.CQt(),r?await this.RQt(this.wQt()):this.gQt(),n&&ab.EQt(),n&&ab.CQt(),r?await this.AQt(i.tick2):s.dispatchEvent(i.tick2),n&&ab.FQt(),t.CX(!1),this.s6(e.tick2),r&&await t.iGt(),this.YJ(),this.bQt()}bQt(){if(0===this.NYt.size)return;const t=this.nBt;t.cf(!0);for(const t of this.BYt)t.cGt().sxt(this.NYt);this.BYt.clear(),this._xt.MGt(this.NYt);for(const t of this.NYt)t.Hn();this.NYt.clear(),t.cf(!1)}async _Qt(){const t=this.mJ();let s=0;for(;t.vJ()&&s++<10;)await this.OQt(t.Yet())}vQt(t){let s=0;this.x$t()?(s=1/this.EZt(),this.pKt=s,this.mKt=s):0!==this.dKt&&(s=Math.max(t-this.dKt,0)/1e3,s>.5&&(s=0),this.pKt=s,this.mKt=ob.Yn(s,this.SKt,this.yKt)),this.dKt=t,this.gKt=this.mKt*this.tVt,this.wKt.Bu(this.gKt),this.vKt.Bu(s*this.tVt),this.bKt.Bu(this.mKt);for(const[t,s]of this.xKt)s.Bu(this.mKt*t.BH());this.WYt&&this.WYt.oXt(),t-this.MKt>=1e3&&(this.MKt+=1e3,t-this.MKt>=1e3&&(this.MKt=t),this.GKt=this.TKt,this.TKt=0,this.IKt=this._Kt,this._Kt=0,this.PKt=Math.min(this.CKt/1e3,1),this.CKt=0,this.WYt&&this.WYt.hXt(),this.SYt.kHt(),this.gZ()&&ab.DQt())}fVt(t,s){if(s){if(!this.xKt.has(t)){const s=ob.jn(ob.Qf);s.rd(this.wKt),this.xKt.set(t,s)}}else this.xKt.delete(t)}dVt(t){const s=this.xKt.get(t);return s?s.Hs():this.FH()}async OQt(t){const s=this.nBt,i=this.mJ().fJ();await i.fet(),i.Dit(t,this.Px()),i===t&&this._xt.met(),this.SYt.VHt(),this.bQt(),s.dispatchEvent(this.jKt.beforelayoutchange),ob.df.Rf(!0),await t.Iit(i,this.Px()),ob.df.Rf(!1),await t.kit(!1),s.dispatchEvent(this.jKt.layoutchange),this.jJ(),this.hKt=!0,this.YJ(),this.LZt()}jJ(){this.JYt=!0}Y$t(){return this.WYt?this.WYt.Y$t():null}K$t(){return this.WYt?this.WYt.K$t():null}Px(){return this.WYt?this.WYt.Px():null}bz(){const t=this.WYt;if(!t||t.$$t())return;const s=this.Px(),i=s.DO(),e=i&&s.$b(),n=i&&s.dv();if(e&&s.bO(),!this.JYt&&!this.x$t())return void s.zb();const r=this.Mst.fJ();this.TKt++,s.dO();const h=this.gZ();h&&ab.CQt(),this.JYt=!1;let o=null;e&&(o=t.cXt().eA(),s.OO(o));let a=null;n&&(a=s.wN(2*(1+r.dit())),s.bN(0,1)),this.A9()&&"low"===t.ktt()?s.MF(t.Itt(),t.Ctt()):s.GF(),this.LQt(this.Px(),r),o&&s.LO(o),n&&(s.TN(),this.WYt.fXt(a)),s.Ub(),h&&(ab.kQt(),ab.NQt()),t&&t.dXt()}Iet(t){return"low"===this.IJ().ktt()||t.$b()&&(this.Ltt()||this.A9())}LQt(t,s){t.bv(),t.WF(),t.Db(),t.OF(1,1,1,1),t.GO(null),t.NF(null),t.mO(this.A9()),this.Sf().dispatchEvent(this.jKt.beforerender),this.Iet(t)&&s.Get(t);const i=s.wit();for(let e=1;e<i;++e)s.Eet(t,e),t.dv()&&t.dN();this.Iet(t)||s.Get(t),s.Ret(t),this.Sf().dispatchEvent(this.jKt.afterrender)}aZ(t,s,i){if(!this.eKt)return!1;const e=!this.nKt&&!this._xt.hGt();let n=0;e&&(n=performance.now());const r=this.gZ();r&&this.O3(!1);const h=this._xt.XMt(this.Mst,t,s,i);if(e){const t=performance.now()-n;this.CKt+=t,r&&ab.BQt(t)}return r&&this.O3(!0),h}bLt(t,s,i){if(!this.RFt())return this.aZ(t,s,i);if(this.sGt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(!this.nKt&&!this._xt.hGt())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this._xt.ZMt(this.Mst,t,s,i)}async rq(t,s,i){if(!this.RFt())return this.aZ(t,s,i);if(!this.eKt)return!1;if(this.sGt())return this._xt.QMt(t,s,i);if(!this.fJ())return this._xt.YMt(t,s,i);const e=performance.now(),n=this._xt.ZMt(this.Mst,t,s,i);let r=n.next();for(;!r.done;)await this.qMt(r.value),r=n.next();return this.IH()||this._xt.hGt()||(await this._xt.iGt(),this.rKt&&!this.nKt&&this.QZt()),this.CKt+=performance.now()-e,r.value}xLt(t,s,i){const e=this.gZ();e&&this.O3(!1);const n=this._xt.eGt(this.Mst,t,s,i);return e&&this.O3(!0),n}TLt(t,s,i){return this._xt.nGt(this.Mst,t,s,i)}MLt(t){return this.uKt.Bu(t)}zMt(t){this.RYt.push(t)}jMt(){if(!this.RYt.length)throw new Error("layout stack empty");this.RYt.pop()}OJ(){return this.RYt.length?this.RYt.at(-1):this.fJ()}PH(t){return t&&-1!==t.BH()?this.mKt*t.BH():this.gKt}Trt(){return this.gKt}Mrt(){return this.mKt}EH(){return this.pKt}BH(){return this.tVt}UH(t){(isNaN(t)||t<0)&&(t=0),this.tVt=t}tJ(t){this.SKt=Math.max(t,0)}QH(){return this.SKt}eJ(t){this.yKt=Math.max(t,0)}iJ(){return this.yKt}WH(){return this.GKt}jH(){return this.IKt}JH(){return this.PKt}UQt(){return this.fKt}FH(){return this.wKt.Hs()}VQt(){return this.vKt.Hs()}kH(){return this.bKt.Hs()}DH(){return this.sKt}WQt(){return this.iKt}zQt(){return this.DYt}Lj(){return this.iYt}Nj(){return this.eYt}Wj(){return this.nYt}Uj(){return this.rYt}jj(){return this.hYt}EJ(t){if(this.RKt)throw new Error("cannot call while loading state - wait until afterload event");return this.kYt.get(t)||null}BWt(t){if(this.RKt)throw new Error("cannot call while loading state - wait until afterload event");this.kYt.delete(t)}oet(){this.kYt.clear();for(const t of this.MYt)if(!t.pX())for(const s of t.uX())this.kYt.set(s.LK(),s)}FXt(){return"preview"===this.jXt}gZ(){return this.XXt}s$(){return this.jXt}DXt(){return"cordova"===this.jXt}jQt(){return"Android"===ob.Ks.Zs&&("cordova"===this.jXt||"playable-ad-single-file"===this.jXt||"playable-ad-zip"===this.jXt||"instant-games"===this.jXt)}HQt(){return this.h5}JQt(){return this.HXt}i$(){return this.JXt}qQt(){return this.qXt}Aj(){return this.SYt}Kkt(){return this.yYt.Kkt()}Zkt(){return this.yYt.Zkt()}A9(){return this.zYt}$Qt(){return this.Px().sv(this.T9())}Zw(t){return this.Px().Zw(t||this.T9())}XQt(){return this.hKt}rJ(t){t=!!t,this.HYt!==t&&(this.HYt=t,this.mJ().Zet(),this.jJ())}hJ(){return this.HYt}YQt(t){if(!this.TYt.has(t)){const s=()=>this.KQt(t);this.TYt.set(t,s),t.Sf().addEventListener("animationframeimagechange",s)}const s=this.MS.SS(t);return s.FS()||s.DS().then(()=>this.jJ()),s}KQt(t){this.MS.xS(t)}bYt(t){const s=[];for(const i of t.dUt())for(const t of i.$0()){const i=t.t1();s.push({source:t,width:i.xy(),height:i.My(),tag:t.g1()})}return{ES:s}}async xYt(t){const s=ob.jn(ob.jd),i=[],e=new Map;for(const n of t.dUt())for(const t of n.$0()){const n=t.t1().wNt();e.has(n)||(e.set(n,null),i.push(s.Bu(async()=>{const t=await n.L6();e.set(n,t)})))}await Promise.all(i);const n=[];for(const i of t.dUt())for(const t of i.$0())n.push(s.Bu(async()=>{const s=t.t1(),i=e.get(s.wNt()),n=await s.vNt(i);return{kS:await createImageBitmap(n)}}));const r=await Promise.all(n);for(const t of e.values())t instanceof ImageBitmap&&t.close&&t.close();return{ES:r}}ZQt(t){this.EKt=t,this.AKt=!1}QQt(){this.EKt="",this.AKt=!0}t0t(t){this.FKt=t}TOt(t){this.GZ=t}s0t(){return this.OKt}MQt(){return!!(this.EKt||this.AKt||this.FKt||null!==this.GZ)}async GQt(){if(this.EKt&&(this.YJ(),await this.i0t(this.EKt),this.e0t()),this.FKt&&(await this.n0t(this.FKt),this.e0t(),this.gZ()&&ab.r0t()),this.AKt){const t=await this.h0t();this.OKt=t,await this.rq(ob.lq.aq.oq.o0t,null),this.OKt="",this.e0t()}if(null!==this.GZ){this.YJ();try{await this.a0t(this.GZ),this.OKt=this.GZ,await this.rq(ob.lq.aq.oq.l0t,null),this.OKt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.rq(ob.lq.aq.oq.u0t,null)}this.e0t()}}e0t(){this.EKt="",this.AKt=!1,this.FKt="",this.GZ=null}v$(){return this.DKt||(this.DKt=localforage.Gi({name:"c3-localstorage-"+this.Wj(),description:this.Lj()})),this.DKt}c0t(){return this.LKt||(this.LKt=localforage.Gi({name:"c3-savegames-"+this.Wj(),description:this.Lj()})),this.LKt}async i0t(t){const s=await this.h0t();try{await this.c0t().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.OKt=s,await this.rq(ob.lq.aq.oq.o0t,null),this.OKt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.rq(ob.lq.aq.oq.f0t,null)}}async n0t(t){try{const s=await this.c0t().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.a0t(s),this.OKt=s,await this.rq(ob.lq.aq.oq.l0t,null),this.OKt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.rq(ob.lq.aq.oq.u0t,null)}}async h0t(){const t={c3save:!0,version:1,rt:{time:this.FH(),timeRaw:this.VQt(),walltime:this.kH(),timescale:this.BH(),tickcount:this.DH(),next_uid:this.LYt,running_layout:this.fJ().t9(),start_time_offset:Date.now()-this.fKt},types:{},layouts:{},events:this._xt.Sst(),timelines:this.dot.Sst(),user_script_data:null};for(const s of this.MYt)s.pX()||s.DUt()||(t.types[s.t9().toString()]=s.Sst());for(const s of this.Mst.SJ())t.layouts[s.t9().toString()]=s.Sst();const s=this.d0t("save");return s.saveData=null,await this.eet(s),t.user_script_data=s.saveData,JSON.stringify(t)}Yit(){return this.RKt}async a0t(t){const s=this.mJ(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(i.version>1)throw new Error("C3 save data from future version");this.MOt(),this.nBt.dispatchEvent(ob.jn(ob.Event,"beforeload"));for(const t of this.$Zt())t.gX().DUt()||t.Mnt();const e=i.rt;this.wKt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.vKt.Set(e.timeRaw),this.bKt.Set(e.walltime),this.tVt=e.timescale,this.sKt=e.tickcount,this.fKt=Date.now()-e.start_time_offset;const n=e.running_layout;this.RKt=!0;let r=!1;if(n!==this.fJ().t9()){const t=s.jet(n);if(!t)return;await this.OQt(t),r=!0}for(const[t,e]of Object.entries(i.layouts)){const i=parseInt(t,10),n=s.jet(i);n&&n.wst(e)}const h=new Set;for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.P3(i);!e||e.pX()||e.DUt()||e.wst(s,h)}for(const t of this.Mst.SJ())for(const s of t.hY())s.vst();if(this.YJ(),this.oet(),this.RKt=!1,r){for(const t of this.$Zt())t.Kit();for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.P3(i);!e||e.pX()||e.DUt()||e.UUt(s)}}this.LYt=e.next_uid,this._xt.wst(i.events);for(const t of this.MYt)if(!t.pX()&&t.FK())for(const s of t.uX()){const i=s.NK();s.NVt();for(const e of t.Git().NX()){if(e===t)continue;const n=e.uX();if(i<0||i>=n.length)throw new Error("missing sibling instance");s.aet(n[i])}}this.dot.wst(i.timelines),s.Ket(),s.Zet();for(const t of h)t.KVt();this.GOt(),this.nBt.dispatchEvent(ob.jn(ob.Event,"afterload")),this.s6(this.d0t("afterload"));for(const[t,s]of Object.entries(i.types)){const s=parseInt(t,10),i=this.P3(s);i&&i.BUt()}const o=this.d0t("load");o.saveData=i.user_script_data,await this.eet(o),this.jJ()}p0t(t,s){return s.LJ().ojt()-t.LJ().ojt()}Xjt(t,s){t.LJ()&&(this.oZt.has(t)||(this.oZt.set(t,s),this.aZt.push(t)))}MOt(){this.oZt=new WeakMap,ob.wh(this.aZt),ob.Tet.QWt()}GOt(t="full",s=null){this.aZt.sort(this.p0t),s||(s={}),s.NWt=new Set;const i=this.aZt.length;for(const i of this.aZt)i._nt(this.oZt.get(i),t,s);for(const i of this.aZt)i.iWt(this.oZt.get(i),t,s);if(this.MOt(),i){this.YJ(),this.oet();for(const t of this.Mst.SJ())for(const s of t.hY())s.V7(),s.zJ()}}async m0t(t){const s=t.map(t=>new URL(t,location.href).toString());this.XKt.g0t(s)}y0t(t,s){this.XKt.S0t(t,s)}w0t(t,s){this.XKt.v0t(t,s)}b0t(t,s,i,e){return this.XKt.b0t(t,s,i,null,null,e)}x0t(t,s,i,e){return this.XKt.x0t(t,s,i,e)}T0t(){return this.XKt.M0t()}PJ(t,s){this.Vc("runtime","invoke-download",{url:t,filename:s})}async xXt(t,s,i,e,n,r){if(e=e||s,n=n||i,this.qj())return(await this.ZJ("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:n,imageBitmapOpts:r})).imageBitmap;{const h=await self.C3_RasterSvgImageBlob(t,s,i,e,n);return r?await self.createImageBitmap(h,r):h}}async G0t(t){return this.qj()?await this.ZJ("runtime","get-svg-image-size",{blob:t}):await self.C3_GetSvgImageSize(t)}_0t(){this.UKt||(this.UKt=!0,this.Vc("runtime","enable-device-orientation"))}I0t(){this.VKt||(this.VKt=!0,this.Vc("runtime","enable-device-motion"))}cJ(){return this.cKt()}C0t(t){this.cKt=t}QKt(){const t=this.Px();return{fps:this.WH(),tps:this.jH(),cpu:this.JH(),gpu:this.$H(),layout:this.fJ()?this.fJ().Pc():"",renderer:t.$b()?t.WO():t.WB()}}sGt(){return!!this.gZ()&&ab.sGt()}qMt(t){return this.RFt()?ab.qMt(t):Promise.resolve()}ICt(){return!!this.RFt()&&ab.P0t()}R0t(t){this.YXt=!!t,this.E0t()}A0t(){return this.YXt}RFt(){return this.KXt}O3(t){t?this.ZXt--:this.ZXt++,this.E0t()}E0t(){this.KXt=this.gZ()&&this.YXt&&0===this.ZXt}J_t(){return this.gZ()&&ab.J_t()}Att(){return this.gZ()&&this.Px().DO()&&ab.Att()}async RQt(t){if(t)for(const s of t)await this.qMt(s)}AQt(t){return this.RQt(this.nBt.Pf(t))}KTt(t){return this._xt.KTt(t.name,t.params)}tq(t){if(this.qj())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}M$(){return this.eZt}g3(){return this.nZt}d0t(t){const s=ob.jn(ob.Event,t,!1);return s.runtime=this.eZt,s}vZt(){this.eZt=new self._j(this),this.HKt={pretick:this.d0t("pretick"),tick:this.d0t("tick"),tick2:this.d0t("tick2")}}TZt(){const t={};for(const s of this.MYt)t[s.MMt()]={value:s.q$(),enumerable:!0,writable:!1};this.eZt.eH(t)}MZt(){const t={};for(const s of this.hH().RMt())t[s.MMt()]=s.GMt();this.eZt.nH(t)}xJ(){return this.hZt}W$(t,s){this.rZt.set(t,s)}lY(t){return this.rZt.get(t)}$q(t){if(!(t instanceof self.K$))throw new TypeError("expected IObjectClass");const s=this.lY(t);if(!(s&&s instanceof ob.ZSt))throw new Error("invalid IObjectClass");return s}oX(t){if(!(t instanceof self.MK))throw new TypeError("expected IInstance");const s=this.lY(t);if(!(s&&s instanceof ob.Instance))throw new Error("invalid IInstance");return s}DJ(t){if(!(t instanceof self.u0))throw new TypeError("expected IWorldInstance");const s=this.lY(t);if(!(s&&s instanceof ob.Instance))throw new Error("invalid IInstance");return s}},self.C3_CreateRuntime=ob.LXt.KG,self.C3_InitRuntime=(t,s)=>t.eVt(s)}{const fb=self._s;fb.YKt=class extends fb.Wn{constructor(t,s){super(),this.Nc=t,this.F0t=new Map,this.O0t=0,this.D0t=s.inputPort,s.outputPort.onmessage=t=>this.L0t(t),this.k0t=s.maxNumWorkers,this.N0t=1,this.B0t=!1,this.U0t=!1}M0t(){return this.k0t}g0t(t){this.D0t.postMessage({type:"_import_scripts",scripts:t})}S0t(t,s){this.D0t.postMessage({type:"_send_blob",blob:t,id:s})}v0t(t,s){this.D0t.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}b0t(t,s,i,e,n,r){if(i||(i=[]),"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const h=this.O0t++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:h,params:s,transferables:i},a=new Promise((t,s)=>{this.F0t.set(h,{resolve:t,progress:e,reject:s,V0t:!1,W0t:r})});return n&&n.Xf(()=>this.z0t(h)),this.D0t.postMessage(o,i),this.j0t(),a}x0t(t,s,i,e){if(i||(i=[]),"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const n={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:this.O0t++,params:s,transferables:i};this.D0t.postMessage(n,i)}z0t(t){const s=this.F0t.get(t);s&&(s.V0t=!0,s.resolve=null,s.progress=null,s.reject=null,this.D0t.postMessage({type:"_cancel",jobId:t}))}L0t(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.H0t(e,s.result);break;case"progress":this.J0t(e,s.progress);break;case"error":this.q0t(e,s.error);break;case"ready":this.$0t();break;default:throw new Error(`unknown message from worker '${i}'`)}}H0t(t,s){const i=this.F0t.get(t);if(!i)throw new Error("invalid job ID");i.V0t||i.resolve(s),this.F0t.delete(t)}J0t(t,s){const i=this.F0t.get(t);if(!i)throw new Error("invalid job ID");!i.V0t&&i.progress&&i.progress(s)}q0t(t,s){const i=this.F0t.get(t);if(!i)throw new Error("invalid job ID");i.V0t||i.reject(s),this.F0t.delete(t)}$0t(){this.B0t&&(this.B0t=!1,this.N0t++,this.N0t<this.k0t?this.j0t():this.D0t.postMessage({type:"_no_more_workers"}))}X0t(){let t=0;const s=[...this.F0t.values()].sort((t,s)=>(t.W0t||1/0)-(s.W0t||1/0));for(const i of s)t<(i.W0t||1/0)&&t++;return t}async j0t(){if(!(this.N0t>=this.k0t||this.B0t||this.U0t||this.X0t()<=this.N0t))try{this.B0t=!0,(await this.Nc.ZJ("runtime","create-job-worker")).outputPort.onmessage=t=>this.L0t(t)}catch(t){this.U0t=!0,this.B0t=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.N0t} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.glowvertical={v$t:"varying mediump vec2 vTex;\nuniform mediump sampler2D samplerFront;\nuniform mediump vec2 pixelSize;\nuniform mediump float intensity;\nvoid main(void)\n{\nmediump vec4 sum = vec4(0.0);\nmediump float pixelHeight = pixelSize.y;\nmediump float halfPixelHeight = pixelHeight / 2.0;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 7.0 + halfPixelHeight)) * 0.06;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 5.0 + halfPixelHeight)) * 0.10;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 3.0 + halfPixelHeight)) * 0.13;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 1.0 + halfPixelHeight)) * 0.16;\nmediump vec4 front = texture2D(samplerFront, vTex);\nsum += front * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 1.0 + halfPixelHeight)) * 0.16;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 3.0 + halfPixelHeight)) * 0.13;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 5.0 + halfPixelHeight)) * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 7.0 + halfPixelHeight)) * 0.06;\ngl_FragColor = mix(front, max(front, sum), intensity);\n}",w$t:"",y$t:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nintensity : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar pixelHeight : f32 = c3_getPixelSize(textureFront).y;\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar sum : vec4<f32> =\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(0.0, pixelHeight * 7.5)) * 0.06 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(0.0, pixelHeight * 5.5)) * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(0.0, pixelHeight * 3.5)) * 0.13 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(0.0, pixelHeight * 1.5)) * 0.16 +\nfront * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(0.0, pixelHeight * 1.5)) * 0.16 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(0.0, pixelHeight * 3.5)) * 0.13 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(0.0, pixelHeight * 5.5)) * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(0.0, pixelHeight * 7.5)) * 0.06;\nvar output : FragmentOutput;\noutput.color = mix(front, max(front, sum), shaderParams.intensity);\nreturn output;\n}",Mx:!1,_x:!1,hx:0,lx:8,mx:!1,yx:!1,wx:!1,bx:!1,animated:!1,parameters:[["intensity",0,"percent"]]},self.C3_Shaders.glowhorizontal={v$t:"varying mediump vec2 vTex;\nuniform mediump sampler2D samplerFront;\nuniform mediump vec2 pixelSize;\nuniform mediump float intensity;\nvoid main(void)\n{\nmediump vec4 sum = vec4(0.0);\nmediump float pixelWidth = pixelSize.x;\nmediump float halfPixelWidth = pixelWidth / 2.0;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 7.0 + halfPixelWidth, 0.0)) * 0.06;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 5.0 + halfPixelWidth, 0.0)) * 0.10;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 3.0 + halfPixelWidth, 0.0)) * 0.13;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 1.0 + halfPixelWidth, 0.0)) * 0.16;\nmediump vec4 front = texture2D(samplerFront, vTex);\nsum += front * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 1.0 + halfPixelWidth, 0.0)) * 0.16;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 3.0 + halfPixelWidth, 0.0)) * 0.13;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 5.0 + halfPixelWidth, 0.0)) * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 7.0 + halfPixelWidth, 0.0)) * 0.06;\ngl_FragColor = mix(front, max(front, sum), intensity);\n}",w$t:"",y$t:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nintensity : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar pixelWidth : f32 = c3_getPixelSize(textureFront).x;\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar sum : vec4<f32> =\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(pixelWidth * 7.5, 0.0)) * 0.06 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(pixelWidth * 5.5, 0.0)) * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(pixelWidth * 3.5, 0.0)) * 0.13 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(pixelWidth * 1.5, 0.0)) * 0.16 +\nfront * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(pixelWidth * 1.5, 0.0)) * 0.16 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(pixelWidth * 3.5, 0.0)) * 0.13 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(pixelWidth * 5.5, 0.0)) * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(pixelWidth * 7.5, 0.0)) * 0.06;\nvar output : FragmentOutput;\noutput.color = mix(front, max(front, sum), shaderParams.intensity);\nreturn output;\n}",Mx:!1,_x:!1,hx:8,lx:0,mx:!1,yx:!1,wx:!1,bx:!1,animated:!1,parameters:[["intensity",0,"percent"]]},self.C3_Shaders.depthstripe={v$t:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform lowp sampler2D samplerDepth;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nuniform mediump float zNear;\nuniform mediump float zFar;\nuniform lowp vec3 color1;\nuniform lowp float opacity1;\nuniform lowp vec3 color2;\nuniform lowp float opacity2;\nuniform mediump float stripeDepth;\nuniform mediump float stripeOffset;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nmediump vec2 tex = (vTex - srcStart) / (srcEnd - srcStart);\nmediump float depthSample = texture2D(samplerDepth, mix(destStart, destEnd, tex)).r;\nmediump float zLinear = zNear * zFar / (zFar + depthSample * (zNear - zFar));\nlowp float which = mod(floor((zLinear + stripeOffset) / stripeDepth), 2.0);\nif (which == 0.0)\n{\ngl_FragColor = mix(front, vec4(color1 * front.a, front.a), opacity1);\n}\nelse\n{\ngl_FragColor = mix(front, vec4(color2 * front.a, front.a), opacity2);\n}\n}",w$t:"",y$t:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\n%%SAMPLERDEPTH_BINDING%% var samplerDepth : sampler;\n%%TEXTUREDEPTH_BINDING%% var textureDepth : texture_depth_2d;\nstruct ShaderParams {\ncolor1 : vec3<f32>,\nopacity1 : f32,\ncolor2 : vec3<f32>,\nopacity2 : f32,\nstripeDepth : f32,\nstripeOffset : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3PARAMS_STRUCT%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar depthSample : f32 = textureSample(textureDepth, samplerDepth, c3_getDepthUV(input.fragPos.xy, textureDepth));\nvar zLinear : f32 = c3_linearizeDepth(depthSample);\nvar which : f32 = floor((zLinear + shaderParams.stripeOffset) / shaderParams.stripeDepth) % 2.0;\nvar stripeColor : vec3<f32> = select(shaderParams.color2, shaderParams.color1, which == 0.0);\nvar stripeOpacity : f32 = select(shaderParams.opacity2, shaderParams.opacity1, which == 0.0);\nvar output : FragmentOutput;\noutput.color = mix(front, vec4<f32>(stripeColor * front.a, front.a), stripeOpacity);\nreturn output;\n}",Mx:!1,_x:!0,hx:0,lx:0,mx:!1,yx:!1,wx:!1,bx:!1,animated:!1,parameters:[["color1",0,"color"],["opacity1",0,"percent"],["color2",0,"color"],["opacity2",0,"percent"],["stripeDepth",0,"float"],["stripeOffset",0,"float"]]};{let db=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const t=""+i,s=""+e;return t<s?-1:t>s?1:0}};0;const pb=self._s;let mb=null,gb="",yb="",Sb=[],wb="",vb="",bb="";const xb=pb.jn(pb.xTt);pb.lq.aq=class extends pb.TDt{constructor(t){super(t),this.yTt=this.Nc.hH().A3(),this.ixt=this.Nc.hH().wH(),this.Y0t=0,this.K0t=0,this.Z0t=new Map}Hn(){super.Hn()}jJ(){this.Nc.jJ()}aZ(t){this.Nc.aZ(t,null,null)}Q0t(t,s){return mb&&t===gb&&s===yb||(mb=new RegExp(t,s),gb=t,yb=s),mb.lastIndex=0,mb}t1t(t,s,i){if(t===wb&&s===vb&&i===bb)return Sb;const e=this.Q0t(s,i);return Sb=t.match(e),wb=t,vb=s,bb=i,Sb}async s1t(t,s){if(!s.length)return;this.Y0t+=s.length;const i=[];for(const e of s)i.push(t.Pit(e));await pb.Vh(i,()=>{this.K0t++}),this.K0t++,this.K0t===this.Y0t&&(this.K0t=0,this.Y0t=0,this.Nc.aZ(pb.lq.aq.oq.i1t,null,null))}i6(){return 0===this.Y0t?1:this.K0t/this.Y0t}e1t(t,s){for(const i of s)0===i.MX()&&t.Fit(i)}n1t(){return xb}r1t(t){const s=this.Nc.hH(),i=s.wH(),e=i.R3(),n=e.fH(),r=n.bX(),h=e.eTt(),o=i.E3(n),a=s.A3(),l=a.E3();if(l.vTt(t),h)for(let i=0;i<t&&!l.W3();++i)s.L3(r),l.U3(i),n.N3(e,o),s.B3(r);else for(let s=0;s<t&&!l.W3();++s)l.U3(s),n.N3(e,o);return i.z3(),a.z3(),!1}*h1t(t){const s=this.Nc.hH(),i=s.wH(),e=i.R3(),n=e.fH(),r=n.bX(),h=e.eTt(),o=i.E3(n),a=s.A3(),l=a.E3();if(l.vTt(t),h)for(let i=0;i<t&&!l.W3();++i)s.L3(r),l.U3(i),yield*n.NCt(e,o),s.B3(r);else for(let s=0;s<t&&!l.W3();++s)l.U3(s),yield*n.NCt(e,o);return i.z3(),a.z3(),!1}o1t(){const t=this.Nc.hH(),s=t.wH(),i=s.R3(),e=i.fH(),n=e.bX(),r=i.eTt(),h=s.E3(e),o=t.A3(),a=o.E3();if(r)for(let s=0;!a.W3();++s)t.L3(n),a.U3(s),e.N3(i,h)||a.v1(),t.B3(n);else for(let t=0;!a.W3();++t)a.U3(t),e.N3(i,h)||a.v1();return s.z3(),o.z3(),!1}*a1t(){const t=this.Nc.hH(),s=t.wH(),i=s.R3(),e=i.fH(),n=e.bX(),r=i.eTt(),h=s.E3(e),o=t.A3(),a=o.E3();if(r)for(let s=0;!a.W3();++s)t.L3(n),a.U3(s),(yield*e.NCt(i,h))||a.v1(),t.B3(n);else for(let t=0;!a.W3();++t)a.U3(t),(yield*e.NCt(i,h))||a.v1();return s.z3(),o.z3(),!1}l1t(t,s,i){const e=this.Nc.hH(),n=e.wH(),r=n.R3(),h=r.fH(),o=h.bX(),a=r.eTt(),l=n.E3(h),u=e.A3(),c=u.E3();if(c.F3(t),c.vTt(i),i<s)if(a)for(let t=s;t>=i&&!c.W3();--t)e.L3(o),c.U3(t),h.N3(r,l),e.B3(o);else for(let t=s;t>=i&&!c.W3();--t)c.U3(t),h.N3(r,l);else if(a)for(let t=s;t<=i&&!c.W3();++t)e.L3(o),c.U3(t),h.N3(r,l),e.B3(o);else for(let t=s;t<=i&&!c.W3();++t)c.U3(t),h.N3(r,l);return n.z3(),u.z3(),!1}*u1t(t,s,i){const e=this.Nc.hH(),n=e.wH(),r=n.R3(),h=r.fH(),o=h.bX(),a=r.eTt(),l=n.E3(h),u=e.A3(),c=u.E3();if(c.F3(t),c.vTt(i),i<s)if(a)for(let t=s;t>=i&&!c.W3();--t)e.L3(o),c.U3(t),yield*h.NCt(r,l),e.B3(o);else for(let t=s;t>=i&&!c.W3();--t)c.U3(t),yield*h.NCt(r,l);else if(a)for(let t=s;t<=i&&!c.W3();++t)e.L3(o),c.U3(t),yield*h.NCt(r,l),e.B3(o);else for(let t=s;t<=i&&!c.W3();++t)c.U3(t),yield*h.NCt(r,l);return n.z3(),u.z3(),!1}c1t(t){const s=t.cX(),i=s.uX();if(0===i.length)return!1;const e=this.Nc.hH(),n=e.wH(),r=n.R3(),h=r.fH(),o=h.bX(),a=r.eTt(),l=n.E3(h),u=e.A3(),c=u.E3(),f=t.FK(),d=xb.E3();if(pb.Mh(d,i),c.vTt(d.length),a)for(let s=0,i=d.length;s<i&&!c.W3();++s){e.L3(o);const i=d[s];t.cX().yxt(i),f&&i.Z_t(),c.U3(s),h.N3(r,l),e.B3(o)}else{s.pxt(!1);const t=s.mxt();pb.wh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.W3();++s){const i=d[s];t[0]=i,f&&i.Z_t(),c.U3(s),h.N3(r,l)}}return n.z3(),u.z3(),pb.wh(d),xb.z3(),!1}*f1t(t){const s=t.cX(),i=s.uX();if(0===i.length)return!1;const e=this.Nc.hH(),n=e.wH(),r=n.R3(),h=r.fH(),o=h.bX(),a=r.eTt(),l=n.E3(h),u=e.A3(),c=u.E3(),f=t.FK(),d=xb.E3();if(pb.Mh(d,i),c.vTt(d.length),a)for(let s=0,i=d.length;s<i&&!c.W3();++s){e.L3(o);const i=d[s];t.cX().yxt(i),f&&i.Z_t(),c.U3(s),yield*h.NCt(r,l),e.B3(o)}else{s.pxt(!1);const t=s.mxt();pb.wh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.W3();++s){const i=d[s];t[0]=i,f&&i.Z_t(),c.U3(s),yield*h.NCt(r,l)}}return n.z3(),u.z3(),pb.wh(d),xb.z3(),!1}d1t(t,s){const i=t.cX(),e=i.uX();if(0===e.length)return!1;const n=this.Nc.hH(),r=n.wH(),h=n.mMt(),o=r.R3(),a=o.fH(),l=a.bX(),u=o.eTt(),c=r.E3(a),f=n.A3(),d=f.E3(),p=t.FK(),m=xb.E3();pb.wh(m),d.vTt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.XEt(1,t)]);if(m.sort(db),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.W3();++s){n.L3(l);const i=m[s][0];t.cX().yxt(i),p&&i.Z_t(),d.U3(s),a.N3(o,c),n.B3(l)}else{i.pxt(!1);const t=i.mxt();pb.wh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.W3();++s){const i=m[s][0];t[0]=i,p&&i.Z_t(),d.U3(s),a.N3(o,c)}}return r.z3(),f.z3(),pb.wh(m),xb.z3(),!1}*p1t(t,s){const i=t.cX(),e=i.uX();if(0===e.length)return!1;const n=this.Nc.hH(),r=n.wH(),h=n.mMt(),o=r.R3(),a=o.fH(),l=a.bX(),u=o.eTt(),c=r.E3(a),f=n.A3(),d=f.E3(),p=t.FK(),m=xb.E3();pb.wh(m),d.vTt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.XEt(1,t)]);if(m.sort(db),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.W3();++s){n.L3(l);const i=m[s][0];t.cX().yxt(i),p&&i.Z_t(),d.U3(s),yield*a.NCt(o,c),n.B3(l)}else{i.pxt(!1);const t=i.mxt();pb.wh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.W3();++s){const i=m[s][0];t[0]=i,p&&i.Z_t(),d.U3(s),yield*a.NCt(o,c)}}return r.z3(),f.z3(),pb.wh(m),xb.z3(),!1}m1t(t,s){let i=this.Z0t.get(t);return i||(s?(i={g1t:null,y1t:new Map},this.Z0t.set(t,i),i):null)}S1t(t,s,i,e,n){s.uH().ZCt(i,s.mH()),e&&t.B3(n)}*w1t(t,s,i,e,n){yield*s.uH().QCt(i,s.mH()),e&&t.B3(n)}}}{const Tb=self._s;Tb.lq.aq.LBt=class extends Tb.Wn{constructor(t){super(),this.$bt=t,this.Nc=t.yq(),this.cLt=t.Q$()}$Dt(){}Hn(){this.$bt=null,this.Nc=null,this.cLt=null}}}{const Mb=self._s;Mb.lq.aq.Instance=class extends Mb.Wn{constructor(t,s){super(),this.fi=t,this.$bt=this.fi.gX(),this.yLt=this.$bt.GAt(),this.Nc=this.fi.yq()}Hn(){this.fi=null,this.$bt=null,this.yLt=null,this.Nc=null}}}{const Gb=self._s,_b=[];Gb.lq.aq.oq={v1t:()=>!0,ret:()=>!0,det:()=>!0,aQt:()=>!0,lQt:()=>!0,IH(){return this.Nc.IH()},LIt(){const t=this.Nc.pMt();return!t.Zxt()&&!t.Yxt()},b1t(){const t=this.Nc.mMt().LEt();let s=t.get("TriggerOnce_lastTick");void 0===s&&(s=-1,t.set("TriggerOnce_lastTick",-1));const i=this.Nc.DH();return t.set("TriggerOnce_lastTick",i),this.Nc.XQt()||s!==i-1},x1t(t){const s=this.Nc.mMt().LEt(),i=s.get("Every_lastTime")||0,e=this.Nc.FH();s.has("Every_seconds")||s.set("Every_seconds",t);const n=s.get("Every_seconds");return e>=i+n?(s.set("Every_lastTime",i+n),e>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",e),s.set("Every_seconds",t),!0):(e<i-.1&&s.set("Every_lastTime",e),!1)},ZGt(t){const s=this.Nc.hH().OMt(t);return s&&s.ZGt()},FXt(){return this.Nc.FXt()},hi:()=>Gb.Ks.hi,WZt:()=>!0,hq:()=>!0,T1t:()=>!0,o0t:()=>!0,f0t:()=>!0,l0t:()=>!0,u0t:()=>!0,M1t(t){return!!this.Nc.EJ(t)},G1t(t){switch(t){case 0:return"browser"===Gb.Ks.ni;case 1:return"iOS"===Gb.Ks.Zs;case 2:return"Android"===Gb.Ks.Zs;case 8:return"cordova"===Gb.Ks.ni;case 9:return"scirra-arcade"===this.Nc.s$();case 13:return"windows-uwp"===this.Nc.s$();default:return!1}},_1t(t,s,i){return this.Q0t(s,i).test(t)},I1t:(t,s,i)=>Gb.compare(t,s,i),C1t:(t,s,i)=>t>=s&&t<=i,P1t:(t,s,i)=>Gb.compare(t.Hct(),s,i),R1t:t=>!!t.Hct(),E1t(t,s){const i=this.Nc.FH();if(0===t){const t=this.Nc.mMt().LEt();return!t.get("CompareTime_executed")&&i>=s&&(t.set("CompareTime_executed",!0),!0)}return Gb.compare(i,t,s)},A1t:t=>isNaN(t),HOt:(t,s,i)=>Gb.rr(Gb.Zn(t),Gb.Zn(i))<=Gb.Zn(s),JOt:(t,s)=>Gb.ar(Gb.Zn(t),Gb.Zn(s)),iFt(t,s,i){let e=Gb.Zn(t),n=Gb.Zn(s),r=Gb.Zn(i);return Gb.ar(r,n)?Gb.ar(e,n)&&!Gb.ar(e,r):!(!Gb.ar(e,n)&&Gb.ar(e,r))},F1t:(t,s)=>"number"==typeof t?0===s:1===s,O1t:t=>!!t,RGt(t){return t.toLowerCase()===this.Nc.hH().OGt()},D1t(t,s,i,e){if(!t)return!1;const n=this.n1t(),r=n.E3(),h=t.cX();Gb.Mh(r,h.uX()),h.oxt()&&Gb.wh(h.gxt());const o=this.Nc.mMt();let a=0;for(let t=0,n=r.length;t<n;++t){const n=r[t];r[a]=n,s=o.XEt(1,t),e=o.XEt(3,t),Gb.compare(s,i,e)?++a:h.dxt(n)}Gb.Sh(r,a),h.Sxt(r);const l=!!r.length;return Gb.wh(r),n.z3(),t.JCt(),l},L1t(t,s){if(!t)return!1;const i=this.n1t(),e=i.E3(),n=t.cX();Gb.Mh(e,n.uX()),n.oxt()&&Gb.wh(n.gxt());const r=this.Nc.mMt();let h=0;for(let t=0,s=e.length;t<s;++t){const s=e[t];e[h]=s,r.XEt(1,t)?++h:n.dxt(s)}Gb.Sh(e,h),n.Sxt(e);const o=!!e.length;return Gb.wh(e),i.z3(),t.JCt(),o},k1t(t,s,i){if(!t)return!1;const e=t.cX(),n=e.uX();if(0===n.length)return!1;const r=this.Nc.mMt();let h=null,o=0;for(let t=0,e=n.length;t<e;++t){const e=n[t];i=r.XEt(2,t),(null===h||0===s&&i<o||1===s&&i>o)&&(o=i,h=e)}return e.Txt(h),t.JCt(),!0},N1t(t,s){if(!t)return!1;const i=t.cX(),e=i.uX();if((s=Math.floor(s))>=e.length)return!1;const n=e[s];return i.Txt(n),t.JCt(),!0},B1t(t){if(!t)return!1;const s=t.cX(),i=s.uX(),e=Math.floor(this.Nc.cJ()*i.length);if(e>=i.length)return!1;const n=i[e];return s.Txt(n),t.JCt(),!0},U1t:t=>!!t&&(!!t.MX()&&(t.cX().pxt(!0),t.JCt(),!0)),V1t(t,s,i){if(!t)return!1;const e=t.cX(),n=e.uX(),r=this.Nc.fH().Mxt(),h=this.Nc.mMt().EEt();e.oxt()?(Gb.Mh(_b,n),e.hxt(),e.pxt(!1)):r?(Gb.Mh(_b,e.gxt()),Gb.wh(e.gxt())):(Gb.Mh(_b,e.mxt()),Gb.wh(e.mxt()));for(let t=0,n=_b.length;t<n;++t){const n=_b[t];Gb.xor(n.LJ().SQ(s,i),h)?e.fxt(n):e.dxt(n)}return t.JCt(),Gb.xor(!!e.mxt().length,h)},W1t(t){if(!t)return!1;const s=t.pX();let i=null;const e=this.Nc.GUt();for(let n=e.length-1;n>=0;--n){const r=e[n];if(s){if(r.gX().EAt(t)){i=r;break}}else if(r.gX()===t){i=r;break}}if(!i){const s=t.uX();s.length&&(i=s.at(-1))}return!!i&&(t.cX().Txt(i),t.JCt(),!0)},z1t(t){return this.Nc.RFt()?this.h1t(t):this.r1t(t)},j1t(){return this.Nc.RFt()?this.a1t():this.o1t()},H1t(t,s,i){return this.Nc.RFt()?this.u1t(t,s,i):this.l1t(t,s,i)},zd(t){return this.Nc.RFt()?this.f1t(t):this.c1t(t)},J1t(t,s,i){return this.Nc.RFt()?this.p1t(t,i):this.d1t(t,i)},q1t:t=>!!t&&t.OY(),$1t:t=>!!t&&t.WY(),X1t:t=>!!t&&t.BY(),Y1t:t=>!!t&&!t.MX(),K1t:(t,s,i)=>!!t&&Gb.compare(100*t.FF(),s,i),Z1t(t){const s=this.Nc.fJ();return!!s&&s.pit(t)},i1t:()=>!0,Q1t(){return this.Y0t>0},t2t(t,s){const i=this.Nc.kVt();return!!i&&!!s&&!!i.KSt(t,s)}}}{let Ib=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]},Cb=function(t,s){return t[1]-s[1]};0;const Pb=self._s,Rb=[],Eb=[],Ab=Pb.jn(Pb.Rect),Fb=Pb.jn(Pb.To),Ob=[];Pb.lq.aq.Jdt={s2t(t,s){t.Cft(s)},i2t(t,s){t.Zi()&&"number"!=typeof s&&(s=parseFloat(s)),t.Cft(t.Hct()+s)},e2t(t,s){t.Zi()&&t.Cft(t.Hct()-s)},n2t(t,s){t.Cft(!!s)},r2t(t){t.Cft(!t.Hct())},h2t(t){t.Cft(t.dMt())},o2t(t){this.Nc.hH().AMt(t)},a2t(t,s,i,e,n,r){if(!t||!s)return;const h=this.Nc._X(t,s,i,e,n,r);if(!h)return;n&&s.IX(h);const o=this.Nc.hH();o.CX(!0),h.PX(),o.CX(!1);const a=new Map;h.CVt(a,t,n);for(const[t,s]of a)t.cX().wxt(s)},l2t(t,s,i,e,n,r){if(!t||!s)return;const h=this.Nc.qZt(t);h&&Pb.lq.aq.Jdt.a2t.call(this,h,s,i,e,n,r)},H7(t,s,i,e,n,r,h,o,a,l,u){if(!t)return;const c=this.Nc.OJ();let f=c;if(r){const t=this.Nc.mJ().zet(r);if(!t)return;f=t}let d=null;if(("number"!=typeof h||h>=0)&&(d=f.NJ(h),!d))return;let p=null;if(("number"!=typeof o||o>=0)&&(p=c.NJ(o),!p))return;Ab.set(s,i,e,n);const m=f.H7(t,Ab,d,p,a,l,u);t.cX().Sxt(m),t.JCt()},u2t(){const t=this.yTt;t.dTt()&&t.cTt().v1()},QGt(t,s){const i=this.Nc.hH().OMt(t);i&&(0===s?i.QGt(!1):1===s?i.QGt(!0):i.QGt(!i.ZGt()))},c2t(t){this.Nc.UH(t)},f2t(t,s){if(s<0&&(s=0),!t)return;const i=t.cX().uX();for(const t of i)t.UH(s)},d2t(t){if(!t)return;const s=t.cX().uX();for(const t of s)t.zK()},dh(t,s){if(t<0)return;const i=this.Nc.hH().pGt();return s?i.pDt(t):i.mDt(t),!0},MH(t){return this.Nc.hH().pGt().gDt(t),!0},p2t(){const t=this.Nc.hH();return t.pGt().yDt(t.PGt()),!0},xH(t){this.Nc.hH().xH(t)},async nq(t,s,i,e,n,r){const h=this.Nc.IJ();h&&(this.jJ(),await h.nq(0===t?"image/png":"image/jpeg",s/100,i,e,n,r),await this.Nc.rq(Pb.lq.aq.oq.hq,null))},m2t(t,s){if(t<=0||s<=0)return;this.Nc.L$t(t,s),this.Nc.OJ().lst();const i=this.Nc.IJ();i&&("off"===i.P$t()||this.Nc.XZt(t,s),i.QR(i.P2(),i.R2(),!0),this.Nc.jJ())},g2t(t){const s=this.Nc.IJ();s&&"off"!==s.P$t()&&(s.z$t(0!==t?"high":"low"),s.QR(s.P2(),s.R2(),!0))},lct(t){this.Nc.ZQt(t)},y2t(){this.Nc.QQt()},S2t(t){this.Nc.t0t(t)},w2t(t){this.Nc.TOt(t)},v2t(t){},b2t(){for(const t of this.Nc.mJ().SJ())t.Met()},x2t(t){this.Nc.rJ(0!==t)},T2t(t,s){this.Nc.eJ(1/t),this.Nc.tJ(1/s)},M2t(t,s){this.Nc.tJ(t),this.Nc.eJ(s)},G2t(t){this.Nc.KH(["vsync","unlimited-tick","unlimited-frame"][t])},_2t(t,s){if(!t)return;const i=t.cX().uX(),e=Rb,n=Eb,r=this.Nc.OJ(),h=t.pX(),o=t.fRt();for(let t=0,r=i.length;t<r;++t){const r=i[t],a=r.LJ();if(!a||a.kJ())continue;let l;l=h?r.Bpt(s+r.gX().cRt(o)):r.Bpt(s),e.push([a.NJ().Gj(),a.BJ()]),n.push([r,l])}if(!e.length)return;e.sort(Ib),n.sort(Cb);let a=!1;for(let t=0,s=e.length;t<s;++t){const s=n[t][0],i=r.UJ(e[t][0]),h=e[t][1],o=i.VJ();o[h]!==s&&(o[h]=s,s.LJ().WJ(i,!0),i.zJ(s),a=!0)}a&&this.Nc.jJ(),Pb.wh(Rb),Pb.wh(Eb)},jq(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Nc.Aj().jq(t,s)},I2t(t){if(this.Nc.OS())return;const s=this.Nc.mJ();s.vJ()||s.bJ(t)},C2t(t){if(this.Nc.OS())return;const s=this.Nc.mJ();if(s.vJ())return;const i=s.zet(t);i&&s.bJ(i)},P2t(t){if(this.Nc.OS())return;const s=this.Nc.mJ();if(s.vJ())return;const i=s.SJ(),e=i.indexOf(s.fJ());if(t&&0===e)return;if(!t&&e===i.length-1)return;const n=i[e+(t?-1:1)];s.bJ(n)},R2t(){if(this.Nc.OS())return;const t=this.Nc.mJ();t.vJ()||(t.bJ(t.fJ()),this.Nc.hH().NMt())},E2t(t,s){t&&t.AY(s)},A2t(t,s){t&&t.kY(s)},F2t(t,s){t&&t.UY(s)},O2t(t,s){t&&t.DF(s/100)},D2t(t,s){t&&t.zY(s)},L2t(t,s){t&&t.JY(s)},k2t(t,s){t&&t.qX(Pb.Zn(+s))},N2t(t,s,i){t&&(t.cK(!0),t.XX(s),t.KX(i))},B2t(t){t&&t.cK(!1)},U2t(t,s,i){t&&t.M9(s/100,i/100)},V2t(t,s){t&&t.pT(+s)},W2t(t,s){t&&t.sK(1===s)},z2t(t,s){if(!t)return;Fb.Qo(s),Fb.Yn();const i=t.uK();i.Ho(Fb)||(i.Lo(Fb),this.jJ())},j2t(t,s){t&&t.nK(s)},H2t(t,s){t&&t.Kx(s)},J2t(t,s,i){if(!t)return;const e=t.VX().tdt(i);if(!e)return;const n=1===s;e.z_t()!==n&&(e.dHt(n),t.F0(),this.Nc.jJ())},q2t(t,s,i,e){if(!t)return;const n=t.VX(),r=n.tdt(s);if(!r)return;i=Math.floor(i);const h=r.Q_().sI(i);h&&("color"===h?(Fb.Qo(e),e=Fb):"percent"===h&&(e/=100),n.D0(r.Gj(),i,e)&&r.z_t()&&this.Nc.jJ())},$2t(t,s){t&&t.oK(s)},X2t(t){this.Nc.OJ().HX(+t)},Y2t(t){this.Nc.OJ().qX(Pb.Zn(+t))},K2t(t,s){const i=this.Nc.OJ(),e=i.VX().tdt(s);if(!e)return;const n=1===t;e.z_t()!==n&&(e.dHt(n),i.F0(),this.Nc.jJ())},Z2t(t,s,i){const e=this.Nc.OJ().VX(),n=e.tdt(t);if(!n)return;s=Math.floor(s);const r=n.Q_().sI(s);r&&("color"===r?(Fb.Qo(i),i=Fb):"percent"===r&&(i/=100),e.D0(n.Gj(),s,i)&&n.z_t()&&this.Nc.jJ())},Q2t(t,s){this.Nc.OJ().SY(t/100,s/100)},t3t(t){const s=this.Nc.OJ();0===t?s.bY():s.xY()},s3t(t){this.Nc.OJ().XX(t)},i3t(t){this.Nc.OJ().KX(t)},e3t(t,s){const i=this.Nc.OJ();i.XX(t),i.KX(s)},n3t(t){if(!t)return;const s=t.SFt();if(!s)return;const i=s.LJ();if(!i)return;const e=this.Nc.OJ();e.XX(i.aT()),e.KX(i.cT())},uY(t,s,i){const e=this.Nc.OJ();try{e.uY(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},fY(t,s,i){if(!t)return;const e=this.Nc.OJ();try{e.fY(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}},pY(t){t&&this.Nc.OJ().pY(t)},gY(){this.Nc.OJ().gY()},async r3t(t){const s=this.Nc.fJ();if(!s||!t||this.Nc.OS())return;const i=t.pX()?t.kX():[t];await this.s1t(s,i)},async h3t(t){await Pb.lq.aq.Jdt.r3t.call(this,this.Nc.qZt(t))},o3t(t){const s=this.Nc.fJ();if(!s||!t)return;const i=t.pX()?t.kX():[t];this.e1t(s,i)},a3t(t){Pb.lq.aq.Jdt.o3t.call(this,this.Nc.qZt(t))},l3t(){const t=this.Nc.fJ();if(!t)return;const s=t._it();this.e1t(t,s)},async u3t(t){const s=this.Nc.fJ();t&&s&&!this.Nc.OS()&&await this.s1t(s,t.Tit())},async c3t(t){const s=this.Nc.fJ(),i=this.Nc.mJ().zet(t);i&&s&&!this.Nc.OS()&&await this.s1t(s,i.Tit())},bH(t){const s=this.ixt.SH();if(s)switch(s.vH()){case 1:"number"==typeof t&&s.bH(t);break;case 2:"string"==typeof t&&s.bH(t);break;case 3:s.bH(t)}},f3t(t,s,i){const e=this.m1t(t.toLowerCase(),!0),n=e.y1t,r=s.toLowerCase();n.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`);const h=Pb.Bh(n.values())||e.g1t;h&&0!==h.gH()!=(0!==i.gH())?console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`):n.set(r,i)},d3t(t,s){const i=this.m1t(t.toLowerCase(),!0);i.g1t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`);const e=Pb.Bh(i.y1t.values())||i.g1t;e&&0!==e.gH()!=(0!==s.gH())?console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`):i.g1t=s},p3t(t,s,i){const e=this.Nc,n=e.RFt()?Ob:null;i=Math.floor(i);const r=this.m1t(t.toLowerCase(),!1);if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),n;let h=r.y1t.get(s.toLowerCase());if(!h){if(!r.g1t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),n;h=r.g1t,i=0}if(!h._u())return n;if(0!==h.gH())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),n;const o=e.hH(),a=o.fH(),l=a.cH(),u=l.length>0;u&&(h.mH()?o.L3(l):o.fGt(l));const c=[],f=o.r_t(a);if(f){const t=f.o_t();for(let s=i,e=t.length;s<e;++s)c.push(t[s].Hct())}const d=h.o_t();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].dMt());return e.RFt()?this.w1t(o,h,c,u,l):this.S1t(o,h,c,u,l)}}}{const Db=self._s,Lb=Db.jn(Db.To);Db.lq.aq.qdt={m3t:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t)&&(t=0)),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&(t=0)),t},C:t=>t.toString(),Lt:t=>"string"==typeof t?t.length:0,random(t,s){return void 0===s?this.Nc.cJ()*t:this.Nc.cJ()*(s-t)+t},YPt(...t){return t[Math.floor(this.Nc.cJ()*t.length)]},g3t:(t,...s)=>("number"!=typeof t&&(t=0),s[t=Db.Yn(Math.floor(t),0,s.length-1)]),y3t:()=>Math.PI,S3t:()=>1/0,sqrt:t=>Math.sqrt(t),abs:t=>Math.abs(t),round:t=>Math.round(t),w3t(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor:t=>Math.floor(t),ceil:t=>Math.ceil(t),sign:t=>Math.sign(t),sin:t=>Math.sin(Db.Zn(t)),cos:t=>Math.cos(Db.Zn(t)),tan:t=>Math.tan(Db.Zn(t)),asin:t=>Db.Qn(Math.asin(t)),acos:t=>Db.Qn(Math.acos(t)),atan:t=>Db.Qn(Math.atan(t)),exp:t=>Math.exp(t),Wt:t=>Math.log(t),log10:t=>Math.log10(t),max(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s<e&&(s=e)}return s},min(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s>e&&(s=e)}return s},Yn:(t,s,i)=>Db.Yn(t,s,i),vt:(t,s,i,e)=>Db.ir(t,s,i,e),angle:(t,s,i,e)=>Db.Qn(Db.nr(t,s,i,e)),_t:(t,s,i)=>Db._t(t,s,i),pr:(t,s,i)=>Db.pr(t,s,i),gr:(t,s,i,e)=>Db.gr(t,s,i,e),yr:(t,s,i,e,n)=>Db.yr(t,s,i,e,n),Sr:(t,s,i)=>Db.Sr(t,s,i),v3t:(t,s)=>Db.Qn(Db.rr(Db.Zn(t),Db.Zn(s))),b3t:(t,s,i)=>Db.Qn(Db.lr(Db.Zn(t),Db.Zn(s),i)),x3t:(t,s,i)=>Db.Qn(Db.hr(Db.Zn(t),Db.Zn(s),Db.Zn(i))),T3t:(t,s,i)=>(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s,M3t:(t,s)=>(t|=0)^1<<s,G3t:(t,s)=>(t|=0)&1<<(s|=0)?1:0,_3t:()=>"\n",I3t:t=>"string"==typeof t?t.toUpperCase():"",C3t:t=>"string"==typeof t?t.toLowerCase():"",left:(t,s)=>"string"==typeof t?t.substr(0,s):"",mid:(t,s,i)=>"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i),right:(t,s)=>"string"==typeof t?t.substr(Math.max(t.length-s,0)):"",trim:t=>"string"==typeof t?t.trim():"",P3t(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},R3t:(t,s)=>"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0,find:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(Db.Yi(s),"i")):-1,E3t:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(Db.Yi(s),"")):-1,replace:(t,s,i)=>"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(Db.Yi(s),"gi"),i):"string"==typeof t?t:"",A3t(t,...s){let i=t;for(let t=0,e=s.length;t<e;++t)i=i.replaceAll(`{${t}}`,s[t].toString());return i},F3t(t,s,i){const e=this.Q0t(s,i);return t?t.search(e):-1},O3t(t,s,i,e){const n=this.Q0t(s,i);return t?t.replace(n,e):""},D3t(t,s,i){const e=this.t1t(t.toString(),s,i);return e?e.length:0},L3t(t,s,i,e){e=Math.floor(e);const n=this.t1t(t.toString(),s,i);return!n||e<0||e>=n.length?"":n[e]},k3t(t,s){let i=t<0?"-":"";t<0&&(t=-t);const e=s-t.toString().length;return i+="0".repeat(Math.max(e,0)),i+t.toString()},N3t:t=>encodeURIComponent(t),B3t:t=>decodeURIComponent(t),CH(){return this.Nc.Trt()},U3t(){return this.Nc.Mrt()},V3t(){return this.Nc.BH()},W3t(){return(Date.now()-this.Nc.UQt())/1e3},z3t:()=>Date.now(),time(){return this.Nc.FH()},j3t(){return this.Nc.DH()},H3t(){return this.Nc.zQt()},VH(){return this.Nc.WH()},J3t(){return this.Nc.JH()},q3t(){return this.Nc.$H()},$3t(){return this.Nc.IJ().m$()},X3t(){return this.Nc.IJ().y$()},Y3t(){return this.Nc.Xj()},K3t(){return this.Nc.Kj()},Z3t(){return this.Nc.Xj()},Q3t(){return this.Nc.Kj()},t4t(){return this.Nc.OJ().YX()},s4t(){return this.Nc.OJ().ZX()},i4t(){return this.Nc.OJ().Pc()},e4t(){return this.Nc.OJ().JX()},n4t(){return Db.Qn(this.Nc.OJ().$X())},r4t(){return this.Nc.OJ().xy()},h4t(){return this.Nc.OJ().My()},o4t(){return 100*this.Nc.OJ().ait()},a4t(){return 100*this.Nc.OJ().lit()},l4t(t){const s=this.Nc.OJ().NJ(t);return s?s.y9().Za():0},u4t(t){const s=this.Nc.OJ().NJ(t);return s?s.y9().Qa():0},c4t(t){const s=this.Nc.OJ().NJ(t);return s?s.y9().tl():0},f4t(t){const s=this.Nc.OJ().NJ(t);return s?s.y9().sl():0},d4t(t){const s=this.Nc.OJ().NJ(t);return s?s.y9().width():0},p4t(t){const s=this.Nc.OJ().NJ(t);return s?s.y9().height():0},m4t(t){const s=this.Nc.OJ().NJ(t);if(s){const t=s.y9();return(t.Za()+t.tl())/2}return 0},g4t(t){const s=this.Nc.OJ().NJ(t);if(s){const t=s.y9();return(t.Qa()+t.sl())/2}return 0},y4t(t,s,i){const e=this.Nc.OJ().NJ(t);return e?e.mK(s,i)[0]:0},S4t(t,s,i){const e=this.Nc.OJ().NJ(t);return e?e.mK(s,i)[1]:0},w4t(t,s,i){const e=this.Nc.OJ().NJ(t);return e?e.yK(s,i)[0]:0},v4t(t,s,i){const e=this.Nc.OJ().NJ(t);return e?e.yK(s,i)[1]:0},b4t(t,s,i,e){const n=this.Nc.OJ(),r=n.NJ(t),h=n.NJ(s);if(!r||!h||r===h)return i;const[o,a]=r.yK(i,e);return h.mK(o,a)[0]},x4t(t,s,i,e){const n=this.Nc.OJ(),r=n.NJ(t),h=n.NJ(s);if(!r||!h||r===h)return e;const[o,a]=r.yK(i,e);return h.mK(o,a)[1]},T4t(t){const s=this.Nc.OJ().NJ(t);return s?s.jY():0},M4t(t){const s=this.Nc.OJ().NJ(t);return s?Db.Qn(s.$Y()):0},G4t(t){const s=this.Nc.OJ().NJ(t);return s?100*s.FF():0},_4t(t){const s=this.Nc.OJ().NJ(t);return s?s.qY():0},I4t(t){const s=this.Nc.OJ().NJ(t);return s?s.YX():0},C4t(t){const s=this.Nc.OJ().NJ(t);return s?s.ZX():0},P4t(t){const s=this.Nc.OJ().NJ(t);return s?100*s.KY():0},R4t(t){const s=this.Nc.OJ().NJ(t);return s?100*s.tK():0},E4t(t){const s=this.Nc.OJ().NJ(t);return s?s.dT():0},A4t(t){const s=this.Nc.OJ().NJ(t);return s?s.Gj():-1},F4t(){const t=this.Nc.IJ();return t?t.pXt():""},O4t(t){const s=this.yTt;if(!s.dTt())return 0;if(t){const i=s.mTt(t);return i?i.Gj():0}return s.cTt().Gj()},D4t(){return this.Nc.s0t()},L4t(t,s,...i){const e=this.m1t(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let n=e.y1t.get(s.toLowerCase());if(!n){if(!e.g1t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;n=e.g1t}const r=n.gH(),h=n.aH();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!n._u())return h;const o=this.Nc.hH(),a=o.fH().cH(),l=a.length>0;l&&(n.mH()?o.L3(a):o.fGt(a));const u=n.o_t();for(let t=i.length,s=u.length;t<s;++t)i.push(u[t].dMt());const c=n.uH(),f=c.pH(c.cH(),n.mH(),r,h,null,...i);return l&&o.B3(a),f},k4t(){return this.Nc.Pj().aJ()},N4t(){return this.i6()},tC(){return this.Nc.K$t()?"webgpu":"webgl"},B4t(){return this.Nc.K$t()?this.Nc.K$t().WB():this.Nc.Y$t().WO()},U4t(){let t=this.Nc.Px().Kb();return Math.round(100*t/1048576)/100},V4t:(t,s,i)=>Db._r(t,s,i),W4t:(t,s,i)=>Db.Cr(t/100,s/100,i/100),z4t:(t,s,i,e)=>Db.Ir(t/100,s/100,i/100,e/100),j4t:(t,s,i)=>Db.Cr(t/255,s/255,i/255),H4t:(t,s,i,e)=>Db.Ir(t/255,s/255,i/255,e/255),J4t:t=>(Lb.Co(0,0,0,1),Lb.ea(t),Db.Ir(Lb.ko(),Lb.No(),Lb.Bo(),Lb.Uo())),q4t:t=>(Lb.Qo(t),Lb.ia(1!==Lb.Uo())),$4t(){return this.Nc.Lj()},X4t(){return this.Nc.Nj()},Y4t(){return this.Nc.Uj()},K4t(){return this.Nc.Wj()},Z4t(){return this.Nc.fH().fit().Pc()},Q4t(){return this.Nc.fH().eCt()},t5t(){return this.Nc.Pj().Lq().length},s5t(t){t=Math.floor(t);const s=this.Nc.Pj().Lq();return t<0||t>=s.length?"":s[t].name}}}{const kb=self._s;kb.lq.odt=class extends kb.TDt{constructor(t){super(t)}Hn(){super.Hn()}}}{const Nb=self._s,Bb=self.ks,Ub=[];Nb.lq.odt.LBt=class extends Nb.uLt{constructor(t){super(t),this.PBt=t.dUt()}Hn(){Nb.wh(this.PBt),super.Hn()}$Dt(){for(const t of this.PBt)t.RNt(this.Nc)}Cit(t){const s={gM:this.Nc.CV()};return Promise.all(this.PBt.map(i=>i.ENt(t,s)))}Oit(){for(const t of this.PBt)t.ANt()}Eit(){this.i5t()}i5t(){for(const t of this.$bt.lX())t.m0().e5t()}WEt(t){Nb.lq.odt.sDt(this,t)}_At(t){Ub.push({pLt:null,n5t:!1,sX:[]})}r5t(t,s,i){const e=Ub.at(-1);e.pLt=t,e.n5t=i,e.sX.push(s)}IAt(t){const s=Ub.pop(),i=s.pLt,e=s.n5t;if(!i)return;const n=new Map;for(const t of s.sX)t.CVt(n,i,e);for(const[t,s]of n)t.cX().wxt(s)}h5t(t){const s=this.gX().SUt(t),i=this.yq();return s.FNt(0).t1().P4(i.Px(),{gM:i.CV()}).then(()=>this.i5t()),s}o5t(t){for(const s of this.$bt.lX())s.m0().a5t(t);this.gX().wUt(t)}l5t(t,s){const i=this.$bt.gUt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.kNt(s);e<0&&(e+=i.J0()+1);const n=Nb.INt.PNt(this.yq());i.ONt(n,e);const r=this.yq();n.t1().P4(r.Px(),{gM:r.CV()}).then(()=>this.i5t());for(const t of this.$bt.lX())t.m0().u5t();return n}c5t(t,s){const i=this.$bt.gUt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.J0())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.kNt(s);e<0&&(e+=i.J0()),i.DNt(e);for(const t of this.$bt.lX())t.m0().u5t()}XDt(){return self.f5t}};const Vb=new WeakMap;self.f5t=class extends self.xX{constructor(t){super(t),Vb.set(this,t.GAt())}d5t(t){Bb.le(t);const s=Vb.get(this).gX().gUt(t);return s?s.NNt():null}p5t(){return Vb.get(this).gX().mUt().map(t=>t.NNt())}m5t(t){return Bb.le(t),Vb.get(this).h5t(t).NNt()}g5t(t){Bb.le(t),Vb.get(this).o5t(t)}y5t(t,s){if(Bb.le(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return Vb.get(this).l5t(t,s).X0()}S5t(t,s){if(Bb.le(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");Vb.get(this).c5t(t,s)}}}{const Wb=self._s,zb=self.ks,jb=0,Hb=1,Jb=2,qb=3,$b=Wb.jn(Wb.Rect),Xb=Wb.jn(Wb.Cl),Yb=Wb.jn(Wb.Ca),Kb=1,Zb=2,Qb=4;Wb.lq.odt.Instance=class extends Wb.zLt{constructor(t,s){super(t);let i=!0,e="",n=0,r=!0;s&&(i=!!s[jb],e=s[Hb],n=s[Jb],r=s[qb]),this.w5t=this.$bt.gUt(e)||this.$bt.dUt()[0],this.v5t=Wb.Yn(n,0,this.w5t.J0()-1),this.b5t=this.w5t.FNt(this.v5t);const h=this.b5t.t1();this.dL=h.EG(),this.x5t=h.EE(),this.T5t=h.skt(),this.qLt(),t._Vt(Zb,!0),t._Vt(Kb,this.w5t.k0()>=0),this.M5t=Math.abs(this.w5t.k0()),this.G5t=this.w5t.z0(),this._5t=Wb.jn(Wb.Qf),this.I5t=0,this.C5t=0,this.P5t="",this.R5t=-1,this.E5t="",this.A5t=0;const o=this.LJ();this.F5t=o.sQ(),o.AY(i),o.yQ(r),o.zZ(this.b5t.WZ()),o.JZ(this.b5t.HZ()),o.Rjt(this.b5t.c1()),o.kZ(),1===this.$bt.pUt()&&1===this.$bt.dUt()[0].J0()||0===this.M5t||this.OLt()}Hn(){this.w5t=null,this.b5t=null,this.dL=null,this._5t=null,super.Hn()}KLt(){return this.b5t.t1()}Eut(){return!0}R6(){this.dL=null}YLt(){this.e5t()}nM(t){const s=this.dL;if(null===s)return;t.NF(s);const i=this.LJ();i.r0()?this.O5t(i,t):this.D5t(i,t)}D5t(t,s){let i=this.F5t;this.Nc.hJ()&&(i=t.xjt(i)),s.XF(i,this.T5t)}O5t(t,s){const i=t.Vjt();if(t.zjt()){t.ZZ($b,Xb,!1);let s=Xb;this.Nc.hJ()&&(s=t.xjt(s)),i.ZT(t.h0(),s,this.T5t),t.Wjt(!1)}i.nM(s,t.YZ())}L5t(){return this._5t.Hs()}k5t(){return this.fi.IVt(Zb)}N5t(t){this.fi._Vt(Zb,t)}B5t(){return this.fi.IVt(Kb)}U5t(t){this.fi._Vt(Kb,t)}V5t(){return this.fi.IVt(Qb)}W5t(t){this.fi._Vt(Qb,t)}Grt(){this.E5t&&this.z5t(),this.R5t>=0&&this.j5t();const t=this.M5t;if(!this.k5t()||0===t)return void this.SLt();const s=this.Nc.PH(this.fi);this._5t.Bu(s);const i=this.L5t(),e=this.b5t,n=e.s1()/t;if(i<this.I5t+n)return;const r=this.w5t,h=this.G5t,o=r.J0(),a=r.V0(),l=r.B0(),u=r.H0();this.B5t()?this.v5t++:this.v5t--,this.I5t+=n,this.v5t>=o&&(u?(this.U5t(!1),this.v5t=o-2):l?this.v5t=h:(this.C5t++,this.C5t>=a?this.H5t(!1):this.v5t=h)),this.v5t<0&&(u?(this.v5t=1,this.U5t(!0),l||(this.C5t++,this.C5t>=a&&this.H5t(!0))):l?this.v5t=h:(this.C5t++,this.C5t>=a?this.H5t(!0):this.v5t=h)),this.v5t=Wb.Yn(this.v5t,0,o-1);const c=r.FNt(this.v5t);i>this.I5t+c.s1()/t&&(this.I5t=i),this.J5t(e,c)}H5t(t){this.v5t=t?0:this.w5t.J0()-1,this.N5t(!1),this.P5t=this.w5t.Pc(),this.W5t(!0),this.dLt("animationend",!1,{animationName:this.P5t}),this.aZ(Wb.lq.odt.oq.q5t),this.aZ(Wb.lq.odt.oq.$5t),this.W5t(!1),this.C5t=0}J5t(t,s,i){if(t===s)return;const e=this.LJ(),n=t.t1(),r=s.t1(),h=n.xy(),o=n.My(),a=r.xy(),l=r.My();i&&i.pdt?i.pdt(e,h,o,a,l):(h!==a&&e.ny(e.xy()*(a/h)),o!==l&&e.hy(e.My()*(l/o))),e.zZ(s.WZ()),e.JZ(s.HZ()),e.Rjt(s.c1()),e.kZ(),this.b5t=s,this.dL=r.EG(),this.x5t=r.EE(),this.T5t=r.skt();const u=this.J1().Kft();for(let i=0,e=u.length;i<e;++i)u[i].Ukt(t,s);this.dLt("framechange",!1,{animationName:this.w5t.Pc(),X5t:this.v5t}),this.aZ(Wb.lq.odt.oq.Y5t),this.Nc.jJ()}K5t(t){this.N5t(!0),this.I5t=this.L5t(),1===t&&0!==this.v5t&&(this.R5t=0,this.V5t()||this.j5t()),this.OLt()}Z5t(t,s,i){this.E5t=t,this.A5t=s,this.OLt(),!i&&this.V5t()||this.z5t()}Q5t(){return this.w5t}t6t(){return this.E5t?this.E5t:this.w5t.Pc()}a5t(t){Wb.Ke(t,this.t6t())&&this.Z5t(this.$bt.vUt().Pc(),1,!0)}s6t(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.$bt.gUt(this.t6t());if(!s)return;if(-1===(t=s.LNt(t)))return}isFinite(t)&&(this.R5t=t,this.V5t()||this.j5t())}u5t(){if(this.E5t||-1!==this.R5t)return;const t=this.b5t,s=this.w5t.FNt(Wb.Yn(this.v5t,0,this.w5t.J0()-1));t!==s&&this.J5t(t,s),this.w5t.J0()>1&&this.M5t>0&&this.OLt()}i6t(){return this.v5t}e6t(){return this.b5t.g1()}n6t(t){this.M5t=Math.abs(t),this.U5t(t>=0),this.M5t>0&&this.OLt()}r6t(){return this.B5t()?this.M5t:-this.M5t}h6t(t){"string"==typeof t&&-1===(t=this.w5t.LNt(t))||(t=Wb.Yn(Math.floor(t),0,this.w5t.J0()-1),this.G5t=t)}o6t(){return this.G5t}z5t(t){const s=this.b5t,i=this.$bt.gUt(this.E5t);if(this.E5t="",!i)return;if(i===this.w5t&&this.k5t())return;this.w5t=i,this.U5t(i.k0()>=0),this.M5t=Math.abs(i.k0()),this.G5t=i.z0(),this.v5t=Wb.Yn(this.v5t,0,this.w5t.J0()-1),1===this.A5t&&(this.v5t=0),this.N5t(!0),this.I5t=this.L5t();const e=this.w5t.FNt(this.v5t);this.J5t(s,e,t)}j5t(t){const s=this.b5t,i=this.v5t;if(this.v5t=Wb.Yn(Math.floor(this.R5t),0,this.w5t.J0()-1),this.R5t=-1,!t&&i===this.v5t)return;const e=this.w5t.FNt(this.v5t);this.J5t(s,e),this.I5t=this.L5t()}e5t(){const t=this.b5t.t1();this.dL=t.EG(),this.x5t=t.EE(),this.T5t=t.skt(),this.LJ().Wjt(!0)}EG(){return this.dL}EE(){return this.x5t}skt(){return this.T5t}e1(){return this.b5t.e1()}VAt(t){const s=this.b5t,i=this.LJ();let e=null;if("string"==typeof t)e=s.l1(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.a1(t-1)}let n=i.YZ();if(!e)return[i.aT(),i.cT(),n];if(Yb.m(e.XNt()),i.r0()){const[t,s,e]=i.h0().cM(Yb.Fa(),Yb.Da());Yb.set(t,s),n+=e}return Yb.offset(-s.WZ(),-s.HZ()),Yb.scale(i.xy(),i.My()),Yb.rotate(i.$X()),Yb.offset(i.aT(),i.cT()),[Yb.Fa(),Yb.Da(),n]}a6t(){return this.LJ().Djt().pu()}l6t(t){t=Math.floor(t);const s=this.LJ(),i=s.Djt(),e=i.pu();if(t===e&&(t=0),t<0||t>=e)return[0,0];const n=i.du();return[n[2*t+0]+s.aT(),n[2*t+1]+s.cT()]}NLt(){const t=Wb.lq.odt.Jdt,s="plugins.sprite.debugger.animation-properties";return[{title:s+".title",properties:[{name:s+".current-animation",value:this.w5t.Pc(),u6t:s=>this.ULt(t.c6t,s,0)},{name:s+".current-frame",value:this.v5t,u6t:s=>this.ULt(t.f6t,s)},{name:s+".is-playing",value:this.k5t(),u6t:s=>s?this.ULt(t.d6t,0):this.ULt(t.p6t)},{name:s+".speed",value:this.M5t,u6t:s=>this.ULt(t.m6t,s)},{name:s+".repeats",value:this.C5t,u6t:t=>this.C5t=t}]}]}bT(){const t={a:this.w5t.t9()};0!==this.I5t&&(t.fs=this.I5t);const s=this.L5t();0!==s&&(t.at=s),0!==this.v5t&&(t.f=this.v5t),0!==this.M5t&&(t.cas=this.M5t),1!==this.C5t&&(t.ar=this.C5t),0!==this.G5t&&(t.rt=this.G5t),this.k5t()||(t.ap=this.k5t()),this.B5t()||(t.af=this.B5t());const i=this.LJ();return i.gQ()&&(t.ce=i.gQ()),t}xT(t){const s=this.gX().yUt(t.a);s&&(this.w5t=s),this.I5t=t.hasOwnProperty("fs")?t.fs:0,this._5t.Set(t.hasOwnProperty("at")?t.at:0);const i=t.hasOwnProperty("f")?t.f:0;this.v5t=Wb.Yn(i,0,this.w5t.J0()-1),this.M5t=t.hasOwnProperty("cas")?t.cas:0,this.C5t=t.hasOwnProperty("ar")?t.ar:1;const e=t.hasOwnProperty("rt")?t.rt:0;this.G5t=Wb.Yn(e,0,this.w5t.J0()-1),this.N5t(!t.hasOwnProperty("ap")||!!t.ap),this.U5t(!t.hasOwnProperty("af")||!!t.af);const n=this.w5t.FNt(this.v5t);this.b5t=n,this.e5t();const r=this.LJ();r.zZ(n.WZ()),r.JZ(n.HZ()),r.Rjt(n.c1()),r.yQ(!!t.ce),this.k5t()&&this.OLt()}Ppt(t){const s=this.LJ();switch(t){case qb:return s.gQ();case Jb:return Wb.Yn(this.v5t,0,this.w5t.J0()-1);case Hb:return this.w5t.Pc()}}Dpt(t,s,i){const e=this.LJ();switch(t){case qb:e.yQ(!!s);break;case Jb:if(i.ddt){if(!i.fdt)return;{const t=this.w5t.J0()-1,e=s=Wb.Yn(s,0,t),n=this.w5t.FNt(this.v5t),r=this.w5t.FNt(e);this.J5t(n,r,i),this.v5t=Wb.Yn(e,0,t)}}else{this.N5t(!1);const t=this.w5t.J0()-1,e=s=Wb.Yn(s,0,t),n=this.w5t.FNt(this.v5t),r=this.w5t.FNt(e);this.J5t(n,r,i),this.v5t=Wb.Yn(e,0,t)}break;case Hb:this.E5t=s,this.A5t=i?.udt??0,this.z5t(i),this.w5t.J0()>1&&this.w5t.k0()>0?this.OLt():this.SLt()}}XDt(){return self.g6t}};const tx=new WeakMap,sx=new Map([["current-frame",0],["beginning",1]]);self.g6t=class extends self.u0{constructor(){super(),tx.set(this,self.MK.IK().m0())}i1(){return tx.get(this).e1()}n1(t){return this.h1(t)[0]}o1(t){return this.h1(t)[1]}y6t(t){return this.h1(t)[2]}h1(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return tx.get(this).VAt(t)}u1(){return tx.get(this).a6t()}f1(t){return zb.re(t),tx.get(this).l6t(t)[0]}m1(t){return zb.re(t),tx.get(this).l6t(t)[1]}d1(t){return zb.re(t),tx.get(this).l6t(t)}S6t(){tx.get(this).N5t(!1)}w6t(t="current-frame"){zb.le(t);const s=sx.get(t);if(void 0===s)throw new Error("invalid mode");tx.get(this).K5t(s)}v6t(t,s="beginning"){zb.le(t),zb.le(s);const i=sx.get(s);if(void 0===i)throw new Error("invalid mode");const e=tx.get(this);if(!e.gX().gUt(t))throw new Error(`animation name "${t}" does not exist`);e.Z5t(t,i)}d5t(t){zb.le(t);const s=tx.get(this).gX().gUt(t);return s?s.NNt():null}get animation(){return tx.get(this).Q5t().NNt()}get animationName(){return tx.get(this).t6t()}set X5t(t){zb.re(t),tx.get(this).s6t(t)}get X5t(){return tx.get(this).i6t()}set b6t(t){zb.le(t),tx.get(this).s6t(t)}get b6t(){return tx.get(this).e6t()}set x6t(t){zb.re(t),tx.get(this).n6t(t)}get x6t(){return tx.get(this).r6t()}set T6t(t){zb.re(t),tx.get(this).h6t(t)}get T6t(){return tx.get(this).o6t()}get imageWidth(){return tx.get(this).KLt().xy()}get imageHeight(){return tx.get(this).KLt().My()}M6t(){const t=tx.get(this).KLt();return[t.xy(),t.My()]}async G6t(t){zb.Ne(t,Blob);const s=tx.get(this),i=s.yq(),e=s.KLt(),n=Wb.jn(Wb.Qkt);if(n.dNt(i,t),await n.P4(i.Px(),{gM:i.CV()}),s.Jn())return void n.Hn();e.pNt(n);const r=s.GAt();r.i5t(),r.gX().Sf().dispatchEvent(new Wb.Event("animationframeimagechange")),i.jJ()}_6t(t,s){"string"==typeof s&&(s=Wb.Dh(s)),tx.get(this).LJ().Sjt(!!t,s)}}}{const ix=self._s;ix.lq.odt.oq={I6t(t){return ix.Ke(this.t6t(),t)},C6t(t,s){return ix.compare(this.v5t,t,s)},P6t(t,s){if("string"!=typeof s)return!1;const i=this.b5t.g1();return ix.compare(i.toLowerCase(),t,s.toLowerCase())},R6t(t,s){return ix.compare(this.r6t(),t,s)},$5t(t){return ix.Ke(this.P5t,t)},q5t:()=>!0,Y5t:()=>!0,E6t(){return this.LJ().xy()<0},A6t(){return this.LJ().My()<0},F6t:()=>!0,O6t:()=>!0,gQ(){return this.LJ().gQ()}}}{const ex=self._s;ex.lq.odt.Jdt={D6t(t,s,i,e,n){if(!t||!s)return;const[r,h]=this.VAt(i),o=this.Nc._X(t,s,r,h,e,n);if(!o)return;if(e&&s.IX(o),t.Q$().F$()){const t=o.LJ();t.qX(this.LJ().$X()),t.kZ()}const a=this.Nc.hH();a.CX(!0),o.PX(),a.CX(!1),t!==this.Nc.yMt().gX()&&this.yLt.r5t(t,o,e)},p6t(){this.N5t(!1)},d6t(t){this.K5t(t)},c6t(t,s){this.Z5t(t,s)},f6t(t){this.s6t(t)},m6t(t){this.n6t(t)},L6t(t){this.h6t(t)},k6t(t,s){try{0===t?this.GAt().h5t(s):this.GAt().o5t(s)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation: `,s)}},N6t(t,s,i){try{0===t?this.GAt().l5t(s,i):this.GAt().c5t(s,i)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation frame: `,s)}},B6t(t){const s=this.LJ(),i=s.xy(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.ny(e),s.kZ())},U6t(t){const s=this.LJ(),i=s.My(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.hy(e),s.kZ())},HX(t){const s=this.b5t.t1(),i=this.LJ(),e=i.xy()<0?-1:1,n=i.My()<0?-1:1,r=s.xy()*t*e,h=s.My()*t*n;i.xy()===r&&i.My()===h||(i.QR(r,h),i.kZ())},async V6t(t,s,i){const e=this.b5t.t1(),n=this.LJ(),r=this.Nc,h=this.yLt;if(e.Y5()===t)return 0===s&&(n.QR(e.xy(),e.My()),n.kZ()),void this.aZ(ex.lq.odt.oq.F6t);const o=ex.jn(ex.Qkt);try{if(await o.fNt(r,t),!o.T6())throw new Error("image failed to load");if(this.Jn())return void o.Hn();await o.P4(r.Px(),{gM:r.CV()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jn()||this.aZ(ex.lq.odt.oq.O6t))}this.Jn()?o.Hn():(e.pNt(o),h.i5t(),h.gX().Sf().dispatchEvent(new ex.Event("animationframeimagechange")),r.jJ(),0===s&&(n.QR(e.xy(),e.My()),n.kZ()),await this.rq(ex.lq.odt.oq.F6t))},W6t(t){this.LJ().yQ(t)},Sjt(t,s){this.LJ().Sjt(0===t,ex.Dh(s))},z6t(t){this.LJ().Kx(t),this.Nc.jJ()}}}self._s.lq.odt.qdt={j6t(){return this.i6t()},H6t(){return this.e6t()},J6t(){return this.w5t.J0()},q6t(){return this.w5t.Pc()},$6t(){return this.r6t()},X6t(){return this.w5t.k0()},Y6t(t){return this.VAt(t)[0]},K6t(t){return this.VAt(t)[1]},Z6t(t){return this.VAt(t)[2]},Q6t(){return this.e1()},t8t(){return this.KLt().xy()},s8t(){return this.KLt().My()},i8t(t){return this.l6t(t)[0]},e8t(t){return this.l6t(t)[1]},n8t(){return this.a6t()}};{const nx=self._s;nx.lq.r8t=class extends nx.TDt{constructor(t){super(t)}Hn(){super.Hn()}}}{let rx=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};0;const hx=self._s;hx.lq.r8t.LBt=class extends hx.uLt{constructor(t,s){super(t),this._M="repeat",this.IM="repeat",s&&(this._M=rx(s[0]),this.IM=rx(s[1]))}Hn(){super.Hn()}$Dt(){this.t1().gq(this.Nc)}Cit(t){return this.t1().P4(t,{gM:this.Nc.CV(),pM:this._M,mM:this.IM})}Oit(){this.t1().wR()}h8t(){return this._M}o8t(){return this.IM}}}{const ox=globalThis._s,ax=globalThis.ks,lx=0,ux=4,cx=5,fx=6,dx=7,px=8,mx=9,gx=10,yx=11,Sx=12,wx=13,vx=14,bx=ox.jn(ox.Rect),xx=ox.jn(ox.Cl),Tx=ox.jn(ox.Rect),Mx=ox.jn(ox.Cl);ox.lq.r8t.Instance=class extends ox.zLt{constructor(t,s){super(t),this.a8t=0,this.l8t=0,this.u8t=1,this.c8t=1,this.f8t=0,this.d8t=!1,this.p8t=0,this.m8t=0,this.g8t=0,this.y8t=0,this.S8t=0,this.w8t=null,s&&(this.LJ().AY(!!s[lx]),this.a8t=s[ux],this.l8t=s[cx],this.u8t=s[fx],this.c8t=s[dx],this.f8t=ox.Zn(s[px]),this.d8t=!!s[mx],this.p8t=s[gx],this.m8t=s[yx],this.g8t=s[Sx],this.y8t=s[wx],this.S8t=s[vx])}Hn(){this.v8t(),super.Hn()}v8t(){this.w8t&&(this.w8t.Hn(),this.w8t=null)}b8t(t,s,i){const e=this.KLt(),n=e.xy(),r=e.My(),h=this.a8t/n,o=this.l8t/r,a=this.f8t;Tx.set(0,0,t/(n*this.u8t),s/(r*this.c8t)),Tx.offset(-h,-o),0===a?i.Xl(Tx):i.Yl(Tx,-a)}x8t(t,s=!0){if(this.d8t){const s=this.KLt();t._v(),t.lO(s.xy()*this.u8t,s.My()*this.c8t,this.p8t,this.m8t,this.g8t,this.y8t,this.S8t)}else s&&t.bv()}nM(t){const s=this.KLt(),i=s.EG();if(null===i)return;this.x8t(t),t.NF(i);const e=s.xy(),n=s.My();let r=this.a8t/e,h=this.l8t/n;0!==this.f8t||this.d8t||("repeat"===this.GAt().h8t()&&(r%=1),"repeat"===this.GAt().o8t()&&(h%=1));const o=this.LJ();Tx.set(0,0,o.xy()/(e*this.u8t),o.My()/(n*this.c8t)),Tx.offset(-r,-h),o.r0()?this.O5t(o,t):this.D5t(o,t)}D5t(t,s){let i=t.sQ();this.Nc.hJ()&&(i=t.xjt(i)),0===this.f8t?s.ob(i,Tx):(Mx.Yl(Tx,-this.f8t),s.XF(i,Mx))}O5t(t,s){const i=t.Vjt();if(t.zjt()){t.ZZ(bx,xx,!1);let s=xx;this.Nc.hJ()&&(s=t.xjt(s));let e=Tx;0!==this.f8t&&(Mx.Yl(Tx,-this.f8t),e=Mx),i.ZT(t.h0(),s,e),t.Wjt(!1)}i.nM(s,t.YZ())}KLt(){return this.w8t||this.$bt.t1()}Eut(){return!0}EG(){return this.KLt().EG()}T8t(){this.LJ().Wjt(!0)}M8t(t){this.a8t!==t&&(this.a8t=t,this.Nc.jJ(),this.T8t())}G8t(){return this.a8t}_8t(t){this.l8t!==t&&(this.l8t=t,this.Nc.jJ(),this.T8t())}I8t(){return this.l8t}C8t(t){this.u8t!==t&&(this.u8t=t,this.Nc.jJ(),this.T8t())}P8t(){return this.u8t}R8t(t){this.c8t!==t&&(this.c8t=t,this.Nc.jJ(),this.T8t())}E8t(){return this.c8t}A8t(t){this.f8t!==t&&(this.f8t=t,this.Nc.jJ(),this.T8t())}F8t(){return this.f8t}O8t(t){t=!!t,this.d8t!==t&&(this.d8t=t,this.Nc.jJ())}D8t(){return this.d8t}L8t(t){this.p8t!==t&&(this.p8t=t,this.D8t()&&this.Nc.jJ())}k8t(){return this.p8t}N8t(t){this.m8t!==t&&(this.m8t=t,this.D8t()&&this.Nc.jJ())}B8t(){return this.m8t}U8t(t){this.g8t!==t&&(this.g8t=t,this.D8t()&&this.Nc.jJ())}V8t(){return this.g8t}W8t(t){this.y8t!==t&&(this.y8t=t,this.D8t()&&this.Nc.jJ())}z8t(){return this.y8t}j8t(t){this.S8t!==t&&(this.S8t=t,this.D8t()&&this.Nc.jJ())}H8t(){return this.S8t}bT(){const t={};return 0!==this.a8t&&(t.iox=this.a8t),0!==this.l8t&&(t.ioy=this.l8t),1!==this.u8t&&(t.isx=this.u8t),1!==this.c8t&&(t.isy=this.c8t),0!==this.f8t&&(t.ia=this.f8t),this.d8t&&(t.tr=!0),1!==this.p8t&&(t.trx=this.p8t),1!==this.m8t&&(t.try=this.m8t),1!==this.g8t&&(t.tra=this.g8t),.1!==this.y8t&&(t.trbmx=this.y8t),.1!==this.S8t&&(t.trbmy=this.S8t),t}xT(t){this.a8t=t.iox||0,this.l8t=t.ioy||0,this.u8t=t.hasOwnProperty("isx")?t.isx:1,this.c8t=t.hasOwnProperty("isy")?t.isy:1,this.f8t=t.ia||0,this.d8t=!!t.tr,this.p8t=t.hasOwnProperty("trx")?t.trx:1,this.m8t=t.hasOwnProperty("try")?t.try:1,this.g8t=t.hasOwnProperty("tra")?t.tra:1,this.y8t=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.S8t=t.hasOwnProperty("trbmy")?t.trbmy:.1}NLt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.G8t(),u6t:t=>this.M8t(t)},{name:t+".image-offset-y.name",value:this.I8t(),u6t:t=>this._8t(t)},{name:t+".image-scale-x.name",value:100*this.P8t(),u6t:t=>this.C8t(t/100)},{name:t+".image-scale-y.name",value:100*this.E8t(),u6t:t=>this.R8t(t/100)},{name:t+".image-angle.name",value:ox.Qn(this.F8t()),u6t:t=>this.A8t(ox.Zn(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.D8t(),u6t:t=>this.O8t(t)},{name:t+".x-random.name",value:100*this.k8t(),u6t:t=>this.L8t(t/100)},{name:t+".y-random.name",value:100*this.B8t(),u6t:t=>this.N8t(t/100)},{name:t+".angle-random.name",value:100*this.V8t(),u6t:t=>this.U8t(t/100)},{name:t+".blend-margin-x.name",value:100*this.z8t(),u6t:t=>this.W8t(t/100)},{name:t+".blend-margin-y.name",value:100*this.H8t(),u6t:t=>this.j8t(t/100)}]}]}Ppt(t){switch(t){case ux:return this.G8t();case cx:return this.I8t();case fx:return this.P8t();case dx:return this.E8t();case px:return this.F8t();case mx:return this.D8t();case gx:return this.k8t();case yx:return this.B8t();case Sx:return this.V8t();case wx:return this.z8t();case vx:return this.H8t()}}Dpt(t,s){switch(t){case ux:this.M8t(s);break;case cx:this._8t(s);break;case fx:this.C8t(s);break;case dx:this.R8t(s);break;case px:this.A8t(s);break;case mx:this.O8t(!!s);break;case gx:this.L8t(s);break;case yx:this.N8t(s);break;case Sx:this.U8t(s);break;case wx:this.W8t(s);break;case vx:this.j8t(s)}}XDt(){return globalThis.J8t}},globalThis.J8t=class extends globalThis.u0{#t;constructor(){super(),this.#t=globalThis.MK.IK().m0()}set q8t(t){ax.re(t),this.#t.M8t(t)}get q8t(){return this.#t.G8t()}set $8t(t){ax.re(t),this.#t._8t(t)}get $8t(){return this.#t.I8t()}X8t(t,s){ax.re(t),ax.re(s);const i=this.#t;i.M8t(t),i._8t(s)}Y8t(){const t=this.#t;return[t.G8t(),t.I8t()]}set K8t(t){ax.re(t),this.#t.C8t(t)}get K8t(){return this.#t.P8t()}set Z8t(t){ax.re(t),this.#t.R8t(t)}get Z8t(){return this.#t.E8t()}Q8t(t,s){ax.re(t),ax.re(s);const i=this.#t;i.C8t(t),i.R8t(s)}t7t(){const t=this.#t;return[t.P8t(),t.E8t()]}set s7t(t){ax.re(t),this.#t.A8t(t)}get s7t(){return this.#t.F8t()}set i7t(t){ax.re(t),this.#t.A8t(ox.Zn(t))}get i7t(){return ox.Qn(this.#t.F8t())}get imageWidth(){return this.#t.KLt().xy()}get imageHeight(){return this.#t.KLt().My()}M6t(){const t=this.#t.KLt();return[t.xy(),t.My()]}set e7t(t){this.#t.O8t(!!t)}get e7t(){return this.#t.D8t()}set n7t(t){ax.re(t),this.#t.L8t(t)}get n7t(){return this.#t.k8t()}set r7t(t){ax.re(t),this.#t.N8t(t)}get r7t(){return this.#t.B8t()}h7t(t,s){ax.re(t),ax.re(s);const i=this.#t;i.L8t(t),i.N8t(s)}o7t(){const t=this.#t;return[t.k8t(),t.B8t()]}set a7t(t){ax.re(t),this.#t.U8t(t)}get a7t(){return this.#t.V8t()}set l7t(t){ax.re(t),this.#t.W8t(t)}get l7t(){return this.#t.z8t()}set u7t(t){ax.re(t),this.#t.j8t(t)}get u7t(){return this.#t.H8t()}c7t(t,s){ax.re(t),ax.re(s);const i=this.#t;i.W8t(t),i.j8t(s)}f7t(){const t=this.#t;return[t.z8t(),t.H8t()]}async d7t(t){ax.Ne(t,Blob);const s=this.#t,i=s.yq(),e=ox.jn(ox.Qkt);e.dNt(i,t),await e.P4(i.Px(),{gM:i.CV(),pM:s.GAt().h8t(),mM:s.GAt().o8t()}),s.Jn()?e.Hn():(s.v8t(),s.w8t=e,i.jJ())}}}self._s.lq.r8t.oq={F6t:()=>!0,O6t:()=>!0,p7t(){return this.D8t()}};{const Gx=self._s;Gx.lq.r8t.Jdt={m7t(t){this.M8t(t)},g7t(t){this._8t(t)},y7t(t){this.C8t(t/100)},S7t(t){this.R8t(t/100)},w7t(t){this.A8t(Gx.Zn(t))},v7t(t){this.O8t(t)},b7t(t,s){this.L8t(t/100),this.N8t(s/100)},x7t(t){this.U8t(t/100)},T7t(t,s){this.W8t(t/100),this.j8t(s/100)},z6t(t){this.LJ().Kx(t),this.Nc.jJ()},async V6t(t,s){if(this.w8t&&this.w8t.Y5()===t)return;const i=this.Nc,e=Gx.jn(Gx.Qkt);try{if(await e.fNt(i,t,!0),!e.T6())throw new Error("image failed to load");if(this.Jn())return e.Hn(),null;if(!await e.P4(i.Px(),{gM:i.CV(),pM:this.GAt().h8t(),mM:this.GAt().o8t()}))return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Jn()||this.aZ(Gx.lq.r8t.oq.O6t))}this.Jn()?e.Hn():(this.v8t(),this.w8t=e,i.jJ(),await this.rq(Gx.lq.r8t.oq.F6t))}}}{const _x=self._s;_x.lq.r8t.qdt={t8t(){return this.KLt().xy()},s8t(){return this.KLt().My()},M7t(){return this.a8t},G7t(){return this.l8t},_7t(){return 100*this.u8t},I7t(){return 100*this.c8t},C7t(){return _x.Qn(this.f8t)},P7t(){return 100*this.k8t()},R7t(){return 100*this.B8t()},E7t(){return 100*this.V8t()},A7t(){return 100*this.z8t()},F7t(){return 100*this.H8t()}}}{const Ix=self._s;Ix.lq.Touch=class extends Ix.TDt{constructor(t){super(t)}Hn(){super.Hn()}}}{let Cx=function(){return Ex.Y$().m0()};0;const Px=self._s,Rx=self.ks;Px.lq.Touch.LBt=class extends Px.uLt{constructor(t){super(t)}Hn(){super.Hn()}$Dt(){}XDt(){return self.O7t}};let Ex=null;self.O7t=class extends self.xX{constructor(t){super(t),Ex=t,t.yq().xJ().MJ=this}requestPermission(t){Rx.le(t);const s=Cx();if("orientation"===t)return s.D7t(0);if("motion"===t)return s.D7t(1);throw new Error("invalid type")}}}{const Ax=self._s,Fx="touch";Ax.lq.Touch.Instance=class extends Ax.mLt{constructor(t,s){super(t,Fx),this.L7t=new Map,this.k7t=!1,this.N7t=!1,this.B7t=0,this.U7t=0,this.V7t=0,this.W7t=0,this.z7t=0,this.j7t=0,this.H7t=0,this.J7t=0,this.q7t=0,this.$7t=0,this.X7t=0,this.Y7t=0,this.K7t=0,this.Z7t=0,this.Q7t=0,this.t9t=0,this.s9t=0,this.i9t=[],s&&(this.k7t=s[0]),this.GLt("permission-result",t=>this.e9t(t));const i=this.yq().Sf();this.Yf=new Ax.qf(Ax.Vf.Jf(i,"pointerdown",t=>this.n9t(t.data)),Ax.Vf.Jf(i,"pointermove",t=>this.r9t(t.data)),Ax.Vf.Jf(i,"pointerup",t=>this.h9t(t.data,!1)),Ax.Vf.Jf(i,"pointercancel",t=>this.h9t(t.data,!0)),Ax.Vf.Jf(i,"deviceorientation",t=>this.o9t(t.data)),Ax.Vf.Jf(i,"deviceorientationabsolute",t=>this.a9t(t.data)),Ax.Vf.Jf(i,"devicemotion",t=>this.l9t(t.data)),Ax.Vf.Jf(i,"tick2",t=>this.gnt()))}Hn(){this.L7t.clear(),super.Hn()}n9t(t){if("mouse"===t.pointerType){if(!this.k7t)return;this.N7t=!0}const s=t.pointerId;if(this.L7t.has(s))return;const i=t.pageX-this.Nc.o$(),e=t.pageY-this.Nc.l$(),n=performance.now(),r=this.L7t.size;this.X7t=r,this.Y7t=s;const h=Ax.jn(Ax.lq.Touch.u9t);h.eVt(n,i,e,s,r),this.L7t.set(s,h),this.aZ(Ax.lq.Touch.oq.c9t),this.aZ(Ax.lq.Touch.oq.f9t),this.Z7t=i,this.Q7t=e,this.s9t=0,this.aZ(Ax.lq.Touch.oq.d9t)}r9t(t){if("mouse"===t.pointerType&&!this.N7t)return;const s=this.L7t.get(t.pointerId);if(!s)return;const i=performance.now();if(i-s.nW()<2)return;const e=t.pageX-this.Nc.o$(),n=t.pageY-this.Nc.l$();s.e8(i,e,n,t.width,t.height,t.pressure)}h9t(t,s){if("mouse"===t.pointerType){if(!this.N7t)return;this.N7t=!1}const i=performance.now(),e=t.pointerId,n=this.L7t.get(e);if(n){if(this.X7t=n.p9t(),this.Y7t=n.Q1(),!s){const s=t.pageX-this.Nc.o$(),i=t.pageY-this.Nc.l$();this.Z7t=s,this.Q7t=i,this.s9t=1,this.aZ(Ax.lq.Touch.oq.d9t)}if(this.aZ(Ax.lq.Touch.oq.m9t),this.aZ(Ax.lq.Touch.oq.g9t),!s){const t=n.y9t(i);"single-tap"===t?(this.aZ(Ax.lq.Touch.oq.S9t),this.Z7t=n.aT(),this.Q7t=n.cT(),this.aZ(Ax.lq.Touch.oq.w9t)):"double-tap"===t&&(this.aZ(Ax.lq.Touch.oq.v9t),this.Z7t=n.aT(),this.Q7t=n.cT(),this.aZ(Ax.lq.Touch.oq.b9t))}n.Hn(),this.L7t.delete(e)}}D7t(t){return this.PLt("request-permission",{type:t}),new Promise((s,i)=>{this.i9t.push({type:t,resolve:s,reject:i})})}e9t(t){const s=t.result,i=t.type;this.K7t=i;const e=this.i9t.filter(t=>t.type===i);for(const t of e)t.resolve(s?"granted":"denied");this.i9t=this.i9t.filter(t=>t.type!==i),s?(this.aZ(Ax.lq.Touch.oq.x9t),0===i?this.Nc._0t():this.Nc.I0t()):this.aZ(Ax.lq.Touch.oq.T9t)}o9t(t){"number"==typeof t.webkitCompassHeading?this.B7t=t.webkitCompassHeading:t.absolute&&(this.B7t=t.alpha),this.U7t=t.alpha,this.V7t=t.beta,this.W7t=t.gamma}a9t(t){this.B7t=t.alpha}l9t(t){const s=t.acceleration;s&&(this.z7t=s.x,this.j7t=s.y,this.H7t=s.z);const i=t.accelerationIncludingGravity;i&&(this.J7t=i.x,this.q7t=i.y,this.$7t=i.z)}gnt(){const t=performance.now();let s=0;for(const i of this.L7t.values())i.nW()<=t-50&&i.M9t(t),i.G9t(t)&&(this.X7t=i.p9t(),this.Y7t=i.Q1(),this.t9t=s,this.aZ(Ax.lq.Touch.oq._9t),this.Z7t=i.aT(),this.Q7t=i.cT(),this.aZ(Ax.lq.Touch.oq.I9t),this.t9t=0),++s}C9t(t){t=Math.floor(t);for(const s of this.L7t.values()){if(0===t)return s;--t}return null}P9t(t,s){return t>=0&&s>=0&&t<this.Nc.YZt()&&s<this.Nc.KZt()}NLt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.L7t.values()].map(t=>({name:"$"+t.Q1(),value:t.aT()+", "+t.cT()}))}]}}}{const Ox=self._s;Ox.lq.Touch.oq={f9t:()=>!0,g9t:()=>!0,R9t(){return this.L7t.size>0},d9t(t,s){return!!t&&s===this.s9t&&!!this.P9t(this.Z7t,this.Q7t)&&this.Nc.Aj().XHt(t,[[this.Z7t,this.Q7t]],!1)},E9t(t){if(!t)return!1;const s=this.Nc.mMt().EEt(),i=[...this.L7t.values()].filter(t=>this.P9t(t.aT(),t.cT())).map(t=>[t.aT(),t.cT()]);return Ox.xor(this.Nc.Aj().XHt(t,i,s),s)},A9t(t,s,i){const e=this.C9t(t);return!!e&&Ox.compare(e.k0(),s,i)},F9t:()=>!0,O9t:()=>!0,D9t(t,s,i){this.Nc._0t();let e=0;return e=0===t?this.U7t:1===t?this.V7t:this.W7t,Ox.compare(e,s,i)},L9t(t,s,i){this.Nc.I0t();let e=0;return e=0===t?this.J7t:1===t?this.q7t:2===t?this.$7t:3===t?this.z7t:4===t?this.j7t:this.H7t,Ox.compare(e,s,i)},c9t(t){return(t=Math.floor(t))===this.X7t},m9t(t){return(t=Math.floor(t))===this.X7t},k9t(t){return t=Math.floor(t),this.L7t.size>=t+1},_9t:()=>!0,S9t:()=>!0,v9t:()=>!0,I9t(t){return!!t&&!!this.P9t(this.Z7t,this.Q7t)&&this.Nc.Aj().XHt(t,[[this.Z7t,this.Q7t]],!1)},w9t(t){return!!t&&!!this.P9t(this.Z7t,this.Q7t)&&this.Nc.Aj().XHt(t,[[this.Z7t,this.Q7t]],!1)},b9t(t){return!!t&&!!this.P9t(this.Z7t,this.Q7t)&&this.Nc.Aj().XHt(t,[[this.Z7t,this.Q7t]],!1)},x9t(t){return this.K7t===t},T9t(t){return this.K7t===t}}}self._s.lq.Touch.Jdt={N9t(t){this.D7t(t)}};{const Dx=self._s;Dx.lq.Touch.qdt={B9t(){return this.L7t.size},DOt(t){const s=this.C9t(this.t9t);return s?s.U9t(this.Nc.OJ(),t,!0):0},LOt(t){const s=this.C9t(this.t9t);return s?s.U9t(this.Nc.OJ(),t,!1):0},V9t(t,s){const i=this.C9t(t);return i?i.U9t(this.Nc.OJ(),s,!0):0},W9t(t,s){const i=this.C9t(t);return i?i.U9t(this.Nc.OJ(),s,!1):0},z9t(t,s){const i=this.L7t.get(t);return i?i.U9t(this.Nc.OJ(),s,!0):0},j9t(t,s){const i=this.L7t.get(t);return i?i.U9t(this.Nc.OJ(),s,!1):0},H9t(){const t=this.C9t(0);return t?t.aT():0},J9t(){const t=this.C9t(0);return t?t.cT():0},q9t(t){const s=this.C9t(t);return s?s.aT():0},$9t(t){const s=this.C9t(t);return s?s.cT():0},X9t(t){const s=this.L7t.get(t);return s?s.aT():0},Y9t(t){const s=this.L7t.get(t);return s?s.cT():0},K9t(t){const s=this.C9t(t);return s?s.k0():0},Z9t(t){const s=this.L7t.get(t);return s?s.k0():0},Q9t(t){const s=this.C9t(t);return s?Dx.Qn(s.$X()):0},tts(t){const s=this.L7t.get(t);return s?Dx.Qn(s.$X()):0},sts(){return this.Nc._0t(),this.B7t},its(){return this.Nc._0t(),this.U7t},ets(){return this.Nc._0t(),this.V7t},nts(){return this.Nc._0t(),this.W7t},rts(){return this.Nc.I0t(),this.J7t},hts(){return this.Nc.I0t(),this.q7t},ots(){return this.Nc.I0t(),this.$7t},ats(){return this.Nc.I0t(),this.z7t},lts(){return this.Nc.I0t(),this.j7t},uts(){return this.Nc.I0t(),this.H7t},cts(){return this.X7t},fts(){return this.Y7t},dts(t){const s=this.L7t.get(t);return s?s.xy():0},pts(t){const s=this.L7t.get(t);return s?s.My():0},mts(t){const s=this.L7t.get(t);return s?s.gts():0}}}{const Lx=self._s;let kx=-1e3,Nx=-1e3,Bx=-1e4;Lx.lq.Touch.u9t=class extends Lx.Wn{constructor(){super(),this.yts=0,this.rC=0,this.fKt=0,this.sz=0,this.Sts=0,this.wts=0,this.vts=0,this.Pa=0,this.Ra=0,this.bts=0,this.xts=0,this.Vy=0,this.Wy=0,this.Tts=0,this.Mts=!1,this.Gts=!1}Hn(){}eVt(t,s,i,e,n){this.yts=e,this.rC=n,this.sz=t,this.Sts=t,this.fKt=t,this.wts=s,this.vts=i,this.Pa=s,this.Ra=i,this.bts=s,this.xts=i}e8(t,s,i,e,n,r){this.Sts=this.sz,this.sz=t,this.bts=this.Pa,this.xts=this.Ra,this.Pa=s,this.Ra=i,this.Vy=e,this.Wy=n,this.Tts=r,!this.Gts&&Lx.ir(this.wts,this.vts,this.Pa,this.Ra)>=15&&(this.Gts=!0)}Q1(){return this.yts}p9t(){return this.rC}nW(){return this.sz}M9t(t){this.Sts=t}aT(){return this.Pa}cT(){return this.Ra}k0(){const t=Lx.ir(this.Pa,this.Ra,this.bts,this.xts),s=(this.sz-this.Sts)/1e3;return s>0?t/s:0}$X(){return Lx.nr(this.bts,this.xts,this.Pa,this.Ra)}xy(){return this.Vy}My(){return this.Wy}gts(){return this.Tts}G9t(t){return!this.Mts&&t-this.fKt>=500&&!this.Gts&&Lx.ir(this.wts,this.vts,this.Pa,this.Ra)<15&&(this.Mts=!0,!0)}y9t(t){return this.Mts?"":t-this.fKt<=333&&!this.Gts&&Lx.ir(this.wts,this.vts,this.Pa,this.Ra)<15?t-Bx<=666&&Lx.ir(kx,Nx,this.Pa,this.Ra)<25?(kx=-1e3,Nx=-1e3,Bx=-1e4,"double-tap"):(kx=this.Pa,Nx=this.Ra,Bx=t,"single-tap"):""}U9t(t,s,i){if(void 0===s)return t.UJ(0).fst(this.Pa,this.Ra)[i?0:1];{const e=t.NJ(s);return e?e.mK(this.Pa,this.Ra)[i?0:1]:0}}}}{const Ux=self._s;Ux.lq.Text=class extends Ux.TDt{constructor(t){super(t)}Hn(){super.Hn()}}}{const Vx=self._s;Vx.lq.Text.LBt=class extends Vx.uLt{constructor(t){super(t)}Hn(){super.Hn()}$Dt(){}Cit(t){}Oit(){}}}{const Wx=self._s,zx=self.ks,jx=[0,0,0],Hx=0,Jx=1,qx=2,$x=3,Xx=4,Yx=5,Kx=6,Zx=7,Qx=8,tT=9,sT=10,iT=11,eT=12,nT=13,rT=15,hT=["left","center","right"],oT=["top","center","bottom"],aT=["ltr","rtl"],lT=["word","cjk","character"],uT=new Wx.Rect,cT=new Wx.Cl,fT=new Wx.To,dT=Wx.jn(Wx.Ca),pT=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]);Wx.lq.Text.Instance=class extends Wx.zLt{constructor(t,s){if(super(t),this.Bc="",this._ts=!0,this.Its="Arial",this.Cts=12,this.Pts=0,this.AP=!1,this.FP=!1,this.Jx=Wx.jn(Wx.To),this.BP=0,this.UP=0,this.zP="word",this.jP=0,this.Rts="auto",this.Ets=1,this.Ats=null,this.Fts="",this.Ots=!1,this.Dts=!1,this.Lts=null,this.kts=-1,this.Nts=-1,this.Bts=0,this.Uts=Wx.jn(Wx.qS.tx,this.Nc.Px(),{timeout:5}),this.Uts.xR=()=>this.Nc.jJ(),this.Vts=()=>this.Wts(),this.zts=!1,this.jts=()=>this.Hts(),s){this.Bc=s[Hx],this._ts=!!s[Jx],this.Its=s[qx],this.Cts=s[$x],this.Pts=s[Xx],this.AP=!!s[Yx],this.FP=!!s[Kx],this.BP=s[Qx],this.UP=s[tT],this.zP=lT[s[sT]],this.jP=s[iT],this.Jts(this.Nc.P3(s[eT]));const t=s[Zx];this.Jx.Po(t[0],t[1],t[2]),this.LJ().AY(s[nT]),this.Dts=!!s[rT]}this.qts(),this.$ts(),this.Nc.Sf().addEventListener("beforerender",this.jts)}Hn(){this.Nc.Sf().removeEventListener("beforerender",this.jts),this.jts=null,this.Jts(null),this.Xts(),this.Lts&&(this.Lts.Hn(),this.Lts=null),this.Uts.Hn(),this.Uts=null,super.Hn()}qts(){const t=this.Uts;t.Wc(this.Bc),t.GR(this._ts),this.Uts.MP()&&this.Ats?this.Uts.sy(this.yq().YQt(this.Ats)):this.Uts.sy(null),t._R("nearest"!==this.Nc.CV()),t.IR(this.Its),t.ER(this.Pts),t.FR(this.AP),t.DR(this.FP),t.Zx(this.Jx),t.WR(hT[this.BP]),t.jR(oT[this.UP]),t.JR(this.zP),t.$R(aT[this.jP])}Yts(){const t=this.LJ();this.Uts.Wc(this.Bc),this.Uts.CR(this.Cts),this.Uts.RR(t.Bzt());const s=t.NJ();let i;"auto"===this.Rts?(i=s.ptt(t.YZ()),this.Uts.KR(!1)):"fixed"===this.Rts&&(i=this.Ets,this.Uts.KR(!0)),t.r0()&&i!==this.Uts.tE()&&t.Wjt(!0),this.Uts.QR(t.xy(),t.My(),i)}Jts(t){t&&(t.pX()||t.Q$().constructor!==Wx.lq.odt)||t!==this.Ats&&(this.Ats&&this.Ats.Sf().removeEventListener("animationframeimagechange",this.Vts),this.Ats=t,this.Ats&&this.Ats.Sf().addEventListener("animationframeimagechange",this.Vts),this.qts(),this.Ots=!1,this.Nc.jJ())}Wts(){this.Nc.KQt(this.Ats),this.Nc.jJ(),this.zts=!0}$ts(){if(this.Dts){let t=this.Bc;this._ts&&(t=Wx.dn.Dg(t)),this.Lts?this.Lts.Wc(t):this.Lts=Wx.jn(Wx.kc,this.Nc,t)}else this.Lts&&(this.Lts.Hn(),this.Lts=null)}Hts(){const t=this.LJ(),s=t.NJ(),i=t.gJ();t.OY()&&t.Htt(s.dK(),i.jtt(),i.TY())&&(this.Kts(),this.Uts.EG())}Kts(){this.Yts(),this.zts&&(this.zts=!1,this.Uts.MP()&&this.Ats&&this.Uts.sy(this.yq().YQt(this.Ats)))}nM(t){const s=this.Nc.IJ().gXt();s&&this.Kts();const i=this.Uts.EG();if(!i)return;const e=this.LJ(),n=e.NJ();if(0!==e.$X()||0!==n.$X()||0!==e.YZ()||e.r0()||!n.E9()||s)t.NF(i),e.r0()?this.O5t(e,t):this.D5t(e,t);else{const s=e.sQ(),[r,h]=n.bK(s.Nr(),s.Br()),[o,a]=n.bK(s.Wr(),s.zr()),l=r-Math.round(r),u=h-Math.round(h);uT.set(r,h,o,a),uT.offset(-l,-u),cT.Xl(uT);const[c,f]=t.tO(t.wO());t.$b()?this.Nc.IJ().B4(t,c,f):(t.hB(!0),cT.St(c,f)),t.NF(i),t.ob(cT,this.Uts.EE()),t.$b()?n.V4(t):t.hB(!1)}}D5t(t,s){let i=t.sQ();this.Nc.hJ()&&(i=this.Zts(i)),s.ob(i,this.Uts.EE())}O5t(t,s){const i=t.Vjt();if(t.zjt()){t.ZZ(uT,cT,!1);let s=cT;this.Nc.hJ()&&(s=this.Zts(s)),i.ZT(t.h0(),s,this.Uts.EE()),t.Wjt(!1)}i.nM(s,t.YZ())}Zts(t){const s=t.Nr()-Math.round(t.Nr()),i=t.Br()-Math.round(t.Br());return 0===s&&0===i?t:(cT.m(t),cT.offset(-s,-i),cT)}ZLt(){const t=this.Uts.EG();return t?[t.xy(),t.My()]:[100,100]}QLt(){return this.Uts.EE()}ikt(){return!1}bT(){const t={t:this.Bc,c:this.Jx.toJSON(),fn:this.Its,ps:this.Cts};return this._ts&&(t.bbc=this._ts),0!==this.BP&&(t.ha=this.BP),0!==this.UP&&(t.va=this.UP),"word"!==this.zP&&(t.wr=this.zP),0!==this.Pts&&(t.lho=this.Pts),this.AP&&(t.b=this.AP),this.FP&&(t.i=this.FP),-1!==this.Nts&&(t.tw={st:this.kts,en:this.Nts,l:this.Bts}),this.Ats&&(t.ioc=this.Ats.t9()),"fixed"===this.Rts&&(t.fs=this.Ets),t}xT(t){if(this.Xts(),this.Bc=t.t,this.Jx.Sa(t.c),this.Its=t.fn,this.Cts=t.ps,this._ts=!!t.hasOwnProperty("bbc")&&t.bbc,this.BP=t.hasOwnProperty("ha")?t.ha:0,this.UP=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.zP="boolean"==typeof s?s?"word":"character":s}else this.zP="word";if(this.Pts=t.hasOwnProperty("lho")?t.lho:0,this.AP=!!t.hasOwnProperty("b")&&t.b,this.FP=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const s=t.tw;this.kts=s.st,this.Nts=s.en,this.Bts=s.l}if(t.hasOwnProperty("ioc")){const s=this.yq().P3(t.ioc);s&&this.Jts(s)}else this.Jts(null);t.hasOwnProperty("fs")?(this.Rts="fixed",this.Ets=t.fs):this.Rts="auto",this.qts(),this.$ts(),this.Ots=!1,-1!==this.Nts&&this.OLt()}Ppt(t){switch(t){case Hx:return this.YR();case Jx:return this._ts;case qx:return this.Qts();case $x:return this.tss();case Xx:return this.sss();case Yx:return this.iss();case Kx:return this.ess();case Zx:return jx[0]=this.Jx.ko(),jx[1]=this.Jx.No(),jx[2]=this.Jx.Bo(),jx;case Qx:return this.nss();case tT:return this.rss();case sT:return this.hss();case rT:return this.oss()}}Dpt(t,s){switch(t){case Hx:this.ass(s);break;case Jx:if(this._ts===!!s)return;this._ts=!!s,this.qts();break;case qx:this.lss(s);break;case $x:this.uss(s);break;case Xx:this.css(s);break;case Yx:this.fss(s);break;case Kx:this.dss(s);break;case Zx:const t=this.Jx,i=s;if(t.ko()===i[0]&&t.No()===i[1]&&t.Bo()===i[2])return;this.Jx.Po(i[0],i[1],i[2]),this.qts();break;case Qx:this.pss(s);break;case tT:this.mss(s);break;case sT:this.gss(s)}}BLt(t,s,i,e){0===s&&0===i&&0===e||t!==Zx||(this.Jx.Ro(s,i,e),this.qts())}ass(t){this.Bc!==t&&(this.Bc=t,this.$ts(),this.Ots=!1,this.Nc.jJ())}YR(){return this.Bc}yss(t,s){this.ass(t),this.Yts(),this.kts=this.Nc.kH(),this.Nts=this.kts+s/this.J1().VK(),this.Bts=this.Uts.nE(),this.Uts.kR(0),this.OLt()}Xts(){this.kts=-1,this.Nts=-1,this.Bts=0,this.Uts.kR(-1),this.SLt()}Sss(){-1!==this.Nts&&(this.Xts(),this.aZ(Wx.lq.Text.oq.wss),this.Nc.jJ())}lss(t){this.Its!==t&&(this.Its=t,this.Uts.IR(t),this.Nc.jJ())}Qts(){return this.Its}fss(t){t=!!t,this.AP!==t&&(this.AP=t,this.Uts.FR(t),this.Nc.jJ())}iss(){return this.AP}dss(t){t=!!t,this.FP!==t&&(this.FP=t,this.Uts.DR(t),this.Nc.jJ())}ess(){return this.FP}uss(t){this.Cts!==t&&(this.Cts=t,this.Nc.jJ())}tss(){return this.Cts}vss(t){this.Jx.Ho(t)||(this.Jx.Lo(t),this.Uts.Zx(this.Jx),this.Nc.jJ())}bss(){return this.Jx}css(t){this.Pts!==t&&(this.Pts=t,this.qts(),this.Nc.jJ())}sss(){return this.Pts}pss(t){this.BP!==t&&(this.BP=t,this.qts(),this.Nc.jJ())}nss(){return this.BP}mss(t){this.UP!==t&&(this.UP=t,this.qts(),this.Nc.jJ())}rss(){return this.UP}xss(t){this.gss(lT[t])}gss(t){this.zP!==t&&(this.zP=t,this.qts(),this.Nc.jJ())}hss(){return this.zP}Tss(t){this.jP!==t&&(this.jP=t,this.qts(),this.Nc.jJ())}Mss(){return this.jP}Gss(t){this.Dts=!!t,this.$ts()}oss(){return this.Dts}_ss(t){this.Rts!==t&&(this.Rts=t,this.Nc.jJ())}Iss(){return this.Rts}Css(t){this.Ets!==t&&(this.Ets=t,"fixed"===this.Rts&&this.Nc.jJ())}Pss(){return this.Ets}Rss(){return this.Yts(),this.Uts.sE()}Ess(){return this.Yts(),this.Uts.eE()}Ass(t,s){this.Yts();const i=this.LJ();dT.set(t-i.aT(),s-i.cT()),dT.rotate(-i.$X()),dT.offset(i.xy()*i.WZ(),i.My()*i.HZ()),dT.St(i.xy(),i.My()),dT.scale(this.Uts.xy(),this.Uts.My());const e=this.Uts.hE(dT.Fa(),dT.Da());if(e){const t=e.iS("tag");if(t)return t.Pg}return""}Fss(t,s,i){const e=this.Ass(s,i);return e&&Wx.Ke(t,e)}Oss(t,s){this.Yts(),s=Math.floor(s);const i=this.Uts.aE(t,s);if(!i)return null;const e=this.LJ(),n=this.Uts.UR(),r=i.Ky(),h=i.Qy()-(i.My()-i._y())*n,o=i.xy()*n/this.Uts.xy()*e.xy(),a=i.My()*n/this.Uts.My()*e.My();return dT.set(r,h),dT.St(this.Uts.xy(),this.Uts.My()),dT.scale(e.xy(),e.My()),dT.offset(-e.xy()*e.WZ(),-e.My()*e.HZ()),dT.rotate(e.$X()),dT.offset(e.aT(),e.cT()),{x:dT.Fa(),y:dT.Da(),width:o,height:a}}Dss(t){return this.Yts(),this.Uts.lE(t)}Lss(t){let s=pT.get(t);return null===s?"":(s||(s="span"),`</${s||"span"}>`)}kss(t,s){let i=pT.get(t);if(null===i)return"";switch(i||(i="span"),t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async Nss(){if(this.Ots)return this.Fts;const t=new Wx.dn(this.Bc,{pg:!0}).Ig(),s=new Map;let i='<span class="c3-text"';const e=[];e.push(`font-family: '${this.Qts()}';`),this.iss()&&e.push("font-weight: bold;"),this.ess()&&e.push("font-style: italic;"),"character"===this.hss()&&e.push("word-break: break-all;"),i+=` style="${e.join(" ")}">`;const n=this.Ats?this.yq().YQt(this.Ats):null;if(this.Ats){const i=Wx.jn(Wx.jd),e=[],r=new Map;for(const s of t)if(s.wy()){const t=s.aS(n);if(t){const s=t.zS().t1().wNt();if(r.has(s))continue;r.set(s,null),e.push(i.Bu(async()=>{const t=await s.L6();r.set(s,t)}))}}await Promise.all(e);const h=[];for(const e of t)if(e.wy()){const t=e.aS(n);if(t){const e=t.zS(),n=e.t1().wNt();h.push(i.Bu(async()=>{const i=await e.t1().bNt(r.get(n));s.set(t,i)}))}}await Promise.all(h);for(const t of r.values())t instanceof ImageBitmap&&t.close&&t.close()}const r=new Map;for(const e of t){const t=e.nS();let h=[...r.keys()];h.reverse();for(const s of h)t.has(s)&&t.get(s)===r.get(s)||(r.delete(s),i+=this.Lss(s));for(const[s,e]of t)r.has(s)||(r.set(s,e),i+=this.kss(s,e));if(e.zg()&&(i+=Wx.Pm(Wx.Im(e.Jg().join("")),"\n","<br>")),e.wy()&&n){const r=e.aS(n);if(r){const n=s.get(r);if(n){const s=[];let h="0.2em";const o=t.get("iconoffsety");if(o){let t=o.trim();h=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}s.push(`top: ${h}`),"nearest"===this.Nc.CV()&&s.push("image-rendering: pixelated"),i+=`<img class="c3-text-icon" data-icon="${e.oS()}" width="${r.xy()}" height="${r.My()}" style="${s.join(";")}" src="${n}">`}}}}const h=[...r.keys()];h.reverse();for(const t of h)i+=this.Lss(t);return i+="</span>",this.Fts=i,this.Ots=!0,this.Fts}Grt(){const t=this.Nc.kH();if(t>=this.Nts)this.Xts(),this.aZ(Wx.lq.Text.oq.wss),this.Nc.jJ();else{let s=Wx.mr(this.kts,this.Nts,t,0,this.Bts);s=Math.floor(s),s!==this.Uts.NR()&&(this.Uts.kR(s),this.Nc.jJ())}}NLt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.YR(),u6t:t=>this.ass(t)},{name:t+".properties.font.name",value:this.Qts(),u6t:t=>this.lss(t)},{name:t+".properties.size.name",value:this.tss(),u6t:t=>this.uss(t)},{name:t+".properties.line-height.name",value:this.sss(),u6t:t=>this.css(t)},{name:t+".properties.bold.name",value:this.iss(),u6t:t=>this.fss(t)},{name:t+".properties.italic.name",value:this.ess(),u6t:t=>this.dss(t)},{name:t+".debugger.text-width",value:this.Rss()},{name:t+".debugger.text-height",value:this.Ess()}]}]}XDt(){return self.Bss}};const mT=new WeakMap,gT=new Map([["left",0],["center",1],["right",2]]),yT=new Map([["top",0],["center",1],["bottom",2]]),ST=["ltr","rtl"];self.Bss=class extends self.u0{constructor(){super(),mT.set(this,self.MK.IK().m0())}get text(){return mT.get(this).YR()}set text(t){zx.le(t);const s=mT.get(this);s.Xts(),s.ass(t)}Uss(t,s){zx.le(t),zx.re(s);const i=mT.get(this);i.Xts(),i.yss(t,s)}Vss(){mT.get(this).Sss()}set z4(t){zx.le(t),mT.get(this).lss(t)}get z4(){return mT.get(this).Qts()}set H4(t){mT.get(this).fss(t)}get H4(){return mT.get(this).iss()}set J4(t){mT.get(this).dss(t)}get J4(){return mT.get(this).ess()}set j4(t){zx.re(t),mT.get(this).uss(t)}get j4(){return mT.get(this).tss()}set Wss(t){if(zx.Me(t),t.length<3)throw new Error("expected 3 elements");fT.Po(t[0],t[1],t[2]),mT.get(this).vss(fT)}get Wss(){const t=mT.get(this).bss();return[t.ko(),t.No(),t.Bo()]}set lineHeight(t){zx.re(t),mT.get(this).css(t)}get lineHeight(){return mT.get(this).sss()}set Y4(t){zx.le(t);const s=gT.get(t);if(void 0===s)throw new Error("invalid mode");mT.get(this).pss(s)}get Y4(){return hT[mT.get(this).nss()]}set verticalAlign(t){zx.le(t);const s=yT.get(t);if(void 0===s)throw new Error("invalid mode");mT.get(this).mss(s)}get verticalAlign(){return oT[mT.get(this).rss()]}set K4(t){if(!lT.includes(t))throw new Error("invalid mode");mT.get(this).gss(t)}get K4(){return mT.get(this).hss()}set Z4(t){zx.le(t);const s=ST.indexOf(t);if(-1===s)throw new Error("invalid text direction");mT.get(this).Tss(s)}get Z4(){return ST[mT.get(this).Mss()]}set zss(t){mT.get(this).Gss(!!t)}get zss(){return mT.get(this).oss()}jss(t){zx.re(t);const s=mT.get(this);s._ss("fixed"),s.Css(t)}Hss(){mT.get(this)._ss("auto")}get s5(){return mT.get(this).Rss()}get i5(){return mT.get(this).Ess()}Jss(){const t=mT.get(this);return[t.Rss(),t.Ess()]}qss(t,s,i){return zx.le(t),zx.re(s),zx.re(i),mT.get(this).Fss(t,s,i)}$ss(t,s){return zx.re(t),zx.re(s),mT.get(this).Ass(t,s)}Xss(t,s=0){return zx.le(t),zx.re(s),mT.get(this).Oss(t,s)}Yss(t){return zx.le(t),mT.get(this).Dss(t)}Kss(t){const s=mT.get(this),i=s.yq().$q(t);s.Jts(i)}Zss(){return mT.get(this).Nss()}}}{const wT=self._s;wT.lq.Text.oq={Qss(t,s){return s?this.Bc===t:wT.Ke(this.Bc,t)},tis(){return-1!==this.Nts},wss:()=>!0,sis(t,s,i){return this.Fss(t,s,i)}}}{const vT=self._s,bT=vT.jn(vT.To);vT.lq.Text.Jdt={Wc(t){this.Xts(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.ass(t.toString())},iis(t){this.Xts(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.ass(this.Bc+t)},eis(t,s){this.Xts(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.yss(t.toString(),s)},nis(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.Its&&i===this.AP&&e===this.FP||(this.lss(t),this.fss(i),this.dss(e))},CR(t){this.uss(t)},ris(t){bT.Qo(t),bT.Yn(),this.vss(bT)},his(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},z6t(t){this.LJ().Kx(t),this.Nc.jJ()},ois(){this.Sss()},ER(t){this.css(t)},ais(t){this.pss(t)},lis(t){this.mss(t)},uis(t){this.xss(t)},$R(t){this.Tss(t)},cis(t){this.Jts(t)},fis(){return this.Nss()},dis(t){this.Gss(t)},pis(t,s){this._ss(["auto","fixed"][t]),this.Css(s)}}}{const xT=self._s;xT.lq.Text.qdt={Text(){return this.Bc},mis(){return this._ts?xT.dn.Dg(this.Bc):this.Bc},gis(){return this.Its},yis(){return this.Cts},Sis(){return this.Rss()},wis(){return this.Ess()},vis(){return this.Pts},bis(t,s){return this.Ass(t,s)},xis(t){return this.Dss(t)},Tis(t,s){const i=this.Oss(t,s);return i?i.x:0},Mis(t,s){const i=this.Oss(t,s);return i?i.y:0},Gis(t,s){const i=this.Oss(t,s);return i?i.width:0},_is(t,s){const i=this.Oss(t,s);return i?i.height:0},Iis(){return this.Fts}}}{const TT=self._s;TT.lq.Cis=class extends TT.TDt{constructor(t){super(t)}Hn(){super.Hn()}}}{const MT=self._s;MT.lq.Cis.LBt=class extends MT.uLt{constructor(t){super(t),this.Pis=MT.jn(self.Ris)}Hn(){super.Hn()}$Dt(){this.t1().gq(this.Nc)}Cit(t){return this.t1().P4(t,{gM:this.Nc.CV()})}Oit(){this.t1().wR()}Eis(){return this.Pis}Ais(t,s,i,e){const n=this.t1(),r=this.Pis;r.ny(n.xy()),r.hy(n.My()),r.Fis(t),r.Ois(s),r.Dis(i),r.Lis(e),r.kis()}}}{const GT=self._s,_T=self.ks,IT=GT.jn(GT.Ca),CT=0,PT=1,RT=2,ET=3,AT=4,FT=5,OT=6,DT=7,LT=8,kT=9,NT=10,BT=11,UT=14,VT=["left","center","right"],WT=["top","center","bottom"],zT=["word","cjk","character"];GT.lq.Cis.Instance=class extends GT.zLt{constructor(t,s){super(t),this.Bc="",this._ts=!0,this.Nis=16,this.Bis=16,this.Uis="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,;:?!-_~#\"'&()[]|`\\/@+=*$<>";let i="";this.Vis=1,this.Wis=0,this.EP=0,this.BP=0,this.UP=0,this.zP="word",this.zis=!0,this.Dts=!1,this.Lts=null,this.jis=null,this.kts=-1,this.Nts=-1,this.Bts=0,s&&(this.Bc=s[0],this._ts=s[1],this.Nis=s[2],this.Bis=s[3],this.Uis=s[4],i=s[5],this.Vis=s[6],this.Wis=s[7],this.EP=s[8],this.BP=s[9],this.UP=s[10],this.zP=zT[s[11]],this.LJ().AY(s[12]),this.Dts=!!s[UT]),this.yLt.Ais(this.Nis,this.Bis,this.Uis,i),this.jis=GT.jn(self.His,this.yLt.Eis());const e=this.LJ();this.jis.QR(e.xy(),e.My()),this.Jis(),this.$ts(),this.fi.yVt()}Hn(){this.Xts(),this.Lts&&(this.Lts.Hn(),this.Lts=null),this.jis.Hn(),this.jis=null,super.Hn()}Jis(){const t=this.jis;t&&(t.GR(this._ts),t.Wc(this.Bc),t.JR(this.zP),t.qis(VT[this.BP]),t.$is(WT[this.UP]),t.Xis(this.Wis),t.ER(this.EP))}Yts(){const t=this.LJ();this.jis.QR(t.xy(),t.My()),this.jis.HX(this.Vis)}$ts(){if(this.Dts){let t=this.Bc;this._ts&&(t=GT.dn.Dg(t)),this.Lts?this.Lts.Wc(t):this.Lts=GT.jn(GT.kc,this.Nc,t)}else this.Lts&&(this.Lts.Hn(),this.Lts=null)}nM(t){const s=this.$bt.t1(),i=s.EG();if(!i)return;t.NF(i);const e=this.LJ();let n=e.sQ();const r=this.jis;r.HX(this.Vis),r.Yis(e.Bzt()),this.Nc.hJ()&&(n=e.xjt(n)),r.QR(e.xy(),e.My()),r.Eis().Kis(s.EE()),r.Zx(e.rQ()),r.nM(t,n.Nr(),n.Br(),e.$X()),this.zis=!1}bT(){const t={t:this.Bc,ebbc:this._ts,csc:this.Vis,csp:this.Wis,lh:this.EP,ha:this.BP,va:this.UP,w:this.zP,cw:this.yLt.Eis().Zis(),ch:this.yLt.Eis().Qis(),cs:this.yLt.Eis().tes(),sd:this.yLt.Eis().ses()};return-1!==this.Nts&&(t.tw={st:this.kts,en:this.Nts,l:this.Bts}),t}xT(t){if(this.Xts(),this.Bc=t.t,this._ts=t.ebbc,this.Vis=t.csc,this.Wis=t.csp,this.EP=t.lh,this.BP=t.ha,this.UP=t.va,t.hasOwnProperty("w")){const s=t.w;this.zP="boolean"==typeof s?s?"word":"character":s}else this.zP="word";if(t.hasOwnProperty("tw")){const s=t.tw;this.kts=s.st,this.Nts=s.en,this.Bts=t.l}const s=this.yLt.Eis();s.Fis(t.cw),s.Ois(t.ch),s.Dis(t.cs),s.Lis(t.sd),this.Jis(),this.$ts(),-1!==this.Nts&&this.OLt()}Ppt(t){switch(t){case CT:return this.YR();case PT:return this._ts;case RT:return this.yLt.Eis().Zis();case ET:return this.yLt.Eis().Qis();case AT:return this.yLt.Eis().tes();case FT:return this.yLt.Eis().ses();case OT:return this.ies();case DT:return this.ees();case LT:return this.sss();case kT:return this.nss();case NT:return this.rss();case BT:return this.hss()}}Dpt(t,s){switch(t){case CT:this.ass(s);break;case PT:if(this._ts===!!s)return;this._ts=!!s,this.Jis();break;case RT:this.yLt.Eis().Fis(s);break;case ET:this.yLt.Eis().Ois(s);break;case AT:this.yLt.Eis().Dis(s);break;case FT:this.yLt.Eis().Lis(s);break;case OT:this.nes(s);break;case DT:this.res(s);break;case LT:this.css(s);break;case kT:this.pss(s);break;case NT:this.mss(s);break;case BT:this.gss(s)}}ass(t){this.Bc!==t&&(this.Bc=t,this.jis.Wc(t),this.$ts(),this.Nc.jJ())}YR(){return this.Bc}yss(t,s){this.ass(t),this.kts=this.Nc.kH(),this.Nts=this.kts+s/this.J1().VK(),this.Bts=GT.qm(GT.dn.Dg(t)),this.jis.kR(0),this.OLt()}Xts(){this.kts=-1,this.Nts=-1,this.Bts=0,this.jis.kR(-1),this.SLt()}Sss(){-1!==this.Nts&&(this.Xts(),this.aZ(GT.lq.Cis.oq.wss),this.Nc.jJ())}nes(t){this.Vis!==t&&(this.Vis=t,this.jis.HX(this.Vis),this.Nc.jJ())}ies(){return this.Vis}res(t){this.Wis!==t&&(this.Wis=t,this.jis.Xis(this.Wis),this.Nc.jJ())}ees(){return this.Wis}css(t){this.EP!==t&&(this.EP=t,this.jis.ER(this.EP),this.Nc.jJ())}sss(){return this.EP}pss(t){this.BP!==t&&(this.BP=t,this.Jis(),this.Nc.jJ())}nss(){return this.BP}mss(t){this.UP!==t&&(this.UP=t,this.Jis(),this.Nc.jJ())}rss(){return this.UP}xss(t){this.gss(zT[t])}gss(t){this.zP!==t&&(this.zP=t,this.Jis(),this.Nc.jJ())}hss(){return this.zP}Gss(t){this.Dts=!!t,this.$ts()}oss(){return this.Dts}Rss(){return this.Yts(),this.jis.sE()}Ess(){return this.Yts(),this.jis.eE()}Ass(t,s){this.Yts();const i=this.LJ();IT.set(t-i.aT(),s-i.cT()),IT.rotate(-i.$X()),IT.offset(i.xy()*i.WZ(),i.My()*i.HZ());const e=this.jis.hE(IT.Fa(),IT.Da());if(e){const t=e.iS("tag");if(t)return t.Pg}return""}Fss(t,s,i){const e=this.Ass(s,i);return e&&GT.Ke(t,e)}Oss(t,s){this.Yts(),s=Math.floor(s);const i=this.jis.aE(t,s);if(!i)return null;const e=this.LJ();return IT.set(i.Ky(),i.Qy()),IT.offset(-e.xy()*e.WZ(),-e.My()*e.HZ()),IT.rotate(e.$X()),IT.offset(e.aT(),e.cT()),{x:IT.Fa(),y:IT.Da(),width:i.xy(),height:i.My()}}Dss(t){return this.Yts(),this.jis.lE(t)}Grt(){const t=this.Nc.kH();if(t>=this.Nts)this.Xts(),this.aZ(GT.lq.Cis.oq.wss),this.Nc.jJ();else{let s=GT.mr(this.kts,this.Nts,t,0,this.Bts);s=Math.floor(s),s!==this.jis.NR()&&(this.jis.kR(s),this.Nc.jJ())}}NLt(){const t="plugins.spritefont2";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.YR(),u6t:t=>this.ass(t)},{name:t+".properties.scale.name",value:this.ies(),u6t:t=>this.nes(t)},{name:t+".properties.character-spacing.name",value:this.ees(),u6t:t=>this.res(t)},{name:t+".properties.line-height.name",value:this.sss(),u6t:t=>this.css(t)},{name:t+".debugger.text-width",value:this.Rss()},{name:t+".debugger.text-height",value:this.Ess()}]}]}XDt(){return self.hes}};const jT=new WeakMap,HT=new Map([["left",0],["center",1],["right",2]]),JT=new Map([["top",0],["center",1],["bottom",2]]);self.hes=class extends self.u0{constructor(){super(),jT.set(this,self.MK.IK().m0())}get text(){return jT.get(this).YR()}set text(t){_T.le(t);const s=jT.get(this);s.Xts(),s.ass(t)}Uss(t,s){_T.le(t),_T.re(s);const i=jT.get(this);i.Xts(),i.yss(t,s)}Vss(){jT.get(this).Sss()}set oes(t){_T.re(t),jT.get(this).nes(t)}get oes(){return jT.get(this).ies()}set aes(t){_T.re(t),jT.get(this).res(t)}get aes(){return jT.get(this).ees()}set lineHeight(t){_T.re(t),jT.get(this).css(t)}get lineHeight(){return jT.get(this).sss()}set Y4(t){_T.le(t);const s=HT.get(t);if(void 0===s)throw new Error("invalid mode");jT.get(this).pss(s)}get Y4(){return VT[jT.get(this).nss()]}set verticalAlign(t){_T.le(t);const s=JT.get(t);if(void 0===s)throw new Error("invalid mode");jT.get(this).mss(s)}get verticalAlign(){return WT[jT.get(this).rss()]}set K4(t){if(!zT.includes(t))throw new Error("invalid mode");jT.get(this).gss(t)}get K4(){return jT.get(this).hss()}set zss(t){jT.get(this).Gss(!!t)}get zss(){return jT.get(this).oss()}get s5(){return jT.get(this).Rss()}get i5(){return jT.get(this).Ess()}Jss(){const t=jT.get(this);return[t.Rss(),t.Ess()]}qss(t,s,i){return _T.le(t),_T.re(s),_T.re(i),jT.get(this).Fss(t,s,i)}$ss(t,s){return _T.re(t),_T.re(s),jT.get(this).Ass(t,s)}Xss(t,s=0){return _T.le(t),_T.re(s),jT.get(this).Oss(t,s)}Yss(t){return _T.le(t),jT.get(this).Dss(t)}}}{const qT=self._s;qT.lq.Cis.oq={Qss(t,s){return s?this.Bc===t:qT.Ke(this.Bc,t)},tis(){return-1!==this.Nts},wss:()=>!0,sis(t,s,i){return this.Fss(t,s,i)}}}self._s.lq.Cis.Jdt={Wc(t){this.Xts(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.ass(t.toString())},iis(t){this.Xts(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.ass(this.Bc+t)},eis(t,s){this.Xts(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.yss(t.toString(),s)},ois(){this.Sss()},HX(t){this.nes(t)},les(t){this.res(t)},ER(t){this.css(t)},Fis(t,s){let i=!1;const e=this.yLt.Eis();for(const n of t)if(" "===n)e.ues(s),i=!0;else{const t=e.ces(n);t&&(t.fes(s),i=!0)}i&&e.des(),this.Nc.jJ()},z6t(t){this.LJ().Kx(t),this.Nc.jJ()},ais(t){this.pss(t)},lis(t){this.mss(t)},uis(t){this.xss(t)},dis(t){this.Gss(t)}};{const $T=self._s;$T.lq.Cis.qdt={pes(t){const s=this.yLt.Eis().ces(t);return s?s.mes():this.yLt.Eis().Zis()},ges(){return this.Bis},yes(){return this.Vis},Ses(){return this.Wis},vis(){return this.EP},Text(){return this.Bc},mis(){return this._ts?$T.dn.Dg(this.Bc):this.Bc},Sis(){return this.Rss()},wis(){return this.Ess()},bis(t,s){return this.Ass(t,s)},xis(t){return this.Dss(t)},Tis(t,s){const i=this.Oss(t,s);return i?i.x:0},Mis(t,s){const i=this.Oss(t,s);return i?i.y:0},Gis(t,s){const i=this.Oss(t,s);return i?i.width:0},_is(t,s){const i=this.Oss(t,s);return i?i.height:0}}}{const XT=self._s;self.wes=class{constructor(t,s,i,e){let n=t.Zis(),r=t.Qis();this.Pis=t,this.ves=s,this.bes=new XT.Rect(i,e,i+n,e+r),this.xes=new XT.Rect,this.Tes=-1,this.Mes()}Hn(){this.Pis=null,this.bes=null,this.xes=null}Mes(){let t=this.Pis.xy(),s=this.Pis.My();this.xes.m(this.bes),this.xes.St(t,s),this.xes.Il(this.Pis.EE())}Eis(){return this.Pis}Ges(){return this.ves}EE(){return this.xes}fes(t){this.Tes=t}mes(){return this.Tes<0?this.Pis.Zis():this.Tes}}}{let YT=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0},KT=function(t){return rM||(rM=ZT.uo(32,32).getContext("2d")),rM.fillStyle="#FFFFFF",rM.fillStyle=t,rM.fillStyle};0;const ZT=self._s,QT=new ZT.Rect,tM=new ZT.Cl,sM=new ZT.To,iM=new Set(["left","center","right"]),eM=new Set(["top","center","bottom"]),nM=new Set(["word","cjk","character"]);let rM=null;self.His=class{constructor(t){this.Pis=t,this.KP=0,this.ZP=0,this.Bc="",this.DP=!1,this.VP=null,this.WP=ZT.jn(ZT.qg),this.zP="word",this.HP=!1,this.JP=!1,this.BP="left",this.UP="top",this.k8=1,this._es=1,this.Ies=0,this.EP=0,this.Jx=ZT.jn(ZT.To),this.XP=-1,this.YP=0,this.cR=t=>this.fR(t),this.Pis.Ces(this)}Hn(){this.Pis.Pes(this),this.Jx=null,this.cR=null,this.WP.Pu(),this.WP=null,this.Pis=null,this.VP=null}fR(t){if(t.wy())return{width:0,height:0};const s=t.Jg(),i=t.iS("scale"),e=(i?parseFloat(i.Pg):this.k8)*this._es,n=t.iS("scalex"),r=(n?parseFloat(n.Pg):1)*e,h=t.iS("scaley"),o=(h?parseFloat(h.Pg):1)*e,a=this.Pis.Qis()*o+this.EP,l=this.Eis(),u=l.Zis()*r,c=this.Res();if(l.Ees()){let t=0,i=0;for(const e of s){let s=u;const n=l.ces(e);n?s=n.mes()*r:" "===e&&(s=l.Aes()*r),i+=s,++t}return{width:i+t*c,height:a}}{const t=s.length;return{width:u*t+Math.max(t,0)*c,height:a}}}MR(){this.JP=!0}_P(){this.MR(),this.HP=!0,this.WP.Pu()}QR(t,s){t<=0||s<=0||this.KP===t&&this.ZP===s||(this.KP!==t?this._P():this.MR(),this.KP=t,this.ZP=s)}kR(t){this.XP=Math.floor(t)}NR(){return this.XP}hE(t,s){this.iE();const i=this.WP.Qg();for(const e of i)if(s>e.Qy()&&s<e.Qy()+e.My())for(const s of e.Lg())if(t>=s.Ky()&&t<s.Ky()+s.xy())return s;return null}*oE(t){this.iE();const s=this.WP.Qg();for(const i of s)for(const s of i.Lg()){const i=s.iS("tag");i&&ZT.Ke(i.Pg,t)&&(yield s)}}aE(t,s){for(const i of this.oE(t)){if(0===s)return i;--s}return null}lE(t){let s=0;for(const i of this.oE(t))++s;return s}iE(){this.gE(),this.yE()}gE(){if(!this.HP)return;!this.DP||this.VP&&this.VP.toString()===this.Bc||(this.VP=new ZT.dn(this.Bc,{pg:!0}));const t=-this.Res();this.WP.qg(this.DP?this.VP.Ig():this.Bc,this.cR,this.KP,this.zP,t),this.HP=!1}yE(){this.JP&&(this.SE(),this.JP=!1)}SE(){let t=0;const s=this.EP,i=ZT.Ah(this.WP.Qg());for(const t of i){t.Yy(NaN),t.Zy(NaN);for(const s of t.Lg())s.Yy(NaN),s.Zy(NaN)}const e=i.reduce((t,s)=>t+s.My(),0)-s;"center"===this.UP?t=Math.max(Math.floor(this.ZP/2-e/2),0):"bottom"===this.UP&&(t=Math.floor(this.ZP-e));for(let e=0,n=i.length;e<n;++e){const n=i[e],r=n.My();if(e>0&&t>this.ZP-(r-s))break;t>=0&&this.ME(n,t),t+=r}}ME(t,s){let i=0;"center"===this.BP?i=Math.max(Math.floor((this.KP-t.xy())/2),0):"right"===this.BP&&(i=Math.max(Math.floor(this.KP-t.xy()),0)),t.Yy(i),t.Zy(s);for(const e of t.Lg())e.wy()||(this.Fes(e,i,s),i+=e.xy())}Fes(t,s,i){const e=t.iS("offsetx");s+=e?YT(e.Pg,t.My()):0;const n=t.iS("offsety");i+=n?YT(n.Pg,t.My()):0,t.Yy(s),t.Zy(i)}nM(t,s,i,e){this.iE(),this.YP=0;const n=ZT.Ah(this.WP.Qg()),r=Math.sin(e),h=Math.cos(e);for(const e of n)this.Oes(t,e,s,i,r,h)}Oes(t,s,i,e,n,r){const h=s.Ky(),o=s.Qy();if(!Number.isFinite(h)||!Number.isFinite(o))return;const a=s.My();for(const h of s.Lg())this.IE(t,h,i,e,n,r,a)}IE(t,s,i,e,n,r,h){let o=s.Ky(),a=s.Qy();if(!Number.isFinite(o)||!Number.isFinite(a))return;let l=s.Jg(),u=s.xy();if(-1!==this.XP){if(this.YP>=this.XP)return;this.YP+l.length>this.XP&&(l=l.slice(0,this.XP-this.YP),u=this.fR(s).width),this.YP+=l.length}const c=s.iS("background");if(ZT.vm(l)&&!c||s.eS("hide"))return;const f=s.iS("scale"),d=(f?parseFloat(f.Pg):this.k8)*this._es,p=s.iS("scalex"),m=(p?parseFloat(p.Pg):1)*d,g=s.iS("scaley"),y=(g?parseFloat(g.Pg):1)*d,S=this.Pis.Qis()*y;a+=h-this.EP-S;let w=1;const v=s.iS("opacity");v&&(w=parseFloat(v.Pg)/100),c&&(t.Iv(),sM.ua(KT(c.Pg)),sM.Do(sM.Uo()*w*this.Jx.Uo()),sM.Ko(),t.Zx(sM),QT.set(o,a,o+u,a+S),QT.tl()>this.KP&&QT.$a(this.KP),tM.Kl(QT,n,r),tM.offset(i,e),t.Cl(tM),t.bv());const b=s.iS("color");b?(sM.ua(KT(b.Pg)),sM.Do(this.Jx.Uo())):sM.m(this.Jx),sM.Do(sM.Uo()*w),sM.Ko(),t.Zx(sM);const x=this.Pis.Zis()*m,T=Math.abs(this.Res());for(const s of l){const h=this.Pis.ces(s);if(h){const s=h.mes()*m;if(o+s>this.KP+T+1e-5)return;QT.set(o,a,o+x,a+S),tM.Kl(QT,n,r),tM.offset(i,e),t.ob(tM,h.EE()),o+=s+this.Ies}else o+=this.Pis.Aes()*m+this.Ies}}Eis(){return this.Pis}GR(t){t=!!t,this.DP!==t&&(this.DP=t,this._P())}MP(){return this.DP}Wc(t){this.Bc!==t&&(this.Bc=t,this._P())}JR(t){if(!nM.has(t))throw new Error("invalid word wrap mode");this.zP!==t&&(this.zP=t,this._P())}qis(t){if(!iM.has(t))throw new Error("invalid alignment");this.BP!==t&&(this.BP=t,this.MR())}$is(t){if(!eM.has(t))throw new Error("invalid alignment");this.UP!==t&&(this.UP=t,this.MR())}HX(t){this.k8!==t&&(this.k8=t,this._P())}JX(){return this.k8}Yis(t){this._es!==t&&(this._es=t,this._P())}Bzt(){return this._es}Xis(t){this.Ies!==t&&(this.Ies=t,this._P())}Res(){return this.Ies}ER(t){this.EP=t,this._P()}AR(){return this.EP}DF(t){t=ZT.Yn(t,0,1),this.Jx.a=t}Zx(t){this.Jx.equals(t)||this.Jx.m(t)}kF(){return this.Jx}sE(){return this.iE(),this.WP.By()}eE(){this.iE();const t=this.Pis.Qis()*this.k8,s=this.EP,i=t+s;return this.WP.ty()*i-s}}}{const hM=self._s,oM=(self.His,{width:256,height:256,Des:16,Les:16,characterSet:""});self.Ris=class{constructor(t){if((t=Object.assign({},oM,t)).width<=0||t.height<=0||t.Des<=0||t.Les<=0)throw new Error("invalid size");this.Vy=t.width,this.Wy=t.height,this.Nis=t.Des,this.Bis=t.Les,this.Uis=t.characterSet,this.kes="",this.Nes=null,this.Bes=!1,this.Ues=-1,this.xes=new hM.Rect(0,0,1,1),this.Ves=new Map,this.Wes=!0,this.zes=new Set}Hn(){this.xes=null,this.jes(),this.Ves=null,this.zes&&this.zes.clear(),this.zes=null}jes(){for(let t of this.Ves.values())t.Hn();this.Ves.clear()}Ces(t){this.zes.add(t)}Pes(t){this.zes.delete(t)}kis(){if(!this.Wes)return;this.jes();let t=hM.Hm(this.Uis),s=Math.floor(this.Vy/this.Nis),i=s*Math.floor(this.Wy/this.Bis);for(let e=0,n=t.length;e<n&&!(e>=i);++e){let i=t[e];if(this.Ves.has(i))continue;let n=e%s,r=Math.floor(e/s);this.Ves.set(i,hM.jn(self.wes,this,i,n*this.Nis,r*this.Bis))}if(this.Bes=!1,this.Ues=-1,Array.isArray(this.Nes))for(let t of this.Nes){if(!Array.isArray(t))continue;if(2!==t.length)continue;let s=t[0],i=t[1];if("number"==typeof s&&isFinite(s)&&"string"==typeof i&&s!==this.Nis)for(let t of i){let i=this.Ves.get(t);i?(i.fes(s),this.Bes=!0):" "===t&&(this.Ues=s,this.Bes=!0)}}this.Wes=!1;for(let t of this.zes)t._P()}des(){this.Bes=!0;for(const t of this.zes)t._P()}ces(t){return this.kis(),this.Ves.get(t)||null}Ees(){return this.Bes}ny(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.Vy!==t&&(this.Vy=t,this.Wes=!0)}xy(){return this.Vy}hy(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.Wy!==t&&(this.Wy=t,this.Wes=!0)}My(){return this.Wy}Kis(t){if(!this.xes.equals(t)){this.xes.m(t);for(const t of this.Ves.values())t.Mes()}}EE(){return this.xes}Fis(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.Nis!==t&&(this.Nis=t,this.Wes=!0)}Zis(){return this.Nis}Ois(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.Bis!==t&&(this.Bis=t,this.Wes=!0)}Qis(){return this.Bis}Dis(t){this.Uis!==t&&(this.Uis=t,this.Wes=!0)}tes(){return this.Uis}Lis(t){if(this.kes!==t&&(this.kes=t,this.Wes=!0,this.Nes=null,this.kes.length))try{this.Nes=JSON.parse(this.kes)}catch(t){this.Nes=null}}ses(){return this.kes}ues(t){t<0&&(t=-1),this.Ues!==t&&(this.Ues=t,this.Ues>=0&&(this.Bes=!0))}Aes(){return this.Ues<0?this.Nis:this.Ues}}}{const aM=self._s;aM.lq.Hes=class extends aM.TDt{constructor(t){super(t)}Hn(){super.Hn()}}}{const lM=self._s;lM.lq.Hes.LBt=class extends lM.uLt{constructor(t){super(t)}Hn(){super.Hn()}$Dt(){}}}{const uM=self._s,cM="localstorage";uM.lq.Hes.Instance=class extends uM.mLt{constructor(t,s){super(t,cM),this.Jes="",this.JI="",this.qes=[],this.$es="",this.Xes=!1,this.Yes=0,this.Kes=0,this.Zes=!1,s&&(this.Zes=s[0]);const i=this.Nc.v$();this.w$=null,this.Zes?this.w$=i.Gi({_i:!0}):this.w$=i,this.Qes=new Map,this.tns=!1,this.Nc.iq(this.oT())}async oT(){const t=await Promise.race([this.CLt("init"),uM.dh(3e3)]);t&&(this.Xes=t.isPersistent)}Hn(){super.Hn()}async sns(t){this.$es=this.ins(t),await this.rq(uM.lq.Hes.oq.ens)}ins(t){return t?"string"==typeof t?t:"string"==typeof t.message?t.message:"string"==typeof t.name?t.name:"string"==typeof t.data?t.data:"unknown error":"unknown error"}NLt(){return this.tns||this.nns(),[{title:"plugins.localstorage.name",properties:[...this.Qes.entries()].map(t=>({name:"$"+t[0],value:t[1],u6t:s=>this.w$.setItem(t[0],s)}))}]}async nns(){this.tns=!0;try{const t=await this.w$.keys();t.sort((t,s)=>{const i=t.toLowerCase(),e=s.toLowerCase();return i<e?-1:e<i?1:0});const s=await Promise.all(t.map(t=>this.w$.getItem(t)));this.Qes.clear();for(let i=0,e=t.length;i<e;++i)this.Qes.set(t[i],s[i])}catch(t){console.warn("[C3 debugger] Error displaying local storage: ",t)}finally{this.tns=!1}}}}{const fM=self._s;fM.lq.Hes.oq={rns(t){return this.Jes===t},hns:()=>!0,ons(t){return this.Jes===t},ans:()=>!0,lns(t){return this.Jes===t},uns:()=>!0,cns:()=>!0,fns:()=>!0,ens:()=>!0,pns(t){return this.Jes===t},mns(t){return this.Jes===t},gns(t,s){return fM.compare(this.Jes,t,s)},yns(t,s){return fM.compare(this.JI,t,s)},Sns(){return this.Kes>0},wns(){return this.Yes>0},vns:()=>!0,bns:()=>!0,xns(){return this.Xes}}}{let dM=function(t){return"string"==typeof t||"number"==typeof t};0;const pM=self._s;pM.lq.Hes.Jdt={async Tns(t,s){this.Kes++;try{const i=await this.w$.setItem(t,s);await this.MLt(async()=>{this.Jes=t,this.JI=i,await this.rq(pM.lq.Hes.oq.hns),await this.rq(pM.lq.Hes.oq.rns)})}catch(t){await this.sns(t)}finally{this.Kes--,0===this.Kes&&await this.rq(pM.lq.Hes.oq.vns)}},async Mns(t,s){if(!s)return;const i=s.SFt(this.fi);if(!i)return;const e=i.m0();if(!e)return;const n=e.Gns();this.Kes++;try{await this.w$.setItem(t,n),await this.MLt(async()=>{this.Jes=t,this.JI="",await this.rq(pM.lq.Hes.oq.hns),await this.rq(pM.lq.Hes.oq.rns)})}catch(t){await this.sns(t)}finally{this.Kes--,0===this.Kes&&await this.rq(pM.lq.Hes.oq.vns)}},async _ns(t){this.Yes++;try{const s=await this.w$.getItem(t);await this.MLt(async()=>{this.Jes=t,this.JI=dM(s)?s:"",await this.rq(pM.lq.Hes.oq.ans),await this.rq(pM.lq.Hes.oq.ons)})}catch(t){await this.sns(t)}finally{this.Yes--,0===this.Yes&&await this.rq(pM.lq.Hes.oq.bns)}},async Ins(t,s){if(!s)return;const i=s.SFt(this.fi);if(!i)return;const e=i.m0();this.Yes++;try{let s=await this.w$.getItem(t);s=s instanceof ArrayBuffer?s:new ArrayBuffer(0),await this.MLt(async()=>{this.JI="",this.Jes=t,e.Cns(s),await this.rq(pM.lq.Hes.oq.ans),await this.rq(pM.lq.Hes.oq.ons)})}catch(t){await this.sns(t)}finally{this.Yes--,0===this.Yes&&await this.rq(pM.lq.Hes.oq.bns)}},async Pns(t){try{const s=await this.w$.getItem(t);await this.MLt(async()=>{this.Jes=t,null==s?(this.JI="",await this.rq(pM.lq.Hes.oq.mns)):(this.JI=dM(s)?s:"",await this.rq(pM.lq.Hes.oq.pns))})}catch(t){await this.sns(t)}},async Oc(t){try{await this.w$.removeItem(t),await this.MLt(async()=>{this.Jes=t,this.JI="",await this.rq(pM.lq.Hes.oq.uns),await this.rq(pM.lq.Hes.oq.lns)})}catch(t){await this.sns(t)}},async Rns(){try{await this.w$.clear(),await this.MLt(async()=>{this.Jes="",this.JI="",pM.wh(this.qes),await this.rq(pM.lq.Hes.oq.cns)})}catch(t){await this.sns(t)}},async Ens(){try{const t=await this.w$.keys();await this.MLt(async()=>{this.qes=t,await this.rq(pM.lq.Hes.oq.fns)})}catch(t){await this.sns(t)}},async Ans(){const t=await this.CLt("request-persistent");t.isOk&&(this.Xes=t.isPersistent)},Fns(t){if(!this.Zes)return;let s;try{s=JSON.parse(t)}catch(t){return void console.error("[Local Storage] Failed to parse memory storage JSON: ",t)}s&&s["is-c3-storage"]&&Array.isArray(s.items)||console.error("[Local Storage] Failed to load memory storage JSON: invalid data"),this.w$.Mi(new Map(s.items))}}}self._s.lq.Hes.qdt={Ons(){return this.JI},Dns(){return this.Jes},Lns(){return this.qes.length},kns(t){return(t=Math.floor(t))<0||t>=this.qes.length?"":this.qes[t]},Nns(){return this.$es},Bns(){return this.Zes?JSON.stringify({"is-c3-storage":!0,items:[...this.w$.Ti()]}):""}};{const mM=self._s,gM=[];mM.lq.Audio=class extends mM.TDt{constructor(t){super(t)}Uns(t){gM.push(t)}static async Vns(){await Promise.all(gM),mM.wh(gM)}Hn(){super.Hn()}}}{let yM=function(){return bM.Y$().m0()},SM=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};0;const wM=self._s,vM=self.ks;wM.lq.Audio.LBt=class extends wM.uLt{constructor(t){super(t)}Hn(){super.Hn()}$Dt(){}XDt(){return self.Wns}};let bM=null;self.Wns=class extends self.xX{constructor(t){super(t),bM=t}get zns(){return SM().GetAudioContextExtern()}get jns(){return SM().GetDestinationNodeExtern()}get Hns(){return yM().Jns()}set Hns(t){yM().qns(t)}get $ns(){return yM().Xns()}set $ns(t){vM.re(t),yM().Yns(t)}Kns(){yM().Zns()}}}{const xM=self._s,TM="audio",MM=["interactive","balanced","playback"];xM.lq.Audio.Instance=class extends xM.mLt{constructor(t,s){super(t,TM),this.Qns=0,this.trs=0,this.srs=[],this.irs=!0,this.ers=0,this.nrs=0,this.rrs=!1,this.hrs=1,this.ors=1,this.ars=[this.Nc.x9()/2,this.Nc.T9()/2,600],this.lrs=[0,0,-1],this.urs=[0,1,0],this.crs=600,this.frs=1e4,this.drs=1,this.prs=null,this.mrs=-1,this.grs=1,this.yrs=!1,this.Srs=0,this.wrs="suspended",this.vrs=0,this.brs=new Map,this.xrs=0,this.Trs=0,this.Mrs=new Map,this.Grs=new Map;let i="interactive";s&&(this.ers=s[0],this.nrs=s[1],this.rrs=s[2],i=MM[s[3]],this.irs=s[4],this.hrs=s[5],this.ors=s[6],this.ars[2]=s[7],this.crs=s[8],this.frs=s[9],this.drs=s[10]),this._rs=[],this.Irs=[],this.Crs=[],this._Lt([["state",t=>this.Prs(t)],["audiocontext-state",t=>this.Rrs(t)],["fxstate",t=>this.Ers(t)],["trigger",t=>this.Ars(t)],["buffer-metadata",t=>this.Frs(t)]]);const e=this.yq().Sf();this.Yf=new xM.qf(xM.Vf.Jf(e,"instancedestroy",t=>this.Ors(t._0)),xM.Vf.Jf(e,"afterload",()=>this._nt()),xM.Vf.Jf(e,"suspend",()=>this.Drs()),xM.Vf.Jf(e,"resume",()=>this.Lrs()));const n=this.Nc.s$(),r="Safari"===xM.Ks.ti,h=this.Nc.JQt()||"macos-wkwebview"===n,o="playable-ad-single-file"===n,a="cordova"===n&&"Android"===xM.Ks.Zs,l=r||h||o||a;this.Nc.iq(this.CLt("create-audio-context",{preloadList:this.Nc.Pj().p6().map(t=>({originalUrl:t.m6,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.ers,latencyHint:i,panningModel:this.hrs,distanceModel:this.ors,refDistance:this.crs,maxDistance:this.frs,rolloffFactor:this.drs,listenerPos:this.ars,usePlayMusicAsSoundWorkaround:l}).then(t=>{this.Srs=t.sampleRate,this.wrs=t.audioContextState,this.vrs=t.outputLatency})),this.OLt()}Hn(){this.prs=null,super.Hn()}krs(t){return this.irs?t.split(" ").filter(t=>!!t):t?[t]:[]}Nrs(t,s){for(const i of s){let s=!1;for(const e of t)if(xM.Ke(e,i)){s=!0;break}if(!s)return!1}return!0}Brs(t,s){return this.Nrs(t,this.krs(s))}Uns(t){this.Q$().Uns(t)}Ors(t){this.prs===t&&(this.prs=null)}Urs(t){return Math.pow(10,t/20)}Vrs(t){const s=this.Urs(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}Wrs(t){return Math.log(t)/Math.log(10)*20}zrs(t){return this.Wrs(Math.max(Math.min(t,1),0))}jrs(){let t=0;const s=!!self.C3_GetAudioContextCurrentTime;return t=s?this.Qns:this.trs,this.Qns=0,this.trs=0,{Hrs:t,Jrs:s}}Drs(){this.rrs||this.ILt("set-suspended",{isSuspended:!0})}Lrs(){this.rrs||this.ILt("set-suspended",{isSuspended:!1})}Prs(t){const s=t.tickCount;this.vrs=t.outputLatency;const i=this._rs.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder));this._rs=t.audioInstances,this.Crs=t.analysers,i.length>0&&xM.An(this._rs,i)}Frs(t){this.Mrs.set(t.originalUrl,{duration:t.duration})}Rrs(t){this.wrs=t.audioContextState}ipt(){return this.Nc.x$t()?"running":this.wrs}Ers(t){this.Irs=t.fxstate}qrs(t){const s=this.krs(t);for(const t of this._rs)if(this.Nrs(t.tags,s))return t;return null}$rs(t){const s=this.krs(t);return this._rs.some(t=>this.Nrs(t.tags,s)&&t.isPlaying)}Xrs(t,s,i,e,n){if(this.$rs(s))return null;const r=this.Mrs.get(t),h={tags:this.krs(s),duration:r?r.duration:0,volume:n,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:e,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this._rs.push(h),h}Yrs(t){const s=this.krs(t);for(const t of this._rs)this.Nrs(t.tags,s)&&(t.isPlaying=!1)}async Ars(t){const s=t.type;this.srs=t.tags;const i=t.aiid;if("ended"===s){for(const t of this._rs)if(t.aiid===i){t.isPlaying=!1;break}await this.rq(xM.lq.Audio.oq.Krs)}else"fade-ended"===s&&await this.rq(xM.lq.Audio.oq.Zrs)}Qrs(t){return this.Brs(this.srs,t)}Grt(){const t={timeScale:this.Nc.BH(),gameTime:this.Nc.VQt(),instPans:this.ths(),tickCount:this.Nc.WQt()};if(this.prs){const s=this.prs.LJ();this.ars[0]=s.aT(),this.ars[1]=s.cT(),t.listenerPos=this.ars,t.listenerOrientation=[...this.lrs,...this.urs]}this.ILt("tick",t)}shs(t,s,i,e,n){if(0===i)return[t,s];const r=Math.sin(i),h=Math.cos(i),o=(t-=e)*r;return t=t*h-(s-=n)*r,s=s*h+o,[t+=e,s+=n]}ths(){return this._rs.filter(t=>-1!==t.uid).map(t=>this.Nc.EJ(t.uid)).filter(t=>t).map(t=>{const s=t.LJ(),i=s.NJ().$X(),[e,n]=this.shs(s.aT(),s.cT(),-i,this.ars[0],this.ars[1]);return{uid:t.LK(),x:e,y:n,z:s.YZ(),angle:s.$X()-i}})}ihs(t,s){for(const i of this.Crs)if(i.index===s&&xM.Ke(i.tag,t))return i;return null}ehs(t){for(const s of this.krs(t)){const t=s.toLowerCase();this.brs.set(t,(this.brs.get(t)||0)+1)}}Jns(){return this.yrs}qns(t){t=!!t,this.yrs!==t&&(this.yrs=t,this.ILt("set-silent",{isSilent:t}))}Xns(){return this.grs}Yns(t){this.grs!==t&&(this.grs=t,this.ILt("set-master-volume",{vol:t}))}Zns(){this.ILt("stop-all");for(const t of this._rs)t.isPlaying=!1}nhs(t){return!(t.hasOwnProperty("placeholder")||3===this.nrs||t.isMusic&&1===this.nrs||!t.isMusic&&2===this.nrs)}bT(){return{isSilent:this.yrs,masterVolume:this.grs,listenerZ:this.ars[2],listenerForwardVec:this.lrs,listenerUpVec:this.urs,listenerUid:this.prs?this.prs.LK():-1,remoteUrls:[...this.Grs.entries()],playing:this._rs.filter(t=>this.nhs(t)),effects:this.Irs,analysers:this.Crs}}xT(t){if(this.yrs=t.isSilent,this.grs=t.masterVolume,this.ars[2]=t.listenerZ,this.prs=null,this.mrs=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.lrs=t.listenerForwardVec:this.lrs=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.urs=t.listenerUpVec:this.urs=[0,1,0],this.Grs.clear(),t.remoteUrls)for(const[s,i]of t.remoteUrls)this.Grs.set(s,i);this._rs=t.playing;for(const t of this._rs)t.hasOwnProperty("tag")&&!t.hasOwnProperty("tags")&&(t.tags=[t.tag].filter(t=>!!t));this.Irs=t.effects,this.Crs=t.analysers}_nt(){if(-1!==this.mrs&&(this.prs=this.Nc.EJ(this.mrs),this.mrs=-1,this.prs)){const t=this.prs.LJ();this.ars[0]=t.aT(),this.ars[1]=t.cT()}for(const t of this._rs){const s=this.Nc.Pj().d6(t.bufferOriginalUrl);s?(t.bufferUrl=s.url,t.bufferType=s.type):t.bufferUrl=null}for(const t of Object.values(this.Irs))for(const s of t)if(s.hasOwnProperty("bufferOriginalUrl")){const t=this.Nc.Pj().d6(s.bufferOriginalUrl);t&&(s.bufferUrl=t.url,s.bufferType=t.type)}this.ILt("load-state",{saveLoadMode:this.nrs,timeScale:this.Nc.BH(),gameTime:this.Nc.VQt(),listenerPos:this.ars,listenerOrientation:[...this.lrs,...this.urs],isSilent:this.yrs,masterVolume:this.grs,playing:this._rs.filter(t=>null!==t.bufferUrl),effects:this.Irs})}NLt(){const t=[];for(const[s,i]of Object.entries(this.Irs))t.push({name:"$"+s,value:i.map(t=>t.type).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this._rs.length},...this._rs.map((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / ${Math.round(10*t.duration)/10}`}))]}]}}}self._s.lq.Audio.oq={Krs(t){return this.Qrs(t)},Zrs(t){return this.Qrs(t)},rhs(){return this.Trs===this.xrs},hhs:()=>!0,ohs(){return this.Jns()},ahs(){for(const t of this._rs)if(t.isPlaying)return!0;return!1},lhs(t){return this.$rs(t)}};{const GM=self._s,_M=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];GM.lq.Audio.Jdt={Play(t,s,i,e,n){const r=GM.lq.Audio.Jdt.uhs.call(this,t,s,i,e,n);return this.Uns(r),r},ept(t,s,i,e){GM.lq.Audio.Jdt.uhs.call(this,t,0,s,0,i,e)},async uhs(t,s,i,e,n,r){if(this.yrs)return;const h=t[1],o=this.Nc.Pj().d6(t[0]);if(!o)return;const{Hrs:a,Jrs:l}=this.jrs(),u=this.Xrs(t[0],n,h,0!==s,this.Vrs(i));try{await this.CLt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:h,tags:this.krs(n),isLooping:0!==s,vol:this.Vrs(i),stereoPan:GM.Yn(e/100,-1,1),pos:r||0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.Nc.WQt())}},async chs(t,s,i,e,n,r,h,o,a,l,u){if(this.yrs)return;const c=t[1],f=this.Nc.Pj().d6(t[0]);if(!f)return;const{Hrs:d,Jrs:p}=this.jrs(),m=this.Xrs(t[0],u,c,0!==s,this.Vrs(i));try{await this.CLt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.krs(u),isLooping:0!==s,vol:this.Vrs(i),pos:0,off:d,trueClock:p,panning:{x:e,y:n,z:r,angle:GM.Zn(h),innerAngle:GM.Zn(o),outerAngle:GM.Zn(a),outerGain:this.Vrs(l)}})}finally{m&&(m.placeholder=this.Nc.WQt())}},async fhs(t,s,i,e,n,r,h,o){if(this.yrs)return;if(!e)return;const a=e.SFt();if(!a||!a.LJ())return;const l=a.LJ(),u=l.NJ().$X(),[c,f]=this.shs(l.aT(),l.cT(),-u,this.ars[0],this.ars[1]),d=t[1],p=this.Nc.Pj().d6(t[0]);if(!p)return;const{Hrs:m,Jrs:g}=this.jrs(),y=this.Xrs(t[0],o,d,0!==s,this.Vrs(i));try{await this.CLt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.krs(o),isLooping:0!==s,vol:this.Vrs(i),pos:0,off:m,trueClock:g,panning:{x:c,y:f,z:l.YZ(),angle:l.$X()-u,innerAngle:GM.Zn(n),outerAngle:GM.Zn(r),outerGain:this.Vrs(h),uid:a.LK()}})}finally{y&&(y.placeholder=this.Nc.WQt())}},async dhs(t,s,i,e,n,r){if(this.yrs)return;const h=1===t,o=this.Nc.Pj().d6(s)||this.Grs.get(s.toLowerCase());if(!o)return;const{Hrs:a,Jrs:l}=this.jrs(),u=this.Xrs(s,r,h,0!==i,this.Vrs(e));try{await this.CLt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:h,tags:this.krs(r),isLooping:0!==i,vol:this.Vrs(e),stereoPan:GM.Yn(n/100,-1,1),pos:0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.Nc.WQt())}},async phs(t,s,i,e,n,r,h,o,a,l,u,c){if(this.yrs)return;const f=1===t,d=this.Nc.Pj().d6(s)||this.Grs.get(s.toLowerCase());if(!d)return;const{Hrs:p,Jrs:m}=this.jrs(),g=this.Xrs(s,c,f,0!==i,this.Vrs(e));try{await this.CLt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.krs(c),isLooping:0!==i,vol:this.Vrs(e),pos:0,off:p,trueClock:m,panning:{x:n,y:r,z:h,angle:GM.Zn(o),innerAngle:GM.Zn(a),outerAngle:GM.Zn(l),outerGain:this.Vrs(u)}})}finally{g&&(g.placeholder=this.Nc.WQt())}},async mhs(t,s,i,e,n,r,h,o,a){if(this.yrs)return;if(this.yrs)return;if(!n)return;const l=n.SFt();if(!l||!l.LJ())return;const u=l.LJ(),c=u.NJ().$X(),[f,d]=this.shs(u.aT(),u.cT(),-c,this.ars[0],this.ars[1]),p=1===t,m=this.Nc.Pj().d6(s)||this.Grs.get(s.toLowerCase());if(!m)return;const{Hrs:g,Jrs:y}=this.jrs(),S=this.Xrs(s,a,p,0!==i,this.Vrs(e));try{await this.CLt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.krs(a),isLooping:0!==i,vol:this.Vrs(e),pos:0,off:g,trueClock:y,panning:{x:f,y:d,z:u.YZ(),angle:u.$X()-c,innerAngle:GM.Zn(r),outerAngle:GM.Zn(h),outerGain:this.Vrs(o),uid:l.LK()}})}finally{S&&(S.placeholder=this.Nc.WQt())}},ghs(t,s){this.ILt("set-looping",{tags:this.krs(t),isLooping:0===s})},yhs(t,s){this.ILt("set-muted",{tags:this.krs(t),isMuted:0===s})},tpt(t,s){this.ILt("set-volume",{tags:this.krs(t),vol:this.Vrs(s)})},Shs(t,s,i,e){this.ILt("fade-volume",{tags:this.krs(t),vol:this.Vrs(s),duration:i,stopOnEnd:0===e})},whs(t,s){this.ILt("set-stereo-pan",{tags:this.krs(t),p:GM.Yn(s/100,-1,1)})},async vhs(t){const s=t[1],i=this.Nc.Pj().d6(t[0]);i&&(this.xrs++,await this.CLt("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:s}),this.Trs++)},async bhs(t,s){const i=1===t,e=this.Nc.Pj().d6(s)||this.Grs.get(s.toLowerCase());e&&(this.xrs++,await this.CLt("preload",{originalUrl:s,url:e.url,type:e.type,isMusic:i}),this.Trs++)},E1(t,s){this.ILt("set-playback-rate",{tags:this.krs(t),rate:Math.max(s,0)})},v1(t){this.Yrs(t),this.ILt("stop",{tags:this.krs(t)})},xhs(){this.Zns()},Ths(t,s){this.ILt("set-paused",{tags:this.krs(t),paused:0===s})},Mhs(t,s){this.ILt("seek",{tags:this.krs(t),pos:s})},Ghs(t){2===t&&(t=this.Jns()?1:0),this.qns(0===t)},_hs(t){const s=this.Vrs(t);this.Yns(s)},Ihs(t,s,i,e,n,r,h){const o=_M[s];this.ehs(t),this.ILt("add-effect",{type:"filter",tags:this.krs(t),params:[o,i,e,n,r,GM.Yn(h/100,0,1)]})},Chs(t,s,i,e){this.ehs(t),this.ILt("add-effect",{type:"delay",tags:this.krs(t),params:[s,this.Vrs(i),GM.Yn(e/100,0,1)]})},Phs(t,s,i,e,n,r){this.ehs(t),this.ILt("add-effect",{type:"flanger",tags:this.krs(t),params:[s/1e3,i/1e3,e,n/100,GM.Yn(r/100,0,1)]})},Rhs(t,s,i,e,n,r,h){this.ehs(t),this.ILt("add-effect",{type:"phaser",tags:this.krs(t),params:[s,i,e,n,r,GM.Yn(h/100,0,1)]})},Ehs(t,s,i,e){const n=this.Nc.Pj().d6(s[0]);n&&(this.ehs(t),this.ILt("add-effect",{type:"convolution",tags:this.krs(t),bufferOriginalUrl:s[0],bufferUrl:n.url,bufferType:n.type,params:[0===i,GM.Yn(e/100,0,1)]}))},Ahs(t,s){this.ehs(t),this.ILt("add-effect",{type:"gain",tags:this.krs(t),params:[this.Vrs(s)]})},Fhs(t,s){this.ehs(t),this.ILt("add-effect",{type:"stereopan",tags:this.krs(t),params:[GM.Yn(s/100,-1,1)]})},Ohs(t){this.ehs(t),this.ILt("add-effect",{type:"gain",tags:this.krs(t),params:[0]})},Dhs(t,s,i){this.ehs(t),this.ILt("add-effect",{type:"tremolo",tags:this.krs(t),params:[s,GM.Yn(i/100,0,1)]})},Lhs(t,s,i){this.ehs(t),this.ILt("add-effect",{type:"ringmod",tags:this.krs(t),params:[s,GM.Yn(i/100,0,1)]})},khs(t,s,i,e,n,r){this.ehs(t),this.ILt("add-effect",{type:"distortion",tags:this.krs(t),params:[this.Urs(s),this.Urs(i),e,this.Urs(n),GM.Yn(r/100,0,1)]})},Nhs(t,s,i,e,n,r){this.ehs(t),this.ILt("add-effect",{type:"compressor",tags:this.krs(t),params:[s,i,e,n/1e3,r/1e3]})},Bhs(t,s,i){this.ehs(t),this.ILt("add-effect",{type:"analyser",tags:this.krs(t),params:[s,i]})},Uhs(t){const s=this.krs(t);for(const t of s)this.brs.set(t.toLowerCase(),0);this.ILt("remove-effects",{tags:s}),this.Irs={}},D0(t,s,i,e,n,r){this.ILt("set-effect-param",{tags:this.krs(t),index:Math.floor(s),param:i,value:e,ramp:n,time:r})},Vhs(t){if(!t)return;const s=t.SFt();s&&s.LJ()&&(this.prs=s)},Whs(t){this.ars[2]=t},zhs(t,s,i,e,n,r){this.lrs[0]=t,this.lrs[1]=s,this.lrs[2]=-i,this.urs[0]=e,this.urs[1]=n,this.urs[2]=-r},jhs(t){this.Qns=Math.max(t,0),this.trs=Math.max(t-performance.now()/1e3,0)},Hhs(t){const s=t[1],i=this.Nc.Pj().d6(t[0]);i&&this.ILt("unload",{url:i.url,type:i.type,isMusic:s})},Jhs(t,s){const i=1===t,e=this.Nc.Pj().d6(s)||this.Grs.get(s.toLowerCase());e&&this.ILt("unload",{url:e.url,type:e.type,isMusic:i})},qhs(){this.ILt("unload-all")},$hs(t,s,i){this.Grs.set(i.toLowerCase(),{url:t,type:s})}}}{const IM=self._s;IM.lq.Audio.qdt={Xhs(t){const s=this.qrs(t);return s?s.duration:0},Ydt(t){const s=this.qrs(t);return s?s.playbackTime:0},spt(t){const s=this.qrs(t);return s?s.playbackRate:0},Kdt(t){const s=this.qrs(t);return s?this.zrs(s.volume):0},Yhs(){return this.zrs(this.Xns())},Khs(t){return this.brs.get(t.toLowerCase())||0},Zhs(t,s){const i=this.ihs(t,Math.floor(s));return i?i.binCount:0},Qhs(t,s,i){const e=this.ihs(t,Math.floor(s));return e?(i=Math.floor(i))<0||i>=e.binCount?0:e.freqBins[i]:0},tos(t,s){const i=this.ihs(t,Math.floor(s));return i?i.peak:0},sos(t,s){const i=this.ihs(t,Math.floor(s));return i?i.rms:0},ios(){return this.Srs},eos:()=>self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3,nos(){return this.vrs},ros(t,s){return 0==(t=IM.Yn(+t,0,100)/100)?-1/0:t<.1?this.zrs(IM._t(0,this.Vrs(s),10*t)):IM._t(s,0,(t-.1)/.9)}}}{const CM=self._s;CM.lq.hos=class extends CM.TDt{constructor(t){super(t)}Hn(){super.Hn()}}}{const PM=self._s;PM.lq.hos.LBt=class extends PM.uLt{constructor(t){super(t)}Hn(){super.Hn()}$Dt(){}}}{const RM=self._s,EM="googleplay";RM.lq.hos.Instance=class extends RM.mLt{constructor(t,s){super(t,EM),this.oos=!1,this.aos=!1,this.los=!1,this.lastError="",this.uos="",this.fos="",this.dos="",this.pos="",this.mos="",this.gos=0,this.yos=0,this.Sos="",this.wos="",this.vos=0,this.bos="",this.xos=null,this.Tos=null,this.Mos=new Map,this.Gos="",this.Nc.iq(this.CLt("load",[s[1]]).then(()=>{this.oos=!0},t=>{console.warn("failed to load Google Play",t)})),this.GLt("login",t=>{const s=t.state,i=t.error;this.los!=s&&(this.los=s,s?this.aZ(RM.lq.hos.oq._os):this.aZ(RM.lq.hos.oq.Ios)),i&&(this.lastError=i,this.aZ(RM.lq.hos.oq.Cos))})}Pos(t){return this.Tos?(t=Math.floor(t))<0||t>=this.Tos.length?null:this.Tos[t]:null}Ros(t){const s=this.Pos(t);if(!s)return null;const i=s.id;return this.Mos.has(i)?this.Mos.get(i):null}Eos(t){return this.xos?(t=Math.floor(t))<0||t>=this.xos.length?null:this.xos[t]:null}Hn(){super.Hn()}}}self._s.lq.hos.oq={T6(){return this.oos},_os:()=>!0,Ios:()=>!0,Aos(){return this.los},ens:()=>!0,Fos:()=>!0,Oos:()=>!0,Cos:()=>!0,Dos:()=>!0,Los:()=>!0,kos:()=>!0,Nos:()=>!0,Bos:()=>!0,Uos:()=>!0,Vos(t,s){const i=this.Pos(t);return!!i&&i.achievementState===["HIDDEN","REVEALED","UNLOCKED"][s]},Wos:()=>!0,zos:()=>!0,jos(t){return this.Gos===t},Hos(t){return this.Gos===t},Jos:()=>!0};{const AM=self._s;AM.lq.hos.Jdt={qos(){this.PLt("signin")},$os(){this.PLt("signout")},async Xos(){try{const t=await this.CLt("getplayer");t&&(this.uos=t.id,this.fos=t.display,this.dos=t.avatar,this.pos=t.givenName,this.mos=t.familyName,this.aZ(AM.lq.hos.oq.Fos))}catch(t){this.lastError=t.message,this.aZ(AM.lq.hos.oq.ens)}},async Yos(t,s,i){t=t.trim();try{await this.CLt("submitscore",{leaderboardId:t.trim(),score:s,tag:i}),this.aZ(AM.lq.hos.oq.Dos)}catch(t){this.lastError=t.message,this.aZ(AM.lq.hos.oq.Los)}},async Kos(t,s,i,e,n,r){s=["PUBLIC","SOCIAL"][s],i=["ALL_TIME","WEEKLY","DAILY"][i],n=["scores","window"][n],t=t.trim();try{const h=await this.CLt("requestscores",{leaderboardId:t,collection:s,timeSpan:i,maxResults:e,reload:r,type:n});h&&(this.gos=h.total,this.yos=h.best,this.Sos=h.formattedbest,this.wos=h.besttag,this.vos=h.rank,this.bos=h.formattedrank,this.xos=h.page,this.aZ(AM.lq.hos.oq.kos))}catch(t){this.lastError=t.message,this.aZ(AM.lq.hos.oq.Nos)}},async Zos(t,s){try{t=["ALL","HIDDEN","REVEALED","UNLOCKED"][t];const i=await this.CLt("requestachievements",{which:t,reload:s});this.Tos=i.page,i.id&&(this.Mos=i.id),this.aZ(AM.lq.hos.oq.Bos)}catch(t){this.lastError=t.message,this.aZ(AM.lq.hos.oq.Uos)}},async Qos(t){try{const s=await this.CLt("requestmetadata",{reload:t});s&&(this.Mos=s.id,s.page&&(this.Tos=s.page),this.aZ(AM.lq.hos.oq.Wos))}catch(t){this.lastError=t.message,this.aZ(AM.lq.hos.oq.zos)}},async tas(t){t=t.trim();try{if(await this.CLt("reveal",{id:t})){const s=this.Mos.get(t);s&&"HIDDEN"==s.achievementState&&(s.achievementState="REVEALED",this.Gos=t,this.aZ(AM.lq.hos.oq.jos))}}catch(t){this.lastError=t.message,this.aZ(AM.lq.hos.oq.ens)}},async sas(t){t=t.trim();try{if(await this.CLt("unlock",{id:t})){const s=this.Mos.get(t);s&&"UNLOCKED"!=s.achievementState&&(s.achievementState="UNLOCKED",this.Gos=t,this.aZ(AM.lq.hos.oq.Hos))}}catch(t){this.lastError=t.message,this.aZ(AM.lq.hos.oq.ens)}},async ias(t,s){t=t.trim();try{if(await this.CLt("increment",{id:t,steps:s})){const i=this.Mos.get(t);i&&"UNLOCKED"!=i.achievementState&&(i.currentSteps+=s,i.currentSteps>=i.totalSteps&&(this.Gos=t,i.currentSteps=i.totalSteps,i.achievementState="UNLOCKED",this.aZ(AM.lq.hos.oq.Hos)))}}catch(t){this.lastError=t.message,this.aZ(AM.lq.hos.oq.ens)}},async eas(t,s){t=t.trim();try{if(await this.CLt("setsteps",{id:t,steps:s})){const i=this.Mos.get(t);i&&"UNLOCKED"!=i.achievementState&&(i.currentSteps=s,s>=i.totalSteps&&(this.Gos=t,i.currentSteps=i.totalSteps,i.achievementState="UNLOCKED",this.aZ(AM.lq.hos.oq.Hos)))}}catch(t){this.lastError=t.message,this.aZ(AM.lq.hos.oq.ens)}},async nas(){try{const t=null;await this.CLt("showleaderboard",{id:t})}catch(t){this.lastError=t.message,this.aZ(AM.lq.hos.oq.ens)}},async ras(t){t=t.trim();try{await this.CLt("showleaderboard",{id:t})}catch(t){this.lastError=t.message,this.aZ(AM.lq.hos.oq.ens)}},async oas(){try{await this.CLt("showachievements")}catch(t){this.lastError=t.message,this.aZ(AM.lq.hos.oq.ens)}}}}self._s.lq.hos.qdt={Nns(){return this.lastError},aas(){return this.uos},las(){return this.fos},uas(){return this.dos},cas(){return this.pos},fas(){return this.mos},das(){return this.gos},pas(){return this.yos},mas(){return this.wos},gas(){return this.Sos},yas(){return this.vos},Sas(){return this.bos},was(){return this.xos&&this.xos.length||0},vas(t){const s=this.Eos(t);return s&&s.player&&s.player.displayName||""},bas(t){const s=this.Eos(t);return s&&parseInt(s.scoreRank,10)||0},xas(t){const s=this.Eos(t);return s&&parseInt(s.scoreValue,10)||0},Tas(t){const s=this.Eos(t);return s&&s.scoreTag&&s.scoreTag||""},Mas(t){const s=this.Eos(t);return s&&s.formattedScore&&s.formattedScore||""},Gas(t){const s=this.Eos(t);return s&&s.formattedScoreRank&&s.formattedScoreRank||""},_as(){return this.Tos&&this.Tos.length||0},Ias(t){const s=this.Pos(t);return s&&s.id||""},Cas(t){const s=this.Pos(t);return s&&s.currentSteps||0},Pas(t){const s=this.Ros(t);return s&&s.name||""},Ras(t){const s=this.Ros(t);return s&&s.description||""},Eas(t){const s=this.Ros(t);return s?(s.type||"").toLowerCase():""},Aas(t){const s=this.Ros(t);return s&&s.totalSteps||0},Fas(t){const s=this.Ros(t);return s&&s.revealedUrl||""},Oas(t){const s=this.Ros(t);return s&&s.unlockedUrl||""}};{let FM=function(t){t&&t.close&&t.close()};0;const OM=self._s,DM="video";OM.lq.video=class extends OM.sLt{constructor(t){super(t,DM),this.Das=!1,this.Las={},this.kas=-1,this.Nas=new Map,this.Nc.iq(this.Nc.ZJ("video","init",{isInWorker:this.Nc.qj()}).then(t=>{this.Das=t.postImageBitmaps,this.Las=t.supportedFormats})),this.rLt("playback-event",(t,s)=>t.Bas(s)),this.Nc.cZ(DM,"state",t=>this.Prs(t))}Hn(){super.Hn()}Uas(){return this.Das}Vas(t){return!!this.Las[t]}Prs(t){const s=t.sequenceNumber;if(s<=this.kas)for(const s of Object.values(t.videoData))FM(s.imageBitmap);else{this.kas=s;for(const t of this.Nas.values())FM(t.imageBitmap);this.Nas.clear();for(const[s,i]of Object.entries(t.videoData))this.Nas.set(parseInt(s,10),i)}}Was(t){this.Nas.delete(t)}zas(t){return this.Nas.get(t)||null}}}{const LM=self._s;LM.lq.video.LBt=class extends LM.uLt{constructor(t){super(t)}Hn(){super.Hn()}$Dt(){}}}{const kM=self._s,NM=kM.jn(kM.Rect),BM=kM.jn(kM.Cl),UM="video",VM=["webm-vp8","webm-vp9","webm-av1","mp4-h264","mp4-h265","mp4-av1"];kM.lq.video.Instance=class extends kM.rkt{constructor(t,s){super(t,UM),this.jas="",this.Has="mp4-h264",this.Jas="",this.qas="webm-vp9",this.$as=2,this.rrs=!1,this.Xas=!1,this.Yas=null,this.Kas=-1,this.Zas=0,this.Cot=!1,this.Qas=!1,this.tls=!1,this.rEt=!1,this.sls=!1,this.Wdt=0,s&&(this.jas=s[0],this.Has=VM[s[1]],this.Jas=s[2],this.qas=VM[s[3]],this.$as=s[4],this.rrs=s[5],this.LJ().AY(s[6]));const i=this.Nc.Sf();this.Yf=new kM.qf(kM.Vf.Jf(i,"renderercontextlost",()=>this.Lit()),kM.Vf.Jf(i,"suspend",()=>this.Drs()),kM.Vf.Jf(i,"resume",()=>this.Lrs())),this.vkt({src:this.ils(),autoplay:this.$as})}Hn(){this.Q$().Was(this.Gkt()),this.els(),super.Hn()}nls(t,s,i){if(this.Yas){if(this.Yas.xy()===s||this.Yas.My()===i)return;this.els()}this.Yas=t.vG(s,i,{gM:this.Nc.CV(),wM:!1})}els(){this.Yas&&(this.Nc.Px().MG(this.Yas),this.Yas=null)}bkt(){return{}}Urs(t){return Math.pow(10,t/20)}Vrs(t){const s=this.Urs(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}Wrs(t){return Math.log(t)/Math.log(10)*20}zrs(t){return this.Wrs(Math.max(Math.min(t,1),0))}ils(){let t="";const s=this.Q$();return s.Vas(this.Has)&&this.jas?t=this.jas:s.Vas(this.qas)&&this.Jas&&(t=this.Jas),t&&kM.Kh(t)?this.Nc.Pj().Gq(t):t}Lit(){this.Yas=null}async Bas(t){const s=t.type;5===s?this.rls(!0):2===s?(this.rls(!1),this.tls=!0,this.Qas=!1):6===s&&(this.rls(!1),this.Qas=!0,this.tls=!1),this.Kas=s,await this.rq(kM.lq.video.oq.hls)}rls(t){this.Cot=!!t,this.Cot?(this.OLt(),this.Qas=!1,this.tls=!1):this.SLt()}Drs(){this.rrs||this.Cot&&(this.Xas=!0,this.ykt("pause"))}Lrs(){this.rrs||this.Xas&&(this.ykt("play"),this.Xas=!1)}nM(t){const s=this.LJ();let i=0,e=0,n=null;const r=this.Q$().Uas();if(r){const t=this.ols();if(!t)return;n=t.imageBitmap,t.imageBitmap=null,i=t.videoWidth,e=t.videoHeight}else{const t=self.C3Video_GetElement(this.Gkt());if(!t)return;i=t.videoWidth,e=t.videoHeight,n=t}if(i<=0||e<=0)return;this.nls(t,i,e),n&&(t.RE(n,this.Yas),r&&n.close&&n.close());const h=i/e,o=s.xy(),a=s.My();let l=0,u=0,c=0,f=0;o/a>h?(c=a*h,f=a,l=Math.max(Math.floor((o-c)/2),0)):(c=o,f=o/h,u=Math.max(Math.floor((a-f)/2),0)),t.NF(this.Yas),NM.ja(s.aT()+l,s.cT()+u,c,f),BM.Xl(NM),t.Cl(BM)}Grt(){this.Nc.jJ()}ols(){return this.Q$().zas(this.Gkt())}}}self._s.lq.video.oq={IsPlaying(){return this.Cot},N1(){return this.Qas},als(){return this.tls},lls(){return this.sls},hls(t){return this.Kas===t}};{const WM=self._s,zM=["webm-vp8","webm-vp9","webm-av1","mp4-h264","mp4-h265","mp4-av1"];WM.lq.video.Jdt={uls(t,s){this.jas=t,this.Has="webm-vp8",this.Jas=s,this.qas="mp4-h264",this.ykt("set-source",{src:this.ils()}),this.els()},cls(t,s,i,e){this.jas=t,this.Has=zM[s],this.Jas=i,this.qas=zM[e],this.ykt("set-source",{src:this.ils()}),this.els()},fls(t){this.ykt("set-playback-time",{time:t})},E1(t){this.ykt("set-playback-rate",{rate:t})},ghs(t){t=0!==t,this.rEt!==t&&(this.rEt=t,this.ykt("set-looping",{isLooping:t}))},yhs(t){t=0!==t,this.sls!==t&&(this.sls=t,this.ykt("set-muted",{isMuted:t}))},tpt(t){this.Wdt!==t&&(this.Wdt=t,this.ykt("set-volume",{volume:this.Vrs(t)}))},dls(){this.ykt("pause")},Play(){this.Skt("play")}}}self._s.lq.video.qdt={Ydt(){const t=this.ols();return t?t.currentTime:0},spt(){const t=this.ols();return t?t.playbackRate:1},Xhs(){const t=this.ols();return t?t.duration:0},Kdt(){return this.Wdt},pls(){const t=this.ols();return t?t.videoWidth:0},mls(){const t=this.ols();return t?t.videoHeight:0}};{const jM=self._s;jM.lq.gls=class extends jM.TDt{constructor(t){super(t)}Hn(){super.Hn()}}}{const HM=self._s;HM.lq.gls.LBt=class extends HM.uLt{constructor(t){super(t)}Hn(){super.Hn()}$Dt(){this.t1().gq(this.Nc)}Cit(t){return this.t1().P4(t,{gM:this.Nc.CV()})}Oit(){this.t1().wR()}}}{let JM=function(t){return wG.get(t).yls()};0;const qM=self._s,$M=self.ks,XM=0,YM=1,KM=2,ZM=3,QM=4,tG=5,sG=6,iG=7,eG=8,nG=9,rG=10,hG=11,oG=12,aG=13,lG=14,uG=15,cG=16,fG=17,dG=18,pG=19,mG=20,gG=0,yG=1,SG=qM.jn(qM.Rect);qM.lq.gls.Instance=class extends qM.zLt{constructor(t,s){super(t),this.Sls=!0;const i=qM.jn(self.wls);this.vls=i,i.bls=()=>this.xls(),this.Tls=null,this.Mls=(t,s,i,e,n,r)=>this.Gls(t,s,i,e,n,r),this._ls=t=>this.Ils(t),this.Cls=!0;let e=!0;s&&(i.Pls(s[XM]),i.Rls(qM.Zn(s[YM])),i.Els(s[KM]?"one-shot":"continuous-spray"),this.Als(this.Nc.P3(s[ZM])),e=s[QM],i.Fls(s[tG]),i.Ols(s[sG]),i.Dls(s[iG]/100),i.Lls(s[eG]),i.kls(s[nG]),i.Nls(s[rG]),i.Bls(s[hG]),i.Uls(s[oG]),i.Vls(s[aG]),i.Wls(s[lG]),i.zls(s[uG]),i.jls(s[cG]),i.Hls(s[fG]),i.Jls(s[dG]),i.qls(s[pG]),i.$ls(s[mG])),this.Xls(),this.Tls&&(this.Cls=!1),"one-shot"===i.Yls()?i.Kls():i.Zls(!0);const n=this.LJ();n.AY(e),n.Mjt(!0),this.fi.Sf().addEventListener("bboxchange",()=>{n.Tjt(this.vls.QZ())}),this.yq().Px().dv()&&n.pjt(),this.Gnt=t=>this._nt(t),this.yq().Sf().addEventListener("afterload",this.Gnt),this.OLt()}Hn(){this.yq().Sf().removeEventListener("afterload",this.Gnt),this.Gnt=null,this.vls.Hn(),this.vls=null,this.Mls=null,this._ls=null,super.Hn()}yls(){return this.vls}Qls(t){this.vls.Pls(t),"one-shot"===this.vls.Yls()&&this.Sls&&this.vls.tus(t)}Als(t){t===this.gX()&&(t=null),t!==this.Tls&&(this.Tls=t,this.vls.sus=t?t=>this.ius(t):null,this.Tls||(this.Cls=!0))}Xls(){const t=this.vls,s=this.LJ();t.eus(s.FF()),t.x2t(this.Nc.hJ()),t.nus(s.aT()),t.rus(s.cT()),t.hus(s.$X()),t.ous(Math.abs(s.Bzt()))}xls(){this.Nc.JJ(this.fi)}nM(t){if(!this.Cls)return;const s=this.$bt.t1(),i=s.EG();if(!i)return;const e=this.LJ(),n=e.NJ(),r=SG;this.Nc.IJ().gXt()?r.set(-1/0,-1/0,1/0,1/0):n.F9()?n.ust(e.YZ(),r):n.w9(e.YZ(),r),t.NF(i);const h=n.v9(e.YZ());this.vls.aus(n.TK()*h),this.vls.nM(t,s.skt(),r,n.F9())}bT(){const t=this.vls;return{r:t.lus(),sc:t.uus(),st:t.Yls(),isp:t.cus(),isz:t.fus(),io:t.dus(),gr:t.pus(),xr:t.mus(),yr:t.gus(),spr:t.yus(),szr:t.Sus(),grnd:t.wus(),acc:t.vus(),g:t.bus(),lar:t.xus(),lsr:t.Tus(),lor:t.Mus(),dm:t.Gus(),to:t._us(),s:t.Ius(),pcc:t.Cus(),ft:this.Sls,soc:this.Tls?this.Tls.t9():null,p:t.Pus().map(t=>t.toJSON())}}xT(t,s){const i=this.vls;if(i.Pls(t.r),i.Rls(t.sc),i.Els(t.st),i.Fls(t.isp),i.Ols(t.isz),i.Dls(t.io),i.Lls(t.gr),i.kls(t.xr),i.Nls(t.yr),i.Bls(t.spr),i.Uls(t.szr),i.Vls(t.grnd),i.Wls(t.acc),i.zls(t.g),i.jls(t.lar),i.Hls(t.lsr),i.Jls(t.lor),i.qls(t.dm),i.$ls(t.to),i.Zls(t.s),i.Rus(t.pcc),this.Sls=t.ft,t.hasOwnProperty("soc")){const s=this.yq().P3(t.soc);s&&this.Als(s)}const e=t.p;i.tus(e.length,!1);const n=i.Pus();for(let t=0,s=n.length;t<s;++t)n[t].Sa(e[t]);"state"===s&&this.Tls&&(i.Eus(),i.Aus(this))}_nt(){const t=this.vls;t.Eus(),t.Aus(this);const s=t.Pus();for(let t=0,i=s.length;t<i;++t){const i=s[t],e=i.Fus();if(!e)continue;const n=e.LJ();if(!n)continue;const r=n.J1();if(!r)continue;const h=i.Ous(),o=r.LK();if(("number"!=typeof h||"number"!=typeof o||h!==o)&&"number"==typeof h){const t=this.yq(),s=t.EJ(h);s&&t.JJ(s)}}}Grt(){const t=this.Nc.PH(this.fi);this.Xls(),this.Sls&&"one-shot"===this.vls.Yls()&&this.vls.Dus(),this.vls.Grt(t),this.vls.Ius()&&this.Nc.jJ(),this.LJ().kZ(),this.Sls=!1}Lus(t){const s=1/60;for(this.Sls&&"one-shot"===this.vls.Yls()&&this.vls.Dus();t>0;)this.vls.Grt(s),t-=s;this.vls.Ius()&&this.Nc.jJ(),this.LJ().kZ(),this.Sls=!1}ius(t,s){let i;"number"==typeof s&&(i=this.Nc.EJ(s)),i&&i.gX()!==this.Tls&&(i=null),i||(i=this.Nc._X(this.Tls,this.LJ().NJ(),t.aT(),t.cT()));const e=i.LJ();return e.QR(t.Fu(),t.Fu()),e.qX(t.$X()),e.DF(t.FF()),e.hQ(this.LJ().rQ()),e.kZ(),e.pQ(this.J1(),!0),i.Qit(),t.kus(this.Mls),t.Nus(this._ls),i}Gls(t,s,i,e,n,r){if(t.kJ())return;const h=t.LJ();h.UZ(s,i),h.QR(h.xy()+e,h.My()+e),h.qX(h.$X()+n),h.DF(h.FF()+r),h.kZ()}Ils(t){t.kJ()||this.Nc.JJ(t)}Ppt(t){const s=this.vls;switch(t){case XM:return s.lus();case YM:return qM.Qn(s.uus());case KM:return"one-shot"===s.Yls()?yG:gG;case tG:return s.cus();case sG:return s.fus();case iG:return 100*s.dus();case eG:return s.pus();case nG:return s.mus();case rG:return s.gus();case hG:return s.yus();case oG:return s.Sus();case aG:return s.wus();case lG:return s.vus();case uG:return s.bus();case cG:return s.xus();case fG:return s.Tus();case dG:return s.Mus();case pG:return s.Gus();case mG:return s._us()}}Dpt(t,s){const i=this.vls;switch(t){case XM:i.Pls(s);break;case YM:i.Rls(qM.Zn(s));break;case KM:i.Els(s?"one-shot":"continuous-spray");break;case tG:i.Fls(s);break;case sG:i.Ols(s);break;case iG:i.Dls(s/100);break;case eG:i.Lls(s);break;case nG:i.kls(s);break;case rG:i.Nls(s);break;case hG:i.Bls(s);break;case oG:i.Uls(s);break;case aG:i.Vls(s);break;case lG:i.Wls(s);break;case uG:i.zls(s);break;case cG:i.jls(s);break;case fG:i.Hls(s);break;case dG:i.Jls(s);break;case pG:i.qls(s);break;case mG:i.$ls(s)}}NLt(){const t="plugins.particles",s=t+".properties",i=t+".debugger",e=this.vls;return[{title:t+".name",properties:[{name:i+".particle-count",value:e.Bus()},{name:s+".type.name",value:[s+".type.items."+e.Yls()]},{name:i+".is-spraying",value:e.Ius(),u6t:t=>e.Zls(t)},{name:s+".rate.name",value:e.lus(),u6t:t=>e.Pls(t)},{name:s+".spray-cone.name",value:qM.Qn(e.uus()),u6t:t=>e.Rls(qM.Zn(t))},{name:s+".speed.name",value:e.cus(),u6t:t=>e.Fls(t)},{name:s+".size.name",value:e.fus(),u6t:t=>e.Ols(t)},{name:s+".opacity.name",value:e.dus(),u6t:t=>e.Dls(t)},{name:s+".grow-rate.name",value:e.pus(),u6t:t=>e.Lls(t)},{name:s+".x-randomiser.name",value:e.mus(),u6t:t=>e.kls(t)},{name:s+".y-randomiser.name",value:e.gus(),u6t:t=>e.Nls(t)},{name:s+".initial-speed-randomiser.name",value:e.yus(),u6t:t=>e.Bls(t)},{name:s+".size-randomiser.name",value:e.Sus(),u6t:t=>e.Uls(t)},{name:s+".grow-rate-randomiser.name",value:e.wus(),u6t:t=>e.Vls(t)},{name:s+".acceleration.name",value:e.vus(),u6t:t=>e.Wls(t)},{name:s+".gravity.name",value:e.bus(),u6t:t=>e.zls(t)},{name:s+".angle-randomiser.name",value:e.xus(),u6t:t=>e.jls(t)},{name:s+".life-speed-randomiser.name",value:e.Tus(),u6t:t=>e.Hls(t)},{name:s+".opacity-randomiser.name",value:e.Mus(),u6t:t=>e.Jls(t)},{name:s+".timeout.name",value:e._us(),u6t:t=>e.$ls(t)}]}]}XDt(){return self.Uus}};const wG=new WeakMap;self.Uus=class extends self.u0{constructor(){super(),wG.set(this,self.MK.IK().m0())}set Vus(t){JM(this).Zls(!!t)}get Vus(){return JM(this).Ius()}set rate(t){$M.re(t),wG.get(this).Qls(t)}get rate(){return JM(this).lus()}set Wus(t){$M.re(t),JM(this).Rls(t)}get Wus(){return JM(this).uus()}set zus(t){$M.re(t),JM(this).Fls(t)}get zus(){return JM(this).cus()}set jus(t){$M.re(t),JM(this).Ols(t)}get jus(){return JM(this).fus()}set Hus(t){$M.re(t),JM(this).Dls(t)}get Hus(){return JM(this).dus()}set Jus(t){$M.re(t),JM(this).kls(t)}get Jus(){return JM(this).mus()}set qus(t){$M.re(t),JM(this).Nls(t)}get qus(){return JM(this).gus()}set $us(t){$M.re(t),JM(this).Bls(t)}get $us(){return JM(this).yus()}set Xus(t){$M.re(t),JM(this).Uls(t)}get Xus(){return JM(this).Sus()}set Yus(t){$M.re(t),JM(this).Lls(t)}get Yus(){return JM(this).pus()}set Kus(t){$M.re(t),JM(this).Vls(t)}get Kus(){return JM(this).wus()}set acceleration(t){$M.re(t),JM(this).Wls(t)}get acceleration(){return JM(this).vus()}set Zus(t){$M.re(t),JM(this).zls(t)}get Zus(){return JM(this).bus()}set Qus(t){$M.re(t),JM(this).jls(t)}get Qus(){return JM(this).xus()}set tcs(t){$M.re(t),JM(this).Hls(t)}get tcs(){return JM(this).Tus()}set scs(t){$M.re(t),JM(this).Jls(t)}get scs(){return JM(this).Mus()}set timeout(t){$M.re(t),JM(this).$ls(t)}get timeout(){return JM(this)._us()}ics(t){$M.re(t),wG.get(this).Lus(t)}ecs(t){const s=wG.get(this);t?s.Als(s.yq().$q(t)):s.Als(null)}}}self._s.lq.gls.oq={Ius(){return this.vls.Ius()}};{const vG=self._s;vG.lq.gls.Jdt={Zls(t){this.vls.Zls(0!==t)},Pls(t){this.Qls(t)},ncs(t){this.Als(t)},rcs(){this.Als(null)},Rls(t){this.vls.Rls(vG.Zn(t))},Fls(t){this.vls.Fls(t)},Ols(t){this.vls.Ols(t)},Dls(t){this.vls.Dls(t/100)},Lls(t){this.vls.Lls(t)},hcs(t){this.vls.kls(t)},ocs(t){this.vls.Nls(t)},acs(t){this.vls.Bls(t)},lcs(t){this.vls.Uls(t)},ucs(t){this.vls.Vls(t)},ccs(t){this.vls.Wls(t)},zls(t){this.vls.zls(t)},fcs(t){this.vls.jls(t)},dcs(t){this.vls.Hls(t)},pcs(t){this.vls.Jls(t)},$ls(t){this.vls.$ls(t)},mcs(t){this.Lus(t)},z6t(t){this.LJ().Kx(t),this.Nc.jJ()}}}{const bG=self._s;bG.lq.gls.qdt={gcs(){return this.vls.Bus()},ycs(){return this.vls.lus()},Scs(){return bG.Qn(this.vls.uus())},wcs(){return this.vls.cus()},vcs(){return this.vls.fus()},bcs(){return 100*this.vls.dus()},xcs(){return this.vls.pus()},Tcs(){return this.vls.mus()},Mcs(){return this.vls.gus()},Gcs(){return this.vls.Sus()},_cs(){return this.vls.yus()},Ics(){return this.vls.wus()},Ccs(){return this.vls.vus()},Pcs(){return this.vls.bus()},Rcs(){return this.vls.xus()},Ecs(){return this.vls.Tus()},Acs(){return this.vls.Mus()},Fcs(){return this.vls._us()}}}{const xG=self._s,TG=[],MG=new Set(["continuous-spray","one-shot"]),GG=["fade-to-invisible","timeout-expired","particle-stopped"],_G=xG.jn(xG.Rect);self.wls=class{constructor(){this.Ocs=0,this.Dcs=0,this.Lcs="continuous-spray",this.kcs=!1,this.Ncs=0,this.Bcs=!1,this.Ucs=0,this.Vcs=0,this.Wcs=0,this.zcs=0,this.jcs=0,this.Hcs=1,this.Jcs=0,this.qcs=0,this.$cs=0,this.Xcs=0,this.Ycs=0,this.Kcs=0,this.Zcs=0,this.Qcs=0,this.tfs=0,this.sfs=0,this.ifs=0,this.efs=0,this.nfs=0,this.Lf=0,this.rfs=0,this.hfs=1,this.bls=null,this.sus=null,this.ofs=[],this.lzt=new xG.Rect,this.Jx=new xG.To,this.ZW=globalThis.devicePixelRatio||1}Hn(){this.Uf(),xG.wh(this.ofs),this.ofs=null,this.bls=null,this.sus=null,this.lzt=null,this.Jx=null}Uf(){const t=this.ofs;for(let s=0,i=t.length;s<i;++s)t[s].mOt();xG.An(TG,t),xG.wh(t),TG.length>1e3&&xG.Sh(TG,1e3),this.kcs=!1}Kls(){for(let t=0,s=this.Ocs;t<s;++t)this.afs();this.ofs.length&&(this.kcs=!0)}afs(t=!0){let s=null;return TG.length?(s=TG.pop(),s.lfs(this)):s=xG.jn(self.ufs,this),this.ofs.push(s),t?s.eVt(this.sus):s.eVt(),s}Dus(){const t=this.ofs,s=this.sus;for(let i=0,e=t.length;i<e;++i)t[i].eVt(s)}Eus(){const t=this.ofs,s=this.sus;for(let i=0,e=t.length;i<e;++i)t[i].cfs(s)}Aus(t){const s=this.ofs;for(let i=0,e=s.length;i<e;++i){const e=s[i],n=e.Fus();if(n){const s=n.LJ();s.lT(e.aT()),s.fT(e.cT()),s.QR(e.Fu(),e.Fu()),s.DF(e.FF()),s.qX(e.$X()),s.hQ(t.LJ().rQ()),s.kZ()}}}tus(t,s=!0){const i=this.ofs;if(t<i.length){const s=i.length-t;for(let t=0;t<s;++t){const t=i.pop();t.mOt(),TG.push(t)}TG.length>1e3&&xG.Sh(TG,1e3)}else if(t>i.length){const e=t-i.length;for(let t=0;t<e;++t)this.afs(s)}}Pus(){return this.ofs}Bus(){return this.ofs.length}Grt(t){this.ffs(t),this.dfs(t),this.pfs()}ffs(t){if("continuous-spray"===this.Lcs&&this.kcs){this.rfs+=t*this.Ocs;const s=Math.floor(this.rfs);this.rfs-=s;for(let t=0;t<s;++t)this.afs()}}Rus(t){this.rfs=t}Cus(){return this.rfs}dfs(t){const s=this.lzt;s.set(this.Ucs,this.Vcs,this.Ucs,this.Vcs);const i=this.ofs;let e=0;for(let n=0,r=i.length;n<r;++n){const r=i[n];i[e]=r,r.Grt(t),r.z_t()?(++e,s._l(r.QZ())):(r.mOt(),TG.push(r))}xG.Sh(i,e),TG.length>1e3&&xG.Sh(TG,1e3)}pfs(){"one-shot"===this.Lcs&&0===this.ofs.length&&this.kcs&&(this.bls&&this.bls(),this.kcs=!1)}nM(t,s,i,e){this.ZW=globalThis.devicePixelRatio||1,_G.set(s.Nr(),s.Br(),s.Wr(),s.zr()),t.sO(_G),this.Jx.m(t.kF());const n=this.ofs;for(let r=0,h=n.length;r<h;++r){const h=n[r];i.xl(h.QZ())&&h.nM(t,s,e)}t.iO()}kF(){return this.Jx}Pls(t){this.Ocs=+t}lus(){return this.Ocs}Rls(t){this.Dcs=+t}uus(){return this.Dcs}Els(t){if(!MG.has(t))throw new Error("invalid spray type");this.Lcs=t}Yls(){return this.Lcs}Zls(t){this.kcs=!!t}Ius(){return this.kcs}eus(t){this.Ncs=+t}mfs(){return this.Ncs}x2t(t){this.Bcs=!!t}gfs(){return this.Bcs}nus(t){this.Ucs=+t}yfs(){return this.Ucs}rus(t){this.Vcs=+t}Sfs(){return this.Vcs}hus(t){this.Wcs=+t}wfs(){return this.Wcs}Fls(t){this.zcs=+t}cus(){return this.zcs}Ols(t){this.jcs=+t}fus(){return this.jcs}ous(t){this.Hcs=+t}vfs(){return this.Hcs}Dls(t){this.Jcs=+t}dus(){return this.Jcs}Lls(t){this.qcs=+t}pus(){return this.qcs}kls(t){this.$cs=+t}mus(){return this.$cs}Nls(t){this.Xcs=+t}gus(){return this.Xcs}Bls(t){this.Ycs=+t}yus(){return this.Ycs}Uls(t){this.Kcs=+t}Sus(){return this.Kcs}Vls(t){this.Zcs=+t}wus(){return this.Zcs}Wls(t){this.Qcs=+t}vus(){return this.Qcs}zls(t){this.tfs=+t}bus(){return this.tfs}jls(t){this.sfs=+t}xus(){return this.sfs}Hls(t){this.ifs=+t}Tus(){return this.ifs}Jls(t){this.efs=+t}Mus(){return this.efs}bfs(t){let s=GG.indexOf(t);if(-1===s)throw new Error("invalid destroy mode");this.nfs=s}qls(t){this.bfs(GG[t])}xfs(){return GG[this.nfs]}Gus(){return this.nfs}$ls(t){this.Lf=+t}_us(){return this.Lf}aus(t){this.hfs=+t}Tfs(){return this.hfs}QZ(){return this.lzt}S$(){return this.ZW}}}{let IG=function(t){return Math.random()*t-t/2};0;const CG=self._s,PG=(self.wls,new CG.Cl),RG=new CG.To;let EG=!1;self.ufs=class{constructor(t){this.Mfs=t,this.Nf=!1,this.Pa=0,this.Ra=0,this.TNt=0,this.N8=0,this.Gfs=1,this._fs=0,this.Ifs=0,this.cU=0,this.Cfs=0,this.Pfs=0,this.Rfs=0,this.uu=new CG.Rect,this.Efs=null,this.Afs=NaN,this.Ffs=null,this.Ofs=null}lfs(t){this.Mfs=t}eVt(t){const s=this.Mfs;this.Nf=!0,this.Pa=s.yfs()+IG(s.mus()),this.Ra=s.Sfs()+IG(s.gus()),this.TNt=s.cus()+IG(s.yus()),this.N8=s.wfs()+IG(s.uus()),this.Gfs=s.dus(),this._fs=this.Gfs,this.cU=(s.fus()+IG(s.Sus()))*s.vfs(),this.Cfs=this.cU/2,this.Ifs=s.pus()+IG(s.wus()),this.Pfs=0,this.Rfs=0,this.Dfs(),t?this.Efs||(this.Efs=t(this)):(this.Efs=null,this.Ffs=null,this.Ofs=null)}cfs(t){t?this.Efs&&!this.Efs.kJ()||(this.Efs=t(this,this.Afs)):(this.Efs=null,this.Ffs=null,this.Ofs=null)}kus(t){this.Ffs=t}Nus(t){this.Ofs=t}mOt(){const t=this.Ofs;t&&t(this.Efs),this.Efs=null,this.Ffs=null,this.Ofs=null}toJSON(){let t;return this.Efs&&this.Efs.LJ()&&(t=this.Efs.LJ().J1().LK()),[this.Pa,this.Ra,this.TNt,this.N8,this.Gfs,this.Ifs,this.cU,this.Pfs,this.Rfs,t]}Sa(t){this.Pa=t[0],this.Ra=t[1],this.TNt=t[2],this.N8=t[3],this.Gfs=t[4],this._fs=this.Gfs,this.Ifs=t[5],this.cU=t[6],this.Pfs=t[7],this.Rfs=t[8],this.Afs=t[9],this.Cfs=this.cU/2,this.Dfs()}Grt(t){const s=this.Mfs,i=this.TNt*t,e=this.N8,n=Math.cos(e)*i,r=Math.sin(e)*i+this.Pfs*t;this.Pa+=n,this.Ra+=r;const h=this.Ifs*t;this.cU+=h,this.Cfs=this.cU/2,this.TNt+=s.vus()*t,this.Pfs+=s.bus()*t,this.Rfs+=t,this.Dfs();const o=s.xus(),a=s.Tus(),l=s.Mus();let u=0;0!==o&&(u=IG(o*t),this.N8+=u),0!==a&&(this.TNt+=IG(a*t)),0!==l&&(this.Gfs=CG.Yn(this.Gfs+IG(l*t),0,1));const c=this.cU>=1&&(2===s.Gus()?this.TNt>0:this.Rfs<s._us()),f=this.Ffs;if(f&&c){let t=s.mfs()*this.Gfs;0===s.Gus()&&(t*=1-this.Rfs/s._us());const i=t-this._fs;this._fs=t,f(this.Efs,n,r,h,u,i)}this.Nf=c}z_t(){return this.Nf}QZ(){return this.uu}Dfs(){const t=this.Pa,s=this.Ra,i=this.Cfs;this.uu.set(t-i,s-i,t+i,s+i)}nM(t,s,i){if(this.Efs)return;const e=this.Mfs;let n=e.mfs()*this.Gfs;if(0===e.Gus()&&(n*=1-this.Rfs/e._us()),n<=0)return;const r=this.cU,h=r*e.Tfs()*e.S$();if(h<1)return;let o=this.Pa,a=this.Ra;e.gfs()&&(o=o+.5|0,a=a+.5|0),t.dv()?t.eO(o,a,r,n):i||h>t.UO()||h<t.BO()?(RG.m(e.kF()),RG.Yo(n),t.Zx(RG),EG=!0,PG.Xl(this.uu),t.XF(PG,s)):(EG&&(t.Zx(e.kF()),EG=!1),t.eO(o,a,h,n))}Fus(){return this.Efs}Ous(){return this.Afs}aT(){return this.Pa}cT(){return this.Ra}Fu(){return this.cU}$X(){return this.N8}FF(){return this.Gfs}}}{const AG=self._s;AG.Ryt.Pyt=class extends AG._kt{constructor(t){super(t)}Hn(){super.Hn()}}}{const FG=self._s;FG.Ryt.Pyt.LBt=class extends FG.Ekt{constructor(t){super(t)}Hn(){super.Hn()}$Dt(){}}}{const OG=self._s,DG=OG.Ryt.Pyt,LG=0;DG.Instance=class extends OG.Fkt{constructor(t,s){super(t),this.Lfs=!1,this.fu=!0,s&&(this.Lfs=!1,this.fu=!!s[LG]),this.kfs=new Map,this.Nfs=[],this.Bfs=new Map,this.Ufs=null,this.Vfs=null,this.Wfs=null,this.zfs=null,this.jfs="",this.Hfs=[],this.Gnt=t=>this._nt(),this.yq().Sf().addEventListener("afterload",this.Gnt)}Hn(){this.yq().Sf().removeEventListener("afterload",this.Gnt),this.Gnt=null,this.Ufs&&(this.Jfs(this.Ufs),this.Ufs=null),this.qfs(),this.$fs=null,this.Xfs(),this.Nfs=null,this.Yfs(),this.Bfs=null,this.Hfs=null,super.Hn()}tSt(t){this.Hfs.push(t)}sSt(){this.Hfs.pop()}Kfs(){return this.Hfs[this.Hfs.length-1]}tDt(t){this.fu=!!t,t?this.Bfs&&this.Bfs.size&&this.LLt():this.wLt();for(const s of this.Zfs())t?this.Qfs(s)&&s.b1():((s.IsPlaying()||s.Dat())&&this.tds(s),s.v1());t&&this.Xfs()}_u(){return this.fu}tds(t){this.Nfs.push(t)}Qfs(t){return this.Nfs.includes(t)}Xfs(){OG.wh(this.Nfs)}sds(){return this.Ufs}nut(){const t=this.I0();return!!t&&!t.kJ()}ids(t,s,i=!1){const e=s?this.eds(s,i):this.Zfs(i);if(e&&e.length)for(const s of e)if(s.T1(t))return s}nds(t,s){for(const i of this.kfs.values())for(const e of i)if(!e.S1()&&e.T1(t)&&s(e))return!0;for(const i of this.Bfs.values())for(const e of i)if(!e.S1()&&e.T1(t)&&s(e))return!0;return!1}rds(t){for(const s of this.kfs.values())for(const i of s)if(!i.S1()&&t(i))return!0;for(const s of this.Bfs.values())for(const i of s)if(!i.S1()&&t(i))return!0;return!1}hds(t,s){return this.ids(t,s,!0)}*ods(t,s,i=!1){const e=s?this.eds(s,i):this.Zfs(i);if(e&&e.length)for(const s of e)s.T1(t)&&(yield s)}*ads(t,s){yield*this.ods(t,s,!0)}eds(t,s){if(s){let s=this.kfs.get(t),i=this.Bfs.get(t);return s||(s=[]),i||(i=[]),s.concat(i).filter(t=>t).filter(t=>!t.S1())}{let s=this.kfs.get(t);return s||(s=[]),s.filter(t=>t).filter(t=>!t.S1())}}Zfs(t){if(t){const t=[...this.kfs.values()].flat(),s=[...this.Bfs.values()].flat();return t.concat(s).filter(t=>t).filter(t=>!t.S1())}return[...this.kfs.values()].flat().filter(t=>t).filter(t=>!t.S1())}lds(){return this.Zfs(!0)}bT(t="full"){return{s:!1,e:!!this.fu,at:this.uds(),dt:this.cds(),wt:this.fds(),ft:this.dds()}}xT(t,s="full"){t&&(this.Vfs=t.at,this.Wfs=t.dt,this.zfs=t.wt,this.jfs=t.ft,this.Lfs=!1,this.fu=!!t.e,"state"===s&&this._nt())}_nt(){const t=this.yq().Qot();if(this.pds(this.Vfs,this.kfs,t),this.Wfs){OG.wh(this.Nfs);for(const s of this.Wfs)this.mds(this.Nfs,s,t)}this.pds(this.zfs,this.Bfs,t),this.Ufs=this.gds(this.jfs,t),this.fu?this.Bfs&&this.Bfs.size&&this.LLt():this.wLt()}pds(t,s,i){if(t)for(const e in t){let n=s.get(e);n?OG.wh(n):n=[];const r=t[e];for(const t of r)if(this.mds(n,t.name,i))this.yds(t.name,t,i);else{const s=OG.Mmt.nSt({runtime:this.yq(),json:t});OG.Mmt.Tut(s,this.I0().LK()),s.Byt(t=>this.Sds(t)),s.kyt(this),i.hrt(s),this.mds(n,s,i)}s.set(e,n)}}gds(t,s){return s.ert(t)}mds(t,s,i){if("string"!=typeof s)return!!t.push(s);{const e=this.gds(s,i);if(e)return!!t.push(e)}return!1}yds(t,s,i){if("string"==typeof t){const e=this.gds(t,i);e&&(e.wst(s),OG.Mmt.Tut(e,this.I0().LK()),OG.Mmt.kyt(e,this))}else t.wst(s),OG.Mmt.Tut(t,this.I0().LK()),OG.Mmt.kyt(t,this)}uds(){const t={};for(const[s,i]of this.kfs)t[s]=i.filter(t=>!t.S1()).map(t=>t.Sst());return t}cds(){return this.Nfs.filter(t=>!t.S1()).map(t=>t.Pc())}fds(){const t={};for(const[s,i]of this.Bfs)t[s]=i.map(t=>t.Sst());return t}dds(){return this.Ufs?this.Ufs.Pc():""}FLt(){this.Yfs()}wds(t){const s=DG.bds.vds(t.vut,t.dSt,t.pSt,t.fSt,t.lSt,this.I0()),i=DG.Tds.xds(t.vut);DG.Tds.Mds(i)||this.Gds(t.vut);const e=OG.Mmt.nSt({runtime:this.yq(),id:i,tags:t.tags,time:t.time,_0:this.I0(),oSt:!!t.oSt,loop:!!t.loop,aSt:!!t.aSt,U0:t.U0,hSt:t.hSt,rSt:s});return e.Byt(t=>this.Sds(t)),e.kyt(this),this._ds(e,t.vut),e}Ids(t){const s=t.Q1();if(this.kfs.has(s)){const i=this.kfs.get(s);if(i){const s=i.indexOf(t);-1!==s&&i.splice(s,1)}}}z1(t,s=!1){this.Ids(t),t.S1()||this.Cds(t)||(t.v1(s),this.Pds(t))}Gds(t,s=!1){if(OG.Qi(t)){const i=DG.Tds.xds(t);if(!this.kfs.has(i))return;const e=this.kfs.get(i),n=this.sds();for(const t of e)t!==n&&(t.S1()||this.Cds(t)||(t.v1(s),t.Hn()));OG.wh(e)}else{const t=this.sds();for(const i of this.Zfs())i!==t&&(i.S1()||this.Cds(i)||(i.v1(s),i.Hn()));for(const t of this.kfs.keys())OG.wh(this.kfs.get(t)),this.kfs.delete(t);this.kfs.clear()}}Jfs(t){this.z1(t,!0)}qfs(){this.Gds(NaN,!0)}Ppt(t){if(t===LG)return this.fu}Dpt(t,s){t===LG&&(this.fu=!!s)}Rds(t){const s=t.J1().Kft();for(const t of s){const s=t.G0();if(s.eUt()===this.constructor)return s}}aZ(t,s,i,e){return this.Nc?super.aZ(t):s.aZ(t,i,e)}Sds(t){let s,i;if(this.Ufs=t,DG.oq.Eds(t),this.yq())s=this.fi,i=this.Nc,this.aZ(DG.oq.Ads),this.aZ(DG.oq.Fds),this.z1(t);else{if(s=t.J1(),!s)return;if(s&&s.kJ())return;i=s.yq();const e=this.Rds(t);this.aZ(DG.oq.Ads,i,s,e),this.aZ(DG.oq.Fds,i,s,e),t.v1()}this.Ufs=null,DG.oq.Eds(null),t.X1()&&i.JJ(s)}_ds(t,s){const i=DG.Tds.xds(s);this.kfs.has(i)||this.kfs.set(i,[]),this.kfs.get(i).push(t)}Pds(t){const s=t.Q1();this.Bfs.has(s)||this.Bfs.set(s,[]),this.Bfs.get(s).push(t),this.kLt()||this.LLt()}Cds(t){const s=t.Q1();return!!this.Bfs.has(s)&&this.Bfs.get(s).includes(t)}Yfs(){if(this.Bfs.size){for(const t of this.Bfs.values()){for(const s of t)s.S1()||s.Hn();OG.wh(t)}this.Bfs.clear(),this.kLt()&&this.wLt()}}NLt(){return[{title:"$"+this.G0().Pc(),properties:[{name:"behaviors.tween.properties.enabled.name",value:this._u(),u6t:t=>this.tDt(t)}]}]}XDt(){return self.Ods}}}{const kG=self._s;let NG=null;kG.Ryt.Pyt.oq={Yyt:()=>!0,Kyt(t){const s=this.Kfs();return!!s&&s.T1(t)},Zyt(t){const s=this.Kfs();return!!s&&(s.pat()===t||2===t)},Qyt(t,s){const i=this.Kfs();return!!i&&(i.pat()===s||2===s)&&i.T1(t)},Cyt(t){return this.Kfs().T1(t)},Eyt:()=>!0,Eds(t){NG=t},Ads:t=>NG.T1(t),Fds:()=>!0,IsPlaying(t){return this.nds(t,kG.Mmt.IsPlaying)},ahs(){return this.rds(kG.Mmt.IsPlaying)},N1(t){return this.nds(t,kG.Mmt.N1)},Dds(){return this.rds(kG.Mmt.N1)},H0(t,s){return 0===s?this.nds(t,kG.Mmt.iSt):1===s&&this.nds(t,kG.Mmt.eSt)},Lds(t){return 0===t?this.rds(kG.Mmt.iSt):1===t&&this.rds(kG.Mmt.eSt)}}}{const BG=self._s,UG=self.Wu,VG=BG.Ryt.Pyt;VG.Jdt={tDt(t){this.tDt(!!t)},async kds(...t){if(!this._u()||!this.nut())return;const s=this.wds(VG.Bds.Nds(this,...t));s.Play()&&await s.O1()},async Uds(...t){if(!this._u()||!this.nut())return;const s=this.wds(VG.Bds.Vds(this,...t));s.Play()&&await s.O1()},async Wds(...t){if(!this._u()||!this.nut())return;const s=this.wds(VG.Bds.zds(this,...t));s.Play()&&await s.O1()},jds(t){if(this._u()&&this.nut())for(const s of this.ods(t))s.v1()},Hds(){if(this._u()&&this.nut())for(const t of this.Zfs())t.v1()},Jds(t){if(this._u()&&this.nut())for(const s of this.ods(t))s.b1()},qds(){if(this._u()&&this.nut())for(const t of this.Zfs())t.b1()},$ds(t){if(this._u()&&this.nut())for(const s of this.ods(t))this.z1(s)},Xds(){if(this._u()&&this.nut())for(const t of this.Zfs())this.z1(t)},Yds(t,s,i){if(!this._u()||!this.nut())return;const e=BG.Ryt.Pyt.Tds.Kds(s);for(const s of this.ods(t))s.jyt([e]),s.Hyt(i,e)},Zds(t,s,i,e){if(!this._u()||!this.nut())return;const n=BG.Ryt.Pyt.Tds.Qds(s);for(const s of this.ods(t))s.jyt(n),s.Hyt(i,n[0]),s.Hyt(e,n[1])},tps(t,s){if(this._u()&&this.nut())for(const i of this.ods(t,"value"))i.Wyt(s,"value")},sps(t,s){if(this._u()&&this.nut())for(const i of this.ods(t,"value"))i.jyt(["value"]),i.Hyt(s,"value")},ips(t,s){if(!this._u()||!this.nut())return;const i=UG.oc(s);for(const s of this.ods(t))s.H1(i)},eps(t){if(!this._u()||!this.nut())return;const s=UG.oc(t);for(const t of this.Zfs())t.H1(s)},nps(t,s){if(this._u()&&this.nut())for(const i of this.ods(t))i.M1(s)},rps(t){if(this._u()&&this.nut())for(const s of this.Zfs())s.M1(t)},hps(t,s){if(this._u()&&this.nut())for(const i of this.ods(t))i.E1(s)},ops(t){if(this._u()&&this.nut())for(const s of this.Zfs())s.E1(t)},aps(t,s){if(this._u()&&this.nut())for(const i of this.ods(t))i.Y1(!!s)},lps(t){if(this._u()&&this.nut())for(const s of this.Zfs())s.Y1(!!t)}}}self._s.Ryt.Pyt.qdt={ups(t){const s=this.hds(t);return s?s.nW():0},cps(t){const s=this.hds(t);return s?s.nW()/s._1():0},spt(t){const s=this.hds(t);return s?s.A1():0},fps(t){const s=this.hds(t,"value");return s?s.s2("value").t2():0},uOt(){let t=this.sds();return t?t.wat():(t=this.Kfs(),t?t.wat():"")}};{const WG=self._s,zG=self.Wu,jG=["position","size","scale"],HG=["offsetX","offsetY","offsetWidth","offsetHeight","offsetAngle","offsetOpacity","offsetColor","offsetZElevation","offsetScaleX","offsetScaleY"],JG=["value"],qG=[].concat(jG).concat(HG).concat(JG),$G={position:["offsetX","offsetY"],size:["offsetWidth","offsetHeight"],scale:["offsetScaleX","offsetScaleY"]},XG=Object.assign({},qG.reduce((t,s)=>Object.assign({},t,{[s]:[s]}),{}),$G);WG.Ryt.Pyt.Tds=class{constructor(){}static dps(){return[...zG.Yu()]}static oc(t){return[...zG.Yu()][t]}static xds(t){return qG[t]}static pps(t){return qG.indexOf(t)}static mps(t){return jG[t]}static Kds(t){return HG[t]}static gps(t){return JG[t]}static yps(t){return $G[t]}static Qds(t){return WG.ae(t)?XG[t]:XG[qG[t]]}static Sps(t){return!!$G[t]}static wps(t){return"offsetColor"===t}static vps(t){return"offsetAngle"===t}static bps(t){return"offsetOpacity"===t}static Mds(t){return"value"===t}}}{const YG=self._s,KG=YG.Ryt.Pyt,ZG=new Map;KG.bds=class{constructor(){}static vds(t,s,i,e,n,r){0===ZG.size&&this.xps();const h=KG.Mps.Tps(t);let o=ZG.get(h);return YG.Qi(t)&&(t=KG.Tds.xds(t)),this.Gps(o,t,s,i,e,n,r)}static _ps(t,s){return YG.Ryt.Pyt.vds(t).Ips(s)}static xps(){const t=KG.Mps,s=KG.Cps;this.Pps(t.Rps,this.Eps,s.Aps),this.Pps(t.COLOR,this.Fps,s.Ops),this.Pps(t.Dps,this.Lps,s.kps),this.Pps(t.Nps,this.Bps,s.Aps),this.Pps(t.Ups,this.Vps,s.Aps)}static Pps(t,s,i){ZG.set(t,this.Wps(t,s,i))}static Wps(t,s,i){return{name:t,zps:s,Ips:i}}static Gps(t,s,i,e,n,r,h){return t.zps(s,t.Ips(i),t.Ips(e),n,r,h)}static Eps(t,s,i,e,n,r){return KG.Tds.yps(t).map((t,r)=>({uSt:"world-instance",vut:t,type:"float",valueType:"numeric",dSt:s[r],pSt:i[r],fSt:KG.Tds.oc(e),lSt:n}))}static Fps(t,s,i,e,n,r){return YG.lq.Text&&r.Q$()instanceof YG.lq.Text?{uSt:"plugin",cSt:[7],vut:"color",type:"color",valueType:"color",dSt:s,pSt:i,fSt:KG.Tds.oc(e),lSt:n}:{uSt:"world-instance",vut:t,type:"color",valueType:"color",dSt:s,pSt:i,fSt:KG.Tds.oc(e),lSt:n}}static Lps(t,s,i,e,n,r){return{uSt:"world-instance",vut:t,type:"angle",valueType:"angle",dSt:s,pSt:i,fSt:KG.Tds.oc(e),lSt:n}}static Vps(t,s,i,e,n,r){return{uSt:"world-instance",vut:t,type:"float",valueType:"numeric",dSt:s,pSt:i,fSt:KG.Tds.oc(e),lSt:n}}static Bps(t,s,i,e,n,r){return{uSt:"value",vut:t,type:"float",valueType:"numeric",dSt:s,pSt:i,fSt:KG.Tds.oc(e),lSt:n}}}}{const QG=self._s,t_=QG.Ryt.Pyt,s_={lSt:"absolute"},i_=Object.assign({},s_,{tags:"",vut:"",time:0,fSt:0,oSt:0,loop:!1,aSt:!1,U0:1}),e_=Object.assign({},i_,{hSt:"current-state",dSt:0,pSt:0}),n_=Object.assign({},i_,{hSt:"current-state",dSt:[0,0],pSt:[0,0]}),r_=Object.assign({},i_,{hSt:"current-state",dSt:[0,0,0],pSt:[0,0,0]}),h_=Object.assign({},e_,{hSt:"start-value"});t_.Bds=class{constructor(){}static jps(t,s,i,e,n,r,h,o){t.tags=s,t.time=i,t.fSt=e,t.oSt=n,t.loop=r,t.aSt=h,t.U0=o}static Nds(t,s,i,e,n,r,h,o,a,l){const u="string"==typeof i?i:t_.Tds.Kds(i),c=t_.Tds.wps(u)?r_:e_;return this.jps(c,s,n,r,h,o,a,l),t_.Tds.wps(u)?(r_.pSt[0]=QG.Pr(e),r_.pSt[1]=QG.Rr(e),r_.pSt[2]=QG.Er(e),r_.vut=t_.Tds.pps(u)):t_.Tds.bps(u)?e_.pSt=e/100:e_.pSt=e,c.vut=t_.Tds.pps(u),c}static Vds(t,s,i,e,n,r,h,o,a,l,u){this.jps(n_,s,r,h,o,a,l,u);const c="string"==typeof i?i:t_.Tds.mps(i);return n_.pSt[0]=e,n_.pSt[1]=n,n_.vut=t_.Tds.pps(c),n_}static zds(t,s,i,e,n,r,h,o,a,l){return this.jps(h_,s,n,r,h,o,a,l),h_.dSt=i,h_.pSt=e,h_.vut=t_.Tds.pps("value"),h_}}}{const o_=self._s,a_=o_.Ryt.Pyt,l_=[];a_.Mps=class{constructor(){}static Tps(t){if(0===l_.length){const t=l_;t.push({oA:a_.Tds.Sps,result:this.Rps}),t.push({oA:a_.Tds.wps,result:this.COLOR}),t.push({oA:a_.Tds.vps,result:this.Dps}),t.push({oA:a_.Tds.Mds,result:this.Nps}),t.push({oA:()=>!0,result:this.Ups})}o_.Qi(t)&&(t=o_.Ryt.Pyt.Tds.xds(t));for(const s of l_)if(s.oA(t))return s.result}static get Rps(){return"pair"}static get COLOR(){return"color"}static get Dps(){return"angle"}static get Nps(){return"value"}static get Ups(){return"other"}}}{const u_=self._s;u_.Ryt.Pyt.Cps=class{constructor(){}static kps(t){const s=u_.Zn(parseFloat(t));return u_.Kn(s)}static Ops(t){return t.slice(0)}static Aps(t){return t}}}{let c_=function(t){p_.le(t);const s=g_.Hu(t);let i;if(i=s?g_.ac(s,null):g_.ac(t,null),-1===i)throw new Error(`invalid ease name '${t}'`);return i},f_=function(t,s=!1){if(!(s&&null==t||"string"==typeof t||Array.isArray(t)))throw new Error("invalid tags")};0;const d_=self._s,p_=self.ks,m_=self.v0,g_=self.Wu,y_=d_.Ryt.Pyt,S_=new WeakMap,w_=new Map([["x",{name:"offsetX",type:"one"}],["y",{name:"offsetY",type:"one"}],["width",{name:"offsetWidth",type:"one"}],["height",{name:"offsetHeight",type:"one"}],["angle",{name:"offsetAngle",type:"one"}],["opacity",{name:"offsetOpacity",type:"one"}],["color",{name:"offsetColor",type:"color"}],["z-elevation",{name:"offsetZElevation",type:"one"}],["x-scale",{name:"offsetScaleX",type:"one"}],["y-scale",{name:"offsetScaleY",type:"one"}],["position",{name:"position",type:"two"}],["size",{name:"size",type:"two"}],["scale",{name:"scale",type:"two"}],["value",{name:"value",type:"value"}]]),v_={tags:"",Hps:!1,loop:!1,aSt:!1,U0:1,dSt:0},b_={W1:c_};self.Ods=class extends m_{constructor(){super(),S_.set(this,m_.IK().m0())}Jps(t,s,i,e,n){const r=S_.get(this);if(!r._u()||!r.nut())return null;const h=w_.get(t);if(!h)throw new Error("invalid tween property");"one"===h.type||"value"===h.type?p_.te(s):(p_.Me(s),"two"===h.type?(p_.te(s[0]),p_.te(s[1])):"color"===h.type&&(p_.te(s[0]),p_.te(s[1]),p_.te(s[2]))),"angle"===t?s=d_.Qn(s):"opacity"===t?s*=100:"color"===t&&(s=d_.Cr(s[0],s[1],s[2]));const o=c_(e);let a;if(p_.re(i),n=Object.assign({},v_,n),"value"===h.type&&p_.te(n.dSt),f_(n.tags,!0),"one"===h.type||"color"===h.type?a=r.wds(y_.Bds.Nds(r,n.tags,h.name,s,i,o,!!n.Hps,!!n.loop,!!n.aSt,n.U0)):"two"===h.type?a=r.wds(y_.Bds.Vds(r,n.tags,h.name,s[0],s[1],i,o,!!n.Hps,!!n.loop,!!n.aSt,n.U0)):"value"===h.type&&(a=r.wds(y_.Bds.zds(r,n.tags,n.dSt,s,i,o,!!n.Hps,!!n.loop,!!n.aSt,n.U0))),a.kyt(r.Dkt().m0()),!a.Play())throw new Error("failed to start tween");return a.mSt(r,b_)}*qps(){const t=S_.get(this);for(const s of t.Zfs())yield s.mSt(t,b_)}*$ps(t){f_(t);const s=S_.get(this);for(const i of s.ods(t))yield i.mSt(s,b_)}get isEnabled(){return S_.get(this)._u()}set isEnabled(t){S_.get(this).tDt(t)}}}{const x_=self._s;x_.Ryt.Xps=class extends x_._kt{constructor(t){super(t)}Hn(){super.Hn()}}}{const T_=self._s;T_.Ryt.Xps.LBt=class extends T_.Ekt{constructor(t){super(t)}Hn(){super.Hn()}$Dt(){}}}{const M_=self._s,G_=self.ks,__=self.v0,I_=0,C_=1,P_=2,R_=3,E_=4,A_=5,F_=6;M_.Ryt.Xps.Instance=class extends M_.Fkt{constructor(t,s){super(t);const i=this.LJ();this.TNt=0,this.Yps=0,this.Go=0,this.Kps=!1,this.Zps=!1,this.Qps=!1,this.uPt=!0,this.tms=0,this.sms=0,this.bts=i.aT(),this.xts=i.cT(),this.ims=i.$X(),this.ems=0,this.nms=Math.min(Math.abs(i.xy()),Math.abs(i.My())/2),this.rms=!1,s&&(this.TNt=s[I_],this.Yps=s[C_],this.Go=s[P_],this.Kps=!!s[R_],this.Zps=!!s[E_],this.Qps=!!s[A_],this.uPt=!!s[F_]);const e=i.$X();this.tms=Math.cos(e)*this.TNt,this.sms=Math.sin(e)*this.TNt,this.uPt&&(this.OLt(),this.Kps&&this.Nkt())}Hn(){super.Hn()}bT(){const t={dx:this.tms,dy:this.sms,lx:this.bts,ly:this.xts,lka:this.ims,t:this.ems};return 0!==this.Yps&&(t.acc=this.Yps),0!==this.Go&&(t.g=this.Go),this.Qps&&(t.st=this.Qps),this.uPt||(t.e=this.uPt),this.Kps&&(t.bos=this.Kps),this.Zps&&(t.sa=this.Zps),t}xT(t){this.tms=t.dx,this.sms=t.dy,this.bts=t.lx,this.xts=t.ly,this.ims=t.lka,this.ems=t.t,this.Yps=t.hasOwnProperty("acc")?t.acc:0,this.Go=t.hasOwnProperty("g")?t.g:0,this.Qps=!!t.hasOwnProperty("st")&&t.st,this.Kps=!!t.hasOwnProperty("bos")&&t.bos,this.Zps=!!t.hasOwnProperty("sa")&&t.sa,this.eOt(!t.hasOwnProperty("e")||t.e)}Grt(){if(!this.uPt)return;const t=this.Nc.PH(this.fi),s=this.fi.LJ();if(s.$X()!==this.ims){const t=s.$X();if(this.Zps){const s=M_.ir(0,0,this.tms,this.sms);this.tms=Math.cos(t)*s,this.sms=Math.sin(t)*s}this.ims=t}let i=0,e=0;if(0!==this.Yps){let n=M_.ir(0,0,this.tms,this.sms),r=0;r=0===this.tms&&0===this.sms?s.$X():M_.nr(0,0,this.tms,this.sms),n+=this.Yps*t,i=Math.cos(r)*this.Yps,e=Math.sin(r)*this.Yps,n<0&&(n=0,i=0,e=0),this.tms=Math.cos(r)*n,this.sms=Math.sin(r)*n}if(0!==this.Go&&(this.sms+=this.Go*t,e+=this.Go),this.bts=s.aT(),this.xts=s.cT(),0!==this.tms||0!==this.sms){const n=this.tms*t+.5*i*t*t,r=this.sms*t+.5*e*t*t,h=M_.ir(0,0,n,r);if(this.hms(n,r,h),this.ems+=h,this.Zps&&(0!==n||0!==r)){const t=M_.nr(0,0,n,r);s.qX(t),this.ims=s.$X()}s.kZ()}}hms(t,s,i){const e=this.LJ();if(!this.Qps||i<=this.nms)return e.UZ(t,s),e.kZ(),void(this.Qps&&this.aZ(M_.Ryt.Xps.oq.oms));this.rms=!1;const n=e.aT(),r=e.cT(),h=n+t,o=r+s,a=M_.nr(0,0,t,s),l=Math.cos(a)*this.nms,u=Math.sin(a)*this.nms,c=Math.floor(i/this.nms);for(let t=1;t<=c;++t)if(e.NZ(n+l*t,r+u*t),e.kZ(),this.aZ(M_.Ryt.Xps.oq.oms),this.fi.kJ()||this.rms)return;e.NZ(h,o),e.kZ(),this.aZ(M_.Ryt.Xps.oq.oms)}kkt(){if(!this.uPt||!this.Kps||0===this.tms&&0===this.sms)return;const t=this.Nc.PH(this.fi),s=this.fi.LJ(),i=this.Nc.Aj(),e=i.Wq(this.fi);if(e){i.UHt(this.fi,e);const n=M_.ir(0,0,this.tms,this.sms),r=i.aJt(this.fi,this.bts,this.xts);this.tms=Math.cos(r)*n,this.sms=Math.sin(r)*n,s.UZ(this.tms*t,this.sms*t),s.kZ(),this.Zps&&(s.qX(r),this.ims=s.$X(),s.kZ()),i.nJt(this.fi,this.tms/n,this.sms/n,Math.max(2.5*n*t,30))||i.oJt(this.fi,100)}}Ppt(t){switch(t){case I_:return this.ams();case C_:return this.lms();case P_:return this.ums();case E_:return this.Zps;case A_:return this.Qps;case F_:return this.rOt()}}Dpt(t,s){switch(t){case I_:this.cms(s);break;case C_:this.Yps=s;break;case P_:this.Go=s;break;case E_:this.Zps=!!s;break;case A_:this.Qps=!!s;break;case F_:this.eOt(!!s)}}cms(t){const s=M_.nr(0,0,this.tms,this.sms);this.tms=Math.cos(s)*t,this.sms=Math.sin(s)*t}ams(){return M_.Mr(M_.ir(0,0,this.tms,this.sms),6)}fms(t){this.Yps=t}lms(){return this.Yps}dms(t){this.Go=t}ums(){return this.Go}pms(t){const s=M_.ir(0,0,this.tms,this.sms);this.tms=Math.cos(t)*s,this.sms=Math.sin(t)*s}mms(){return M_.nr(0,0,this.tms,this.sms)}gms(t){t=!!t,this.Kps!==t&&(this.Kps=t,this.uPt&&(this.Kps?this.Nkt():this.Okt()))}yms(){return this.Kps}Sms(t){this.ems=t}wms(){return this.ems}eOt(t){this.uPt=!!t,this.uPt?(this.OLt(),this.Kps&&this.Nkt()):(this.SLt(),this.Okt())}rOt(){return this.uPt}NLt(){const t="behaviors.bullet";return[{title:"$"+this.G0().Pc(),properties:[{name:t+".debugger.vector-x",value:this.tms,u6t:t=>this.tms=t},{name:t+".debugger.vector-y",value:this.sms,u6t:t=>this.sms=t},{name:t+".properties.speed.name",value:this.ams(),u6t:t=>this.cms(t)},{name:t+".debugger.angle-of-motion",value:M_.Qn(this.mms())},{name:t+".properties.gravity.name",value:this.ums(),u6t:t=>this.dms(t)},{name:t+".properties.acceleration.name",value:this.lms(),u6t:t=>this.fms(t)},{name:t+".debugger.distance-travelled",value:this.wms()},{name:t+".properties.enabled.name",value:this.rOt(),u6t:t=>this.eOt(t)}]}]}XDt(){return self.vms}};const O_=new WeakMap;self.vms=class extends __{constructor(){super(),O_.set(this,__.IK().m0())}get speed(){return O_.get(this).ams()}set speed(t){G_.re(t),O_.get(this).cms(t)}get acceleration(){return O_.get(this).lms()}set acceleration(t){G_.re(t),O_.get(this).fms(t)}get Zus(){return O_.get(this).ums()}set Zus(t){G_.re(t),O_.get(this).dms(t)}get bms(){return O_.get(this).mms()}set bms(t){G_.re(t),O_.get(this).pms(t)}get xms(){return O_.get(this).yms()}set xms(t){O_.get(this).gms(!!t)}get Tms(){return O_.get(this).wms()}set Tms(t){G_.re(t),O_.get(this).Sms(t)}get isEnabled(){return O_.get(this).rOt()}set isEnabled(t){O_.get(this).eOt(t)}}}{const D_=self._s;D_.Ryt.Xps.oq={Mms(t,s){const i=Math.hypot(this.tms,this.sms);return D_.compare(i,t,s)},Gms(t,s){return D_.compare(this.wms(),t,s)},oms:()=>!0,_u(){return this.rOt()}}}{const L_=self._s;L_.Ryt.Xps.Jdt={_ms(t){this.cms(t)},Wls(t){this.fms(t)},zls(t){this.dms(t)},Ims(t){this.pms(L_.Zn(t))},yz(t){if(!t)return;const s=t.SFt(this.fi);if(!s)return;const i=this.fi.LJ(),e=this.Nc.Aj(),n=this.Nc.PH(this.fi),r=L_.ir(0,0,this.tms,this.sms),h=e.aJt(this.fi,this.bts,this.xts,s);this.tms=Math.cos(h)*r,this.sms=Math.sin(h)*r,i.UZ(this.tms*n,this.sms*n),i.kZ(),this.Zps&&(i.qX(h),this.ims=i.$X(),i.kZ()),0!==r&&(this.Kps?e.nJt(this.fi,this.tms/r,this.sms/r,Math.max(2.5*r*n,30))||e.oJt(this.fi,100):e.eJt(this.fi,this.tms/r,this.sms/r,Math.max(2.5*r*n,30),s))},Cms(t){this.gms(t)},Pms(t){this.Sms(t)},tDt(t){this.eOt(t)},Rms(){this.rms=!0}}}{const k_=self._s;k_.Ryt.Xps.qdt={Ems(){return this.ams()},Ams(){return this.lms()},Fms(){return k_.Qn(this.mms())},Oms(){return this.wms()},Pcs(){return this.ums()}}}{const N_=self._s;N_.Ryt.Dms=class extends N_._kt{constructor(t){super(t)}Hn(){super.Hn()}}}{const B_=self._s;B_.Ryt.Dms.LBt=class extends B_.Ekt{constructor(t){super(t)}Hn(){super.Hn()}$Dt(){}}}{const U_=self._s,V_=self.ks,W_=self.v0,z_=0,j_=1,H_=2;U_.Ryt.Dms.Instance=class extends U_.Fkt{constructor(t,s){super(t),this.TNt=0,this.Qcs=0,this.uPt=!0,s&&(this.TNt=U_.Zn(s[z_]),this.Qcs=U_.Zn(s[j_]),this.uPt=s[H_]),this.uPt&&this.OLt()}Hn(){super.Hn()}cms(t){this.TNt=t}ams(){return this.TNt}fms(t){this.Qcs=t}lms(){return this.Qcs}bT(){return{s:this.TNt,a:this.Qcs,e:this.uPt}}xT(t){this.TNt=t.s,this.Qcs=t.a,this.eOt(t.e)}Grt(){if(!this.uPt)return;const t=this.Nc.PH(this.fi);if(0!==t&&(0!==this.Qcs&&(this.TNt+=this.Qcs*t),0!==this.TNt)){const s=this.fi.LJ();s.qX(s.$X()+this.TNt*t),s.kZ()}}Ppt(t){switch(t){case z_:return U_.Qn(this.ams());case j_:return U_.Qn(this.lms());case H_:return this.rOt()}}Dpt(t,s){switch(t){case z_:this.cms(U_.Zn(s));break;case j_:this.fms(U_.Zn(s));break;case H_:this.eOt(s)}}eOt(t){this.uPt=!!t,this.uPt?this.OLt():this.SLt()}rOt(){return this.uPt}NLt(){const t="behaviors.rotate";return[{title:"$"+this.G0().Pc(),properties:[{name:t+".properties.speed.name",value:U_.Qn(this.ams()),u6t:t=>this.cms(U_.Zn(t))},{name:t+".properties.acceleration.name",value:U_.Qn(this.lms()),u6t:t=>this.fms(U_.Zn(t))},{name:t+".properties.enabled.name",value:this.rOt(),u6t:t=>this.eOt(t)}]}]}XDt(){return self.Lms}};const J_=new WeakMap;self.Lms=class extends W_{constructor(){super(),J_.set(this,W_.IK().m0())}set speed(t){V_.re(t),J_.get(this).cms(t)}get speed(){return J_.get(this).ams()}set acceleration(t){V_.re(t),J_.get(this).fms(t)}get acceleration(){return J_.get(this).lms()}get isEnabled(){return J_.get(this).rOt()}set isEnabled(t){J_.get(this).eOt(t)}}}self._s.Ryt.Dms.oq={_u(){return this.rOt()}};{const q_=self._s;q_.Ryt.Dms.Jdt={_ms(t){this.cms(q_.Zn(t))},Wls(t){this.fms(q_.Zn(t))},tDt(t){this.eOt(t)}}}{const $_=self._s;$_.Ryt.Dms.qdt={Ems(){return $_.Qn(this.ams())},Ams(){return $_.Qn(this.lms())}}}{const X_=self._s;X_.Ryt.kms=class extends X_._kt{constructor(t){super(t)}Hn(){super.Hn()}}}{const Y_=self._s;Y_.Ryt.kms.LBt=class extends Y_.Ekt{constructor(t){super(t)}Hn(){super.Hn()}$Dt(){}}}{const K_=self._s;K_.Ryt.kms.Instance=class extends K_.Fkt{constructor(t,s){super(t),this.Nms=null,this.Bms=-1,this.Ums="",this.Vms=new Set,this.Wms=0,this.zms=0,this.jms=0,this.tms=0,this.sms=0,this.Hms=0,this.Jms=0,this.qms=0,this.$ms=0,this.ims=0,this.Xms=!1,s&&(this.Xms=s[0]);const i=this.Nc.Sf();this.Yf=new K_.qf(K_.Vf.Jf(i,"instancedestroy",t=>this.Ors(t._0)),K_.Vf.Jf(i,"afterload",t=>this._nt()))}Hn(){this.Nms=null,super.Hn()}Yms(t){t?(this.Nms=t,this.LLt()):(this.Nms=null,this.wLt())}Kms(t,s,i){if(!t)return;const e=t.SFt(this.fi);if(!e)return;this.Ums=s,this.Yms(e);const n=this.fi.LJ(),r=e.LJ();if("properties"===this.Ums){const t=this.Vms;t.clear();for(const s of i)t.add(s);this.tms=n.aT()-r.aT(),this.sms=n.cT()-r.cT(),this.qms=n.$X()-r.$X(),this.ims=n.$X(),this.$ms=n.dT()-r.dT(),t.has("x")&&t.has("y")&&(this.zms=K_.nr(r.aT(),r.cT(),n.aT(),n.cT())-r.$X(),this.Wms=K_.ir(r.aT(),r.cT(),n.aT(),n.cT())),t.has("width-abs")?this.Hms=n.xy()-r.xy():t.has("width-scale")&&(this.Hms=n.xy()/r.xy()),t.has("height-abs")?this.Jms=n.My()-r.My():t.has("height-scale")&&(this.Jms=n.My()/r.My())}else this.Wms=K_.ir(r.aT(),r.cT(),n.aT(),n.cT())}bT(){const t=this.Vms,s=this.Ums,i={uid:this.Nms&&!this.Nms.kJ()?this.Nms.LK():-1,m:s,d:this.Xms};return"rope"===s||"bar"===s?i.pd=this.Wms:"properties"===s&&(i.ps=[...this.Vms],t.has("imagepoint")?i.ip=this.jms:t.has("x")&&t.has("y")?(i.pa=this.zms,i.pd=this.Wms):(t.has("x")&&(i.dx=this.tms),t.has("y")&&(i.dy=this.sms)),t.has("angle")&&(i.da=this.qms,i.lka=this.ims),(t.has("width-abs")||t.has("width-scale"))&&(i.dw=this.Hms),(t.has("height-abs")||t.has("height-scale"))&&(i.dh=this.Jms),t.has("z")&&(i.dz=this.$ms)),i}xT(t){const s=t.m,i=this.Vms;if(i.clear(),this.Bms=t.uid,"number"!=typeof s){if(this.Ums=s,t.hasOwnProperty("d")&&(this.Xms=!!t.d),"rope"===s||"bar"===s)this.Wms=t.pd;else if("properties"===s){for(const s of t.ps)i.add(s);i.has("imagepoint")?this.jms=t.ip:i.has("x")&&i.has("y")?(this.zms=t.pa,this.Wms=t.pd):(i.has("x")&&(this.tms=t.dx),i.has("y")&&(this.sms=t.dy)),i.has("angle")&&(this.qms=t.da,this.ims=t.lka||0),(i.has("width-abs")||i.has("width-scale"))&&(this.Hms=t.dw),(i.has("height-abs")||i.has("height-scale"))&&(this.Jms=t.dh),i.has("z")&&(this.$ms=t.dz)}}else this.Zms(t)}Zms(t){const s=this.Vms,i=t.msa,e=t.tsa,n=t.pa,r=t.pd;switch(t.m){case 0:this.Ums="properties",s.add("x").add("y").add("angle"),this.zms=n,this.Wms=r,this.qms=i-e,this.ims=t.lka;break;case 1:this.Ums="properties",s.add("x").add("y"),this.zms=n,this.Wms=r;break;case 2:this.Ums="properties",s.add("angle"),this.qms=i-e,this.ims=t.lka;break;case 3:this.Ums="rope",this.Wms=t.pd;break;case 4:this.Ums="bar",this.Wms=t.pd}}_nt(){-1===this.Bms?this.Yms(null):(this.Yms(this.Nc.EJ(this.Bms)),this.Bms=-1)}Ors(t){this.Nms===t&&(this.Yms(null),this.Xms&&this.Nc.JJ(this.fi))}FLt(){const t=this.Nms;if(!t||t.kJ())return;const s=t.LJ(),i=this.fi.LJ(),e=this.Ums;let n=!1;if("rope"===e||"bar"===e){const t=K_.ir(i.aT(),i.cT(),s.aT(),s.cT());if(t>this.Wms||"bar"===e&&t<this.Wms){const t=K_.nr(s.aT(),s.cT(),i.aT(),i.cT());i.NZ(s.aT()+Math.cos(t)*this.Wms,s.cT()+Math.sin(t)*this.Wms),n=!0}}else{const e=this.Vms;let r=0;if(e.has("imagepoint")){const[s,e]=t.VAt(this.jms);i.BAt(s,e)||(i.NZ(s,e),n=!0)}else if(e.has("x")&&e.has("y")){const t=s.aT()+Math.cos(s.$X()+this.zms)*this.Wms,e=s.cT()+Math.sin(s.$X()+this.zms)*this.Wms;i.BAt(t,e)||(i.NZ(t,e),n=!0)}else r=s.aT()+this.tms,e.has("x")&&r!==i.aT()&&(i.lT(r),n=!0),r=s.cT()+this.sms,e.has("y")&&r!==i.cT()&&(i.fT(r),n=!0);e.has("angle")&&(this.ims!==i.$X()&&(this.qms=K_.Kn(this.qms+(i.$X()-this.ims))),r=K_.Kn(s.$X()+this.qms),r!==i.$X()&&(i.qX(r),n=!0),this.ims=i.$X()),e.has("width-abs")&&(r=s.xy()+this.Hms,r!==i.xy()&&(i.ny(r),n=!0)),e.has("width-scale")&&(r=s.xy()*this.Hms,r!==i.xy()&&(i.ny(r),n=!0)),e.has("height-abs")&&(r=s.My()+this.Jms,r!==i.My()&&(i.hy(r),n=!0)),e.has("height-scale")&&(r=s.My()*this.Jms,r!==i.My()&&(i.hy(r),n=!0)),e.has("z")&&(r=s.dT()+this.$ms,r!==i.dT()&&(i.pT(r),this.Nc.jJ()))}n&&i.kZ()}NLt(){const t="behaviors.pin.debugger";return[{title:"$"+this.G0().Pc(),properties:[{name:t+".is-pinned",value:!!this.Nms},{name:t+".pinned-uid",value:this.Nms?this.Nms.LK():0}]}]}}}self._s.Ryt.kms.oq={Qms(){return!!this.Nms},tgs(){return this.Xms}},self._s.Ryt.kms.Jdt={sgs(t,s){this.Kms(t,0===s?"rope":"bar")},igs(t,s,i,e,n,r,h){const o=[];s&&o.push("x"),i&&o.push("y"),e&&o.push("angle"),h&&o.push("z"),1===n?o.push("width-abs"):2===n&&o.push("width-scale"),1===r?o.push("height-abs"):2===r&&o.push("height-scale"),0!==o.length&&this.Kms(t,"properties",o)},egs(t,s,i,e,n,r){const h=["imagepoint"];i&&h.push("angle"),r&&h.push("z"),1===e?h.push("width-abs"):2===e&&h.push("width-scale"),1===n?h.push("height-abs"):2===n&&h.push("height-scale"),this.jms=s,this.Kms(t,"properties",h)},ngs(t){"rope"!==this.Ums&&"bar"!==this.Ums||(this.Wms=Math.max(t,0))},rgs(t){this.Xms=t},hgs(){this.Yms(null),this.Ums="",this.Vms.clear(),this.jms=""},kms(t,s){switch(s){case 0:this.Kms(t,"properties",["x","y","angle"]);break;case 1:this.Kms(t,"properties",["x","y"]);break;case 2:this.Kms(t,"properties",["angle"]);break;case 3:this.Kms(t,"rope");break;case 4:this.Kms(t,"bar")}}},self._s.Ryt.kms.qdt={ogs(){return this.Nms?this.Nms.LK():-1}};{let Z_=function(t,s){return"number"==typeof t&&"number"==typeof s},Q_=function(t,s){return Z_(t,s)?t+s:t},tI=function(t,s){return Z_(t,s)?t-s:t},sI=function(t,s){return Z_(t,s)?t*s:t},iI=function(t,s){return Z_(t,s)?t/s:t},eI=function(t,s){return Z_(t,s)?t%s:t},nI=function(t,s){return Z_(t,s)?Math.pow(t,s):t},rI=function(t,s){if("string"==typeof t||"string"==typeof s){let i,e;return i="number"==typeof t?(Math.round(1e10*t)/1e10).toString():t,e="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,i+e}return t&&s?1:0},hI=function(t,s){return Z_(t,s)?t||s?1:0:t};0;const oI=self._s;self.xRt=[()=>"Start",()=>"start",()=>0,()=>"",()=>100,()=>.5,()=>1,()=>1.5,()=>4926,t=>{const s=t.ARt(0).ZPt();return()=>s(0)},t=>{const s=t.ARt(0).ZPt(),i=t.ARt(1);return()=>s(0)-i.nRt()/2},t=>{const s=t.ARt(0);return()=>s.nRt()},t=>{const s=t.ARt(0).ZPt();return()=>s(0)+300},t=>{const s=t.ARt(0).ZPt();return()=>s(1)+200},t=>{const s=t.ARt(0).ZPt();return()=>s(1)+100},()=>.25,t=>{const s=t.ARt(0).ZPt();return()=>Math.floor(s(25,40))},()=>90,t=>{const s=t.ARt(0).ZPt();return()=>s(1)},t=>{const s=t.ARt(0).ZPt();return()=>s(1)-200},t=>{const s=t.ARt(0).bRt();return()=>rI(s.Hct(),"m")},t=>{const s=t.ARt(0).bRt();return()=>s.Hct()},t=>{const s=t.ARt(0).ZPt();return()=>s(1)-100},t=>{const s=t.ARt(0).ZPt();return()=>s(1)-230},()=>360,t=>{const s=t.ARt(0).ZPt(),i=t.ARt(1).bRt();return()=>s(22,Math.floor(i.Hct()/10))},t=>{const s=t.ARt(0).bRt();return()=>.7*s.Hct()},t=>{const s=t.ARt(0);return()=>s.nRt()-10},()=>"Play Fun",t=>{const s=t.ARt(0).ZPt();return()=>s(2)},()=>2,()=>.2,()=>.3,()=>"3",()=>"2",()=>"1",()=>"Go",t=>{const s=t.ARt(0).ZPt();return()=>s(0)-300},t=>{const s=t.ARt(0).bRt();return()=>s.Hct()/500*40},()=>1.9,()=>80,()=>"Animation 2",()=>"scale",()=>4,()=>20,t=>{const s=t.ARt(0).bRt(),i=t.ARt(1).ZPt(),e=t.ARt(2).bRt();return()=>s.Hct()*i()*e.Hct()},t=>{const s=t.ARt(0).bRt();return()=>Math.floor(s.Hct()/100)},()=>.15,()=>.1,()=>"loading",t=>{const s=t.ARt(0).ZPt();return()=>s(1)-60},t=>{const s=t.ARt(0).ZPt();return()=>s(1)-350},t=>{const s=t.ARt(0).ZPt();return()=>s(1)+60},()=>.55,()=>"Animation 1",()=>270,()=>600,()=>1.2,()=>606,()=>700,t=>{const s=t.ARt(0).ZPt();return()=>s(.8,1)},()=>701,()=>850,()=>10,t=>{const s=t.ARt(0).ZPt();return()=>s(.5,.7)},()=>400,()=>1200,()=>2e3,()=>3,t=>{const s=t.ARt(0).ZPt();return()=>s(.4,.5)},()=>"obs",()=>"Layer 0",()=>.7,()=>"time2",()=>5,()=>"power",t=>{const s=t.ARt(0).ZPt();return()=>s(0)+100},()=>"GameOver",()=>"over",()=>"run",()=>95,t=>{const s=t.ARt(0).ZPt();return()=>s(2)-150},t=>{const s=t.ARt(0).ZPt();return()=>s(2)-100},t=>{const s=t.ARt(0).ZPt();return()=>s(2)+170},t=>{const s=t.ARt(0).ZPt();return()=>s(2)+300},()=>-45,()=>"OOPS!",()=>50,()=>170,t=>{const s=t.ARt(0).ZPt();return()=>s(1)+420},()=>2.5,()=>-60,t=>{const s=t.ARt(0).ZPt();return()=>s(1)+570},()=>"Game Over",t=>{const s=t.ARt(0).ZPt();return()=>s(2)-200},t=>{const s=t.ARt(0);return()=>s.nRt()-20},t=>{const s=t.ARt(0).ZPt();return()=>s()},()=>"Create",t=>{const s=t.ARt(0).ZPt(),i=t.ARt(1),e=t.ARt(2);return()=>s(i.nRt()-100,e.nRt()+100)},t=>{const s=t.ARt(0).ZPt(),i=t.ARt(1).ZPt();return()=>s(0)-i(200,300)},t=>{const s=t.ARt(0).ZPt();return()=>Math.floor(s(0,4))},()=>.8,t=>{const s=t.ARt(0).ZPt();return()=>s(0)-200},t=>{const s=t.ARt(0).ZPt();return()=>Math.floor(s(0,3))},()=>.4,t=>{const s=t.ARt(0).ZPt(),i=t.ARt(1).ZPt(),e=t.ARt(2).ZPt(),n=t.ARt(3).ZPt(),r=t.ARt(4).ZPt(),h=t.ARt(5).ZPt(),o=t.ARt(6).ZPt();return()=>s(i(e(0),n(0)-300),r(h(0)+300),o(0))},t=>{const s=t.ARt(0).ZPt();return()=>s(0)-500},t=>{const s=t.ARt(0).ZPt();return()=>s(.6,1)},t=>{const s=t.ARt(0).ZPt();return()=>Math.floor(s(0,10))},t=>{const s=t.ARt(0).ZPt();return()=>s(0,355)},()=>.01,t=>{const s=t.ARt(0).ZPt(),i=t.ARt(1),e=t.ARt(2);return()=>s(i.nRt(),e.nRt())},()=>180,()=>60,t=>{const s=t.ARt(0).ZPt();return()=>s(.5,1)},t=>{const s=t.ARt(0);return()=>s.aRt()},t=>{const s=t.ARt(0).ZPt();return()=>s(.3,.5)},t=>{const s=t.ARt(0);return()=>s.nRt()-100},t=>{const s=t.ARt(0).bRt();return()=>-s.Hct()/4},t=>{const s=t.ARt(0);return()=>s.nRt()+100},t=>{const s=t.ARt(0).bRt();return()=>s.Hct()/4},()=>"Best Score",()=>"runLittleBest",t=>{const s=t.ARt(0).ZPt();return()=>s(2)+550},()=>1.1,t=>{const s=t.ARt(0).ZPt();return()=>s(2)+400},()=>"Pause",()=>"pause",t=>{const s=t.ARt(0).ZPt();return()=>s(4)},t=>{const s=t.ARt(0).ZPt();return()=>s(4)-150},t=>{const s=t.ARt(0).ZPt();return()=>s(4)+200},t=>{const s=t.ARt(0).ZPt();return()=>s(4)+100},t=>{const s=t.ARt(0).ZPt();return()=>s(4)-100},t=>{const s=t.ARt(0).ZPt();return()=>s(2)-185},()=>200,()=>130,()=>"game",()=>"info",t=>{const s=t.ARt(0).ZPt();return()=>s(3)},t=>{const s=t.ARt(0).ZPt();return()=>s(3)-150},()=>"TAP TO BACK",()=>"DepthStripe",()=>"GlowHorizontal",()=>"GlowVertical",t=>{const s=t.ARt(0).bRt();return()=>.25*s.Hct()},()=>"Ui",t=>{const s=t.ARt(0).ZPt();return()=>s(2)+100},()=>"The world slows down\nDoge obstacles with ease.",()=>"Become a hollow outline.\nPass safely through one obstacle.",()=>"Move faster and earn double score.",()=>"Clear nearby obstacles and move safely ahead.",()=>"time",t=>{const s=t.ARt(0).bRt();return()=>.1*s.Hct()},()=>"Cloud Create",t=>{const s=t.ARt(0).ZPt(),i=t.ARt(1).ZPt(),e=t.ARt(2).ZPt();return()=>s(i(0),e(0)-200)},()=>30,t=>{const s=t.ARt(0).ZPt();return()=>s(0,1,2,3,4)},t=>{const s=t.ARt(0).ZPt();return()=>s(0)+500},t=>{const s=t.ARt(0).ZPt();return()=>s(5,10)},()=>.65,t=>{const s=t.ARt(0).ZPt();return()=>s(0)-150},t=>{const s=t.ARt(0);return()=>s.nRt()+230},t=>{const s=t.ARt(0).ZPt();return()=>s(0)-50},t=>{const s=t.ARt(0).ZPt();return()=>s(0)+60},t=>{const s=t.ARt(0).ZPt();return()=>s(0)-320},()=>"Layer 1",t=>{const s=t.ARt(0).ZPt();return()=>s(1,1.5)},()=>"video",()=>"paperWrite",()=>"TAP TO RUN",()=>.05,t=>{const s=t.ARt(0);return()=>s.nRt()+50},t=>{const s=t.ARt(0).ZPt(),i=t.ARt(1),e=t.ARt(2);return()=>s(i.nRt()+50,e.nRt())},()=>.6,t=>{const s=t.ARt(0).ZPt();return()=>s(2,2.5)},t=>{const s=t.ARt(0).ZPt(),i=t.ARt(1);return()=>s(0)/i.nRt()},t=>{const s=t.ARt(0).ZPt(),i=t.ARt(1);return()=>s(1)/i.nRt()},()=>"menu",()=>"bgm",()=>"mBgm",()=>-10,()=>-30,()=>"flip",()=>"die",()=>"powerPick",()=>1.7,()=>-5,()=>"count",()=>"fold",t=>{const s=t.ARt(0).bRt();return()=>oI.Yn(s.Hct()/500,.9,1.3)},t=>{const s=t.ARt(0).ZPt();return()=>s(3)+100},t=>{const s=t.ARt(0).ZPt();return()=>s(3)+150},t=>{const s=t.ARt(0);return()=>2.5*s.nRt()},()=>"TAP TO NEXT",()=>"v3.mp4",()=>"v2.mp4",()=>"TAP TO PLAY"]}globalThis._s.Ryt.ags=class extends globalThis.s3{constructor(t){super(t)}Hn(){super.Hn()}},globalThis._s.Ryt.ags.LBt=class extends globalThis.i3{constructor(){super()}f2(){}},globalThis._s.Ryt.ags.Instance=class extends globalThis.e3{constructor(){super();const t=this.rZ();this.lgs=0,this.ugs=0,this.cgs=0,this.fgs=0,this.dgs=0,this.pgs=0,this.mgs=0,this.axis=0,t&&(this.enabled=0!==t[0]),this.nZ(!0)}f2(){}PK(){this.nZ(!1),super.PK()}MZ(){return{smg:this.lgs,ss:this.ugs,se:this.cgs,smd:this.fgs,enabled:this.enabled}}GZ(t){this.lgs=t.smg,this.ugs=t.ss,this.cgs=t.se,this.fgs=t.smd,t.hasOwnProperty("enabled")&&(this.enabled=t.enabled)}bZ(){this.runtime.CH;if(this.enabled){var t=this.runtime.AH,s=this.runtime.NH,i=0,e=0;if(!(t>=this.ugs&&t<this.cgs))return this.nZ(!1),void(this.dgs&&(this._0.x=this.pgs,this._0.y=this.mgs));var n=this.lgs*Math.min(s,1);0===this.fgs&&(n*=1-(t-this.ugs)/(this.cgs-this.ugs));var r=Math.random()*Math.PI*2,h=Math.random()*n;i=Math.cos(r)*h,e=Math.sin(r)*h,(0!=i||0!=e||1===this.dgs&&this.ugs>0)&&this._0&&(1==this.axis?this._0.x=this.dgs?this.pgs+i:this._0.x+i:(2==this.axis||(this._0.x=this.dgs?this.pgs+i:this._0.x+i),this._0.y=this.dgs?this.mgs+e:this._0.y+e),"function"==typeof this._0.yu&&this._0.yu())}}},globalThis._s.Ryt.ags.oq={},globalThis._s.Ryt.ags.Jdt={ggs(t,s,i,e,n){this.lgs=t;const r=this.runtime.AH;this.ugs=r,this.cgs=this.ugs+s,this.fgs=i,this.dgs=e,this.axis=n,this._0?(this.pgs=this._0.x,this.mgs=this._0.y):(this.pgs=0,this.mgs=0),this.nZ(!0)},tDt(t){this.enabled=t}},globalThis._s.Ryt.ags.qdt={};var _t=self._s;self.bZt=function(){return[_t.lq.odt,_t.Ryt.Pyt,_t.lq.r8t,_t.Ryt.Xps,_t.lq.Touch,_t.Ryt.Dms,_t.lq.Text,_t.Ryt.ags,_t.lq.Cis,_t.lq.Hes,_t.lq.Audio,_t.lq.hos,_t.lq.video,_t.lq.gls,_t.Ryt.kms,_t.lq.aq.oq.ZGt,_t.lq.aq.oq.ret,_t.lq.aq.Jdt.a2t,_t.lq.odt.Jdt.DF,_t.Ryt.Pyt.Jdt.kds,_t.lq.aq.Jdt.D2t,_t.lq.r8t.Jdt.hy,_t.lq.r8t.Jdt.NAt,_t.lq.aq.qdt.m4t,_t.lq.aq.qdt.u4t,_t.lq.r8t.qdt.NOt,_t.lq.odt.Jdt.NAt,_t.lq.r8t.qdt.BOt,_t.lq.aq.qdt.f4t,_t.lq.odt.Jdt.mOt,_t.lq.odt.Jdt.mFt,_t.lq.Cis.Jdt.NAt,_t.lq.aq.qdt.l4t,_t.lq.odt.Jdt.HX,_t.lq.aq.Jdt.s2t,_t.lq.aq.qdt.random,_t.lq.aq.oq.v1t,_t.Ryt.Xps.Jdt.Ims,_t.lq.aq.qdt.g4t,_t.lq.odt.Jdt.QR,_t.lq.aq.qdt.d4t,_t.lq.aq.qdt.p4t,_t.lq.Text.Jdt.NAt,_t.lq.Cis.Jdt.Wc,_t.Ryt.Xps.Jdt._ms,_t.lq.aq.qdt.c4t,_t.lq.gls.Jdt.Rls,_t.lq.odt.Jdt.pFt,_t.lq.odt.Jdt.f6t,_t.lq.aq.qdt.min,_t.lq.odt.Jdt.yFt,_t.lq.odt.qdt.zOt,_t.lq.odt.qdt.jOt,_t.lq.Cis.Jdt.DF,_t.lq.aq.Jdt.dh,_t.lq.Cis.Jdt.pFt,_t.lq.odt.Jdt.m6t,_t.lq.Text.Jdt.mOt,_t.lq.Cis.Jdt.mOt,_t.lq.odt.Jdt.AY,_t.lq.odt.oq.Y5t,_t.lq.odt.oq.q5t,_t.lq.odt.oq.I6t,_t.Ryt.Pyt.oq.IsPlaying,_t.lq.odt.oq.C6t,_t.lq.odt.Jdt.D6t,_t.lq.aq.oq.P1t,_t.Ryt.Xps.Jdt.tDt,_t.lq.aq.Jdt.i2t,_t.lq.aq.qdt.CH,_t.lq.r8t.oq.OAt,_t.lq.r8t.Jdt.fT,_t.lq.aq.oq.R1t,_t.lq.Touch.oq.f9t,_t.lq.Touch.oq.E9t,_t.lq.aq.Jdt.n2t,_t.Ryt.Pyt.Jdt.Uds,_t.lq.aq.Jdt.r2t,_t.lq.odt.Jdt.lT,_t.lq.r8t.qdt.VOt,_t.lq.odt.Jdt.B6t,_t.lq.odt.Jdt.c6t,_t.lq.aq.oq.x1t,_t.lq.odt.oq.PFt,_t.lq.odt.oq.aFt,_t.Ryt.ags.Jdt.ggs,_t.lq.Audio.Jdt.v1,_t.lq.aq.Jdt.c2t,_t.lq.gls.Jdt.mOt,_t.lq.odt.oq.OAt,_t.lq.odt.oq.DAt,_t.lq.odt.oq.EFt,_t.lq.aq.oq.W1t,_t.lq.Cis.Jdt.HX,_t.lq.Cis.Jdt.les,_t.lq.Cis.Jdt.gFt,_t.lq.Text.Jdt.Wc,_t.lq.Cis.Jdt.AY,_t.lq.Touch.oq.d9t,_t.lq.odt.qdt.kOt,_t.lq.odt.qdt.NOt,_t.lq.aq.Jdt.o2t,_t.lq.aq.Jdt.R2t,_t.lq.aq.qdt.YPt,_t.lq.r8t.qdt.zOt,_t.Ryt.kms.Jdt.igs,_t.lq.gls.Jdt.yFt,_t.lq.odt.Jdt.qX,_t.lq.odt.qdt.BOt,_t.lq.odt.qdt.VOt,_t.lq.odt.Jdt.SOt,_t.lq.odt.oq.FAt,_t.Ryt.Dms.Jdt._ms,_t.lq.aq.oq.I1t,_t.lq.Hes.Jdt.Tns,_t.lq.aq.Jdt.f2t,_t.lq.aq.Jdt.p2t,_t.lq.aq.qdt.i4t,_t.lq.aq.oq.q1t,_t.lq.aq.Jdt.E2t,_t.lq.aq.Jdt.I2t,_t.lq.odt.Jdt.GFt,_t.lq.aq.Jdt.e2t,_t.lq.aq.oq.b1t,_t.lq.Audio.oq.Krs,_t.lq.Cis.oq.gOt,_t.lq.odt.qdt.WOt,_t.lq.r8t.Jdt.ny,_t.lq.Cis.oq.OY,_t.Ryt.Pyt.oq.Fds,_t.lq.odt.qdt.UOt,_t.lq.odt.qdt.s8t,_t.lq.video.Jdt.QR,_t.lq.odt.qdt.t8t,_t.lq.Hes.Jdt.Pns,_t.lq.Hes.oq.pns,_t.lq.Hes.qdt.Ons,_t.lq.Audio.oq.lhs,_t.lq.Audio.Jdt.Play,_t.lq.Audio.Jdt.tpt,_t.lq.Audio.Jdt.E1,_t.lq.Audio.Jdt.Ghs,_t.lq.video.Jdt.NAt,_t.lq.video.Jdt.mOt,_t.lq.video.oq.als,_t.lq.video.Jdt.cls,_t.lq.video.Jdt.Play,_t.Ryt.Pyt.oq.ahs]},self.zZt=[{Pyt:0},{ygs:0},{Xps:0},{path:0},{Touch:0},{Dms:0},{Sgs:0},{wgs:0},{vgs:0},{bgs:0},{xgs:0},{Tgs:0},{Mgs:0},{Ggs:0},{_gs:0},{Igs:0},{Cgs:0},{Hes:0},{Pgs:0},{Rgs:0},{Egs:0},{Ags:0},{Fgs:0},{Ogs:0},{Dgs:0},{Lgs:0},{resume:0},{kgs:0},{Ngs:0},{Bgs:0},{Ugs:0},{Vgs:0},{scale:0},{Wgs:0},{Audio:0},{home:0},{zgs:0},{jgs:0},{Hgs:0},{Jgs:0},{qgs:0},{$gs:0},{Xgs:0},{odt:0},{kms:0},{gls:0},{Ygs:0},{Kgs:0},{Zgs:0},{Qgs:0},{tys:0},{sys:0},{iys:0},{nu:0},{eys:0},{speed:0},{nys:0},{rys:0},{hys:0},{oys:0},{pause:0},{ays:0},{lys:0},{uys:0},{cys:0},{fys:0},{dys:0},{pys:0},{mys:0},{gys:0},{yys:0},{Sys:0},{frame:0},{wys:0},{vys:0},{bys:0},{xys:0},{video:0}],self.Tys={ygs:class extends self.g6t{},path:class extends self.J8t{},Touch:class extends self.MK{},Sgs:class extends self.g6t{},wgs:class extends self.g6t{},vgs:class extends self.Bss{},xgs:class extends self.g6t{},Tgs:class extends self.g6t{},Mgs:class extends self.hes{},Ggs:class extends self.hes{},_gs:class extends self.g6t{},Igs:class extends self.hes{},Cgs:class extends self.hes{},Hes:class extends self.MK{},Pgs:class extends self.hes{},Rgs:class extends self.hes{},Egs:class extends self.g6t{},Ags:class extends self.g6t{},Fgs:class extends self.g6t{},Ogs:class extends self.g6t{},Dgs:class extends self.g6t{},Lgs:class extends self.g6t{},resume:class extends self.g6t{},kgs:class extends self.g6t{},Ngs:class extends self.J8t{},Bgs:class extends self.g6t{},Ugs:class extends self.hes{},Vgs:class extends self.g6t{},Wgs:class extends self.g6t{},Audio:class extends self.MK{},home:class extends self.g6t{},zgs:class extends self.g6t{},jgs:class extends self.g6t{},Hgs:class extends self.g6t{},Jgs:class extends self.hes{},qgs:class extends self.g6t{},$gs:class extends self.MK{},Xgs:class extends self.u0{},odt:class extends self.g6t{},gls:class extends self.Uus{},Ygs:class extends self.g6t{},Kgs:class extends self.g6t{},Zgs:class extends self.g6t{},Qgs:class extends self.g6t{},tys:class extends self.g6t{},sys:class extends self.g6t{},iys:class extends self.hes{}};
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.1

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/